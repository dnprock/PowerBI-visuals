{"version":3,"sources":["typedefs/typedefs.ts","telemetry/generateGuid.ts","telemetry/events.ts","decorators/VisualPlugin.ts","components/selectionManager.ts","components/selectionIdBuilder.ts","versioning/VisualAdapter.ts","versioning/VisualSafeExecutionWrapper.ts","versioning/versions/v1.0.0.ts","versioning/versions/v1.1.0.ts"],"names":[],"mappings":"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","file":"VisualsExtensibility.js","sourcesContent":["/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\n///<reference path=\"../../Typedefs/jquery/jquery.d.ts\"/>\n///<reference path=\"../../Typedefs/globalize/globalize.d.ts\"/>\n///<reference path=\"../../Typedefs/lodash/lodash.d.ts\"/>\n","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.visuals.telemetry {\n    /**\n     * Creates a client-side Guid string.\n     * @returns A string representation of a Guid.\n     */\n    export function generateGuid(): string {\n        let guid = \"\",\n            idx = 0;\n\n        for (idx = 0; idx < 32; idx += 1) {\n            let guidDigitsItem = Math.random() * 16 | 0;\n            switch (idx) {\n                case 8:\n                case 12:\n                case 16:\n                case 20:\n                    guid += \"-\";\n                    break;\n            }\n            guid += guidDigitsItem.toString(16);\n        }\n\n        return guid;\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.visuals.telemetry {\n\n    /**\n    * Event fired when a visual is loaded through the visual adapter\n    * @param name Name (guid) of the visual. \n    * @param apiVersion Api version used by the visual. \n    * @param custom Is the visual custom? \n    * @param parentId Id of the parent event \n    * @param isError True - action failed. \n    * @param errorSource Source of the error. PowerBI = PowerBI has a problem, External = External Service (e.g. on-prem AS server is down), User = User error (e.g. uploading too much and hitting resource limitations. \n    * @param errorCode PowerBI Error Code \n    *\n    * Generated by: Extensibility/events.bond\n    */\n\n    export declare var ExtensibilityVisualApiUsageLoggers: number;\n\n    export var ExtensibilityVisualApiUsage = function(name: string, apiVersion: string, custom: boolean, parentId: string, isError: boolean = false, errorSource: ErrorSource = undefined, errorCode: string = undefined): ITelemetryEventI<IPBIExtensibilityVisualApiUsage> {\n        var info = {\n            name: name,\n            apiVersion: apiVersion,\n            custom: custom,\n            parentId: parentId,\n            isError: isError,\n            errorSource: errorSource,\n            errorCode: errorCode,\n        };\n\n        var event: ITelemetryEventI<IPBIExtensibilityVisualApiUsage> = {\n            name: 'PBI.Extensibility.VisualApiUsage',\n            category: TelemetryCategory.CustomerAction,\n            time: Date.now(),\n            id: generateGuid(),\n            getFormattedInfoObject: function() {\n                var formattedObject = {\n                    name: info.name,\n                    apiVersion: info.apiVersion,\n                    custom: info.custom,\n                    parentId: info.parentId,\n                    isError: info.isError,\n                };\n                if (typeof info.errorSource !== 'undefined') {\n                    formattedObject['errorSource'] = ErrorSource[info.errorSource];\n                }\n                if (typeof info.errorCode !== 'undefined') {\n                    formattedObject['errorCode'] = info.errorCode;\n                }\n                return formattedObject;\n            },\n            info: info,\n            privateFields: [],\n            orgInfoFields: []\n        };\n\n        if (typeof ExtensibilityVisualApiUsageLoggers !== 'undefined') {\n            event.loggers = ExtensibilityVisualApiUsageLoggers;\n        }\n\n        return event;\n    };\n\n    /**\n    * Event fired for uncaught exception in IVisual.\n    * @param visualType Type of the visual. \n    * @param isCustom Is the visual custom? \n    * @param apiVersion Api version used by the visual \n    * @param source Source URL \n    * @param lineNumber Line number \n    * @param columnNumber Column number \n    * @param stack Stack trace \n    * @param message Error exception message. \n    *\n    * Generated by JsCommon/commonTelemetryEvents.bond\n    */\n\n    export declare var VisualExceptionLoggers: number;\n\n    export var VisualException = function(visualType: string, isCustom: boolean, apiVersion: string, source: string, lineNumber: number, columnNumber: number, stack: string, message: string): ITelemetryEventI<IPBIVisualException> {\n        var info = {\n            visualType: visualType,\n            isCustom: isCustom,\n            apiVersion: apiVersion,\n            source: source,\n            lineNumber: lineNumber,\n            columnNumber: columnNumber,\n            stack: stack,\n            message: message,\n        };\n\n        var event: ITelemetryEventI<IPBIVisualException> = {\n            name: 'PBI.VisualException',\n            category: TelemetryCategory.CriticalError,\n            time: Date.now(),\n            id: generateGuid(),\n            getFormattedInfoObject: function() {\n                var formattedObject = {\n                    visualType: info.visualType,\n                    isCustom: info.isCustom,\n                    apiVersion: info.apiVersion,\n                    source: info.source,\n                    lineNumber: info.lineNumber,\n                    columnNumber: info.columnNumber,\n                    stack: info.stack,\n                    message: info.message,\n                };\n                return formattedObject;\n            },\n            info: info,\n            privateFields: [],\n            orgInfoFields: []\n        };\n\n        if (typeof VisualExceptionLoggers !== 'undefined') {\n            event.loggers = VisualExceptionLoggers;\n        }\n\n        return event;\n    };\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.extensibility {\n    export function VisualPlugin(options: IVisualPluginOptions): ClassDecorator {\n        return function (constructor: IVisualConstructor): void {\n            constructor.__capabilities__ = options.capabilities;\n        };\n    }\n}","/*\n*  Power BI Visualizations\n*\n*  Copyright (c) Microsoft Corporation\n*  All rights reserved. \n*  MIT License\n*\n*  Permission is hereby granted, free of charge, to any person obtaining a copy\n*  of this software and associated documentation files (the \"\"Software\"\"), to deal\n*  in the Software without restriction, including without limitation the rights\n*  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n*  copies of the Software, and to permit persons to whom the Software is\n*  furnished to do so, subject to the following conditions:\n*   \n*  The above copyright notice and this permission notice shall be included in \n*  all copies or substantial portions of the Software.\n*   \n*  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n*  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n*  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n*  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n*  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n*  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n*  THE SOFTWARE.\n*/\n\nmodule powerbi.extensibility {\n    import IPoint = visuals.IPoint;\n\n    export interface SelectionManagerOptions{\n        hostServices: IVisualHostServices;\n    };\n\n    export class SelectionManager implements ISelectionManager {\n        private selectedIds: ISelectionId[];\n        private hostServices: IVisualHostServices;\n        private promiseFactory: IPromiseFactory;\n\n        public constructor(options: SelectionManagerOptions) {\n            this.hostServices = options.hostServices;\n            this.selectedIds = [];\n            this.promiseFactory = this.hostServices.promiseFactory();\n        }\n        \n        public select(selectionId: ISelectionId, multiSelect: boolean = false): IPromise<ISelectionId[]> {\n            let deferred: IDeferred<data.Selector[]> = this.promiseFactory.defer();\n            \n            if (this.hostServices.shouldRetainSelection()) {\n                this.sendSelectionToHost([selectionId]);\n            }\n            else {\n                this.selectInternal(selectionId, multiSelect);\n                this.sendSelectionToHost(this.selectedIds);\n            }\n\n            deferred.resolve(this.selectedIds);\n            return deferred.promise;\n        }\n\n        public showContextMenu(selectionId: ISelectionId, position: IPoint): IPromise<{}> {\n            let deferred: IDeferred<{}> = this.promiseFactory.defer();\n\n            this.sendContextMenuToHost(selectionId, position);\n\n            deferred.resolve(null);\n            return deferred.promise;\n        }\n\n        public hasSelection(): boolean {\n            return this.selectedIds.length > 0;\n        }\n\n        public clear(): IPromise<{}> {\n            let deferred = this.promiseFactory.defer();\n            this.selectedIds = [];\n            this.sendSelectionToHost([]);\n            deferred.resolve(null);\n            return deferred.promise;\n        }\n\n        public getSelectionIds(): ISelectionId[] {\n            return this.selectedIds;\n        }\n\n        private sendSelectionToHost(ids: ISelectionId[]) {\n            let selectArgs: SelectEventArgs = {\n                data: ids\n                    .filter((value: ISelectionId) => (<visuals.SelectionId>value).hasIdentity())\n                    .map((value: ISelectionId) => (<visuals.SelectionId>value).getSelector())\n            };\n\n            let data2 = this.getSelectorsByColumn(ids);\n\n            if (!_.isEmpty(data2))\n                selectArgs.data2 = data2;\n\n            this.hostServices.onSelect(selectArgs);\n        }\n\n        private sendContextMenuToHost(selectionId: ISelectionId, position: IPoint): void {\n            let selectors = this.getSelectorsByColumn([selectionId]);\n            if (_.isEmpty(selectors))\n                return;\n\n            let args: ContextMenuArgs = {\n                data: selectors,\n                position: position\n            };\n\n            this.hostServices.onContextMenu(args);\n        }\n\n        private getSelectorsByColumn(selectionIds: ISelectionId[]): SelectorsByColumn[] {\n            return _(selectionIds)\n                .filter(value => (<visuals.SelectionId>value).hasIdentity)\n                .map(value => (<visuals.SelectionId>value).getSelectorsByColumn())\n                .compact()\n                .value();\n        }\n\n        private selectInternal(selectionId: ISelectionId, multiSelect: boolean) {\n            if (SelectionManager.containsSelection(this.selectedIds, selectionId)) {\n                this.selectedIds = multiSelect\n                    ? this.selectedIds.filter(d => !(<visuals.SelectionId>selectionId).equals(<visuals.SelectionId>d))\n                    : this.selectedIds.length > 1\n                        ? [selectionId] : [];\n            } else {\n                if (multiSelect)\n                    this.selectedIds.push(selectionId);\n                else\n                    this.selectedIds = [selectionId];\n            }\n        }\n\n        public static containsSelection(list: ISelectionId[], id: ISelectionId) {\n            return list.some(d => (<visuals.SelectionId>id).equals(<visuals.SelectionId>d));\n        }\n    }\n} ","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.extensibility {\n    /**\n     * This class is designed to simplify the creation of SelectionId objects\n     * It allows chaining to build up an object before calling 'create' to build a SelectionId\n     */\n    export class SelectionIdBuilder implements ISelectionIdBuilder {\n        private dataMap: SelectorForColumn;\n        private measure: string;\n\n        public withCategory(categoryColumn: DataViewCategoryColumn, index: number): this{\n            if (categoryColumn && categoryColumn.source && categoryColumn.source.queryName && categoryColumn.identity)\n                this.ensureDataMap()[categoryColumn.source.queryName] = categoryColumn.identity[index];\n            \n            return this;\n        }\n\n        public withSeries(seriesColumn: DataViewValueColumns, valueColumn: DataViewValueColumn | DataViewValueColumnGroup): this {\n            if (seriesColumn && seriesColumn.source && seriesColumn.source.queryName && valueColumn)\n                this.ensureDataMap()[seriesColumn.source.queryName] = valueColumn.identity;\n\n            return this;\n        }\n\n        public withMeasure(measureId: string): this {\n            this.measure = measureId;\n\n            return this;\n        }\n\n        public createSelectionId(): ISelectionId {\n            return visuals.SelectionId.createWithSelectorForColumnAndMeasure(this.ensureDataMap(), this.measure);\n        }\n\n        private ensureDataMap(): SelectorForColumn {\n            if (!this.dataMap)\n                this.dataMap = {};\n\n            return this.dataMap;\n        }\n    }\n}\n","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.extensibility {\n\n    import ITelemetryService = visuals.telemetry.ITelemetryService;\n    import ExtensibilityVisualApiUsage = visuals.telemetry.ExtensibilityVisualApiUsage;\n    import VisualTelemetryInfo = visuals.telemetry.VisualTelemetryInfo;\n\n    //TODO: refactor this into a service\n    export let visualApiVersions: VisualVersion[] = [];\n\n    export function createVisualAdapter(visualPlugin: IVisualPlugin, telemetryService?: powerbi.ITelemetryService | ITelemetryService): powerbi.IVisual {\n        let visualTelemetryInfo: VisualTelemetryInfo = {\n            name: visualPlugin.name,\n            apiVersion: visualPlugin.apiVersion,\n            custom: !!visualPlugin.custom\n        };\n        return new VisualSafeExecutionWrapper(new VisualAdapter(visualPlugin, <ITelemetryService>telemetryService), visualTelemetryInfo, <ITelemetryService>telemetryService);\n    }\n\n    export class VisualAdapter implements powerbi.IVisual, WrappedVisual {\n        private visual: powerbi.IVisual | powerbi.extensibility.IVisual;\n        private apiVersionIndex: number;\n        private plugin: powerbi.IVisualPlugin;\n        private telemetryService: ITelemetryService;\n        private legacy: boolean;\n\n        constructor(visualPlugin: IVisualPlugin, telemetryService?: ITelemetryService) {\n            this.telemetryService = telemetryService;\n            this.plugin = visualPlugin;\n\n            let version = visualPlugin.apiVersion;\n            let versionIndex = this.getVersionIndex(version);\n            let isError = false;\n\n            if (!version) {\n                this.legacy = true;\n            }\n            else if (versionIndex > -1) {\n                this.apiVersionIndex = versionIndex;\n                this.legacy = false;\n            }\n            else {\n                debug.assertFail(\"The API version '\" + version + \"' is invalid.\");\n                isError = true;\n            }\n\n            if (this.telemetryService && this.plugin.custom) {\n                this.telemetryService.logEvent(\n                    ExtensibilityVisualApiUsage,\n                    this.plugin.name,\n                    this.plugin.apiVersion,\n                    !!this.plugin.custom,\n                    undefined,\n                    isError,\n                    visuals.telemetry.ErrorSource.User\n                );\n            }\n        }\n\n        public init(options: powerbi.VisualInitOptions) {\n            debug.assertValue(options.element, \"options.element\");\n            debug.assertValue(options.host, \"options.host\");\n\n            options.element.empty();\n\n            if (this.legacy) {\n                this.visual = this.plugin.create();\n                this.visualLegacy.init(options);\n            }\n            else {\n                let host = visualApiVersions[this.apiVersionIndex].hostAdapter(options.host);\n                this.visual = this.plugin.create({\n                    element: options.element.get(0),\n                    host: host\n                });\n                this.overloadMethods();\n            }\n        }\n\n        public update(options: powerbi.VisualUpdateOptions): void {\n            if (options.type & VisualUpdateType.Resize && this.visualHasMethod('onResizing')) {\n                this.onResizing(options.viewport, options.resizeMode);\n            } else if (this.visualHasMethod('update')) {\n                this.visualLegacy.update(options);\n            } else {\n                if (!options.type || options.type & VisualUpdateType.Data) {\n                    this.onDataChanged(<VisualDataChangedOptions>_.pick(options, ['dataViews', 'operationKind']));\n                }\n                if (options.type & VisualUpdateType.ViewMode) {\n                    this.onViewModeChanged(options.viewMode);\n                }\n            }\n        }\n\n        public destroy(): void {\n            if (this.visualHasMethod('destroy')) {\n                this.visualLegacy.destroy();\n            }\n        }\n\n        public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstanceEnumeration {\n            if (!this.visualHasMethod('enumerateObjectInstances')) {\n                return;\n            }\n            return this.visualLegacy.enumerateObjectInstances(options);\n        }\n\n        public enumerateObjectRepetition(): VisualObjectRepetition[] {\n            if (!this.visualHasMethod('enumerateObjectRepetition')) {\n                return;\n            }\n            return this.visualLegacy.enumerateObjectRepetition();\n        }\n\n        public onResizing(finalViewport: IViewport, resizeMode: ResizeMode): void {\n            if (this.visualHasMethod('onResizing')) {\n                this.visualLegacy.onResizing(finalViewport, resizeMode);\n            }\n        }\n\n        public onDataChanged(options: VisualDataChangedOptions): void {\n            if (this.visualHasMethod('onDataChanged')) {\n                this.visualLegacy.onDataChanged(options);\n            }\n        }\n\n        public onViewModeChanged(viewMode: ViewMode): void {\n            if (this.visualHasMethod('onViewModeChanged')) {\n                this.visualLegacy.onViewModeChanged(viewMode);\n            }\n        }\n\n        public onClearSelection(): void {\n            if (this.visualHasMethod('onClearSelection')) {\n                this.visualLegacy.onClearSelection();\n            }\n        }\n\n        public canResizeTo(viewport: IViewport): boolean {\n            if (this.visualHasMethod('canResizeTo')) {\n                return this.visualLegacy.canResizeTo(viewport);\n            }\n        }\n\n        public unwrap(): powerbi.IVisual {\n            return <powerbi.IVisual>this.visual;\n        }\n\n        private get visualNew(): powerbi.extensibility.IVisual {\n            if (this.legacy) return;\n            return <powerbi.extensibility.IVisual>this.visual;\n        }\n\n        private get visualLegacy(): powerbi.IVisual {\n            if (!this.legacy) return;\n            return <powerbi.IVisual>this.visual;\n        }\n\n        private visualHasMethod(methodName: string): boolean {\n            let visual = this.legacy ? this.visualLegacy : this.visualNew;\n            return visual && _.isFunction(visual[methodName]);\n        }\n\n        private getVersionIndex(version: string): number {\n            if (version) {\n                let versionCount = extensibility.visualApiVersions.length;\n                for (let i = 0; i < versionCount; i++) {\n                    if (extensibility.visualApiVersions[i].version === version) {\n                        return i;\n                    }\n                }\n            }\n            return -1;\n        }\n\n        private overloadMethods(): void {\n            let overloads = this.getCompiledOverloads();\n            for (let key in overloads) {\n                this[key] = overloads[key];\n            }\n        }\n\n        private getCompiledOverloads(): VisualVersionOverloads {\n            let overloads: VisualVersionOverloads = {};\n            let versionIndex = this.apiVersionIndex;\n            let visualNew = this.visualNew;\n            for (let i = 0; i <= versionIndex; i++) {\n                let overloadFactory = extensibility.visualApiVersions[i].overloads;\n                if (_.isFunction(overloadFactory)) {\n                    _.assign(overloads, overloadFactory(visualNew));\n                }\n            }\n            return overloads;\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.extensibility {\n\n    import ITelemetryService = visuals.telemetry.ITelemetryService;\n    import VisualTelemetryInfo = visuals.telemetry.VisualTelemetryInfo;\n    import VisualException = powerbi.visuals.telemetry.VisualException;\n\n    export class VisualSafeExecutionWrapper implements powerbi.IVisual, WrappedVisual {\n        private perfLoadEvent: powerbi.visuals.telemetry.IDeferredTelemetryEvent;\n        \n        constructor(\n            private wrappedVisual: powerbi.IVisual,\n            private visualInfo: VisualTelemetryInfo,\n            private telemetryService: ITelemetryService,\n            private silent?: boolean) \n        { \n            if (this.telemetryService) {\n                this.perfLoadEvent = this.telemetryService.startEvent(\n                    powerbi.visuals.telemetry.ExtensibilityVisualApiUsage,\n                    visualInfo.apiVersion, visualInfo.name, visualInfo.custom);\n            }\n        }\n\n        public init(options: VisualInitOptions): void {\n            if (this.wrappedVisual.init) {\n                this.executeSafely(() => this.wrappedVisual.init(options));\n            }\n        }\n\n        public destroy(): void {\n            if (this.wrappedVisual.destroy) {\n                this.executeSafely(() => this.wrappedVisual.destroy());\n            }\n\n            // We don't want to .resolve() any perf event here.  Instead, we simply cancel it.\n            if (this.perfLoadEvent) {\n                this.perfLoadEvent = null;\n            }\n        }\n\n        public update(options: powerbi.VisualUpdateOptions): void {\n            if (this.wrappedVisual.update) {\n                this.executeSafely(() => {\n                    this.wrappedVisual.update(options);\n                    \n                    if (this.perfLoadEvent) {\n                        this.perfLoadEvent.resolve();\n                        this.perfLoadEvent = null;\n                    }\n                });\n            }      \n        }\n\n        public onResizing(finalViewport: IViewport, resizeMode: ResizeMode): void {\n            if (this.wrappedVisual.onResizing)\n                this.executeSafely(() => this.wrappedVisual.onResizing(finalViewport, resizeMode));\n        }\n\n        public onDataChanged(options: VisualDataChangedOptions): void {\n            if (this.wrappedVisual.onDataChanged)\n                this.executeSafely(() => this.wrappedVisual.onDataChanged(options));\n        }\n\n        public onViewModeChanged(viewMode: ViewMode): void {\n            if (this.wrappedVisual.onViewModeChanged)\n                this.executeSafely(() => this.wrappedVisual.onViewModeChanged(viewMode));\n        }\n\n        public onClearSelection(): void {\n            if (this.wrappedVisual.onClearSelection)\n                this.executeSafely(() => this.wrappedVisual.onClearSelection());\n        }\n\n        public canResizeTo(viewport: IViewport): boolean {\n            if (this.wrappedVisual.canResizeTo)\n                return this.executeSafely(() => this.wrappedVisual.canResizeTo(viewport));\n        }\n\n        public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstanceEnumeration {\n            if (this.wrappedVisual.enumerateObjectInstances)\n                return this.executeSafely(() => this.wrappedVisual.enumerateObjectInstances(options));\n        }\n\n        public enumerateObjectRepetition(): VisualObjectRepetition[] {\n            if (this.wrappedVisual.enumerateObjectRepetition)\n                return this.executeSafely(() => this.wrappedVisual.enumerateObjectRepetition());\n        }\n\n        public unwrap(): powerbi.IVisual {\n            let visual = <powerbi.IVisual & WrappedVisual>this.wrappedVisual;\n            return visual.unwrap ? visual.unwrap() : visual;\n        }\n\n        public isCustomVisual(): boolean {\n            return this.visualInfo.custom;\n        }\n        private executeSafely(callback: () => any): any {\n            try {\n                return callback();\n            } catch (exception) {\n                if (!this.silent) {\n                    console.error(\"Visual exception\", exception.stack || exception);\n                }\n\n                if (this.telemetryService) {\n                    this.telemetryService.logEvent(\n                        VisualException,\n                        this.visualInfo.name,\n                        this.visualInfo.custom,\n                        this.visualInfo.apiVersion,\n                        exception.fileName,\n                        exception.lineNumber,\n                        exception.columnNumber,\n                        exception.stack,\n                        exception.message);\n                    \n                    if (this.perfLoadEvent) {\n                        this.perfLoadEvent.reject();\n                        this.perfLoadEvent = null;\n                    }\n                }\n            }\n        }\n    }\n}\n","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.extensibility.v100 {\n    let overloadFactory: VisualVersionOverloadFactory = (visual: IVisual) => {\n        return {\n            update: (options: powerbi.VisualUpdateOptions) => {\n                if (visual.update) {\n                    let type = options.type || VisualUpdateType.Data;\n                    if(type & VisualUpdateType.Resize && options.resizeMode === ResizeMode.Resized) {\n                        type |= VisualUpdateType.ResizeEnd;\n                    } \n                    visual.update({\n                        viewport: options.viewport,\n                        dataViews: options.dataViews,\n                        type: type\n                    });\n                }\n            },\n            destroy: () => {\n                if (visual.destroy) {\n                    visual.destroy();\n                }\n            },\n            enumerateObjectInstances: (options: EnumerateVisualObjectInstancesOptions) => {\n                if (visual.enumerateObjectInstances) {\n                    return visual.enumerateObjectInstances(options);\n                }\n            }\n        };\n    };\n\n    let hostAdapter: VisualHostAdapter = (host: IVisualHostServices): IVisualHost => {\n        return {};\n    };\n\n    visualApiVersions.push({\n        version: '1.0.0',\n        overloads: overloadFactory,\n        hostAdapter: hostAdapter\n    });\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.extensibility.v110 {\n    let hostAdapter: VisualHostAdapter = (host: powerbi.IVisualHostServices): IVisualHost => {\n        return {\n            createSelectionIdBuilder: () => new visuals.SelectionIdBuilder(),\n            createSelectionManager: () => new SelectionManager({ hostServices: host })\n        };\n    };\n\n    visualApiVersions.push({\n        version: '1.1.0',\n        hostAdapter: hostAdapter\n    });\n}"],"sourceRoot":"../ts/visualsExtensibility"}