{"version":3,"sources":["typedefs/typedefs.ts","semanticQuery/sqExprVisitor.ts","types/enumType.ts","types/fill.ts","types/fillRule.ts","types/image.ts","types/paragraphs.ts","types/structuralType.ts","types/valueType.ts","contracts/dataShapeBinding.ts","contracts/dataShapeBindingDataReduction.ts","contracts/federatedConceptualSchema.ts","contracts/selector.ts","contracts/query.ts","contracts/queryProjection.ts","contracts/visualData.ts","formatting/dateTimeSequence.ts","formatting/displayUnitSystem.ts","formatting/numericSequence.ts","formatting/numericSequenceRange.ts","formatting/valueFormatter.ts","dataView/colorAllocator.ts","dataView/compiledDataViewMapping.ts","dataView/dataRoleHelper.ts","dataView/dataViewCategoricalReader.ts","dataView/dataViewConcatenateCategoricalColumns.ts","dataView/dataViewMappingVisitor.ts","dataView/dataViewNormalizeValues.ts","dataView/dataViewObject.ts","dataView/dataViewObjectDefinition.ts","dataView/dataViewObjectDescriptor.ts","dataView/dataViewObjectEvaluationUtils.ts","dataView/dataViewObjectEvaluator.ts","dataView/dataViewPivotCategorical.ts","dataView/dataViewPivotMatrix.ts","dataView/dataViewSelfCrossJoin.ts","dataView/dataViewPivotCategoricalToPrimaryGroups.ts","dataView/dataViewTransform.ts","displayNameGetter.ts","dataReader/dataReader.ts","iFormattingService.ts","semanticQuery/exprPatterns/fieldExprPattern.ts","dataView/dataViewAnalysis.ts","dataView/dataViewRoleWildcard.ts","dataView/dataViewScopeIdentity.ts","dataView/dataViewScopeWildcard.ts","dataView/rules/colorAllocatorCache.ts","dataView/rules/evalContext.ts","dataView/dataViewRegression.ts","dataView/dataViewSelectTransform.ts","dataView/rules/categoricalEvalContext.ts","dataView/rules/tableEvalContext.ts","dataView/rules/ruleEvaluation.ts","dataView/rules/colorRuleEvaluation.ts","dataView/utils/dataViewMatrixUtils.ts","dataView/utils/dataViewMetadataColumnUtils.ts","contracts/conceptualSchema.ts","dataView/scriptResultUtil.ts","segmentation/dataViewMerger.ts","semanticQuery/sqExprRewriter.ts","semanticQuery/exprPatterns/equalsToInRewriter.ts","semanticQuery/exprPatterns/filterScopeIdsCollector.ts","semanticQuery/exprPatterns/scopeIdentityExtractor.ts","semanticQuery/primitiveValueEncoding.ts","semanticQuery/sqAggregationOperations.ts","semanticQuery/sqHierarchyExprUtils.ts","semanticQuery/sqExprGroupUtils.ts","semanticQuery/sqExpr.ts","semanticQuery/sqExprUtils.ts","semanticQuery/semanticQueryRewriter.ts","semanticQuery/semanticQuery.ts","dataView/dataViewBuilder.ts","dataView/rules/staticEvalContext.ts","dataView/rules/matrixEvalContext.ts","services/formattingService.ts","services/serialization/sqExprShortSerializer.ts","selection/selectionId.ts"],"names":[],"mappings":"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","file":"VisualsData.js","sourcesContent":["/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\n///<reference path=\"../../Typedefs/jquery/jquery.d.ts\"/>\n///<reference path=\"../../Typedefs/globalize/globalize.d.ts\"/>\n///<reference path=\"../../Typedefs/lodash/lodash.d.ts\"/>\n","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n\n    /** Allows generic traversal and type discovery for a SQExpr tree. */\n    export interface ISQExprVisitorWithArg<T, TArg> {\n        visitEntity(expr: SQEntityExpr, arg: TArg): T;\n        visitColumnRef(expr: SQColumnRefExpr, arg: TArg): T;\n        visitMeasureRef(expr: SQMeasureRefExpr, arg: TArg): T;\n        visitAggr(expr: SQAggregationExpr, arg: TArg): T;\n        visitPercentile(expr: SQPercentileExpr, arg: TArg): T;\n        visitHierarchy(expr: SQHierarchyExpr, arg: TArg): T;\n        visitHierarchyLevel(expr: SQHierarchyLevelExpr, arg: TArg): T;\n        visitPropertyVariationSource(expr: SQPropertyVariationSourceExpr, arg: TArg): T;\n        visitSelectRef(expr: SQSelectRefExpr, arg: TArg): T;\n        visitAnd(expr: SQAndExpr, arg: TArg): T;\n        visitBetween(expr: SQBetweenExpr, arg: TArg): T;\n        visitIn(expr: SQInExpr, arg: TArg): T;\n        visitOr(expr: SQOrExpr, arg: TArg): T;\n        visitCompare(expr: SQCompareExpr, arg: TArg): T;\n        visitContains(expr: SQContainsExpr, arg: TArg): T;\n        visitExists(expr: SQExistsExpr, arg: TArg): T;\n        visitNot(expr: SQNotExpr, arg: TArg): T;\n        visitStartsWith(expr: SQStartsWithExpr, arg: TArg): T;\n        visitConstant(expr: SQConstantExpr, arg: TArg): T;\n        visitDateSpan(expr: SQDateSpanExpr, arg: TArg): T;\n        visitDateAdd(expr: SQDateAddExpr, arg: TArg): T;\n        visitNow(expr: SQNowExpr, arg: TArg): T;\n        visitDefaultValue(expr: SQDefaultValueExpr, arg: TArg): T;\n        visitAnyValue(expr: SQAnyValueExpr, arg: TArg): T;\n        visitArithmetic(expr: SQArithmeticExpr, arg: TArg): T;\n        visitFillRule(expr: SQFillRuleExpr, arg: TArg): T;\n        visitResourcePackageItem(expr: SQResourcePackageItemExpr, arg: TArg): T;\n        visitScopedEval(expr: SQScopedEvalExpr, arg: TArg): T;\n        visitWithRef(expr: SQWithRefExpr, arg: TArg): T;\n    }\n\n    export interface ISQExprVisitor<T> extends ISQExprVisitorWithArg<T, void> {\n    }\n\n    /** Default IQueryExprVisitorWithArg implementation that others may derive from. */\n    export class DefaultSQExprVisitorWithArg<T, TArg> implements ISQExprVisitorWithArg<T, TArg> {\n        public visitEntity(expr: SQEntityExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitColumnRef(expr: SQColumnRefExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitMeasureRef(expr: SQMeasureRefExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitAggr(expr: SQAggregationExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitPercentile(expr: SQPercentileExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitHierarchy(expr: SQHierarchyExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitHierarchyLevel(expr: SQHierarchyLevelExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitPropertyVariationSource(expr: SQPropertyVariationSourceExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitSelectRef(expr: SQSelectRefExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitBetween(expr: SQBetweenExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitIn(expr: SQInExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitAnd(expr: SQAndExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitOr(expr: SQOrExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitCompare(expr: SQCompareExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitContains(expr: SQContainsExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitExists(expr: SQExistsExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitNot(expr: SQNotExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitStartsWith(expr: SQStartsWithExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitConstant(expr: SQConstantExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitDateSpan(expr: SQDateSpanExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitDateAdd(expr: SQDateAddExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitNow(expr: SQNowExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitDefaultValue(expr: SQDefaultValueExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitAnyValue(expr: SQAnyValueExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitArithmetic(expr: SQArithmeticExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitFillRule(expr: SQFillRuleExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitResourcePackageItem(expr: SQResourcePackageItemExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitScopedEval(expr: SQScopedEvalExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n        \n        public visitWithRef(expr: SQWithRefExpr, arg: TArg): T {\n            return this.visitDefault(expr, arg);\n        }\n\n        public visitDefault(expr: SQExpr, arg: TArg): T {\n            return;\n        }\n    }\n\n    /** Default ISQExprVisitor implementation that others may derive from. */\n    export class DefaultSQExprVisitor<T> extends DefaultSQExprVisitorWithArg<T, void> implements ISQExprVisitor<T> {\n    }\n\n    /** Default ISQExprVisitor implementation that implements default traversal and that others may derive from. */\n    export class DefaultSQExprVisitorWithTraversal implements ISQExprVisitor<void>, IFillRuleDefinitionVisitor<void, void> {\n        public visitEntity(expr: SQEntityExpr): void {\n            this.visitDefault(expr);\n        }\n\n        public visitColumnRef(expr: SQColumnRefExpr): void {\n            expr.source.accept(this);\n        }\n\n        public visitMeasureRef(expr: SQMeasureRefExpr): void {\n            expr.source.accept(this);\n        }\n\n        public visitAggr(expr: SQAggregationExpr): void {\n            expr.arg.accept(this);\n        } \n\n        public visitPercentile(expr: SQPercentileExpr): void {\n            expr.arg.accept(this);\n        }\n\n        public visitHierarchy(expr: SQHierarchyExpr): void {\n            expr.arg.accept(this);\n        }\n\n        public visitHierarchyLevel(expr: SQHierarchyLevelExpr): void {\n            expr.arg.accept(this);\n        }\n\n        public visitPropertyVariationSource(expr: SQPropertyVariationSourceExpr): void {\n            expr.arg.accept(this);\n        }\n\n        public visitSelectRef(expr: SQSelectRefExpr): void {\n            this.visitDefault(expr);\n        }\n\n        public visitBetween(expr: SQBetweenExpr): void {\n            expr.arg.accept(this);\n            expr.lower.accept(this);\n            expr.upper.accept(this);\n        }\n\n        public visitIn(expr: SQInExpr): void {\n            let args = expr.args;\n            for (let i = 0, len = args.length; i < len; i++)\n                args[i].accept(this);\n\n            let values = expr.values;\n            for (let i = 0, len = values.length; i < len; i++) {\n                let valueTuple = values[i];\n                for (let j = 0, jlen = valueTuple.length; j < jlen; j++)\n                    valueTuple[j].accept(this);\n            }\n        }\n\n        public visitAnd(expr: SQAndExpr): void {\n            expr.left.accept(this);\n            expr.right.accept(this);\n        }\n\n        public visitOr(expr: SQOrExpr): void {\n            expr.left.accept(this);\n            expr.right.accept(this);\n        }\n\n        public visitCompare(expr: SQCompareExpr): void {\n            expr.left.accept(this);\n            expr.right.accept(this);\n        }\n\n        public visitContains(expr: SQContainsExpr): void {\n            expr.left.accept(this);\n            expr.right.accept(this);\n        }\n\n        public visitExists(expr: SQExistsExpr): void {\n            expr.arg.accept(this);\n        }\n\n        public visitNot(expr: SQNotExpr): void {\n            expr.arg.accept(this);\n        }\n\n        public visitStartsWith(expr: SQStartsWithExpr): void {\n            expr.left.accept(this);\n            expr.right.accept(this);\n        }\n\n        public visitConstant(expr: SQConstantExpr): void {\n            this.visitDefault(expr);\n        }\n\n        public visitDateSpan(expr: SQDateSpanExpr): void {\n            expr.arg.accept(this);\n        }\n\n        public visitDateAdd(expr: SQDateAddExpr): void {\n            expr.arg.accept(this);\n        }\n\n        public visitNow(expr: SQNowExpr): void {\n            this.visitDefault(expr);\n        }\n\n        public visitDefaultValue(expr: SQDefaultValueExpr): void {\n            this.visitDefault(expr);\n        }\n\n        public visitAnyValue(expr: SQAnyValueExpr): void {\n            this.visitDefault(expr);\n        }\n\n        public visitArithmetic(expr: SQArithmeticExpr): void {\n            expr.left.accept(this);\n            expr.right.accept(this);\n        }\n\n        public visitFillRule(expr: SQFillRuleExpr): void {\n            expr.input.accept(this);\n\n            let rule = expr.rule,\n                gradient2 = rule.linearGradient2,\n                gradient3 = rule.linearGradient3;\n\n            if (gradient2) {\n                this.visitLinearGradient2(gradient2);\n            }\n\n            if (gradient3) {\n                this.visitLinearGradient3(gradient3);\n            }\n        }\n\n        public visitLinearGradient2(gradient2: LinearGradient2Definition): void {\n            debug.assertValue(gradient2, 'gradient2');\n\n            this.visitFillRuleStop(gradient2.min);\n            this.visitFillRuleStop(gradient2.max);\n        }\n\n        public visitLinearGradient3(gradient3: LinearGradient3Definition): void {\n            debug.assertValue(gradient3, 'gradient3');\n\n            this.visitFillRuleStop(gradient3.min);\n            this.visitFillRuleStop(gradient3.mid);\n            this.visitFillRuleStop(gradient3.max);\n        }\n\n        public visitResourcePackageItem(expr: SQResourcePackageItemExpr): void {\n            this.visitDefault(expr);\n        }\n\n        public visitScopedEval(expr: SQScopedEvalExpr): void {\n            expr.expression.accept(this);\n\n            for (let scopeExpr of expr.scope) {\n                scopeExpr.accept(this);\n            }\n        }\n        \n        public visitWithRef(expr: SQWithRefExpr): void {\n            this.visitDefault(expr);\n        }\n\n        public visitDefault(expr: SQExpr): void {\n            return;\n        }\n\n        private visitFillRuleStop(stop: RuleColorStopDefinition): void {\n            debug.assertValue(stop, 'stop');\n\n            stop.color.accept(this);\n\n            let value = stop.value;\n            if (value)\n                value.accept(this);\n        }\n    }\n} ","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi {\n    /** Defines a custom enumeration data type, and its values. */\n    export interface IEnumType {\n        /** Gets the members of the enumeration, limited to the validMembers, if appropriate. */\n        members(validMembers?: EnumMemberValue[]): IEnumMember[];\n    }\n\n    export function createEnumType(members: IEnumMember[]): IEnumType {\n        return new EnumType(members);\n    }\n\n    class EnumType implements IEnumType {\n        private allMembers: IEnumMember[];\n\n        constructor(allMembers: IEnumMember[]) {\n            debug.assertValue(allMembers, 'allMembers');\n\n            this.allMembers = allMembers;\n        }\n\n        public members(validMembers?: EnumMemberValue[]): IEnumMember[] {\n            let allMembers = this.allMembers;\n            if (!validMembers)\n                return allMembers;\n\n            let membersToReturn: IEnumMember[] = [];\n            for (let member of allMembers) {\n                if (_.contains(validMembers, member.value))\n                    membersToReturn.push(member);\n            }\n            return membersToReturn;\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi {\n    import SQExpr = powerbi.data.SQExpr;\n\n    export interface FillDefinition {\n        solid?: {\n            color?: SQExpr;\n        };\n        gradient?: {\n            startColor?: SQExpr;\n            endColor?: SQExpr;\n        };\n        pattern?: {\n            patternKind?: SQExpr;\n            color?: SQExpr;\n        };\n    }\n\n    export module FillSolidColorTypeDescriptor {\n        /** Gets a value indicating whether the descriptor is nullable or not. */\n        export function nullable(descriptor: FillSolidColorTypeDescriptor): boolean {\n            debug.assertValue(descriptor, 'descriptor');\n\n            if (descriptor === true)\n                return false;\n\n            let advancedDescriptor = <FillSolidColorAdvancedTypeDescriptor>descriptor;\n            return !!advancedDescriptor.nullable;\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi {\n    import SQExpr = powerbi.data.SQExpr;\n\n    export interface FillRuleTypeDescriptor {\n    }\n\n    export interface FillRuleDefinition extends FillRuleGeneric<SQExpr, SQExpr> {\n    }\n\n    export interface FillRule extends FillRuleGeneric<string, number> {\n    }\n\n    export type LinearGradient2 = LinearGradient2Generic<string, number>;\n    export type LinearGradient3 = LinearGradient3Generic<string, number>;\n\n    export type LinearGradient2Definition = LinearGradient2Generic<SQExpr, SQExpr>;\n    export type LinearGradient3Definition = LinearGradient3Generic<SQExpr, SQExpr>;\n\n    export type RuleColorStopDefinition = RuleColorStopGeneric<SQExpr, SQExpr>;\n    export type RuleColorStop = RuleColorStopGeneric<string, number>;\n\n    export interface IFillRuleDefinitionVisitor<T2, T3> {\n        visitLinearGradient2(linearGradient2: LinearGradient2Definition, arg?: any): T2;\n        visitLinearGradient3(linearGradient3: LinearGradient3Definition, arg?: any): T3;\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi {\n    import SQExpr = powerbi.data.SQExpr;\n\n    export interface ImageTypeDescriptor {\n    }\n\n    export type ImageDefinition = ImageDefinitionGeneric<SQExpr>;\n\n    export module ImageDefinition {\n        export const urlType: ValueTypeDescriptor = { misc: { imageUrl: true } };\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi {\n    import SQExpr = powerbi.data.SQExpr;\n\n    export interface ParagraphsTypeDescriptor {\n    }\n\n    export type ParagraphsDefinition = ParagraphDefinition[];\n    export type ParagraphDefinition = ParagraphDefinitionGeneric<SQExpr>;\n    export type TextRunDefinition = TextRunDefinitionGeneric<SQExpr>;\n\n    export interface ParagraphDefinitionGeneric<TExpr> {\n        horizontalTextAlignment?: string;\n        textRuns: TextRunDefinitionGeneric<TExpr>[];\n    }\n\n    export interface TextRunDefinitionGeneric<TExpr> {\n        textStyle?: TextRunStyle;\n        url?: string;\n        value: string | TExpr;\n    }\n\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi {\n    import SemanticFilter = powerbi.data.SemanticFilter;\n\n    export type StructuralObjectDefinition =\n        FillDefinition |\n        FillRuleDefinition |\n        SemanticFilter |\n        DefaultValueDefinition |\n        ImageDefinition |\n        ParagraphsDefinition;\n\n    export module StructuralTypeDescriptor {\n        export function isValid(type: StructuralTypeDescriptor): boolean {\n            debug.assertValue(type, 'type');\n\n            if (type.fill ||\n                type.fillRule ||\n                type.filter ||\n                type.expression ||\n                type.image ||\n                type.paragraphs) {\n                return true;\n            }\n\n            return false;\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi {\n    import EnumExtensions = jsCommon.EnumExtensions;\n\n    export interface ValueTypeDescriptor {\n        extendedType?: ExtendedType;\n    }\n    \n    /** Describes a data value type, including a primitive type and extended type if any (derived from data category). */\n    export class ValueType implements ValueTypeDescriptor {\n        private static typeCache: { [id: string]: ValueType } = {};\n\n        private underlyingType: ExtendedType;\n        private category: string;\n\n        private temporalType: TemporalType;\n        private geographyType: GeographyType;\n        private miscType: MiscellaneousType;\n        private formattingType: FormattingType;\n        private enumType: IEnumType;\n        private scriptingType: ScriptType;\n\n        /** Do not call the ValueType constructor directly. Use the ValueType.fromXXX methods. */\n        constructor(type: ExtendedType, category?: string, enumType?: IEnumType) {\n            debug.assert((!!type && ExtendedType[type] != null) || type === ExtendedType.Null, 'type');\n            debug.assert(!!category || category === null, 'category');\n            debug.assert(type !== ExtendedType.Enumeration || !!enumType, 'enumType');\n\n            this.underlyingType = type;\n            this.category = category;\n\n            if (EnumExtensions.hasFlag(type, ExtendedType.Temporal)) {\n                this.temporalType = new TemporalType(type);\n            }\n            if (EnumExtensions.hasFlag(type, ExtendedType.Geography)) {\n                this.geographyType = new GeographyType(type);\n            }\n            if (EnumExtensions.hasFlag(type, ExtendedType.Miscellaneous)) {\n                this.miscType = new MiscellaneousType(type);\n            }\n            if (EnumExtensions.hasFlag(type, ExtendedType.Formatting)) {\n                this.formattingType = new FormattingType(type);\n            }\n            if (EnumExtensions.hasFlag(type, ExtendedType.Enumeration)) {\n                this.enumType = enumType;\n            }\n            if (EnumExtensions.hasFlag(type, ExtendedType.Scripting)) {\n                this.scriptingType = new ScriptType(type);\n            }\n        }\n\n        /** Creates or retrieves a ValueType object based on the specified ValueTypeDescriptor. */\n        public static fromDescriptor(descriptor: ValueTypeDescriptor): ValueType {\n            descriptor = descriptor || {};\n\n            // Simplified primitive types\n            if (descriptor.text) return ValueType.fromExtendedType(ExtendedType.Text);\n            if (descriptor.integer) return ValueType.fromExtendedType(ExtendedType.Integer);\n            if (descriptor.numeric) return ValueType.fromExtendedType(ExtendedType.Double);\n            if (descriptor.bool) return ValueType.fromExtendedType(ExtendedType.Boolean);\n            if (descriptor.dateTime) return ValueType.fromExtendedType(ExtendedType.DateTime);\n            if (descriptor.duration) return ValueType.fromExtendedType(ExtendedType.Duration);\n            if (descriptor.binary) return ValueType.fromExtendedType(ExtendedType.Binary);\n            if (descriptor.none) return ValueType.fromExtendedType(ExtendedType.None);\n\n            // Extended types\n            if (descriptor.scripting) {\n                if (descriptor.scripting.source) return ValueType.fromExtendedType(ExtendedType.ScriptSource);\n            }\n            if (descriptor.enumeration) return ValueType.fromEnum(descriptor.enumeration);\n            if (descriptor.temporal) {\n                if (descriptor.temporal.year) return ValueType.fromExtendedType(ExtendedType.Year_Integer);\n                if (descriptor.temporal.month) return ValueType.fromExtendedType(ExtendedType.Month_Integer);\n            }\n            if (descriptor.geography) {\n                if (descriptor.geography.address) return ValueType.fromExtendedType(ExtendedType.Address);\n                if (descriptor.geography.city) return ValueType.fromExtendedType(ExtendedType.City);\n                if (descriptor.geography.continent) return ValueType.fromExtendedType(ExtendedType.Continent);\n                if (descriptor.geography.country) return ValueType.fromExtendedType(ExtendedType.Country);\n                if (descriptor.geography.county) return ValueType.fromExtendedType(ExtendedType.County);\n                if (descriptor.geography.region) return ValueType.fromExtendedType(ExtendedType.Region);\n                if (descriptor.geography.postalCode) return ValueType.fromExtendedType(ExtendedType.PostalCode_Text);\n                if (descriptor.geography.stateOrProvince) return ValueType.fromExtendedType(ExtendedType.StateOrProvince);\n                if (descriptor.geography.place) return ValueType.fromExtendedType(ExtendedType.Place);\n                if (descriptor.geography.latitude) return ValueType.fromExtendedType(ExtendedType.Latitude_Double);\n                if (descriptor.geography.longitude) return ValueType.fromExtendedType(ExtendedType.Longitude_Double);\n            }\n            if (descriptor.misc) {\n                if (descriptor.misc.image) return ValueType.fromExtendedType(ExtendedType.Image);\n                if (descriptor.misc.imageUrl) return ValueType.fromExtendedType(ExtendedType.ImageUrl);\n                if (descriptor.misc.webUrl) return ValueType.fromExtendedType(ExtendedType.WebUrl);\n                if (descriptor.misc.barcode) return ValueType.fromExtendedType(ExtendedType.Barcode_Text);\n            }\n            if (descriptor.formatting) {\n                if (descriptor.formatting.color) return ValueType.fromExtendedType(ExtendedType.Color);\n                if (descriptor.formatting.formatString) return ValueType.fromExtendedType(ExtendedType.FormatString);\n                if (descriptor.formatting.alignment) return ValueType.fromExtendedType(ExtendedType.Alignment);\n                if (descriptor.formatting.labelDisplayUnits) return ValueType.fromExtendedType(ExtendedType.LabelDisplayUnits);\n                if (descriptor.formatting.fontSize) return ValueType.fromExtendedType(ExtendedType.FontSize);\n                if (descriptor.formatting.labelDensity) return ValueType.fromExtendedType(ExtendedType.LabelDensity);\n            }\n            if (descriptor.extendedType) {\n                return ValueType.fromExtendedType(descriptor.extendedType);\n            }\n            if (descriptor.operations) {\n                if (descriptor.operations.searchEnabled) return ValueType.fromExtendedType(ExtendedType.SearchEnabled);\n            }\n\n            return ValueType.fromExtendedType(ExtendedType.Null);\n        }\n\n        /** Advanced: Generally use fromDescriptor instead. Creates or retrieves a ValueType object for the specified ExtendedType. */\n        public static fromExtendedType(extendedType: ExtendedType): ValueType {\n            extendedType = extendedType || ExtendedType.Null;\n\n            let primitiveType = getPrimitiveType(extendedType),\n                category = getCategoryFromExtendedType(extendedType);\n            debug.assert(\n                primitiveType !== PrimitiveType.Null || extendedType === ExtendedType.Null,\n                'Cannot create ValueType for abstract extended type. Consider using fromDescriptor instead.');\n            return ValueType.fromPrimitiveTypeAndCategory(primitiveType, category);\n        }\n\n        /** Creates or retrieves a ValueType object for the specified PrimitiveType and data category. */\n        public static fromPrimitiveTypeAndCategory(primitiveType: PrimitiveType, category?: string): ValueType {\n            primitiveType = primitiveType || PrimitiveType.Null;\n            category = category || null;\n\n            let id = primitiveType.toString();\n            if (category)\n                id += '|' + category;\n\n            return ValueType.typeCache[id] || (ValueType.typeCache[id] = new ValueType(toExtendedType(primitiveType, category), category));\n        }\n\n        /** Creates a ValueType to describe the given IEnumType. */\n        public static fromEnum(enumType: IEnumType): ValueType {\n            debug.assertValue(enumType, 'enumType');\n\n            return new ValueType(ExtendedType.Enumeration, null, enumType);\n        }\n\n        /** Determines if the specified type is compatible from at least one of the otherTypes. */\n        public static isCompatibleTo(type: ValueTypeDescriptor, otherTypes: ValueTypeDescriptor[]): boolean {\n            debug.assertValue(type, 'type');\n            debug.assertValue(otherTypes, 'otherTypes');\n\n            let valueType = ValueType.fromDescriptor(type);\n            for (let otherType of otherTypes) {\n                let otherValueType = ValueType.fromDescriptor(otherType);\n\n                if (otherValueType.isCompatibleFrom(valueType))\n                    return true;\n            }\n\n            return false;\n        }\n\n        /** Determines if the instance ValueType is convertable from the 'other' ValueType. */\n        public isCompatibleFrom(other: ValueType): boolean {\n            debug.assertValue(other, 'other');\n\n            let otherPrimitiveType = other.primitiveType;\n            if (this === other ||\n                this.primitiveType === otherPrimitiveType ||\n                otherPrimitiveType === PrimitiveType.Null)\n                return true;\n            return false;\n        }\n\n        /**\n         * Determines if the instance ValueType is equal to the 'other' ValueType\n         * @param {ValueType} other the other ValueType to check equality against\n         * @returns True if the instance ValueType is equal to the 'other' ValueType\n         */\n        public equals(other: ValueType): boolean {\n            return _.isEqual(this, other);\n        }\n\n        /** Gets the exact primitive type of this ValueType. */\n        public get primitiveType(): PrimitiveType {\n            return getPrimitiveType(this.underlyingType);\n        }\n\n        /** Gets the exact extended type of this ValueType. */\n        public get extendedType(): ExtendedType {\n            return this.underlyingType;\n        }\n\n        /** Gets the data category string (if any) for this ValueType. */\n        public get categoryString(): string {\n            return this.category;\n        }\n\n        // Simplified primitive types\n\n        /** Indicates whether the type represents text values. */\n        public get text(): boolean {\n            return this.primitiveType === PrimitiveType.Text;\n        }\n\n        /** Indicates whether the type represents any numeric value. */\n        public get numeric(): boolean {\n            return EnumExtensions.hasFlag(this.underlyingType, ExtendedType.Numeric);\n        }\n\n        /** Indicates whether the type represents integer numeric values. */\n        public get integer(): boolean {\n            return this.primitiveType === PrimitiveType.Integer;\n        }\n\n        /** Indicates whether the type represents Boolean values. */\n        public get bool(): boolean {\n            return this.primitiveType === PrimitiveType.Boolean;\n        }\n\n        /** Indicates whether the type represents any date/time values. */\n        public get dateTime(): boolean {\n            return this.primitiveType === PrimitiveType.DateTime ||\n                this.primitiveType === PrimitiveType.Date ||\n                this.primitiveType === PrimitiveType.Time;\n        }\n\n        /** Indicates whether the type represents duration values. */\n        public get duration(): boolean {\n            return this.primitiveType === PrimitiveType.Duration;\n        }\n\n        /** Indicates whether the type represents binary values. */\n        public get binary(): boolean {\n            return this.primitiveType === PrimitiveType.Binary;\n        }\n\n        /** Indicates whether the type represents none values. */\n        public get none(): boolean {\n            return this.primitiveType === PrimitiveType.None;\n        }\n\n        // Extended types\n\n        /** Returns an object describing temporal values represented by the type, if it represents a temporal type. */\n        public get temporal(): TemporalType {\n            return this.temporalType;\n        }\n\n        /** Returns an object describing geographic values represented by the type, if it represents a geographic type. */\n        public get geography(): GeographyType {\n            return this.geographyType;\n        }\n\n        /** Returns an object describing the specific values represented by the type, if it represents a miscellaneous extended type. */\n        public get misc(): MiscellaneousType {\n            return this.miscType;\n        }\n\n        /** Returns an object describing the formatting values represented by the type, if it represents a formatting type. */\n        public get formatting(): FormattingType {\n            return this.formattingType;\n        }\n\n        /** Returns an object describing the enum values represented by the type, if it represents an enumeration type. */\n        public get enum(): IEnumType {\n            return this.enumType;\n        }\n\n        public get scripting(): ScriptType {\n            return this.scriptingType;\n        }\n    }\n\n    export class ScriptType implements ScriptTypeDescriptor {\n        private underlyingType: ExtendedType;\n\n        constructor(type: ExtendedType) {\n            debug.assert(!!type && EnumExtensions.hasFlag(type, ExtendedType.Scripting), 'type');\n            this.underlyingType = type;\n        }\n\n        public get source(): boolean {\n            return matchesExtendedTypeWithAnyPrimitive(this.underlyingType, ExtendedType.ScriptSource);\n        }\n    }\n\n    export class TemporalType implements TemporalTypeDescriptor {\n        private underlyingType: ExtendedType;\n\n        constructor(type: ExtendedType) {\n            debug.assert(!!type && EnumExtensions.hasFlag(type, ExtendedType.Temporal), 'type');\n            this.underlyingType = type;\n        }\n\n        public get year(): boolean {\n            return matchesExtendedTypeWithAnyPrimitive(this.underlyingType, ExtendedType.Year);\n        }\n        public get month(): boolean {\n            return matchesExtendedTypeWithAnyPrimitive(this.underlyingType, ExtendedType.Month);\n        }\n    }\n\n    export class GeographyType implements GeographyTypeDescriptor {\n        private underlyingType: ExtendedType;\n\n        constructor(type: ExtendedType) {\n            debug.assert(!!type && EnumExtensions.hasFlag(type, ExtendedType.Geography), 'type');\n            this.underlyingType = type;\n        }\n\n        public get address(): boolean {\n            return matchesExtendedTypeWithAnyPrimitive(this.underlyingType, ExtendedType.Address);\n        }\n        public get city(): boolean {\n            return matchesExtendedTypeWithAnyPrimitive(this.underlyingType, ExtendedType.City);\n        }\n        public get continent(): boolean {\n            return matchesExtendedTypeWithAnyPrimitive(this.underlyingType, ExtendedType.Continent);\n        }\n        public get country(): boolean {\n            return matchesExtendedTypeWithAnyPrimitive(this.underlyingType, ExtendedType.Country);\n        }\n        public get county(): boolean {\n            return matchesExtendedTypeWithAnyPrimitive(this.underlyingType, ExtendedType.County);\n        }\n        public get region(): boolean {\n            return matchesExtendedTypeWithAnyPrimitive(this.underlyingType, ExtendedType.Region);\n        }\n        public get postalCode(): boolean {\n            return matchesExtendedTypeWithAnyPrimitive(this.underlyingType, ExtendedType.PostalCode);\n        }\n        public get stateOrProvince(): boolean {\n            return matchesExtendedTypeWithAnyPrimitive(this.underlyingType, ExtendedType.StateOrProvince);\n        }\n        public get place(): boolean {\n            return matchesExtendedTypeWithAnyPrimitive(this.underlyingType, ExtendedType.Place);\n        }\n        public get latitude(): boolean {\n            return matchesExtendedTypeWithAnyPrimitive(this.underlyingType, ExtendedType.Latitude);\n        }\n        public get longitude(): boolean {\n            return matchesExtendedTypeWithAnyPrimitive(this.underlyingType, ExtendedType.Longitude);\n        }\n    }\n\n    export class MiscellaneousType implements MiscellaneousTypeDescriptor {\n        private underlyingType: ExtendedType;\n\n        constructor(type: ExtendedType) {\n            debug.assert(!!type && EnumExtensions.hasFlag(type, ExtendedType.Miscellaneous), 'type');\n            this.underlyingType = type;\n        }\n\n        public get image(): boolean {\n            return matchesExtendedTypeWithAnyPrimitive(this.underlyingType, ExtendedType.Image);\n        }\n        public get imageUrl(): boolean {\n            return matchesExtendedTypeWithAnyPrimitive(this.underlyingType, ExtendedType.ImageUrl);\n        }\n        public get webUrl(): boolean {\n            return matchesExtendedTypeWithAnyPrimitive(this.underlyingType, ExtendedType.WebUrl);\n        }\n        public get barcode(): boolean {\n            return matchesExtendedTypeWithAnyPrimitive(this.underlyingType, ExtendedType.Barcode);\n        }\n    }\n\n    export class FormattingType implements FormattingTypeDescriptor {\n        private underlyingType: ExtendedType;\n\n        constructor(type: ExtendedType) {\n            debug.assert(!!type && EnumExtensions.hasFlag(type, ExtendedType.Formatting), 'type');\n            this.underlyingType = type;\n        }\n\n        public get color(): boolean {\n            return matchesExtendedTypeWithAnyPrimitive(this.underlyingType, ExtendedType.Color);\n        }\n\n        public get formatString(): boolean {\n            return matchesExtendedTypeWithAnyPrimitive(this.underlyingType, ExtendedType.FormatString);\n        }\n\n        public get alignment(): boolean {\n            return matchesExtendedTypeWithAnyPrimitive(this.underlyingType, ExtendedType.Alignment);\n        }\n\n        public get labelDisplayUnits(): boolean {\n            return matchesExtendedTypeWithAnyPrimitive(this.underlyingType, ExtendedType.LabelDisplayUnits);\n        }\n\n        public get fontSize(): boolean {\n            return matchesExtendedTypeWithAnyPrimitive(this.underlyingType, ExtendedType.FontSize);\n        }\n\n        public get labelDensity(): boolean {\n            return matchesExtendedTypeWithAnyPrimitive(this.underlyingType, ExtendedType.LabelDensity);\n        }\n    }\n\n    /** Defines primitive value types. Must be consistent with types defined by server conceptual schema. */\n    export enum PrimitiveType {\n        Null = 0,\n        Text = 1,\n        Decimal = 2,\n        Double = 3,\n        Integer = 4,\n        Boolean = 5,\n        Date = 6,\n        DateTime = 7,\n        DateTimeZone = 8,\n        Time = 9,\n        Duration = 10,\n        Binary = 11,\n        None = 12,\n    }\n\n    /** Defines extended value types, which include primitive types and known data categories constrained to expected primitive types. */\n    export enum ExtendedType {\n        // Flags (1 << 8-15 range [0xFF00])\n        // Important: Enum members must be declared before they are used in TypeScript.\n        Numeric = 1 << 8,\n        Temporal = 1 << 9,\n        Geography = 1 << 10,\n        Miscellaneous = 1 << 11,\n        Formatting = 1 << 12,\n        Scripting = 1 << 13,        \n\n        // Primitive types (0-255 range [0xFF] | flags)\n        // The member names and base values must match those in PrimitiveType.\n        Null = 0,\n        Text = 1,\n        Decimal = Numeric | 2,\n        Double = Numeric | 3,\n        Integer = Numeric | 4,\n        Boolean = 5,\n        Date = Temporal | 6,\n        DateTime = Temporal | 7,\n        DateTimeZone = Temporal | 8,\n        Time = Temporal | 9,\n        Duration = 10,\n        Binary = 11,\n        None = 12,\n\n        // Extended types (0-32767 << 16 range [0xFFFF0000] | corresponding primitive type | flags)\n        // Temporal\n        Year = Temporal | (1 << 16),\n        Year_Text = Year | Text,\n        Year_Integer = Year | Integer,\n        Year_Date = Year | Date,\n        Year_DateTime = Year | DateTime,\n        Month = Temporal | (2 << 16),\n        Month_Text = Month | Text,\n        Month_Integer = Month | Integer,\n        Month_Date = Month | Date,\n        Month_DateTime = Month | DateTime,\n        // Geography\n        Address = Text | Geography | (100 << 16),\n        City = Text | Geography | (101 << 16),\n        Continent = Text | Geography | (102 << 16),\n        Country = Text | Geography | (103 << 16),\n        County = Text | Geography | (104 << 16),\n        Region = Text | Geography | (105 << 16),\n        PostalCode = Geography | (106 << 16),\n        PostalCode_Text = PostalCode | Text,\n        PostalCode_Integer = PostalCode | Integer,\n        StateOrProvince = Text | Geography | (107 << 16),\n        Place = Text | Geography | (108 << 16),\n        Latitude = Geography | (109 << 16),\n        Latitude_Decimal = Latitude | Decimal,\n        Latitude_Double = Latitude | Double,\n        Longitude = Geography | (110 << 16),\n        Longitude_Decimal = Longitude | Decimal,\n        Longitude_Double = Longitude | Double,\n        // Miscellaneous\n        Image = Binary | Miscellaneous | (200 << 16),\n        ImageUrl = Text | Miscellaneous | (201 << 16),\n        WebUrl = Text | Miscellaneous | (202 << 16),\n        Barcode =  Miscellaneous | (203 << 16),\n        Barcode_Text = Barcode | Text,\n        Barcode_Integer = Barcode | Integer,\n\n        // Formatting\n        Color = Text | Formatting | (300 << 16),\n        FormatString = Text | Formatting | (301 << 16),\n        Alignment = Text | Formatting | (306 << 16),\n        LabelDisplayUnits = Text | Formatting | (307 << 16),\n        FontSize = Double | Formatting | (308 << 16),\n        LabelDensity = Double | Formatting | (309 << 16),\n        // Enumeration\n        Enumeration = Text | 400 << 16,\n        // Scripting\n        ScriptSource = Text | Scripting | (500 << 16),        \n        // NOTE: To avoid confusion, underscores should be used only to delimit primitive type variants of an extended type\n        // (e.g. Year_Integer or Latitude_Double above)\n\n        //Operations\n        SearchEnabled = Boolean | (1 << 16),\n    }\n\n    const PrimitiveTypeMask = 0xFF;\n    const PrimitiveTypeWithFlagsMask = 0xFFFF;\n    const PrimitiveTypeFlagsExcludedMask = 0xFFFF0000;\n\n    function getPrimitiveType(extendedType: ExtendedType): PrimitiveType {\n        return extendedType & PrimitiveTypeMask;\n    }\n\n    function isPrimitiveType(extendedType: ExtendedType): boolean {\n        return (extendedType & PrimitiveTypeWithFlagsMask) === extendedType;\n    }\n\n    function getCategoryFromExtendedType(extendedType: ExtendedType): string {\n        if (isPrimitiveType(extendedType))\n            return null;\n\n        let category = ExtendedType[extendedType];\n        if (category) {\n            // Check for ExtendedType declaration without a primitive type.\n            // If exists, use it as category (e.g. Longitude rather than Longitude_Double)\n            // Otherwise use the ExtendedType declaration with a primitive type (e.g. Address)\n            let delimIdx = category.lastIndexOf('_');\n            if (delimIdx > 0) {\n                let baseCategory = category.slice(0, delimIdx);\n                if (ExtendedType[baseCategory]) {\n                    debug.assert(\n                        (ExtendedType[baseCategory] & PrimitiveTypeFlagsExcludedMask) === (extendedType & PrimitiveTypeFlagsExcludedMask),\n                        'Unexpected value for ExtendedType base member of ' + extendedType);\n                    category = baseCategory;\n                }\n            }\n        }\n        return category || null;\n    }\n\n    function toExtendedType(primitiveType: PrimitiveType, category?: string): ExtendedType {\n        let primitiveString = PrimitiveType[primitiveType];\n        let t = ExtendedType[primitiveString];\n        if (t == null) {\n            debug.assertFail('Unexpected primitiveType ' + primitiveType);\n            t = ExtendedType.Null;\n        }\n\n        if (primitiveType && category) {\n            let categoryType: ExtendedType = ExtendedType[category];\n            if (categoryType) {\n                let categoryPrimitiveType = getPrimitiveType(categoryType);\n                if (categoryPrimitiveType === PrimitiveType.Null) {\n                    // Category supports multiple primitive types, check if requested primitive type is supported\n                    // (note: important to use t here rather than primitiveType as it may include primitive type flags)\n                    categoryType = t | categoryType;\n                    if (ExtendedType[categoryType]) {\n                        debug.assert(\n                            ExtendedType[categoryType] === (category + '_' + primitiveString),\n                            'Unexpected name for ExtendedType member ' + categoryType);\n                        t = categoryType;\n                    }\n                }\n                else if (categoryPrimitiveType === primitiveType) {\n                    // Primitive type matches the single supported type for the category\n                    t = categoryType;\n                }\n            }\n        }\n\n        return t;\n    }\n\n    function matchesExtendedTypeWithAnyPrimitive(a: ExtendedType, b: ExtendedType): boolean {\n        return (a & PrimitiveTypeFlagsExcludedMask) === (b & PrimitiveTypeFlagsExcludedMask);\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    /**\n     * Represents the versions of the data shape binding structure.\n     * NOTE Keep this file in sync with the Sql\\InfoNav\\src\\Data\\Contracts\\DsqGeneration\\DataShapeBindingVersions.cs\n     * file in the TFS Dev branch.\n     */\n    export const enum DataShapeBindingVersions {\n        /** The initial version of data shape binding */\n        Version0 = 0,\n        /** Explicit subtotal support for axis groupings. */\n        Version1 = 1,\n    }\n\n    export interface DataShapeBindingLimitTarget {\n        Primary?: number;\n    }\n\n    export enum DataShapeBindingLimitType {\n        Top = 0,\n        First = 1,\n        Last = 2,\n        Sample = 3,\n        Bottom = 4,\n    }\n\n    export interface DataShapeBindingLimit {\n        Count?: number;\n        Target: DataShapeBindingLimitTarget;\n        Type: DataShapeBindingLimitType;\n    }\n\n    export interface DataShapeBinding {\n        Version?: number;\n        Primary: DataShapeBindingAxis;\n        Secondary?: DataShapeBindingAxis;\n        Aggregates?: DataShapeBindingAggregate[];\n        Projections?: number[];\n        Limits?: DataShapeBindingLimit[];\n        Highlights?: FilterDefinition[];\n        DataReduction?: DataShapeBindingDataReduction;\n        IncludeEmptyGroups?: boolean;\n        SuppressedJoinPredicates?: number[];\n    }\n\n    export interface DataShapeBindingDataReduction {\n        Primary?: DataShapeBindingDataReductionAlgorithm;\n        Secondary?: DataShapeBindingDataReductionAlgorithm;\n        DataVolume?: number;\n    }\n\n    export interface DataShapeBindingDataReductionAlgorithm {\n        Top?: DataShapeBindingDataReductionTopLimit;\n        Sample?: DataShapeBindingDataReductionSampleLimit;\n        Bottom?: DataShapeBindingDataReductionBottomLimit;\n        Window?: DataShapeBindingDataReductionDataWindow;\n    }\n\n    export interface DataShapeBindingDataReductionTopLimit {\n        Count?: number;\n    }\n\n    export interface DataShapeBindingDataReductionSampleLimit {\n        Count?: number;\n    }\n\n    export interface DataShapeBindingDataReductionBottomLimit {\n        Count?: number;\n    }\n\n    export interface DataShapeBindingDataReductionDataWindow {\n        Count?: number;\n        RestartTokens?: RestartToken;\n    }\n\n    export interface DataShapeBindingAxis {\n        Groupings: DataShapeBindingAxisGrouping[];\n    }\n\n    export enum SubtotalType {\n        None = 0,\n        Before = 1,\n        After = 2\n    }\n\n    export interface DataShapeBindingAxisGrouping {\n        Projections: number[];\n        GroupBy?: number[];\n        SuppressedProjections?: number[];\n        Subtotal?: SubtotalType;\n        ShowItemsWithNoData?: number[];\n    }\n\n    export interface DataShapeBindingAggregate {\n        Select: number;\n        Kind?: DataShapeBindingAggregateKind;\n        Aggregations?: DataShapeBindingSelectAggregateContainer[];\n    }\n\n    export const enum DataShapeBindingAggregateKind {\n        None = 0,\n        Min = 1,\n        Max = 1 << 1,\n    }\n\n    export interface DataShapeBindingSelectAggregateContainer {\n        Percentile?: DataShapeBindingSelectPercentileAggregate;\n        Min?: DataShapeBindingSelectMinAggregate;\n        Max?: DataShapeBindingSelectMaxAggregate;\n    }\n\n    export interface DataShapeBindingSelectPercentileAggregate {\n        Exclusive?: boolean;\n        K: number;\n    }\n\n    export interface DataShapeBindingSelectMaxAggregate {\n    }\n\n    export interface DataShapeBindingSelectMinAggregate {\n    }\n} \n","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    export module DataShapeBindingDataReduction {\n\n        export function createFrom(reduction: ReductionAlgorithm): DataShapeBindingDataReductionAlgorithm {\n            if (!reduction)\n                return;\n\n            var result: DataShapeBindingDataReductionAlgorithm;\n            if (reduction.top) {\n                result = {\n                    Top: {}\n                };\n\n                if (reduction.top.count)\n                    result.Top.Count = reduction.top.count;\n            }\n\n            if (reduction.bottom) {\n                result = {\n                    Bottom: {}\n                };\n\n                if (reduction.bottom.count)\n                    result.Bottom.Count = reduction.bottom.count;\n            }\n\n            if (reduction.sample) {\n                result = {\n                    Sample: {}\n                };\n\n                if (reduction.sample.count)\n                    result.Sample.Count = reduction.sample.count;\n            }\n\n            if (reduction.window) {\n                result = {\n                    Window: {}\n                };\n\n                if (reduction.window.count)\n                    result.Window.Count = reduction.window.count;\n            }\n\n            return result;\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    export interface FederatedConceptualSchemaInitOptions {\n        schemas: { [name: string]: ConceptualSchema };\n        links?: ConceptualSchemaLink[];\n    }\n\n    /** Represents a federated conceptual schema. */\n    export class FederatedConceptualSchema {\n        private schemas: { [name: string]: ConceptualSchema };\n        private links: ConceptualSchemaLink[];\n\n        constructor(options: FederatedConceptualSchemaInitOptions) {\n            debug.assertValue(options, 'options');\n\n            this.schemas = options.schemas; \n            if (options.links)\n                this.links = options.links;\n        }\n\n        public schema(name: string): ConceptualSchema {\n            return this.schemas[name];\n        }\n    }\n\n    /** Describes a semantic relationship between ConceptualSchemas. */\n    export interface ConceptualSchemaLink {\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n\n    export module Selector {\n        export function filterFromSelector(selectors: Selector[], isNot?: boolean): SemanticFilter {\n            if (_.isEmpty(selectors))\n                return;\n\n            let exprs: SQExpr[] = [];\n            for (let i = 0, ilen = selectors.length; i < ilen; i++) {\n                let identity = selectors[i];\n                let data = identity.data;\n                let exprToAdd: SQExpr = undefined;\n                if (data && data.length) {\n                    for (let j = 0, jlen = data.length; j < jlen; j++) {\n                        exprToAdd = SQExprBuilder.and(exprToAdd, <SQExpr>(<DataViewScopeIdentity>identity.data[j]).expr);\n                    }\n                }\n\n                if (exprToAdd)\n                    exprs.push(exprToAdd);\n            }\n\n            if (!_.isEmpty(exprs))\n                return DataViewScopeIdentity.filterFromExprs(exprs, isNot);\n        }\n\n        export function matchesData(selector: Selector, identities: DataViewScopeIdentity[]): boolean {\n            debug.assertValue(selector, 'selector');\n            debug.assertValue(selector.data, 'selector.data');\n            debug.assertValue(identities, 'identities');\n\n            let selectorData = selector.data;\n            if (selectorData.length !== identities.length)\n                return false;\n\n            for (let i = 0, len = selectorData.length; i < len; i++) {\n                let dataItem = selector.data[i];\n                let selectorDataItem = <DataViewScopeIdentity>dataItem;\n                if (selectorDataItem.expr) {\n                    if (!DataViewScopeIdentity.equals(selectorDataItem, identities[i]))\n                        return false;\n                }\n                else {\n                    if (!DataViewScopeWildcard.matches(<DataViewScopeWildcard>dataItem, identities[i]))\n                        return false;\n                }\n            }\n\n            return true;\n        }\n\n        export function matchesKeys(selector: Selector, keysList: SQExpr[][]): boolean {\n            debug.assertValue(selector, 'selector');\n            debug.assertValue(selector.data, 'selector.data');\n            debug.assertValue(keysList, 'keysList');\n\n            let selectorData = selector.data,\n                selectorDataLength = selectorData.length;\n            if (selectorDataLength !== keysList.length)\n                return false;\n\n            for (let i = 0; i < selectorDataLength; i++) {\n                let selectorDataItem = selector.data[i],\n                    selectorDataExprs: SQExpr[];\n\n                if ((<DataViewScopeIdentity>selectorDataItem).expr) {\n                    selectorDataExprs = ScopeIdentityExtractor.getKeys(<SQExpr>(<DataViewScopeIdentity>selectorDataItem).expr);\n                }\n                else if ((<DataViewScopeWildcard>selectorDataItem).exprs) {\n                    selectorDataExprs = <SQExpr[]>(<DataViewScopeWildcard>selectorDataItem).exprs;\n                } else { \n                    // In case DataViewRoleWildcard\n                    return false;\n                }\n\n                if (!selectorDataExprs)\n                    continue;\n                if (!SQExprUtils.sequenceEqual(keysList[i], selectorDataExprs))\n                    return false;\n            }\n\n            return true;\n        }\n\n        /** Determines whether two selectors are equal. */\n        export function equals(x: Selector, y: Selector): boolean {\n            // Normalize falsy to null\n            x = x || null;\n            y = y || null;\n\n            if (x === y)\n                return true;\n\n            if (!x !== !y)\n                return false;\n\n            debug.assertValue(x, 'x');\n            debug.assertValue(y, 'y');\n\n            if (x.id !== y.id)\n                return false;\n            if (x.metadata !== y.metadata)\n                return false;\n            if (!equalsDataArray(x.data, y.data))\n                return false;\n\n            return true;\n        }\n\n        function equalsDataArray(x: DataRepetitionSelector[], y: DataRepetitionSelector[]): boolean {\n            // Normalize falsy to null\n            x = x || null;\n            y = y || null;\n\n            if (x === y)\n                return true;\n\n            if (!x !== !y)\n                return false;\n\n            if (x.length !== y.length)\n                return false;\n\n            for (let i = 0, len = x.length; i < len; i++) {\n                if (!equalsData(x[i], y[i]))\n                    return false;\n            }\n\n            return true;\n        }\n\n        function equalsData(x: DataRepetitionSelector, y: DataRepetitionSelector): boolean {\n            let selector1 = <DataViewScopeIdentity & DataViewRoleWildcard & DataViewScopeWildcard>x;\n            let selector2 = <DataViewScopeIdentity & DataViewRoleWildcard & DataViewScopeWildcard>y;\n            if (selector1.expr && selector2.expr)\n                return DataViewScopeIdentity.equals(selector1, selector2);\n\n            if (selector1.exprs && selector2.exprs)\n                return DataViewScopeWildcard.equals(selector1, selector2);\n\n            if (selector1.roles && selector2.roles)\n                return DataViewRoleWildcard.equals(selector1, selector2);\n\n            return false;\n        }\n\n        export function getKey(selector: Selector): string {\n            let toStringify: any = {};\n            if (selector.data) {\n                let data = [];\n                for (let i = 0, ilen = selector.data.length; i < ilen; i++) {\n                    data.push(selector.data[i].key);\n                }\n                toStringify.data = data;\n            }\n            if (selector.metadata)\n                toStringify.metadata = selector.metadata;\n            if (selector.id)\n                toStringify.id = selector.id;\n            return JSON.stringify(toStringify);\n        }\n\n        export function containsWildcard(selector: Selector): boolean {\n            debug.assertValue(selector, 'selector');\n\n            let dataItems = selector.data;\n            if (!dataItems)\n                return false;\n\n            for (let dataItem of dataItems) {\n                let wildCard = <DataViewScopeWildcard & DataViewRoleWildcard>dataItem;\n                if (wildCard.exprs || wildCard.roles)\n                    return true;\n            }\n\n            return false;\n        }\n\n        export function hasRoleWildcard(selector: Selector): boolean {\n            debug.assertValue(selector, 'selector');\n\n            let dataItems = selector.data;\n            if (_.isEmpty(dataItems))\n                return false;\n\n            for (let dataItem of dataItems) {\n                if (isRoleWildcard(dataItem))\n                    return true;\n            }\n\n            return false;\n        }\n\n        export function isRoleWildcard(dataItem: DataRepetitionSelector): dataItem is DataViewRoleWildcard {\n            return !_.isEmpty((<DataViewRoleWildcard>dataItem).roles);\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n\n    export interface QueryDefinition {\n        Version?: number;\n        From: EntitySource[];\n        Where?: QueryFilter[];\n        OrderBy?: QuerySortClause[];\n        Select: QueryExpressionContainer[];\n        GroupBy?: QueryExpressionContainer[];\n    }\n\n    export interface FilterDefinition {\n        Version?: number;\n        From: EntitySource[];\n        Where: QueryFilter[];\n    }\n\n    export enum EntitySourceType {\n        Table = 0,\n        Pod = 1,\n    }\n\n    export interface EntitySource {\n        Name: string;\n        EntitySet?: string; // TODO: Remove this when Q&A Silverlight is removed and make Entity required\n        Entity?: string;\n        Schema?: string;\n        Type?: EntitySourceType;\n    }\n\n    export interface QueryFilter {\n        Target?: QueryExpressionContainer[];\n        Condition: QueryExpressionContainer;\n    }\n\n    export interface QuerySortClause {\n        Expression: QueryExpressionContainer;\n        Direction: SortDirection;\n    }\n\n    export interface QueryExpressionContainer {\n        Name?: string;\n\n        SourceRef?: QuerySourceRefExpression;\n        Column?: QueryColumnExpression;\n        Measure?: QueryMeasureExpression;\n        Aggregation?: QueryAggregationExpression;\n        Percentile?: QueryPercentileExpression;\n        Hierarchy?: QueryHierarchyExpression;\n        HierarchyLevel?: QueryHierarchyLevelExpression;\n        PropertyVariationSource?: QueryPropertyVariationSourceExpression;\n\n        // Logical\n        And?: QueryBinaryExpression;\n        Between?: QueryBetweenExpression;\n        In?: QueryInExpression;\n        Or?: QueryBinaryExpression;\n        Comparison?: QueryComparisonExpression;\n        Not?: QueryNotExpression;\n        Contains?: QueryContainsExpression;\n        StartsWith?: QueryStartsWithExpression;\n        Exists?: QueryExistsExpression;\n\n        // Constants\n        Boolean?: QueryBooleanExpression;\n        DateTime?: QueryDateTimeExpression;\n        DateTimeSecond?: QueryDateTimeSecondExpression;\n        Date?: QueryDateTimeExpression;\n        Decimal?: QueryDecimalExpression;\n        Integer?: QueryIntegerExpression;\n        Null?: QueryNullExpression;\n        Number?: QueryNumberExpression;\n        String?: QueryStringExpression;\n        Literal?: QueryLiteralExpression;\n\n        DateSpan?: QueryDateSpanExpression;\n        DateAdd?: QueryDateAddExpression;\n        Now?: QueryNowExpression;\n\n        // Default Values\n        DefaultValue?: QueryDefaultValueExpression;\n        AnyValue?: QueryAnyValueExpression;\n\n        Arithmetic?: QueryArithmeticExpression;\n\n        // Evaluation Expressions\n        ScopedEval?: QueryScopedEvalExpression;\n\n        // Reference Expressions\n        WithRef?: QueryWithRefExpression;\n\n        // Client-only expressions\n        FillRule?: QueryFillRuleExpression;\n        ResourcePackageItem?: QueryResourcePackageItem;\n        SelectRef?: QuerySelectRefExpression;\n    }\n\n    export interface QueryPropertyExpression {\n        Expression: QueryExpressionContainer;\n        Property: string;\n    }\n\n    export interface QueryColumnExpression extends QueryPropertyExpression {\n    }\n\n    export interface QueryMeasureExpression extends QueryPropertyExpression {\n    }\n\n    export interface QuerySourceRefExpression {\n        Source: string;\n    }\n\n    export interface QuerySelectRefExpression {\n        ExpressionName: string;\n    }\n\n    export interface QueryAggregationExpression {\n        Function: QueryAggregateFunction;\n        Expression: QueryExpressionContainer;\n    }\n\n    export interface QueryPercentileExpression {\n        Expression: QueryExpressionContainer;\n        K: number;\n        Exclusive?: boolean;\n    }\n\n    export interface QueryHierarchyExpression {\n        Expression: QueryExpressionContainer;\n        Hierarchy: string;\n    }\n\n    export interface QueryHierarchyLevelExpression {\n        Expression: QueryExpressionContainer;\n        Level: string;\n    }\n\n    export interface QueryPropertyVariationSourceExpression {\n        Expression: QueryExpressionContainer;\n        Name: string;\n        Property: string;\n    }\n\n    export interface QueryBinaryExpression {\n        Left: QueryExpressionContainer;\n        Right: QueryExpressionContainer;\n    }\n\n    export interface QueryBetweenExpression {\n        Expression: QueryExpressionContainer;\n        LowerBound: QueryExpressionContainer;\n        UpperBound: QueryExpressionContainer;\n    }\n\n    export interface QueryInExpression {\n        Expressions: QueryExpressionContainer[];\n        Values: QueryExpressionContainer[][];\n    }\n\n    export interface QueryComparisonExpression extends QueryBinaryExpression {\n        ComparisonKind: QueryComparisonKind;\n    }\n\n    export interface QueryContainsExpression extends QueryBinaryExpression { }\n\n    export interface QueryNotExpression {\n        Expression: QueryExpressionContainer;\n    }\n\n    export interface QueryStartsWithExpression extends QueryBinaryExpression { }\n\n    export interface QueryExistsExpression {\n        Expression: QueryExpressionContainer;\n    }\n\n    export interface QueryConstantExpression<T> {\n        Value: T;\n    }\n\n    export interface QueryLiteralExpression {\n        Value: string;\n    }\n\n    export interface QueryBooleanExpression extends QueryConstantExpression<boolean> { }\n    export interface QueryDateTimeExpression extends QueryConstantExpression<string> { }\n    export interface QueryDateTimeSecondExpression extends QueryConstantExpression<string> { }\n    export interface QueryDecimalExpression extends QueryConstantExpression<number> { }\n    export interface QueryIntegerExpression extends QueryConstantExpression<number> { }\n    export interface QueryNumberExpression extends QueryConstantExpression<string> { }\n    export interface QueryNullExpression { }\n    export interface QueryStringExpression extends QueryConstantExpression<string> { }\n\n    export interface QueryDateSpanExpression {\n        TimeUnit: TimeUnit;\n        Expression: QueryExpressionContainer;\n    }\n\n    export interface QueryDateAddExpression {\n        Amount: number;\n        TimeUnit: TimeUnit;\n        Expression: QueryExpressionContainer;\n    }\n\n    export interface QueryNowExpression { }\n\n    export interface QueryDefaultValueExpression { }\n\n    export interface QueryAnyValueExpression { }\n\n    export interface QueryArithmeticExpression {\n        Left: QueryExpressionContainer;\n        Right: QueryExpressionContainer;\n        Operator: ArithmeticOperatorKind;\n    }\n\n    export const enum ArithmeticOperatorKind {\n        Add = 0,\n        Subtract = 1,\n        Multiply = 2,\n        Divide = 3,\n    }\n\n    export function getArithmeticOperatorName(arithmeticOperatorKind: ArithmeticOperatorKind): string {\n        switch (arithmeticOperatorKind) {\n            case ArithmeticOperatorKind.Add:\n                return \"Add\";\n            case ArithmeticOperatorKind.Subtract:\n                return \"Subtract\";\n            case ArithmeticOperatorKind.Multiply:\n                return \"Multiply\";\n            case ArithmeticOperatorKind.Divide:\n                return \"Divide\";\n        }\n        throw new Error('Unexpected ArithmeticOperatorKind: ' + arithmeticOperatorKind);\n    }\n\n    export interface QueryFillRuleExpression {\n        Input: QueryExpressionContainer;\n        FillRule: FillRuleGeneric<QueryExpressionContainer, QueryExpressionContainer>;\n    }\n\n    export interface QueryResourcePackageItem {\n        PackageName: string;\n        PackageType: number;\n        ItemName: string;\n    }\n\n    export interface QueryScopedEvalExpression {\n        Expression: QueryExpressionContainer;\n        Scope: QueryExpressionContainer[];\n    }\n\n    export interface QueryWithRefExpression {\n        ExpressionName: string;\n    }\n\n    export enum TimeUnit {\n        Day = 0,\n        Week = 1,\n        Month = 2,\n        Year = 3,\n        Decade = 4,\n        Second = 5,\n        Minute = 6,\n        Hour = 7,\n    }\n\n    export enum QueryAggregateFunction {\n        Sum = 0,\n        Avg = 1,\n        Count = 2,\n        Min = 3,\n        Max = 4,\n        CountNonNull = 5,\n        Median = 6,\n        StandardDeviation = 7,\n        Variance = 8,\n    }\n\n    export enum QueryComparisonKind {\n        Equal = 0,\n        GreaterThan = 1,\n        GreaterThanOrEqual = 2,\n        LessThan = 3,\n        LessThanOrEqual = 4,\n    }\n\n    /** Defines semantic data types. */\n    export enum SemanticType {\n        None = 0x0,\n        Number = 0x1,\n        Integer = Number + 0x2,\n        DateTime = 0x4,\n        Time = 0x08,\n        Date = DateTime + 0x10,\n        Month = Integer + 0x20,\n        Year = Integer + 0x40,\n        YearAndMonth = 0x80,\n        MonthAndDay = 0x100,\n        Decade = Integer + 0x200,\n        YearAndWeek = 0x400,\n        String = 0x800,\n        Boolean = 0x1000,\n        Table = 0x2000,\n        Range = 0x4000,\n    }\n\n    export interface QueryMetadata {\n        Select?: SelectMetadata[];\n        Filters?: FilterMetadata[];\n    }\n\n    // TODO: Stop using SemanticType and ConceptualDataCategory here (may need server contract changes)\n    export interface SelectMetadata {\n        Restatement: string;\n\n        /* SemanticType or PrimitiveType. */\n        Type?: number;\n\n        Format?: string;\n        DataCategory?: ConceptualDataCategory;\n\n        /** The select projection name. */\n        Name?: string;\n\n        /* If defined, this indicates the KPI class*/\n        kpiStatusGraphic?: string; // old version of kpi data\n\n        /* If defined, this indicates the KPI metadata*/\n        kpi?: DataViewKpiColumnMetadata;\n    }\n\n    export interface FilterMetadata {\n        Restatement: string;\n        Kind?: FilterKind;\n        /** The expression being filtered.  This is reflected in the filter card UI. */\n        expression?: QueryExpressionContainer;\n    }\n\n    export enum FilterKind {\n        Default,\n        Period,\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n\n    /** Represents a projection from a query result. */\n    export interface QueryProjection {\n        /** Name of item in the semantic query Select clause. */\n        queryRef: string;\n\n        /** Optional format string. */\n        format?: string; // TODO: Deprecate this, and populate format string through objects instead.\n    }\n\n    /** A set of QueryProjections, grouped by visualization property, and ordered within that property. */\n    export interface QueryProjectionsByRole {\n        [roleName: string]: QueryProjectionCollection;\n    }\n\n    export class QueryProjectionCollection {\n        private items: QueryProjection[];\n\n        /* The activeProjectionReference is an array that contains all the items that we are grouping on in case of a drillable\n           role. For example, if you have a drill role with [Country, State, City] and the user drilled to state, the active items\n           will include [Country and State]. This means that the query will group on both country and state and the state \"last item\"\n           is the item that the user drilled to.\n        */\n        private _activeProjectionRefs: string[];\n        private _showAll: boolean;\n\n        public constructor(items: QueryProjection[], activeProjectionRefs?: string[], showAll?: boolean) {\n            debug.assertValue(items, 'items');\n\n            this.items = items;\n            this._activeProjectionRefs = activeProjectionRefs;\n            this._showAll = showAll;\n        }\n\n        /** Returns all projections in a mutable array. */\n        public all(): QueryProjection[] {\n            return this.items;\n        }\n\n        public get activeProjectionRefs(): string[] {\n            return this._activeProjectionRefs;\n        }\n\n        public set activeProjectionRefs(queryReferences: string[]) {\n            if (!_.isEmpty(queryReferences)) {\n                let queryRefs = this.items.map(val => val.queryRef);\n\n                for (let queryReference of queryReferences) {\n                    if (!_.contains(queryRefs, queryReference))\n                        return;\n                }\n\n                this._activeProjectionRefs = queryReferences;\n            }\n        }\n\n        public get showAll(): boolean {\n            return this._showAll;\n        }\n\n        public set showAll(value: boolean) {\n            this._showAll = value;\n        }\n\n        public addActiveQueryReference(queryRef: string): void {\n            if (!this._activeProjectionRefs)\n                this._activeProjectionRefs = [queryRef];\n            else\n                this._activeProjectionRefs.push(queryRef);\n        }\n\n        public getLastActiveQueryReference(): string {\n            if (!_.isEmpty(this._activeProjectionRefs)) {\n                return this._activeProjectionRefs[this._activeProjectionRefs.length - 1];\n            }\n        }\n\n        /** Replaces the given oldQueryRef with newQueryRef in this QueryProjectionCollection. */\n        public replaceQueryRef(oldQueryRef: string, newQueryRef: string): void {\n            debug.assertValue(oldQueryRef, 'oldQueryRef');\n            debug.assertValue(newQueryRef, 'newQueryRef');\n            debug.assert(oldQueryRef !== newQueryRef, 'oldQueryRef !== newQueryRef');\n            debug.assert(_.isEmpty(this._activeProjectionRefs), 'replaceQueryRef(...) is not supported on the QueryProjectionCollection of a drillable role');\n\n            // Note: the same queryRef can get projected multiple times\n            for (let item of this.items) {\n                if (item.queryRef === oldQueryRef) {\n                    item.queryRef = newQueryRef;\n                }\n            }\n        }\n\n        public clone(): QueryProjectionCollection {\n            return new QueryProjectionCollection(_.cloneDeep(this.items), _.clone(this._activeProjectionRefs), this._showAll);\n        }\n    }\n\n    export module QueryProjectionsByRole {\n        /** Clones the QueryProjectionsByRole. */\n        export function clone(roles: QueryProjectionsByRole): QueryProjectionsByRole {\n            if (!roles)\n                return roles;\n\n            let clonedRoles: QueryProjectionsByRole = {};\n\n            for (let roleName in roles)\n                clonedRoles[roleName] = roles[roleName].clone();\n\n            return clonedRoles;\n        }\n\n        /** Returns the QueryProjectionCollection for that role.  Even returns empty collections so that 'drillable' and 'activeProjection' fields are preserved. */\n        export function getRole(roles: QueryProjectionsByRole, name: string): QueryProjectionCollection {\n            debug.assertAnyValue(roles, 'roles');\n            debug.assertValue(name, 'name');\n\n            if (!roles)\n                return;\n\n            return roles[name];\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi {\n\n    export interface VisualElement {\n        DataRoles?: DataRole[];\n        Settings?: VisualElementSettings;\n    }\n\n    /** Defines common settings for a visual element. */\n    export interface VisualElementSettings {\n        DisplayUnitSystemType?: DisplayUnitSystemType;\n    }\n\n    export interface DataRole {\n        Name: string;\n        Projection: number;\n        isActive?: boolean;\n    }\n\n    /** The system used to determine display units used during formatting */\n    export enum DisplayUnitSystemType {\n        /** Default display unit system, which saves space by using units such as K, M, bn with PowerView rules for when to pick a unit. Suitable for chart axes. */\n        Default,\n\n        /** A verbose display unit system that will only respect the formatting defined in the model. Suitable for explore mode single-value cards. */\n        Verbose,\n\n        /**\n         * A display unit system that uses units such as K, M, bn if we have at least one of those units (e.g. 0.9M is not valid as it's less than 1 million).\n         * Suitable for dashboard tile cards\n         */\n        WholeUnits,\n\n        /**A display unit system that also contains Auto and None units for data labels*/\n        DataLabels,\n    }\n}\n\nmodule powerbi.data.contracts {\n\n    export interface DataViewSource {\n        data: any;\n        type?: string;\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi {\n    /** Repreasents the sequence of the dates/times */\n    export class DateTimeSequence {\n        // Constants\n        private static MIN_COUNT: number = 1;\n        private static MAX_COUNT: number = 1000;        \n\n        // Fields\n        public min: Date;\n        public max: Date;\n        public unit: DateTimeUnit;\n        public sequence: Date[];\n        public interval: number;\n        public intervalOffset: number;\n\n        // Constructors\n        /** Creates new instance of the DateTimeSequence */\n        constructor(unit: DateTimeUnit) { \n            this.unit = unit;\n            this.sequence = [];\n            this.min = new Date(\"9999-12-31T23:59:59.999\");\n            this.max = new Date(\"0001-01-01T00:00:00.000\");\n        }\n\n        // Methods\n        /** \n         * Add a new Date to a sequence.\n         * @param date - date to add\n         */\n        public add(date: Date) { \n            if (date < this.min) { \n                this.min = date;\n            }\n            if (date > this.max) { \n                this.max = date;\n            }\n            this.sequence.push(date);\n        }\n\n        // Methods\n        /** \n         * Extends the sequence to cover new date range\n         * @param min - new min to be covered by sequence\n         * @param max - new max to be covered by sequence\n         */\n        public extendToCover(min: Date, max: Date): void {\n            let x: Date = this.min;\n            while (min < x) {\n                x = DateTimeSequence.addInterval(x, -this.interval, this.unit);\n                this.sequence.splice(0, 0, x);\n            }\n            this.min = x;\n\n            x = this.max;\n            while (x < max) {\n                x = DateTimeSequence.addInterval(x, this.interval, this.unit);\n                this.sequence.push(x);\n            }\n            this.max = x;\n        }\n\n        /** \n         * Move the sequence to cover new date range\n         * @param min - new min to be covered by sequence\n         * @param max - new max to be covered by sequence\n         */\n        public moveToCover(min: Date, max: Date): void { \n            let delta: number = DateTimeSequence.getDelta(min, max, this.unit);\n            let count = Math.floor(delta / this.interval);\n            this.min = DateTimeSequence.addInterval(this.min, count * this.interval, this.unit);\n\n            this.sequence = [];            \n            this.sequence.push(this.min);\n            this.max = this.min;\n            while (this.max < max) {\n                this.max = DateTimeSequence.addInterval(this.max, this.interval, this.unit);\n                this.sequence.push(this.max);\n            }\n        }\n\n        // Static\n        /**\n         * Calculate a new DateTimeSequence\n         * @param dataMin - Date representing min of the data range\n         * @param dataMax - Date representing max of the data range\n         * @param expectedCount - expected number of intervals in the sequence\n         * @param unit - of the intervals in the sequence\n         */\n        public static calculate(dataMin: Date, dataMax: Date, expectedCount: number, unit?: DateTimeUnit): DateTimeSequence {\n            if (!unit) { \n                unit = DateTimeSequence.getIntervalUnit(dataMin, dataMax, expectedCount);\n            }\n            switch (unit) {\n                case DateTimeUnit.Year:\n                    return DateTimeSequence.calculateYears(dataMin, dataMax, expectedCount);\n                case DateTimeUnit.Month:\n                    return DateTimeSequence.calculateMonths(dataMin, dataMax, expectedCount);\n                case DateTimeUnit.Week:\n                    return DateTimeSequence.calculateWeeks(dataMin, dataMax, expectedCount);\n                case DateTimeUnit.Day:\n                    return DateTimeSequence.calculateDays(dataMin, dataMax, expectedCount);\n                case DateTimeUnit.Hour:\n                    return DateTimeSequence.calculateHours(dataMin, dataMax, expectedCount);\n                case DateTimeUnit.Minute:\n                    return DateTimeSequence.calculateMinutes(dataMin, dataMax, expectedCount);\n                case DateTimeUnit.Second:\n                    return DateTimeSequence.calculateSeconds(dataMin, dataMax, expectedCount);\n                case DateTimeUnit.Millisecond:\n                    return DateTimeSequence.calculateMilliseconds(dataMin, dataMax, expectedCount);\n                default:\n                    debug.assertFail(\"Unsupported DateTimeUnit\");\n            }\n        }\n\n        public static calculateYears(dataMin: Date, dataMax: Date, expectedCount: number): DateTimeSequence {\n            debug.assertValue(dataMin, \"dataMin\");\n            debug.assertValue(dataMax, \"dataMax\");\n            debug.assert(!expectedCount || (expectedCount >= DateTimeSequence.MIN_COUNT && expectedCount <= DateTimeSequence.MAX_COUNT), \"Expected count is out of range\");\n\n            // Calculate range and sequence\n            let yearsRange = NumericSequenceRange.calculateDataRange(dataMin.getFullYear(), dataMax.getFullYear(), false);\n\n            // Calculate year sequence\n            let sequence = NumericSequence.calculate(NumericSequenceRange.calculate(0, yearsRange.max - yearsRange.min), expectedCount, 0, null, null, [1, 2, 5]);\n            let newMinYear = Math.floor(yearsRange.min / sequence.interval) * sequence.interval; \n            let date = new Date(newMinYear, 0, 1);\n\n            // Convert to date sequence\n            let result = DateTimeSequence.fromNumericSequence(date, sequence, DateTimeUnit.Year);\n            return result;\n        }\n\n        public static calculateMonths(dataMin: Date, dataMax: Date, expectedCount: number): DateTimeSequence {\n            debug.assertValue(dataMin, \"dataMin\");\n            debug.assertValue(dataMax, \"dataMax\");\n            debug.assert(expectedCount === undefined || (expectedCount >= DateTimeSequence.MIN_COUNT && expectedCount <= DateTimeSequence.MAX_COUNT), \"expected count is out of range\");\n\n            // Calculate range\n            let minYear = dataMin.getFullYear();\n            let maxYear = dataMax.getFullYear();\n            let minMonth = dataMin.getMonth();\n            let maxMonth = (maxYear - minYear) * 12 + dataMax.getMonth();\n            let date = new Date(minYear, 0, 1);\n            \n            // Calculate month sequence\n            let sequence = NumericSequence.calculateUnits(minMonth, maxMonth, expectedCount, [1, 2, 3, 6, 12]);\n\n            // Convert to date sequence\n            let result = DateTimeSequence.fromNumericSequence(date, sequence, DateTimeUnit.Month);\n            return result;\n        }\n\n        public static calculateWeeks(dataMin: Date, dataMax: Date, expectedCount: number): DateTimeSequence {\n            debug.assertValue(dataMin, \"dataMin\");\n            debug.assertValue(dataMax, \"dataMax\");\n            debug.assert(expectedCount === undefined || (expectedCount >= DateTimeSequence.MIN_COUNT && expectedCount <= DateTimeSequence.MAX_COUNT), \"expected count is out of range\");\n\n            let firstDayOfWeek = 0;\n            let minDayOfWeek = dataMin.getDay();\n            let dayOffset = (minDayOfWeek - firstDayOfWeek + 7) % 7;\n            let minDay = dataMin.getDate() - dayOffset;\n\n            // Calculate range\n            let date = new Date(dataMin.getFullYear(), dataMin.getMonth(), minDay);\n            let min = 0;\n            let max = Double.ceilWithPrecision(DateTimeSequence.getDelta(date, dataMax, DateTimeUnit.Week));\n\n            // Calculate week sequence\n            let sequence = NumericSequence.calculateUnits(min, max, expectedCount, [1, 2, 4, 8]);\n\n            // Convert to date sequence\n            let result = DateTimeSequence.fromNumericSequence(date, sequence, DateTimeUnit.Week);\n            return result;\n        }\n\n        public static calculateDays(dataMin: Date, dataMax: Date, expectedCount: number): DateTimeSequence {\n            debug.assertValue(dataMin, \"dataMin\");\n            debug.assertValue(dataMax, \"dataMax\");\n            debug.assert(expectedCount === undefined || (expectedCount >= DateTimeSequence.MIN_COUNT && expectedCount <= DateTimeSequence.MAX_COUNT), \"expected count is out of range\");\n\n            // Calculate range\n            let date = new Date(dataMin.getFullYear(), dataMin.getMonth(), dataMin.getDate());\n            let min = 0;\n            let max = Double.ceilWithPrecision(DateTimeSequence.getDelta(dataMin, dataMax, DateTimeUnit.Day));\n            \n            // Calculate day sequence\n            let sequence = NumericSequence.calculateUnits(min, max, expectedCount, [1, 2, 7, 14]);\n\n            // Convert to date sequence\n            let result = DateTimeSequence.fromNumericSequence(date, sequence, DateTimeUnit.Day);\n            return result;\n        }\n\n        public static calculateHours(dataMin: Date, dataMax: Date, expectedCount: number): DateTimeSequence {\n            debug.assertValue(dataMin, \"dataMin\");\n            debug.assertValue(dataMax, \"dataMax\");\n            debug.assert(expectedCount === undefined || (expectedCount >= DateTimeSequence.MIN_COUNT && expectedCount <= DateTimeSequence.MAX_COUNT), \"expected count is out of range\");\n\n            // Calculate range\n            let date = new Date(dataMin.getFullYear(), dataMin.getMonth(), dataMin.getDate());\n            let min = Double.floorWithPrecision(DateTimeSequence.getDelta(date, dataMin, DateTimeUnit.Hour));\n            let max = Double.ceilWithPrecision(DateTimeSequence.getDelta(date, dataMax, DateTimeUnit.Hour));\n            \n            // Calculate hour sequence\n            let sequence = NumericSequence.calculateUnits(min, max, expectedCount, [1, 2, 3, 6, 12, 24]);\n\n            // Convert to date sequence\n            let result = DateTimeSequence.fromNumericSequence(date, sequence, DateTimeUnit.Hour);\n            return result;\n        }\n\n        public static calculateMinutes(dataMin: Date, dataMax: Date, expectedCount: number): DateTimeSequence {\n            debug.assertValue(dataMin, \"dataMin\");\n            debug.assertValue(dataMax, \"dataMax\");\n            debug.assert(expectedCount === undefined || (expectedCount >= DateTimeSequence.MIN_COUNT && expectedCount <= DateTimeSequence.MAX_COUNT), \"expected count is out of range\");\n\n            // Calculate range\n            let date = new Date(dataMin.getFullYear(), dataMin.getMonth(), dataMin.getDate(), dataMin.getHours());\n            let min = Double.floorWithPrecision(DateTimeSequence.getDelta(date, dataMin, DateTimeUnit.Minute));\n            let max = Double.ceilWithPrecision(DateTimeSequence.getDelta(date, dataMax, DateTimeUnit.Minute));\n\n            // Calculate minutes numeric sequence\n            let sequence = NumericSequence.calculateUnits(min, max, expectedCount, [1, 2, 5, 10, 15, 30, 60, 60 * 2, 60 * 3, 60 * 6, 60 * 12, 60 * 24]);\n\n            // Convert to date sequence\n            let result = DateTimeSequence.fromNumericSequence(date, sequence, DateTimeUnit.Minute);\n            return result;\n        }\n\n        public static calculateSeconds(dataMin: Date, dataMax: Date, expectedCount: number): DateTimeSequence {\n            debug.assertValue(dataMin, \"dataMin\");\n            debug.assertValue(dataMax, \"dataMax\");\n            debug.assert(expectedCount === undefined || (expectedCount >= DateTimeSequence.MIN_COUNT && expectedCount <= DateTimeSequence.MAX_COUNT), \"expected count is out of range\");\n\n            // Calculate range\n            let date = new Date(dataMin.getFullYear(), dataMin.getMonth(), dataMin.getDate(), dataMin.getHours(), dataMin.getMinutes());\n            let min = Double.floorWithPrecision(DateTimeSequence.getDelta(date, dataMin, DateTimeUnit.Second));\n            let max = Double.ceilWithPrecision(DateTimeSequence.getDelta(date, dataMax, DateTimeUnit.Second));\n\n            // Calculate minutes numeric sequence\n            let sequence = NumericSequence.calculateUnits(min, max, expectedCount, [1, 2, 5, 10, 15, 30, 60, 60 * 2, 60 * 5, 60 * 10, 60 * 15, 60 * 30, 60 * 60]);\n\n            // Convert to date sequence\n            let result = DateTimeSequence.fromNumericSequence(date, sequence, DateTimeUnit.Second);\n            return result;\n        }\n\n        public static calculateMilliseconds(dataMin: Date, dataMax: Date, expectedCount: number): DateTimeSequence {\n            debug.assertValue(dataMin, \"dataMin\");\n            debug.assertValue(dataMax, \"dataMax\");\n            debug.assert(expectedCount === undefined || (expectedCount >= DateTimeSequence.MIN_COUNT && expectedCount <= DateTimeSequence.MAX_COUNT), \"expected count is out of range\");\n\n            // Calculate range\n            let date = new Date(dataMin.getFullYear(), dataMin.getMonth(), dataMin.getDate(), dataMin.getHours(), dataMin.getMinutes(), dataMin.getSeconds());\n            let min = DateTimeSequence.getDelta(date, dataMin, DateTimeUnit.Millisecond);\n            let max = DateTimeSequence.getDelta(date, dataMax, DateTimeUnit.Millisecond);\n            \n            // Calculate milliseconds numeric sequence\n            let sequence = NumericSequence.calculate(NumericSequenceRange.calculate(min, max), expectedCount, 0);\n\n            // Convert to date sequence\n            let result = DateTimeSequence.fromNumericSequence(date, sequence, DateTimeUnit.Millisecond);\n            return result;\n        }\n\n        public static addInterval(value: Date, interval: number, unit: DateTimeUnit): Date {\n            interval = Math.round(interval);\n            switch (unit) {\n                case DateTimeUnit.Year:\n                    return DateUtils.addYears(value, interval);\n                case DateTimeUnit.Month:\n                    return DateUtils.addMonths(value, interval);\n                case DateTimeUnit.Week:\n                    return DateUtils.addWeeks(value, interval);\n                case DateTimeUnit.Day:\n                    return DateUtils.addDays(value, interval);\n                case DateTimeUnit.Hour:\n                    return DateUtils.addHours(value, interval);\n                case DateTimeUnit.Minute:\n                    return DateUtils.addMinutes(value, interval);\n                case DateTimeUnit.Second:\n                    return DateUtils.addSeconds(value, interval);\n                case DateTimeUnit.Millisecond:\n                    return DateUtils.addMilliseconds(value, interval);\n            }\n        }\n\n        private static fromNumericSequence(date: Date, sequence: NumericSequence, unit: DateTimeUnit) { \n            let result = new DateTimeSequence(unit);\n            for (let i = 0; i < sequence.sequence.length; i++) { \n                let x: number = sequence.sequence[i];\n                let d: Date = DateTimeSequence.addInterval(date, x, unit);\n                result.add(d);\n            }\n            result.interval = sequence.interval;\n            result.intervalOffset = sequence.intervalOffset;\n            return result;\n        }\n\n        private static getDelta(min: Date, max: Date, unit: DateTimeUnit): number {\n            let delta: number = 0;\n            switch (unit) {\n                case DateTimeUnit.Year:\n                    delta = max.getFullYear() - min.getFullYear();\n                    break;\n                case DateTimeUnit.Month:\n                    delta = (max.getFullYear() - min.getFullYear()) * 12 + max.getMonth() - min.getMonth();\n                    break;\n                case DateTimeUnit.Week:\n                    delta = (max.getTime() - min.getTime()) / (7 * 24 * 3600000);\n                    break;\n                case DateTimeUnit.Day:\n                    delta = (max.getTime() - min.getTime()) / (24 * 3600000);\n                    break;\n                case DateTimeUnit.Hour:\n                    delta = (max.getTime() - min.getTime()) / 3600000;\n                    break;\n                case DateTimeUnit.Minute:\n                    delta = (max.getTime() - min.getTime()) / 60000;\n                    break;\n                case DateTimeUnit.Second:\n                    delta = (max.getTime() - min.getTime()) / 1000;\n                    break;\n                case DateTimeUnit.Millisecond:\n                    delta = max.getTime() - min.getTime();\n                    break;\n            }\n            return delta;\n        }\n\n        public static getIntervalUnit(min:Date, max:Date, maxCount: number): DateTimeUnit {\n            maxCount = Math.max(maxCount, 2);\n            let totalDays = DateTimeSequence.getDelta(min, max, DateTimeUnit.Day);\n            if (totalDays > 356 && totalDays >= 30 * 6 * maxCount)\n                return DateTimeUnit.Year;\n            if (totalDays > 60 && totalDays > 7 * maxCount)\n                return DateTimeUnit.Month;\n            if (totalDays > 14 && totalDays > 2 * maxCount)\n                return DateTimeUnit.Week;\n            let totalHours = DateTimeSequence.getDelta(min, max, DateTimeUnit.Hour);\n            if (totalDays > 2 && totalHours > 12 * maxCount)\n                return DateTimeUnit.Day;\n            if (totalHours >= 24 && totalHours >= maxCount)\n                return DateTimeUnit.Hour;\n            let totalMinutes = DateTimeSequence.getDelta(min, max, DateTimeUnit.Minute);\n            if (totalMinutes > 2 && totalMinutes >= maxCount)\n                return DateTimeUnit.Minute;\n            let totalSeconds = DateTimeSequence.getDelta(min, max, DateTimeUnit.Second);\n            if (totalSeconds > 2 && totalSeconds >= 0.8 * maxCount)\n                return DateTimeUnit.Second;\n            let totalMilliseconds = DateTimeSequence.getDelta(min, max, DateTimeUnit.Millisecond);\n            if (totalMilliseconds > 0)\n                return DateTimeUnit.Millisecond;\n  \n            // If the size of the range is 0 we need to guess the unit based on the date's non-zero values starting with milliseconds\n            let date = min;\n            if (date.getMilliseconds() !== 0)\n                return DateTimeUnit.Millisecond;\n            if (date.getSeconds() !== 0)\n                return DateTimeUnit.Second;\n            if (date.getMinutes() !== 0)\n                return DateTimeUnit.Minute;\n            if (date.getHours() !== 0)\n                return DateTimeUnit.Hour;\n            if (date.getDate() !== 1)\n                return DateTimeUnit.Day;\n            if (date.getMonth() !== 0)\n                return DateTimeUnit.Month;\n            \n            return DateTimeUnit.Year;\n        }\n    }\n\n    /** DateUtils module provides DateTimeSequence with set of additional date manipulation routines */\n    export module DateUtils { \n        let MonthDays = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n        let MonthDaysLeap = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n\n        /**\n         * Returns bool indicating weither the provided year is a leap year.\n         * @param year - year value\n         */\n        function isLeap(year: number): boolean { \n            return ((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0);\n        }\n\n        /** \n         * Returns number of days in the provided year/month.\n         * @param year - year value\n         * @param month - month value\n         */\n        function getMonthDays(year: number, month: number) { \n            return isLeap(year) ? MonthDaysLeap[month] : MonthDays[month];\n        }\n\n        /**\n         * Adds a specified number of years to the provided date.\n         * @param date - date value\n         * @param yearDelta - number of years to add\n         */\n        export function addYears(date: Date, yearDelta: number): Date { \n            let year = date.getFullYear();\n            let month = date.getMonth();\n            let day = date.getDate();\n            let isLeapDay = month === 2 && day === 29;\n\n            let result = new Date(date.getTime());\n            year = year + yearDelta;\n            if (isLeapDay && !isLeap(year)) {\n                day = 28;\n            } \n            result.setFullYear(year, month, day);\n            return result;\n        }\n\n        /** \n         * Adds a specified number of months to the provided date.\n         * @param date - date value\n         * @param monthDelta - number of months to add\n         */\n        export function addMonths(date: Date, monthDelta: number): Date { \n            let year = date.getFullYear();\n            let month = date.getMonth();\n            let day = date.getDate();\n           \n            let result = new Date(date.getTime());\n            year += (monthDelta - (monthDelta % 12)) / 12;\n            month += monthDelta % 12;\n\n            // VSTS 1325771: Certain column charts don't display any data\n            // Wrap arround the month if is after december (value 11)\n            if (month > 11) {\n                month = month % 12;\n                year++;\n            }\n\n            day = Math.min(day, getMonthDays(year, month));\n            result.setFullYear(year, month, day);\n            return result;\n        }\n\n        /** \n         * Adds a specified number of weeks to the provided date.\n         * @param date - date value\n         * @param weeks - number of weeks to add\n         */\n        export function addWeeks(date: Date, weeks: number): Date { \n            return addDays(date, weeks * 7);\n        }\n\n        /** \n         * Adds a specified number of days to the provided date.\n         * @param date - date value\n         * @param days - number of days to add\n         */\n        export function addDays(date: Date, days: number): Date { \n            let year = date.getFullYear();\n            let month = date.getMonth();\n            let day = date.getDate();           \n            let result = new Date(date.getTime());\n            result.setFullYear(year, month, day + days);\n            return result;\n        }\n\n        /**\n         * Adds a specified number of hours to the provided date.\n         * @param date - date value\n         * @param hours - number of hours to add\n         */\n        export function addHours(date: Date, hours: number): Date { \n            return new Date(date.getTime() + hours * 3600000);\n        }\n\n        /**\n         * Adds a specified number of minutes to the provided date.\n         * @param date - date value\n         * @param minutes - number of minutes to add\n         */\n        export function addMinutes(date: Date, minutes: number): Date { \n            return new Date(date.getTime() + minutes * 60000);\n        }\n\n        /** \n         * Adds a specified number of seconds to the provided date.\n         * @param date - date value\n         * @param seconds - number of seconds to add\n         */\n        export function addSeconds(date: Date, seconds: number): Date { \n            return new Date(date.getTime() + seconds * 1000);\n        }\n\n        /** \n         * Adds a specified number of milliseconds to the provided date.\n         * @param date - date value\n         * @param milliseconds - number of milliseconds to add\n         */\n        export function addMilliseconds(date: Date, milliseconds: number): Date { \n            return new Date(date.getTime() + milliseconds);\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi {\n    // Constants\n    const maxExponent = 24;\n    const defaultScientificBigNumbersBoundary = 1E15;\n    const scientificSmallNumbersBoundary = 1E-4;\n    const PERCENTAGE_FORMAT = '%';\n    const SCIENTIFIC_FORMAT = 'E+0';\n    const DEFAULT_SCIENTIFIC_FORMAT = '0.##' + SCIENTIFIC_FORMAT;\n\n    // Regular expressions\n    /**\n     * This regex looks for strings that match one of the following conditions:\n     *   - Optionally contain \"0\", \"#\", followed by a period, followed by at least one \"0\" or \"#\" (Ex. ###,000.###)\n     *   - Contains at least one of \"0\", \"#\", or \",\" (Ex. ###,000)\n     *   - Contain a \"g\" (indicates to use the general .NET numeric format string)\n     * The entire string (start to end) must match, and the match is not case-sensitive.\n     */\n    const SUPPORTED_SCIENTIFIC_FORMATS = /^([0\\#,]*\\.[0\\#]+|[0\\#,]+|g)$/i;\n\n    export class DisplayUnit {\n        // Fields\n        public value: number;\n        public title: string;\n        public labelFormat: string;\n        public applicableRangeMin: number;\n        public applicableRangeMax: number;\n\n        // Methods\n        public project(value: number): number {\n            if (this.value) {\n                return Double.removeDecimalNoise(value / this.value);\n            } else {\n                return value;\n            }\n        }\n\n        public reverseProject(value: number): number {\n            if (this.value) {\n                return value * this.value;\n            } else {\n                return value;\n            }\n        }\n\n        public isApplicableTo(value: number): boolean {\n            value = Math.abs(value);\n            let precision = Double.getPrecision(value, 3);\n            return Double.greaterOrEqualWithPrecision(value, this.applicableRangeMin, precision) && Double.lessWithPrecision(value, this.applicableRangeMax, precision);\n        }\n\n        public isScaling(): boolean {\n            return this.value > 1;\n        }\n    }\n\n    export class DisplayUnitSystem {\n        // Fields\n        public units: DisplayUnit[];\n        public displayUnit: DisplayUnit;\n        private unitBaseValue: number;\n        protected static UNSUPPORTED_FORMATS = /^(p\\d*)|(.*\\%)|(e\\d*)$/i;\n\n        // Constructor\n        constructor(units?: DisplayUnit[]) {\n            this.units = units ? units : [];\n        }\n\n        // Properties\n        public get title(): string {\n            return this.displayUnit ? this.displayUnit.title : undefined;\n        }\n\n        // Methods\n        public update(value: number): void {\n            if (value === undefined)\n                return;\n\n            this.unitBaseValue = value;\n            this.displayUnit = this.findApplicableDisplayUnit(value);\n        }\n\n        private findApplicableDisplayUnit(value: number): DisplayUnit {\n            for (let unit of this.units) {\n                if (unit.isApplicableTo(value))\n                    return unit;\n            }\n\n            return undefined;\n        }\n\n        public format(value: number, format: string, decimals?: number, trailingZeros?: boolean): string {\n            debug.assert(typeof (value) === \"number\", \"value must be a number\");\n            if (this.isFormatSupported(format)) {\n                decimals = this.getNumberOfDecimalsForFormatting(format, decimals);\n\n                if (this.hasScientitifcFormat(format)) {\n                    return this.formatHelper(value, '', format, decimals, trailingZeros);\n                }\n                if (this.isScalingUnit() && this.shouldRespectScalingUnit(format)) {\n                    return this.formatHelper(this.displayUnit.project(value), this.displayUnit.labelFormat, format, decimals, trailingZeros);\n                }\n                if (decimals != null) {\n                    return this.formatHelper(value, '', format, decimals, trailingZeros);\n                }\n            }\n            \n            return formattingService.formatValue(value, format);\n        }\n\n        public isFormatSupported(format: string): boolean {\n            return !DisplayUnitSystem.UNSUPPORTED_FORMATS.test(format);\n        }\n\n        public isPercentageFormat(format: string): boolean {\n            return format && format.indexOf(PERCENTAGE_FORMAT) >= 0;\n        }\n\n        public shouldRespectScalingUnit(format: string): boolean {\n            return !this.isPercentageFormat(format);\n        }\n\n        public getNumberOfDecimalsForFormatting(format: string, decimals?: number) {\n            return decimals;\n        }\n\n        public isScalingUnit(): boolean {\n            return this.displayUnit && this.displayUnit.isScaling();\n        }\n\n        private formatHelper(value: number, nonScientificFormat: string, format: string, decimals?: number, trailingZeros?: boolean) {\n            // If the format is \"general\" and we want to override the number of decimal places then use the default numeric format string.\n            if ((format === 'g' || format === 'G') && decimals != null)\n                format = visuals.valueFormatter.DefaultNumericFormat;\n\n            format = NumberFormat.addDecimalsToFormat(format, decimals, trailingZeros);\n\n            if (format && !formattingService.isStandardNumberFormat(format))\n                return formattingService.formatNumberWithCustomOverride(value, format, nonScientificFormat);\n\n            if (!format)\n                format = 'G';\n            if (!nonScientificFormat)\n                nonScientificFormat = '{0}';\n\n            let text = formattingService.formatValue(value, format);\n            return formattingService.format(nonScientificFormat, [text]);\n        }\n\n        /** Formats a single value by choosing an appropriate base for the DisplayUnitSystem before formatting. */\n        public formatSingleValue(value: number, format: string, decimals?: number, trailingZeros?: boolean): string {\n            // Change unit base to a value appropriate for this value\n            this.update(this.shouldUseValuePrecision(value) ? Double.getPrecision(value, 8) : value);\n\n            return this.format(value, format, decimals, trailingZeros);\n        }\n\n        private shouldUseValuePrecision(value: number): boolean {\n            if (this.units.length === 0)\n                return true;\n\n            // Check if the value is big enough to have a valid unit by checking against the smallest unit (that it's value bigger than 1).\n            let applicableRangeMin: number = 0;\n            for (let i = 0; i < this.units.length; i++) {\n                if (this.units[i].isScaling()) {\n                    applicableRangeMin = this.units[i].applicableRangeMin;\n                    break;\n                }\n            }\n\n            return Math.abs(value) < applicableRangeMin;\n        }\n\n        protected isScientific(value: number): boolean {\n            return value < - defaultScientificBigNumbersBoundary || value > defaultScientificBigNumbersBoundary ||\n                (-scientificSmallNumbersBoundary < value && value < scientificSmallNumbersBoundary && value !== 0);\n        }\n\n        protected hasScientitifcFormat(format: string): boolean {\n            return format && format.toUpperCase().indexOf(\"E\") !== -1;\n        }\n\n        protected supportsScientificFormat(format: string): boolean {\n            if (format)\n                return SUPPORTED_SCIENTIFIC_FORMATS.test(format);\n\n            return true;\n        }\n\n        protected shouldFallbackToScientific(value: number, format: string): boolean {\n            return !this.hasScientitifcFormat(format)\n                && this.supportsScientificFormat(format)\n                && this.isScientific(value);\n        }\n\n        protected getScientificFormat(data: number, format: string, decimals: number, trailingZeros: boolean): string {\n            // Use scientific format outside of the range\n            if (this.isFormatSupported(format) && this.shouldFallbackToScientific(data, format)) {\n                let numericFormat = NumberFormat.getNumericFormat(data, format);\n                if (decimals)\n                    numericFormat = NumberFormat.addDecimalsToFormat(numericFormat ? numericFormat : '0', Math.abs(decimals), trailingZeros);\n\n                if (numericFormat)\n                    return numericFormat + SCIENTIFIC_FORMAT;\n                else\n                    return DEFAULT_SCIENTIFIC_FORMAT;\n            }\n\n            return format;\n        }\n    }\n\n    /** Provides a unit system that is defined by formatting in the model, and is suitable for visualizations shown in single number visuals in explore mode. */\n    export class NoDisplayUnitSystem extends DisplayUnitSystem {\n        // Constructor\n        constructor() {\n            super([]);\n        }\n    }\n\n    /** Provides a unit system that creates a more concise format for displaying values. This is suitable for most of the cases where\n        we are showing values (chart axes) and as such it is the default unit system. */\n    export class DefaultDisplayUnitSystem extends DisplayUnitSystem {\n        private static units: DisplayUnit[];\n\n        // Constructor\n        constructor(unitLookup: (exponent: number) => DisplayUnitSystemNames) {\n            super(DefaultDisplayUnitSystem.getUnits(unitLookup));\n        }\n\n        // Methods\n        public format(data: number, format: string, decimals?: number, trailingZeros?: boolean): string {\n            format = this.getScientificFormat(data, format, decimals, trailingZeros);\n\n            return super.format(data, format, decimals, trailingZeros);\n        }\n\n        public static reset(): void {\n            DefaultDisplayUnitSystem.units = null;\n        }\n\n        private static getUnits(unitLookup: (exponent: number) => DisplayUnitSystemNames): DisplayUnit[] {\n            if (!DefaultDisplayUnitSystem.units) {\n                DefaultDisplayUnitSystem.units = createDisplayUnits(unitLookup, (value: number, previousUnitValue: number, min: number) => {\n                    // When dealing with millions/billions/trillions we need to switch to millions earlier: for example instead of showing 100K 200K 300K we should show 0.1M 0.2M 0.3M etc\n                    if (value - previousUnitValue >= 1000) {\n                        return value / 10;\n                    }\n\n                    return min;\n                });\n\n                // Ensure last unit has max of infinity\n                DefaultDisplayUnitSystem.units[DefaultDisplayUnitSystem.units.length - 1].applicableRangeMax = Infinity;\n            }\n            return DefaultDisplayUnitSystem.units;\n        }\n    }\n\n    /** Provides a unit system that creates a more concise format for displaying values, but only allows showing a unit if we have at least\n        one of those units (e.g. 0.9M is not allowed since it's less than 1 million). This is suitable for cases such as dashboard tiles\n        where we have restricted space but do not want to show partial units. */\n    export class WholeUnitsDisplayUnitSystem extends DisplayUnitSystem {\n        private static units: DisplayUnit[];\n\n        // Constructor\n        constructor(unitLookup: (exponent: number) => DisplayUnitSystemNames) {\n            super(WholeUnitsDisplayUnitSystem.getUnits(unitLookup));\n        }\n\n        public static reset(): void {\n            WholeUnitsDisplayUnitSystem.units = null;\n        }\n\n        private static getUnits(unitLookup: (exponent: number) => DisplayUnitSystemNames): DisplayUnit[] {\n            if (!WholeUnitsDisplayUnitSystem.units) {\n                WholeUnitsDisplayUnitSystem.units = createDisplayUnits(unitLookup);\n\n                // Ensure last unit has max of infinity\n                WholeUnitsDisplayUnitSystem.units[WholeUnitsDisplayUnitSystem.units.length - 1].applicableRangeMax = Infinity;\n            }\n\n            return WholeUnitsDisplayUnitSystem.units;\n        }\n\n        public format(data: number, format: string, decimals?: number, trailingZeros?: boolean): string {\n            format = this.getScientificFormat(data, format, decimals, trailingZeros);\n\n            return super.format(data, format, decimals, trailingZeros);\n        }\n    }\n\n    export class DataLabelsDisplayUnitSystem extends DisplayUnitSystem {\n\n        // Constants\n        private static AUTO_DISPLAYUNIT_VALUE = 0;\n        private static NONE_DISPLAYUNIT_VALUE = 1;\n        protected static UNSUPPORTED_FORMATS = /^(e\\d*)$/i;\n\n        private static units: DisplayUnit[];\n\n        constructor(unitLookup: (exponent: number) => DisplayUnitSystemNames) {\n            super(DataLabelsDisplayUnitSystem.getUnits(unitLookup));\n        }\n\n        public isFormatSupported(format: string): boolean {\n            return !DataLabelsDisplayUnitSystem.UNSUPPORTED_FORMATS.test(format);\n        }\n\n        private static getUnits(unitLookup: (exponent: number) => DisplayUnitSystemNames): DisplayUnit[] {\n            if (!DataLabelsDisplayUnitSystem.units) {\n                let units = [];\n                let adjustMinBasedOnPreviousUnit = (value: number, previousUnitValue: number, min: number): number => {\n                    // Never returns true, we are always ignoring\n                    // We do not early switch (e.g. 100K instead of 0.1M)\n                    // Intended? If so, remove this function, otherwise, remove if statement\n                    if (value === -1)\n                        if (value - previousUnitValue >= 1000) {\n                            return value / 10;\n                        }\n                    return min;\n                };\n\n                // Add Auto & None\n                let names = unitLookup(-1);\n                addUnitIfNonEmpty(units, DataLabelsDisplayUnitSystem.AUTO_DISPLAYUNIT_VALUE, names.title, names.format, adjustMinBasedOnPreviousUnit);\n\n                names = unitLookup(0);\n                addUnitIfNonEmpty(units, DataLabelsDisplayUnitSystem.NONE_DISPLAYUNIT_VALUE, names.title, names.format, adjustMinBasedOnPreviousUnit);\n\n                // Add normal units\n                DataLabelsDisplayUnitSystem.units = units.concat(createDisplayUnits(unitLookup, adjustMinBasedOnPreviousUnit));\n\n                // Ensure last unit has max of infinity\n                DataLabelsDisplayUnitSystem.units[DataLabelsDisplayUnitSystem.units.length - 1].applicableRangeMax = Infinity;\n            }\n            return DataLabelsDisplayUnitSystem.units;\n        }\n\n        public format(data: number, format: string, decimals?: number, trailingZeros?: boolean): string {\n            format = this.getScientificFormat(data, format, decimals, trailingZeros);\n\n            return super.format(data, format, decimals, trailingZeros);\n        }\n    }\n\n    export interface DisplayUnitSystemNames {\n        title: string;\n        format: string;\n    }\n\n    function createDisplayUnits(unitLookup: (exponent: number) => DisplayUnitSystemNames, adjustMinBasedOnPreviousUnit?: (value: number, previousUnitValue: number, min: number) => number) {\n        let units = [];\n        for (let i = 3; i < maxExponent; i++) {\n            let names = unitLookup(i);\n            if (names)\n                addUnitIfNonEmpty(units, Double.pow10(i), names.title, names.format, adjustMinBasedOnPreviousUnit);\n        }\n\n        return units;\n    }\n\n    function addUnitIfNonEmpty(\n        units: DisplayUnit[],\n        value: number,\n        title: string,\n        labelFormat: string,\n        adjustMinBasedOnPreviousUnit?: (value: number, previousUnitValue: number, min: number) => number): void {\n        if (title || labelFormat) {\n            let min = value;\n\n            if (units.length > 0) {\n                let previousUnit = units[units.length - 1];\n\n                if (adjustMinBasedOnPreviousUnit)\n                    min = adjustMinBasedOnPreviousUnit(value, previousUnit.value, min);\n\n                previousUnit.applicableRangeMax = min;\n            }\n            let unit = new DisplayUnit();\n            unit.value = value;\n            unit.applicableRangeMin = min;\n            unit.applicableRangeMax = min * 1000;\n            unit.title = title;\n            unit.labelFormat = labelFormat;\n            units.push(unit);\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi {\n    export class NumericSequence {\n        private static MIN_COUNT: number = 1;\n        private static MAX_COUNT: number = 1000;\n\n        private maxAllowedMargin: number;\n        private canExtendMin: boolean;\n        private canExtendMax: boolean;\n\n        public interval: number;\n        public intervalOffset: number;\n        public min: number;\n        public max: number;\n        public precision: number;\n        public sequence: number[];\n\n        public static calculate (range: NumericSequenceRange, expectedCount: number, maxAllowedMargin?: number, minPower?: number, useZeroRefPoint?: boolean, steps?: number[]): NumericSequence {\n            debug.assertValue(range, \"range\");\n            debug.assert(expectedCount === undefined || (expectedCount >= NumericSequence.MIN_COUNT && expectedCount <= NumericSequence.MAX_COUNT), \"expectedCount\");\n            debug.assert(minPower === undefined|| (minPower >= Double.MIN_EXP && minPower <= Double.MAX_EXP), \"minPower\");\n            debug.assert(maxAllowedMargin === undefined|| (maxAllowedMargin >= 0), \"maxAllowedMargin\");\n\n            let result = new NumericSequence();\n\n            if (expectedCount === undefined)\n                expectedCount = 10;\n            else\n                expectedCount = Double.ensureInRange(expectedCount, NumericSequence.MIN_COUNT, NumericSequence.MAX_COUNT);\n            if (minPower === undefined)\n                minPower = Double.MIN_EXP;\n            if (useZeroRefPoint === undefined)\n                useZeroRefPoint = false;\n            if (maxAllowedMargin === undefined)\n                maxAllowedMargin = 1;\n            if (steps === undefined)\n                steps = [1, 2, 5];\n\n            // Handle single stop case\n            if (range.forcedSingleStop) {\n                result.interval = range.getSize();\n                result.intervalOffset = result.interval - (range.forcedSingleStop - range.min);\n                result.min = range.min;\n                result.max = range.max;\n                result.sequence = [range.forcedSingleStop];\n                return result;\n            }\n\n            let interval = 0;\n            let min = 0;\n            let max = 9;\n            let canExtendMin = maxAllowedMargin > 0 && !range.hasFixedMin;\n            let canExtendMax = maxAllowedMargin > 0 && !range.hasFixedMax;\n\n            let size = range.getSize();\n            let exp = Double.log10(size);\n\n            // Account for Exp of steps\n            let stepExp = Double.log10(steps[0]);\n            exp = exp - stepExp;\n\n            // Account for MaxCount\n            let expectedCountExp = Double.log10(expectedCount);\n            exp = exp - expectedCountExp;\n\n            // Account for MinPower\n            exp = Math.max(exp, minPower - stepExp + 1);\n            let count = undefined;\n            // Create array of \"good looking\" numbers\n            if (interval !== 0) {\n                // If explicit interval is defined - use it instead of the steps array.\n                let power = Double.pow10(exp);\n                let roundMin = Double.floorToPrecision(range.min, power);\n                let roundMax = Double.ceilToPrecision(range.max, power);\n                let roundRange = NumericSequenceRange.calculateFixedRange(roundMin, roundMax);\n\n                roundRange.shrinkByStep(range, interval);\n                min = roundRange.min;\n                max = roundRange.max;\n                count = Math.floor(roundRange.getSize() / interval);\n            }\n            else {\n                // No interval defined -> find optimal interval\n                let dexp;\n                for (dexp = 0; dexp < 3; dexp++) {\n                    let e = exp + dexp;\n                    let power = Double.pow10(e);\n\n                    let roundMin = Double.floorToPrecision(range.min, power);\n                    let roundMax = Double.ceilToPrecision(range.max, power);\n\n                    // Go throught the steps array looking for the smallest step that produces the right interval count.\n                    let stepsCount = steps.length;\n                    let stepPower = Double.pow10(e - 1);\n                    for (let i = 0; i < stepsCount; i++) {\n                        let step = steps[i] * stepPower;\n                        let roundRange = NumericSequenceRange.calculateFixedRange(roundMin, roundMax, useZeroRefPoint);\n                        roundRange.shrinkByStep(range, step);\n\n                        // If the range is based on Data we might need to extend it to provide nice data margins.\n                        if (canExtendMin && range.min === roundRange.min && maxAllowedMargin >= 1)\n                            roundRange.min -= step;\n                        if (canExtendMax && range.max === roundRange.max && maxAllowedMargin >= 1)\n                            roundRange.max += step;\n\n                        // Count the intervals\n                        count = Double.ceilWithPrecision(roundRange.getSize() / step);\n\n                        if (count <= expectedCount || (dexp === 2 && i === stepsCount - 1) || (expectedCount === 1 && count === 2 && (step > range.getSize() || (range.min < 0 && range.max > 0 && step * 2 >= range.getSize())))) {\n                            interval = step;\n                            min = roundRange.min;\n                            max = roundRange.max;\n                            break;\n                        }\n                    }\n\n                    // Increase the scale power until the interval is found\n                    if (interval !== 0)\n                        break;\n                }\n            }\n\n            // Avoid extreme count cases (>1000 ticks)\n            if (count > expectedCount * 32 || count > NumericSequence.MAX_COUNT) {\n                count = Math.min(expectedCount * 32, NumericSequence.MAX_COUNT);\n                interval = (max - min) / count;\n            }\n\n            result.min = min;\n            result.max = max;\n            result.interval = interval;\n            result.intervalOffset = min - range.min;\n            result.maxAllowedMargin = maxAllowedMargin;\n            result.canExtendMin = canExtendMin;\n            result.canExtendMax = canExtendMax;\n\n            // Fill in the Sequence\n            let precision = Double.getPrecision(interval, 0);\n            result.precision = precision;\n\n            let sequence = [];\n\n            let x = Double.roundToPrecision(min, precision);\n            sequence.push(x);\n            for (let i = 0; i < count; i++) {\n                x = Double.roundToPrecision(x + interval, precision);\n                sequence.push(x);\n            }\n            \n            result.sequence = sequence;\n\n            result.trimMinMax(range.min, range.max);\n\n            return result;\n        }\n\n        /** \n         * Calculates the sequence of int numbers which are mapped to the multiples of the units grid. \n         * @min - The minimum of the range.\n         * @max - The maximum of the range.\n         * @maxCount - The max count of intervals.\n         * @steps - array of intervals.\n         */\n        public static calculateUnits(min: number, max: number, maxCount: number, steps: number[]): NumericSequence {\n            // Initialization actions\n            maxCount = Double.ensureInRange(maxCount, NumericSequence.MIN_COUNT, NumericSequence.MAX_COUNT);\n            if (min === max) {\n                max = min + 1;\n            }\n            let stepCount = 0;\n            let step = 0;\n\n            // Calculate step\n            for (let i = 0; i < steps.length; i++)\n            {\n                step = steps[i];\n                let maxStepCount = Double.ceilWithPrecision(max / step);\n                let minStepCount = Double.floorWithPrecision(min / step);\n                stepCount = maxStepCount - minStepCount;\n                    \n                if (stepCount <= maxCount) {\n                    break;\n                }\n            }\n\n            // Calculate the offset\n            let offset = -min;\n            offset = offset % step;\n\n            // Create sequence\n            let result = new NumericSequence();\n            result.sequence = [];\n            for (let x = min + offset; ; x += step)\n            {\n                result.sequence.push(x);\n                if (x >= max)\n                    break;\n            }\n            result.interval = step;\n            result.intervalOffset = offset;\n            result.min = result.sequence[0];\n            result.max = result.sequence[result.sequence.length - 1];\n            return result;\n        }\n\n        public trimMinMax(min: number, max: number): void {        \n            let minMargin = (min - this.min) / this.interval;\n            let maxMargin = (this.max - max) / this.interval;\n            let marginPrecision = 0.001;\n\n            if (!this.canExtendMin || (minMargin > this.maxAllowedMargin && minMargin > marginPrecision)) {\n                this.min = min;\n            }\n\n            if (!this.canExtendMax || (maxMargin > this.maxAllowedMargin && maxMargin > marginPrecision)) {\n                this.max = max;\n            }\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi {\n    export class NumericSequenceRange {\n        private static DEFAULT_MAX: number = 10;\n        private static MIN_SUPPORTED_DOUBLE = -1E307;\n        private static MAX_SUPPORTED_DOUBLE = 1E307;\n\n        public min: number;\n        public max: number;\n        public includeZero: boolean;\n        public forcedSingleStop: number;\n        public hasDataRange: boolean;\n        public hasFixedMin: boolean;\n        public hasFixedMax: boolean;\n\n        private _ensureIncludeZero(): void { \n            if (this.includeZero) {\n                // fixed min and max has higher priority than includeZero\n                if (this.min > 0 && !this.hasFixedMin) {\n                    this.min = 0;\n                }\n                if (this.max < 0 && !this.hasFixedMax) {\n                    this.max = 0;\n                }\n            }\n        }\n\n        private _ensureNotEmpty(): void { \n            if (this.min === this.max) {\n                if (!this.min) {\n                    this.min = 0;\n                    this.max = NumericSequenceRange.DEFAULT_MAX;\n                    this.hasFixedMin = true;\n                    this.hasFixedMax = true;\n                } else {\n                    // We are dealing with a single data value (includeZero is not set)\n                    // In order to fix the range we need to extend it in both directions by half of the interval.\n                    // Interval is calculated based on the number:\n                    // 1. Integers below 10,000 are extended by 0.5: so the [2006-2006] empty range is extended to [2005.5-2006.5] range and the ForsedSingleStop=2006\n                    // 2. Other numbers are extended by half of their power: [700,001-700,001] => [650,001-750,001] and the ForsedSingleStop=null as we want the intervals to be calculated to cover the range.\n                    let value = this.min;\n                    let exp = Double.log10(Math.abs(value));\n                    let step: number;\n                    if (exp >= 0 && exp < 4) {\n                        step = 0.5;\n                        this.forcedSingleStop = value;\n                    } else {\n                        step = Double.pow10(exp) / 2;\n                        this.forcedSingleStop = null;\n                    }\n                    this.min = value - step;\n                    this.max = value + step;\n                }\n            }\n        }\n\n        private _ensureDirection() { \n            if (this.min > this.max) { \n                let temp = this.min;\n                this.min = this.max;\n                this.max = temp;\n            }\n        }\n\n        public getSize(): number {\n            return this.max - this.min;\n        }\n\n        public shrinkByStep(range: NumericSequenceRange, step: number) {\n            debug.assertValue(range, \"range\");\n            debug.assert(step > 0, \"step\");\n\n            let oldCount = this.min / step;\n            let newCount = range.min / step;\n            let deltaCount = Math.floor(newCount - oldCount);\n            this.min += deltaCount * step;\n\n            oldCount = this.max / step;\n            newCount = range.max / step;\n            deltaCount = Math.ceil(newCount - oldCount);\n            this.max += deltaCount * step;\n        }\n\n        public static calculate(dataMin: number, dataMax: number, fixedMin?:number, fixedMax?:number, includeZero?: boolean): NumericSequenceRange { \n            debug.assert(dataMin <= dataMax, \"dataMin should be less or equal to dataMax.\");\n            debug.assert(!fixedMin || !fixedMax || fixedMin <= fixedMax, \"fixedMin should be less or equal to fixedMax.\");\n\n            let result = new NumericSequenceRange(); \n            result.includeZero = includeZero ? true : false;\n            result.hasDataRange = ValueUtil.hasValue(dataMin) && ValueUtil.hasValue(dataMax);\n            result.hasFixedMin = ValueUtil.hasValue(fixedMin);\n            result.hasFixedMax = ValueUtil.hasValue(fixedMax);\n\n            dataMin = Double.ensureInRange(dataMin, NumericSequenceRange.MIN_SUPPORTED_DOUBLE, NumericSequenceRange.MAX_SUPPORTED_DOUBLE);\n            dataMax = Double.ensureInRange(dataMax, NumericSequenceRange.MIN_SUPPORTED_DOUBLE, NumericSequenceRange.MAX_SUPPORTED_DOUBLE);\n\n            // Calculate the range using the min, max, dataRange\n            if (result.hasFixedMin && result.hasFixedMax) {\n                result.min = fixedMin;\n                result.max = fixedMax;\n            } else if (result.hasFixedMin) {\n                result.min = fixedMin;\n                result.max = dataMax > fixedMin ? dataMax : fixedMin;\n            } else if (result.hasFixedMax) {\n                result.min = dataMin < fixedMax ? dataMin : fixedMax;\n                result.max = fixedMax;\n            } else if (result.hasDataRange) {\n                result.min = dataMin;\n                result.max = dataMax;\n            } else {\n                result.min = 0;\n                result.max = 0;\n            }\n\n            result._ensureIncludeZero();\n            result._ensureNotEmpty();\n            result._ensureDirection();\n            \n            if (result.min === 0) {\n                result.hasFixedMin = true; // If the range starts from zero we should prevent extending the intervals into the negative range\n            } else if (result.max === 0) {\n                result.hasFixedMax = true; // If the range ends at zero we should prevent extending the intervals into the positive range\n            }\n\n            return result;\n        }\n\n        public static calculateDataRange(dataMin: number, dataMax: number, includeZero?: boolean): NumericSequenceRange { \n            if (!ValueUtil.hasValue(dataMin) || !ValueUtil.hasValue(dataMax)) {\n                return NumericSequenceRange.calculateFixedRange(0, NumericSequenceRange.DEFAULT_MAX);\n            } else {\n                return NumericSequenceRange.calculate(dataMin, dataMax, null, null, includeZero);\n            }\n        }\n\n        public static calculateFixedRange(fixedMin: number, fixedMax: number, includeZero?: boolean): NumericSequenceRange { \n            debug.assertValue(fixedMin, \"fixedMin\");\n            debug.assertValue(fixedMax, \"fixedMax\");\n\n            let result = new NumericSequenceRange(); \n            result.hasDataRange = false;\n            result.includeZero = includeZero;\n            result.min = fixedMin;\n            result.max = fixedMax;\n            result._ensureIncludeZero();\n            result._ensureNotEmpty();\n            result._ensureDirection();\n            result.hasFixedMin = true;\n            result.hasFixedMax = true;\n\n            return result;\n        }\n    }\n\n    /** Note: Exported for testability */\n    export module ValueUtil {\n        export function hasValue(value: any): boolean {\n            return value !== undefined && value !== null;\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.visuals {\n\n    /**\n     * Formats the value using provided format expression\n     * @param value - value to be formatted and converted to string.\n     * @param format - format to be applied if the number shouldn't be abbreviated.\n     * If the number should be abbreviated this string is checked for special characters like $ or % if any\n     */\n    export interface ICustomValueFormatter {\n        (value: any, format?: string): string;\n    }\n\n    export interface ICustomValueColumnFormatter {\n        (value: any,\n            column: DataViewMetadataColumn,\n            formatStringProp: DataViewObjectPropertyIdentifier,\n            nullsAreBlank?: boolean): string;\n    }\n\n    export interface ValueFormatterOptions {\n        /** The format string to use. */\n        format?: string;\n\n        /** The data value. */\n        value?: any;\n\n        /** The data value. */\n        value2?: any;\n\n        /** The number of ticks. */\n        tickCount?: any;\n\n        /** The display unit system to use */\n        displayUnitSystemType?: DisplayUnitSystemType;\n\n        /** True if we are formatting single values in isolation (e.g. card), as opposed to multiple values with a common base (e.g. chart axes) */\n        formatSingleValues?: boolean;\n\n        /** True if we want to trim off unnecessary zeroes after the decimal and remove a space before the % symbol */\n        allowFormatBeautification?: boolean;\n\n        /** Specifies the maximum number of decimal places to show*/\n        precision?: number;\n\n        /** Detect axis precision based on value */\n        detectAxisPrecision?: boolean;\n\n        /** Specifies the column type of the data value */\n        columnType?: ValueTypeDescriptor;\n    }\n\n    export interface IValueFormatter {\n        format(value: any): string;\n        displayUnit?: DisplayUnit;\n        options?: ValueFormatterOptions;\n    }\n\n    /** Captures all locale-specific options used by the valueFormatter. */\n    export interface ValueFormatterLocalizationOptions {\n        null: string;\n        true: string;\n        false: string;\n        NaN: string;\n        infinity: string;\n        negativeInfinity: string;\n\n        /** Returns a beautified form the given format string. */\n        beautify(format: string): string;\n\n        /** Returns an object describing the given exponent in the current language. */\n        describe(exponent: number): DisplayUnitSystemNames;\n        restatementComma: string;\n        restatementCompoundAnd: string;\n        restatementCompoundOr: string;\n    }\n\n    export module valueFormatter {\n        import StringExtensions = jsCommon.StringExtensions;\n        const BeautifiedFormat: { [x: string]: string } = {\n            '0.00 %;-0.00 %;0.00 %': 'Percentage',\n            '0.0 %;-0.0 %;0.0 %': 'Percentage1',\n        };\n\n        export const DefaultIntegerFormat = 'g';\n        export const DefaultNumericFormat = '#,0.00';\n        export const DefaultDateFormat = 'd';\n\n        const defaultLocalizedStrings = {\n            'NullValue': '(Blank)',\n            'BooleanTrue': 'True',\n            'BooleanFalse': 'False',\n            'NaNValue': 'NaN',\n            'InfinityValue': '+Infinity',\n            'NegativeInfinityValue': '-Infinity',\n            'RestatementComma': '{0}, {1}',\n            'RestatementCompoundAnd': '{0} and {1}',\n            'RestatementCompoundOr': '{0} or {1}',\n            'DisplayUnitSystem_EAuto_Title': 'Auto',\n            'DisplayUnitSystem_E0_Title': 'None',\n            'DisplayUnitSystem_E3_LabelFormat': '{0}K',\n            'DisplayUnitSystem_E3_Title': 'Thousands',\n            'DisplayUnitSystem_E6_LabelFormat': '{0}M',\n            'DisplayUnitSystem_E6_Title': 'Millions',\n            'DisplayUnitSystem_E9_LabelFormat': '{0}bn',\n            'DisplayUnitSystem_E9_Title': 'Billions',\n            'DisplayUnitSystem_E12_LabelFormat': '{0}T',\n            'DisplayUnitSystem_E12_Title': 'Trillions',\n            'Percentage': '#,0.##%',\n            'Percentage1': '#,0.#%',\n            'TableTotalLabel': 'Total',\n            'Tooltip_HighlightedValueDisplayName': 'Highlighted',\n            'Funnel_PercentOfFirst': 'Percent of first',\n            'Funnel_PercentOfPrevious': 'Percent of previous',\n            'Funnel_PercentOfFirst_Highlight': 'Percent of first (highlighted)',\n            'Funnel_PercentOfPrevious_Highlight': 'Percent of previous (highlighted)',\n            // Geotagging strings\n            'GeotaggingString_Continent': 'continent',\n            'GeotaggingString_Continents': 'continents',\n            'GeotaggingString_Country': 'country',\n            'GeotaggingString_Countries': 'countries',\n            'GeotaggingString_State': 'state',\n            'GeotaggingString_States': 'states',\n            'GeotaggingString_City': 'city',\n            'GeotaggingString_Cities': 'cities',\n            'GeotaggingString_Town': 'town',\n            'GeotaggingString_Towns': 'towns',\n            'GeotaggingString_Province': 'province',\n            'GeotaggingString_Provinces': 'provinces',\n            'GeotaggingString_County': 'county',\n            'GeotaggingString_Counties': 'counties',\n            'GeotaggingString_Village': 'village',\n            'GeotaggingString_Villages': 'villages',\n            'GeotaggingString_Post': 'post',\n            'GeotaggingString_Zip': 'zip',\n            'GeotaggingString_Code': 'code',\n            'GeotaggingString_Place': 'place',\n            'GeotaggingString_Places': 'places',\n            'GeotaggingString_Address': 'address',\n            'GeotaggingString_Addresses': 'addresses',\n            'GeotaggingString_Street': 'street',\n            'GeotaggingString_Streets': 'streets',\n            'GeotaggingString_Longitude': 'longitude',\n            'GeotaggingString_Longitude_Short': 'lon',\n            'GeotaggingString_Latitude': 'latitude',\n            'GeotaggingString_Latitude_Short': 'lat',\n            'GeotaggingString_PostalCode': 'postal code',\n            'GeotaggingString_PostalCodes': 'postal codes',\n            'GeotaggingString_ZipCode': 'zip code',\n            'GeotaggingString_ZipCodes': 'zip codes',\n            'GeotaggingString_Territory': 'territory',\n            'GeotaggingString_Territories': 'territories',\n        };\n\n        function beautify(format: string): string {\n            let key = BeautifiedFormat[format];\n            if (key)\n                return defaultLocalizedStrings[key] || format;\n            return format;\n        }\n\n        function describeUnit(exponent: number): DisplayUnitSystemNames {\n            let exponentLookup = (exponent === -1) ? 'Auto' : exponent.toString();\n\n            let title: string = defaultLocalizedStrings[\"DisplayUnitSystem_E\" + exponentLookup + \"_Title\"];\n            let format: string = (exponent <= 0) ? '{0}' : defaultLocalizedStrings[\"DisplayUnitSystem_E\" + exponentLookup + \"_LabelFormat\"];\n\n            if (title || format)\n                return { title: title, format: format };\n        }\n\n        export function getLocalizedString(stringId: string): string {\n            return defaultLocalizedStrings[stringId];\n        }\n\n        // NOTE: Define default locale options, but these can be overriden by setLocaleOptions.\n        let locale: ValueFormatterLocalizationOptions = {\n            null: defaultLocalizedStrings['NullValue'],\n            true: defaultLocalizedStrings['BooleanTrue'],\n            false: defaultLocalizedStrings['BooleanFalse'],\n            NaN: defaultLocalizedStrings['NaNValue'],\n            infinity: defaultLocalizedStrings['InfinityValue'],\n            negativeInfinity: defaultLocalizedStrings['NegativeInfinityValue'],\n            beautify: format => beautify(format),\n            describe: exponent => describeUnit(exponent),\n            restatementComma: defaultLocalizedStrings['RestatementComma'],\n            restatementCompoundAnd: defaultLocalizedStrings['RestatementCompoundAnd'],\n            restatementCompoundOr: defaultLocalizedStrings['RestatementCompoundOr'],\n        };\n\n        const MaxScaledDecimalPlaces = 2;\n        const MaxValueForDisplayUnitRounding = 1000;\n        const MinIntegerValueForDisplayUnits = 10000;\n        const MinPrecisionForDisplayUnits = 2;\n\n        const DateTimeMetadataColumn: DataViewMetadataColumn = {\n            displayName: '',\n            type: ValueType.fromPrimitiveTypeAndCategory(PrimitiveType.DateTime),\n        };\n\n        export function getFormatMetadata(format: string): powerbi.NumberFormat.NumericFormatMetadata {\n            return powerbi.NumberFormat.getCustomFormatMetadata(format);\n        }\n\n        export function setLocaleOptions(options: ValueFormatterLocalizationOptions): void {\n            debug.assertValue(options, 'options');\n\n            locale = options;\n\n            DefaultDisplayUnitSystem.reset();\n            WholeUnitsDisplayUnitSystem.reset();\n        }\n\n        export function createDefaultFormatter(formatString: string, allowFormatBeautification: boolean = false): IValueFormatter {\n            let formatBeaut: string = allowFormatBeautification ? locale.beautify(formatString) : formatString;\n            return {\n                format: function (value: any): string {\n                    if (value == null)\n                        return locale.null;\n\n                    return formatCore(value, formatBeaut);\n                }\n            };\n        }\n\n        /** Creates an IValueFormatter to be used for a range of values. */\n        export function create(options: ValueFormatterOptions): IValueFormatter {\n            debug.assertValue(options, 'options');\n\n            let format = !!options.allowFormatBeautification ? locale.beautify(options.format) : options.format;\n\n            if (shouldUseNumericDisplayUnits(options)) {\n                let displayUnitSystem = createDisplayUnitSystem(options.displayUnitSystemType);\n\n                let singleValueFormattingMode = !!options.formatSingleValues;\n\n                displayUnitSystem.update(Math.max(Math.abs(options.value || 0), Math.abs(options.value2 || 0)));\n\n                let forcePrecision = options.precision != null;\n\n                let decimals: number;\n\n                if (forcePrecision)\n                    decimals = -options.precision;\n                else if (displayUnitSystem.displayUnit && displayUnitSystem.displayUnit.value > 1)\n                    decimals = -MaxScaledDecimalPlaces;\n\n                // Detect axis precision\n                if (options.detectAxisPrecision) {\n                    // Trailing zeroes\n                    forcePrecision = true;\n\n                    let axisValue = options.value;\n                    if (displayUnitSystem.displayUnit && displayUnitSystem.displayUnit.value > 0)\n                        axisValue = axisValue / displayUnitSystem.displayUnit.value;\n\n                    if (Double.isInteger(axisValue))\n                        decimals = 0;\n                    else\n                        decimals = Double.log10(axisValue);\n                }\n\n                return {\n                    format: function (value: any): string {\n                        let formattedValue: string = getStringFormat(value, true /*nullsAreBlank*/);\n                        if (!StringExtensions.isNullOrUndefinedOrWhiteSpaceString(formattedValue))\n                            return formattedValue;\n\n                        // Round to Double.DEFAULT_PRECISION\n                        if (value && !displayUnitSystem.isScalingUnit() && Math.abs(value) < MaxValueForDisplayUnitRounding && !forcePrecision)\n                            value = Double.roundToPrecision(value);\n\n                        return singleValueFormattingMode ?\n                            displayUnitSystem.formatSingleValue(value, format, decimals, forcePrecision) :\n                            displayUnitSystem.format(value, format, decimals, forcePrecision);\n                    },\n                    displayUnit: displayUnitSystem.displayUnit,\n                    options: options\n                };\n            }\n\n            if (shouldUseDateUnits(options.value, options.value2, options.tickCount)) {\n                let unit = DateTimeSequence.getIntervalUnit(options.value /* minDate */, options.value2 /* maxDate */, options.tickCount);\n\n                return {\n                    format: function (value: any): string {\n                        if (value == null)\n                            return locale.null;\n\n                        let formatString = formattingService.dateFormatString(unit);\n                        return formatCore(value, formatString);\n                    },\n                    options: options\n                };\n            }\n\n            return createDefaultFormatter(format);\n        }\n\n        export function format(value: any, format?: string, allowFormatBeautification?: boolean): string {\n            if (value == null)\n                return locale.null;\n\n            return formatCore(\n                value,\n                !!allowFormatBeautification ? locale.beautify(format) : format);\n        }\n\n        /**\n         * Value formatting function to handle variant measures.\n         * For a Date/Time value within a non-date/time field, it's formatted with the default date/time formatString instead of as a number\n         * @param {any} value Value to be formatted\n         * @param {DataViewMetadataColumn} column Field which the value belongs to\n         * @param {DataViewObjectPropertyIdentifier} formatStringProp formatString Property ID\n         * @param {boolean} nullsAreBlank? Whether to show \"(Blank)\" instead of empty string for null values\n         * @returns Formatted value\n         */\n        export function formatVariantMeasureValue(value: any, column: DataViewMetadataColumn, formatStringProp: DataViewObjectPropertyIdentifier, nullsAreBlank?: boolean): string {\n            // If column type is not datetime, but the value is of time datetime,\n            // then use the default date format string\n            if (!(column && column.type && column.type.dateTime) && value instanceof Date) {\n                let valueFormat = getFormatString(DateTimeMetadataColumn, null, false);\n                return formatCore(value, valueFormat, nullsAreBlank);\n            }\n            else {\n                return formatCore(value, getFormatString(column, formatStringProp), nullsAreBlank);\n            }\n        }\n\n        function createDisplayUnitSystem(displayUnitSystemType?: DisplayUnitSystemType): DisplayUnitSystem {\n            if (displayUnitSystemType == null)\n                return new DefaultDisplayUnitSystem(locale.describe);\n\n            switch (displayUnitSystemType) {\n                case DisplayUnitSystemType.Default:\n                    return new DefaultDisplayUnitSystem(locale.describe);\n                case DisplayUnitSystemType.WholeUnits:\n                    return new WholeUnitsDisplayUnitSystem(locale.describe);\n                case DisplayUnitSystemType.Verbose:\n                    return new NoDisplayUnitSystem();\n                case DisplayUnitSystemType.DataLabels:\n                    return new DataLabelsDisplayUnitSystem(locale.describe);\n                default:\n                    debug.assertFail('Unknown display unit system type');\n                    return new DefaultDisplayUnitSystem(locale.describe);\n            }\n        }\n\n        function shouldUseNumericDisplayUnits(options: ValueFormatterOptions): boolean {\n            let value = options.value;\n            let value2 = options.value2;\n            let format = options.format;\n            // For singleValue visuals like card, gauge we don't want to roundoff data to the nearest thousands so format the whole number / integers below 10K to not use display units\n            if (options.formatSingleValues && format) {\n\n                if (Math.abs(value) < MinIntegerValueForDisplayUnits) {\n\n                    let isCustomFormat = !powerbi.NumberFormat.isStandardFormat(format);\n\n                    if (isCustomFormat) {\n                        let precision = powerbi.NumberFormat.getCustomFormatMetadata(format, true /*calculatePrecision*/).precision;\n\n                        if (precision < MinPrecisionForDisplayUnits)\n                            return false;\n                    }\n                    else if (Double.isInteger(value))\n                        return false;\n                }\n            }\n\n            if ((typeof value === 'number') || (typeof value2 === 'number')) {\n                return true;\n            }\n        }\n\n        function shouldUseDateUnits(value: any, value2?: any, tickCount?: number): boolean {\n            // must check both value and value2 because we'll need to get an interval for date units\n            return (value instanceof Date) && (value2 instanceof Date) && (tickCount !== undefined && tickCount !== null);\n        }\n\n        /*\n         * Get the column format. Order of precendence is:\n         *  1. Column format\n         *  2. Default PowerView policy for column type\n         */\n        export function getFormatString(column: DataViewMetadataColumn, formatStringProperty: DataViewObjectPropertyIdentifier, suppressTypeFallback?: boolean): string {\n            if (column) {\n                if (formatStringProperty) {\n                    let propertyValue = DataViewObjects.getValue<string>(column.objects, formatStringProperty);\n                    if (propertyValue)\n                        return propertyValue;\n                }\n\n                if (!suppressTypeFallback) {\n                    let columnType = column.type;\n                    if (columnType) {\n                        if (columnType.dateTime)\n                            return DefaultDateFormat;\n                        if (columnType.integer)\n                            return DefaultIntegerFormat;\n                        if (columnType.numeric)\n                            return DefaultNumericFormat;\n                    }\n                }\n            }\n        }\n\n        function formatListCompound(strings: string[], conjunction: string): string {\n            let result: string;\n\n            if (!strings) {\n                return null;\n            }\n\n            let length = strings.length;\n            if (length > 0) {\n                result = strings[0];\n                let lastIndex = length - 1;\n                for (let i = 1, len = lastIndex; i < len; i++) {\n                    let value = strings[i];\n                    result = StringExtensions.format(locale.restatementComma, result, value);\n                }\n\n                if (length > 1) {\n                    let value = strings[lastIndex];\n                    result = StringExtensions.format(conjunction, result, value);\n                }\n            }\n            else {\n                result = null;\n            }\n\n            return result;\n        }\n\n        /** The returned string will look like 'A, B, ..., and C'  */\n        export function formatListAnd(strings: string[]): string {\n            return formatListCompound(strings, locale.restatementCompoundAnd);\n        }\n\n        /** The returned string will look like 'A, B, ..., or C' */\n        export function formatListOr(strings: string[]): string {\n            return formatListCompound(strings, locale.restatementCompoundOr);\n        }\n\n        function formatCore(value: any, format: string, nullsAreBlank?: boolean): string {\n            let formattedValue = getStringFormat(value, nullsAreBlank ? nullsAreBlank : false /*nullsAreBlank*/);\n\n            if (!StringExtensions.isNullOrUndefinedOrWhiteSpaceString(formattedValue))\n                return formattedValue;\n\n            return formattingService.formatValue(value, format);\n        }\n\n        function getStringFormat(value: any, nullsAreBlank: boolean): string {\n            if (value == null && nullsAreBlank)\n                return locale.null;\n\n            if (value === true)\n                return locale.true;\n\n            if (value === false)\n                return locale.false;\n\n            if (typeof value === 'number' && isNaN(value))\n                return locale.NaN;\n\n            if (value === Number.NEGATIVE_INFINITY)\n                return locale.negativeInfinity;\n\n            if (value === Number.POSITIVE_INFINITY)\n                return locale.infinity;\n\n            return '';\n        }\n\n        export function getDisplayUnits(displayUnitSystemType: DisplayUnitSystemType): DisplayUnit[] {\n            let displayUnitSystem = createDisplayUnitSystem(displayUnitSystemType);\n            return displayUnitSystem.units;\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi {\n\n    export interface IColorAllocator {\n        /** Computes the color corresponding to the provided value. */\n        color(value: PrimitiveValue): string;\n    }\n\n    export interface IColorAllocatorFactory {\n        /** Creates a gradient that that transitions between two colors. */\n        linearGradient2(options: LinearGradient2): IColorAllocator;\n\n        /** Creates a gradient that that transitions between three colors. */\n        linearGradient3(options: LinearGradient3, splitScales: boolean): IColorAllocator;\n    }\n} ","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    export interface CompiledDataViewRoleBindMappingWithReduction extends CompiledDataViewRoleBindMapping, HasReductionAlgorithm {\n    }\n\n    export interface CompiledDataViewRoleForMappingWithReduction extends CompiledDataViewRoleForMapping, HasReductionAlgorithm {\n    }\n} ","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    export module DataRoleHelper {\n        export function getMeasureIndexOfRole(grouped: DataViewValueColumnGroup[], roleName: string): number {\n            if (!_.isEmpty(grouped)) {\n                let firstGroup = grouped[0];\n                if (firstGroup.values && firstGroup.values.length > 0) {\n                    for (let i = 0, len = firstGroup.values.length; i < len; ++i) {\n                        let value = firstGroup.values[i];\n                        if (value && value.source) {\n                            if (hasRole(value.source, roleName))\n                                return i;\n                        }\n                    }\n                }\n            }\n            return -1;\n        }\n\n        export function getCategoryIndexOfRole(categories: DataViewCategoryColumn[], roleName: string): number {\n            if (!_.isEmpty(categories)) {\n                for (let i = 0, ilen = categories.length; i < ilen; i++) {\n                    if (hasRole(categories[i].source, roleName))\n                        return i;\n                }\n            }\n            return -1;\n        }\n\n        export function hasRole(column: DataViewMetadataColumn, name: string): boolean {\n            let roles = column.roles;\n            return roles && roles[name];\n        }\n\n        export function hasRoleInDataView(dataView: DataView, name: string): boolean {\n            return dataView != null\n                && dataView.metadata != null\n                && dataView.metadata.columns\n                && _.any(dataView.metadata.columns, c => c.roles && c.roles[name] !== undefined);\n        }\n        \n        export function hasRoleInValueColumn(valueColumn: DataViewValueColumn, name: string): boolean {\n            return valueColumn && valueColumn.source && valueColumn.source.roles && (valueColumn.source.roles[name] === true);\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    import DataRoleHelper = powerbi.data.DataRoleHelper;\n\n    export function createIDataViewCategoricalReader(dataView: DataView): IDataViewCategoricalReader {\n        return new DataViewCategoricalReader(dataView);\n    }\n\n    export interface IDataViewCategoricalReader {\n        // Category functions\n        hasCategories(): boolean;\n        getCategoryCount(): number;\n        getCategoryValues(roleName: string): any;\n        getCategoryValue(roleName: string, categoryIndex: number): any;\n        getCategoryColumn(roleName: string): DataViewCategoryColumn;\n        getCategoryMetadataColumn(roleName: string): DataViewMetadataColumn;\n        getCategoryColumnIdentityFields(roleName: string): powerbi.data.ISQExpr[];\n        getCategoryDisplayName(roleName: string): string;\n        hasCompositeCategories(): boolean;\n        hasCategoryWithRole(roleName: string): boolean;\n        getCategoryObjects(roleName: string, categoryIndex: number): DataViewObjects;\n        // Value functions\n        hasValues(roleName: string): boolean;\n        hasHighlights(roleName: string): boolean;\n        /**\n         * Obtains the value for the given role name, category index, and series index.\n         *\n         * Note: in cases where have multiple values in a role where the multiple values\n         * are not being used to create a static series, the first is obtained. (this is\n         * a rare case)\n         */\n        getValue(roleName: string, categoryIndex: number, seriesIndex?: number): any;\n        /**\n         * Obtains the highlighted value for the given role name, category index, and series index.\n         *\n         * Note: in cases where have multiple values in a role where the multiple values\n         * are not being used to create a static series, the first is obtained. (this is\n         * a rare case)\n         */\n        getHighlight(roleName: string, categoryIndex: number, seriesIndex?: number): any;\n        /**\n         * Obtains all the values for the given role name, category index, and series index, drawing\n         * from each of the value columns at that intersection.  Used when you have multiple\n         * values in a role that are not conceptually a static series.\n         */\n        getAllValuesForRole(roleName: string, categoryIndex: number, seriesIndex?: number): any[];\n        /**\n        * Obtains all meta data for the given role name, category index, and series index, drawing\n        * from each of the value columns at that intersection.  Used when you have multiple\n        * values in a role that are not conceptually a static series.\n        */\n        getAllValueMetadataColumnsForRole(roleName: string, seriesIndex: number): DataViewMetadataColumn[];\n        /**\n         * Obtains all the highlight values for the given role name, category index, and series index, drawing\n         * from each of the value columns at that intersection.  Used when you have multiple\n         * values in a role that are not conceptually a static series.\n         */\n        getAllHighlightsForRole(roleName: string, categoryIndex: number, seriesIndex?: number): any[];\n        /**\n         * Obtains the first non-null value for the given role name and category index.\n         * It should mainly be used for values that are expected to be the same across\n         * series, but avoids false nulls when the data is sparse.\n         */\n        getFirstNonNullValueForCategory(roleName: string, categoryIndex: number): any;\n        getMeasureQueryName(roleName: string): string;\n        getValueColumn(roleName: string, seriesIndex?: number): DataViewValueColumn;\n        getValueMetadataColumn(roleName: string, seriesIndex?: number): DataViewMetadataColumn;\n        getAllValueMetadataColumnsForRole(roleName: string, seriesIndex: number): DataViewMetadataColumn[];\n        getValueDisplayName(roleName: string, seriesIndex?: number): string;\n        // Series Methods\n        hasDynamicSeries(): boolean;\n        /**\n         * Get the series count.  This requires a value role name for cases where you may\n         * have a static series, but is not required if the only series you expect are dynamic\n         * or single series. \n         * \n         * @param valueRoleName The role of the value for which a static series may exist\n         */\n        getSeriesCount(valueRoleName?: string): number;\n        getSeriesObjects(seriesIndex: number): DataViewObjects;\n        getSeriesValueColumns(): DataViewValueColumns;\n        getSeriesValueColumnGroup(seriesIndex: number): DataViewValueColumnGroup;\n        getSeriesMetadataColumn(): DataViewMetadataColumn;\n        getSeriesColumnIdentityFields(): powerbi.data.ISQExpr[];\n        getSeriesName(seriesIndex: number): PrimitiveValue;\n        getSeriesDisplayName(): string;\n        getStaticObjects(): DataViewObjects;\n    }\n\n    /**\n     * A mapping used to map indeces within a specific roleName to an index into the values\n     * of a grouped.  This is used so that you can iterate over values within a role without\n     * expensive filtering or extra traversal.\n     */ \n    interface RoleIndexMapping {\n        [roleName: string]: number[];\n    }\n\n    class DataViewCategoricalReader implements IDataViewCategoricalReader {\n        private dataView: DataView;\n        private categories: DataViewCategoryColumn[];\n        private grouped: DataViewValueColumnGroup[];\n        private dataHasDynamicSeries: boolean;\n        private valueRoleIndexMapping: RoleIndexMapping;\n        \n        // Validation variables\n        private hasValidCategories: boolean;\n        private hasAnyValidValues: boolean;\n\n        constructor(dataView: DataView) {\n            debug.assertValue(dataView, 'dataView');\n            this.dataView = dataView;\n            // Validate categories\n            let categorical: DataViewCategorical;\n            if (dataView)\n                categorical = dataView.categorical;\n            let categories: DataViewCategoryColumn[];\n            if (categorical)\n                categories = this.categories = categorical.categories;\n            this.hasValidCategories = !_.isEmpty(categories);\n\n            // Validate values\n            let values: DataViewValueColumns;\n            if (categorical)\n                values = categorical.values;\n            // We need to access grouped as long as values is non-null; if it's an empty array (meaning there is a category + series), we'll use grouped for non-value stuff\n            // TODO: think a bit more about how to represent this internally; Maybe split this up between hasGroup and hasValidValues or something\n            this.hasAnyValidValues = false;\n            if (values != null) {\n                let grouped = dataView.categorical.values.grouped();\n\n                if (grouped.length > 0) {\n                    this.hasAnyValidValues = true;\n                    this.grouped = grouped;\n\n                    // Iterate through the first group's values to populate the valueRoleIndexMapping\n                    let valueRoleIndexMapping: RoleIndexMapping = {};\n                    let firstGroupValues = grouped[0].values;\n                    for (let valueIndex = 0, valueCount = firstGroupValues.length; valueIndex < valueCount; valueIndex++) {\n                        let valueRoles = firstGroupValues[valueIndex].source.roles;\n                        for (let role in valueRoles) {\n                            if (valueRoles[role]) {\n                                if (!valueRoleIndexMapping[role])\n                                    valueRoleIndexMapping[role] = [];\n                                valueRoleIndexMapping[role].push(valueIndex);\n                            }\n                        }\n                    }\n                    this.valueRoleIndexMapping = valueRoleIndexMapping;\n                }\n            }\n\n            if (this.hasAnyValidValues)\n                this.dataHasDynamicSeries = !!this.dataView.categorical.values.source;\n        }\n\n        // Category methods\n        \n        public hasCategories(): boolean {\n            return this.hasValidCategories;\n        }\n\n        public getCategoryCount(): number {\n            if (this.hasValidCategories)\n                return this.categories[0].values.length;\n            else\n                return 0;\n        }\n\n        public getCategoryValues(roleName: string): any {\n            if (this.hasValidCategories) {\n                let categories = this.getCategoryFromRole(roleName);\n                return categories ? categories.values : undefined;\n            }\n        }\n\n        public getCategoryValue(roleName: string, categoryIndex: number): any {\n            if (this.hasValidCategories) {\n                let categories = this.getCategoryFromRole(roleName);\n                return categories ? categories.values[categoryIndex] : undefined;\n            }\n        }\n\n        public getCategoryColumn(roleName: string): DataViewCategoryColumn {\n            if (this.hasValidCategories)\n                return this.getCategoryFromRole(roleName);\n        }\n\n        public getCategoryMetadataColumn(roleName: string): DataViewMetadataColumn {\n            if (this.hasValidCategories) {\n                let categories = this.getCategoryFromRole(roleName);\n                return categories ? categories.source : undefined;\n            }\n        }\n\n        public getCategoryColumnIdentityFields(roleName: string): powerbi.data.ISQExpr[] {\n            if (this.hasValidCategories) {\n                let categories = this.getCategoryFromRole(roleName);\n                return categories ? categories.identityFields : undefined;\n            }\n        }\n\n        public getCategoryDisplayName(roleName: string): string {\n            if (this.hasValidCategories) {\n                let targetColumn = this.getCategoryColumn(roleName);\n                if (targetColumn && targetColumn.source) {\n                    return targetColumn.source.displayName;\n                }\n            }\n        }\n\n        public hasCompositeCategories(): boolean {\n            if (this.hasValidCategories)\n                return this.categories.length > 1;\n        }\n\n        public hasCategoryWithRole(roleName: string): boolean {\n            return DataRoleHelper.getCategoryIndexOfRole(this.categories, roleName) !== -1;\n        }\n\n        public getCategoryObjects(roleName: string, categoryIndex: number): DataViewObjects {\n            if (this.hasValidCategories) {\n                let category = this.getCategoryFromRole(roleName);\n                if (category && category.objects) {\n                    return category.objects[categoryIndex];\n                }\n            }\n        }\n\n        private getCategoryFromRole(roleName: string): DataViewCategoryColumn {\n            let categories = this.categories;\n            return categories[DataRoleHelper.getCategoryIndexOfRole(categories, roleName)];\n        }\n\n        // Value and measure methods\n\n        public hasValues(roleName: string): boolean {\n            return this.valueRoleIndexMapping && !_.isEmpty(this.valueRoleIndexMapping[roleName]);\n        }\n\n        public hasHighlights(roleName: string): boolean {\n            if (this.hasValues(roleName)) {\n                return !_.isEmpty(this.grouped[0].values[this.valueRoleIndexMapping[roleName][0]].highlights);\n            }\n            return false;\n        }\n        \n        public getValue(roleName: string, categoryIndex: number, seriesIndex: number = 0): any {\n            if (this.hasValues(roleName)) {\n                if (this.dataHasDynamicSeries) {\n                    // For dynamic series, we only ever obtain the first value column from a role\n                    return this.getValueInternal(roleName, categoryIndex, seriesIndex, 0, false /* getHighlight */);\n                }\n                else {\n                    // For static series or single series, we obtain value columns from the first series\n                    //    and use the seriesIndex to index into the value columns within the role\n                    return this.getValueInternal(roleName, categoryIndex, 0, seriesIndex, false /* getHighlight */);\n                }\n            }\n        }\n\n        public getHighlight(roleName: string, categoryIndex: number, seriesIndex: number = 0): any {\n            if (this.hasValues(roleName)) {\n                if (this.dataHasDynamicSeries) {\n                    // For dynamic series, we only ever obtain the first value column from a role\n                    return this.getValueInternal(roleName, categoryIndex, seriesIndex, 0, true /* getHighlight */);\n                }\n                else {\n                    // For static series or single series, we obtain value columns from the first series\n                    //    and use the seriesIndex to index into the value columns within the role\n                    return this.getValueInternal(roleName, categoryIndex, 0, seriesIndex, true /* getHighlight */);\n                }\n            }\n        }\n\n        public getAllValuesForRole(roleName: string, categoryIndex: number, seriesIndex: number = 0): any[] {\n            if (this.hasValues(roleName)) {\n                let valuesInRole = [];\n                for (let roleValueIndex = 0, roleValueCount = this.valueRoleIndexMapping[roleName].length; roleValueIndex < roleValueCount; roleValueIndex++) {\n                    valuesInRole.push(this.getValueInternal(roleName, categoryIndex, seriesIndex, roleValueIndex, false /* getHighlight */));\n                }\n                return valuesInRole;\n            }\n        }\n\n        public getAllHighlightsForRole(roleName: string, categoryIndex: number, seriesIndex: number = 0): any[] {\n            if (this.hasValues(roleName)) {\n                let valuesInRole = [];\n                for (let roleValueIndex = 0, roleValueCount = this.valueRoleIndexMapping[roleName].length; roleValueIndex < roleValueCount; roleValueIndex++) {\n                    valuesInRole.push(this.getValueInternal(roleName, categoryIndex, seriesIndex, roleValueIndex, true /* getHighlight */));\n                }\n                return valuesInRole;\n            }\n        }\n\n        /**\n         * Obtains the value from grouped.\n         *\n         * Grouped:             [0] [1] [2] [3] (seriesIndex)\n         *                         /   \\\n         * .values:       [T0] [V0] [V1] [T1] [V2] (valueColumnIndex)\n         *                    /    \\ \\  \\           \n         * v.values:  [0, 1, 2, 3, 4] [5, 6, 7, 8, 9] (categoryIndex)\n         * \n         *--------------------------------|\n         *                      |Category |\n         * Series|Value Columns |A B C D E|\n         *--------------------------------|\n         *      0|col0 (tooltip)|         |\n         *       |col1 (value)  |         |\n         *       |col2 (value)  |         |\n         *       |col3 (tooltip)|         |\n         *       |col4 (value)  |         |\n         *--------------------------------|\n         *      1|col0 (tooltip)|         |\n         *       |col1 (value)  |0 1 2 3 4|\n         *       |col2 (value)  |5 6 7 8 9|\n         *       |col3 (tooltip)|         |\n         *       |col4 (value)  |         |\n         *--------------------------------|\n         *      2|col0 (tooltip)|...      |\n         * \n         * valueColumnIndexInRole is for indexing into the values for a single role\n         * valueColumnIndex is for indexing into the entire value array including\n         * all roles\n         * \n         * The valueRoleIndexMapping converts roleValueIndex and role (value role\n         * with an index of 1) into groupedValueIndex (2)\n         *\n         * Example: getValueInternal(V, 3, 1, 1) returns 8: The second group,\n         * the second value column with role \"value\" (which is converted to a\n         * groupedValueIndex of 2) and the fourth value within that value column.\n         */\n        private getValueInternal(roleName: string, categoryIndex: number, groupIndex: number, valueColumnIndexInRole: number, getHighlight: boolean): any {\n            if (this.hasValues(roleName)) {\n                let valueColumnIndex = this.valueRoleIndexMapping[roleName][valueColumnIndexInRole];\n                let groupedValues = this.grouped[groupIndex].values[valueColumnIndex];\n                return getHighlight ? groupedValues.highlights[categoryIndex] : groupedValues.values[categoryIndex];\n            }\n        }\n\n        public getFirstNonNullValueForCategory(roleName: string, categoryIndex: number): any {\n            if (this.hasValues(roleName)) {\n                if (!this.dataHasDynamicSeries) {\n                    debug.assert(this.grouped.length === 1, \"getFirstNonNullValueForCategory shouldn't be called if you have a static series\");\n                    return this.getValue(roleName, categoryIndex);\n                }\n                for (let seriesIndex = 0, seriesCount = this.grouped.length; seriesIndex < seriesCount; seriesIndex++) {\n                    let value = this.getValue(roleName, categoryIndex, seriesIndex);\n                    if (value != null) {\n                        return value;\n                    }\n                }\n            }\n        }\n\n        public getMeasureQueryName(roleName: string): string {\n            if (this.hasValues(roleName))\n                return this.grouped[0].values[this.valueRoleIndexMapping[roleName][0]].source.queryName;\n        }\n\n        public getValueColumn(roleName: string, seriesIndex: number = 0): DataViewValueColumn {\n            if (this.hasValues(roleName)) {\n                if (this.dataHasDynamicSeries) {\n                    return this.grouped[seriesIndex].values[this.valueRoleIndexMapping[roleName][0]];\n                }\n                else {\n                    return this.grouped[0].values[this.valueRoleIndexMapping[roleName][seriesIndex]];\n                }\n            }\n        }\n        \n        public getValueMetadataColumn(roleName: string, seriesIndex: number = 0): DataViewMetadataColumn {\n            let valueColumn = this.getValueColumn(roleName, seriesIndex);\n            if (valueColumn) {\n                return valueColumn.source;\n            }\n        }\n\n        public getAllValueMetadataColumnsForRole(roleName: string, seriesIndex: number = 0): DataViewMetadataColumn[] {\n            if (this.hasValues(roleName)) {\n                let metadata = [];\n                for (let roleValueIndex = 0, roleValueCount = this.valueRoleIndexMapping[roleName].length; roleValueIndex < roleValueCount; roleValueIndex++) {\n                    let column = this.grouped[seriesIndex].values[this.valueRoleIndexMapping[roleName][roleValueIndex]].source;\n                    metadata.push(column);\n                }\n                return metadata;\n            }\n        }\n\n        public getValueDisplayName(roleName: string, seriesIndex?: number): string {\n            if (this.hasValues(roleName)) {\n                let targetColumn = this.getValueColumn(roleName, seriesIndex);\n                if (targetColumn && targetColumn.source) {\n                    return targetColumn.source.displayName;\n                }\n            }\n        }\n\n        // Series methods\n\n        public hasDynamicSeries(): boolean {\n            return this.dataHasDynamicSeries;\n        }\n\n        public getSeriesCount(valueRoleName?: string): number {\n            if (!this.hasAnyValidValues)\n                return;\n\n            if (this.dataHasDynamicSeries) {\n                return this.grouped.length;\n            }\n            else {\n                let roleIndexMap = valueRoleName && this.valueRoleIndexMapping[valueRoleName];\n\n                if (roleIndexMap)\n                    return roleIndexMap.length;\n\n                return 1;\n            }\n        }\n\n        public getSeriesObjects(seriesIndex: number): DataViewObjects {\n            if (this.hasAnyValidValues)\n                return this.grouped[seriesIndex].objects;\n        }\n\n        public getSeriesValueColumns(): DataViewValueColumns {\n            if (this.hasAnyValidValues)\n                return this.dataView.categorical.values;\n        }\n\n        public getSeriesValueColumnGroup(seriesIndex: number): DataViewValueColumnGroup {\n            if (this.hasAnyValidValues)\n                return this.grouped[seriesIndex];\n        }\n\n        public getSeriesMetadataColumn(): DataViewMetadataColumn {\n            if (this.hasAnyValidValues)\n                return this.dataView.categorical.values.source;\n        }\n\n        public getSeriesColumnIdentityFields(): powerbi.data.ISQExpr[] {\n            if (this.hasAnyValidValues)\n                return this.dataView.categorical.values.identityFields;\n        }\n\n        public getSeriesName(seriesIndex: number): PrimitiveValue {\n            if (this.hasAnyValidValues)\n                return this.grouped[seriesIndex].name;\n        }\n\n        public getSeriesDisplayName(): string {\n            if (this.hasAnyValidValues && this.dataHasDynamicSeries)\n                return this.dataView.categorical.values.source.displayName;\n        }\n        \n        public getStaticObjects(): DataViewObjects {\n            let result: DataViewObjects = null;\n            if(this.dataView.metadata && this.dataView.metadata.objects) {\n                result = this.dataView.metadata.objects;\n            }\n            \n            return result;\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    import inherit = Prototype.inherit;\n    import inheritSingle = Prototype.inheritSingle;\n    import RoleKindByQueryRef = DataViewAnalysis.RoleKindByQueryRef;\n    import valueFormatter = powerbi.visuals.valueFormatter;\n\n    export module DataViewConcatenateCategoricalColumns {\n\n        /* Represents a collection of DataViewCategoryColumn that are tied to the same role. */\n        interface CategoryColumnsByRole {\n            /* The name of the role shared by all the objects in the categories property. */\n            roleName: string;\n\n            /**\n             * The list of columns that are tied to roleName, in the same order as they appear\n             * in the categories property of their owner DataViewCategorical object.\n             */\n            categories: DataViewCategoryColumn[];\n        }\n\n        export function detectAndApply(\n            dataView: DataView,\n            objectDescriptors: DataViewObjectDescriptors,\n            roleMappings: DataViewMapping[],\n            projectionOrdering: DataViewProjectionOrdering,\n            selects: DataViewSelectTransform[],\n            projectionActiveItems: DataViewProjectionActiveItems): DataView {\n            debug.assertValue(dataView, 'dataView');\n            debug.assertAnyValue(roleMappings, 'roleMappings');\n            debug.assertAnyValue(projectionOrdering, 'projectionOrdering');\n\n            let result = dataView;\n            let dataViewCategorical: DataViewCategorical = dataView.categorical;\n\n            if (dataViewCategorical) {\n                let concatenationSource: CategoryColumnsByRole = detectCategoricalRoleForHierarchicalGroup(dataViewCategorical, dataView.metadata, roleMappings, selects, projectionActiveItems);\n\n                if (concatenationSource) {\n                    // Consider: Perhaps the re-ordering of categorical columns should happen in the function transformSelects(...) of dataViewTransform?\n                    let columnsSortedByProjectionOrdering = sortColumnsByProjectionOrdering(projectionOrdering, concatenationSource.roleName, concatenationSource.categories);\n                    if (columnsSortedByProjectionOrdering.length >= 2) {\n                        let activeItemsToIgnoreInConcatenation =\n                            _.chain(projectionActiveItems[concatenationSource.roleName])\n                                .filter((activeItemInfo: DataViewProjectionActiveItemInfo) => activeItemInfo.suppressConcat)\n                                .map((activeItemInfo: DataViewProjectionActiveItemInfo) => activeItemInfo.queryRef)\n                                .value();\n\n                        result = applyConcatenation(dataView, objectDescriptors, concatenationSource.roleName, columnsSortedByProjectionOrdering, activeItemsToIgnoreInConcatenation);\n                    }\n                }\n            }\n\n            return result;\n        }\n\n        /** For applying concatenation to the DataViewCategorical that is the data for one of the frames in a play chart. */\n        export function applyToPlayChartCategorical(\n            metadata: DataViewMetadata,\n            objectDescriptors: DataViewObjectDescriptors,\n            categoryRoleName: string,\n            categorical: DataViewCategorical): DataView {\n            debug.assertValue(metadata, 'metadata');\n            debug.assertAnyValue(objectDescriptors, 'objectDescriptors');\n            debug.assertValue(categorical, 'categorical');\n\n            let result: DataView;\n            if (!_.isEmpty(categorical.categories) && categorical.categories.length >= 2) {\n                // In PlayChart, the code converts the Visual DataView with a matrix into multiple Visual DataViews, each with a categorical.\n                // metadata and metadata.columns could already be inherited objects as they come from the Visual DataView with a matrix.\n                // To guarantee that this method does not have any side effect on prototypeMetadata (which might already be an inherited obj),\n                // use inherit() rather than inheritSingle() here.\n                let transformingColumns = inherit(metadata.columns);\n                let transformingMetadata = inherit(metadata, m => { m.columns = transformingColumns; });\n\n                let transformingDataView = { metadata: transformingMetadata, categorical: categorical };\n                result = applyConcatenation(transformingDataView, objectDescriptors, categoryRoleName, categorical.categories, []);\n            }\n            else {\n                result = { metadata: metadata, categorical: categorical };\n            }\n\n            return result;\n        }\n\n        /**\n         * Returns the role and its assocated category columns (from dataViewCategorical.categories)\n         * that should be concatenated for the case of hierarchical group.\n         *\n         * Note: In the future if we support sibling hierarchical groups in categorical,\n         * change the return type to CategoryColumnsByRole[] and update detection logic.\n         */\n        function detectCategoricalRoleForHierarchicalGroup(dataViewCategorical: DataViewCategorical, metadata: DataViewMetadata, dataViewMappings: DataViewMapping[], selects: DataViewSelectTransform[], projectionActiveItems: DataViewProjectionActiveItems): CategoryColumnsByRole {\n            debug.assertValue(dataViewCategorical, 'dataViewCategorical');\n            debug.assertAnyValue(dataViewMappings, 'dataViewMappings');\n\n            let result: CategoryColumnsByRole;\n\n            let roleKinds: RoleKindByQueryRef = DataViewSelectTransform.createRoleKindFromMetadata(selects, metadata);\n            let projections = DataViewSelectTransform.projectionsFromSelects(selects, projectionActiveItems);\n            let supportedRoleMappings = DataViewAnalysis.chooseDataViewMappings(projections, dataViewMappings, roleKinds).supportedMappings;\n\n            // The following code will choose a role name only if all supportedRoleMappings share the same role for Categorical Category.\n            // Handling multiple supportedRoleMappings is necessary for TransformActions with splits, which can happen in scenarios such as:\n            // 1. combo chart with a field for both Line and Column values, and\n            // 2. chart with regression line enabled.\n            // In case 1, you can pretty much get exactly the one from supportedRoleMappings for which this code is currently processing for,\n            // by looking at the index of the current split in DataViewTransformActions.splits.\n            // In case 2, however, supportedRoleMappings.length will be different than DataViewTransformActions.splits.length, hence it is\n            // not straight forward to figure out for which one in supportedRoleMappings is this code currently processing.\n            // SO... This code will just choose the category role name if it is consistent across all supportedRoleMappings.\n\n            let isEveryRoleMappingForCategorical = !_.isEmpty(supportedRoleMappings) &&\n                _.every(supportedRoleMappings, (roleMapping) => !!roleMapping.categorical);\n\n            if (isEveryRoleMappingForCategorical) {\n                let targetRoleName = getSingleCategoryRoleNameInEveryRoleMapping(supportedRoleMappings);\n                if (targetRoleName &&\n                    isVisualExpectingMaxOneCategoryColumn(targetRoleName, supportedRoleMappings)) {\n\n                    let categoryColumnsForTargetRole: DataViewCategoryColumn[] = _.filter(\n                        dataViewCategorical.categories,\n                        (categoryColumn: DataViewCategoryColumn) => categoryColumn.source.roles && !!categoryColumn.source.roles[targetRoleName]);\n\n                    // There is no need to concatenate columns unless there is actually more than one column\n                    if (categoryColumnsForTargetRole.length >= 2) {\n                        // At least for now, we expect all category columns for the same role to have the same number of value entries.\n                        // If that's not the case, we won't run the concatenate logic for that role at all...\n                        let areValuesCountsEqual: boolean = _.every(\n                            categoryColumnsForTargetRole,\n                            (categoryColumn: DataViewCategoryColumn) => categoryColumn.values.length === categoryColumnsForTargetRole[0].values.length);\n                        \n                        if (areValuesCountsEqual) {\n                            result = {\n                                roleName: targetRoleName,\n                                categories: categoryColumnsForTargetRole,\n                            };\n                        }\n                    }\n                }\n            }\n            return result;\n        }\n\n        /** If all mappings in the specified roleMappings have the same single role name for their categorical category roles, return that role name, else returns undefined. */\n        function getSingleCategoryRoleNameInEveryRoleMapping(categoricalRoleMappings: DataViewMapping[]): string {\n            debug.assertNonEmpty(categoricalRoleMappings, 'categoricalRoleMappings');\n            debug.assert(_.every(categoricalRoleMappings, (roleMapping) => !!roleMapping.categorical), 'All mappings in categoricalRoleMappings must contain a DataViewCategoricalMapping');\n\n            let result: string;\n\n            // With \"list\" in role mapping, it is possible to have multiple role names for category.\n            // For now, proceed to concatenate category columns only when categories are bound to 1 Role.\n            // We can change this if we want to support independent (sibling) group hierarchies in categorical.\n            let uniqueCategoryRoles: string[] = _.chain(categoricalRoleMappings)\n                .map((roleMapping) => {\n                    let categoryRoles = getAllRolesInCategories(roleMapping.categorical);\n                    return categoryRoles.length === 1 ? categoryRoles[0] : undefined;\n                })\n                .uniq() // Note: _.uniq() does not treat two arrays with same elements as equal\n                .value();\n            \n\n            let isSameCategoryRoleNameInAllRoleMappings = uniqueCategoryRoles.length === 1 && !_.isUndefined(uniqueCategoryRoles[0]);\n            if (isSameCategoryRoleNameInAllRoleMappings) {\n                result = uniqueCategoryRoles[0];\n            }\n\n            return result;\n        }\n\n        function isVisualExpectingMaxOneCategoryColumn(categoricalRoleName: string, roleMappings: DataViewMapping[]): boolean {\n            debug.assertValue(categoricalRoleName, 'categoricalRoleName');\n            debug.assertNonEmpty(roleMappings, 'roleMappings');\n\n            let isVisualExpectingMaxOneCategoryColumn = _.every(\n                roleMappings,\n                (roleMapping) => {\n                    return !_.isEmpty(roleMapping.conditions) &&\n                        _.every(roleMapping.conditions, condition => condition[categoricalRoleName] && condition[categoricalRoleName].max === 1);\n                });\n\n            return isVisualExpectingMaxOneCategoryColumn;\n        }\n\n        /**\n         * Returns the array of role names that are mapped to categorical categories.\n         * Returns an empty array if none exists.\n         */\n        function getAllRolesInCategories(categoricalRoleMapping: DataViewCategoricalMapping): string[] {\n            debug.assertValue(categoricalRoleMapping, 'categoricalRoleMapping');\n\n            let roleNames: string[] = [];\n            DataViewMapping.visitCategoricalCategories(\n                categoricalRoleMapping.categories,\n                {\n                    visitRole: (roleName: string) => {\n                        roleNames.push(roleName);\n                    }\n                });\n\n            return roleNames;\n        }\n\n        function applyConcatenation(dataView: DataView, objectDescriptors: DataViewObjectDescriptors, roleName: string, columnsSortedByProjectionOrdering: DataViewCategoryColumn[], queryRefsToIgnore: string[]): DataView {\n            debug.assertValue(dataView, 'dataView');\n            debug.assertAnyValue(objectDescriptors, 'objectDescriptors');\n            debug.assertValue(roleName, 'roleName');\n            debug.assert(columnsSortedByProjectionOrdering && columnsSortedByProjectionOrdering.length >= 2, 'columnsSortedByProjectionOrdering && columnsSortedByProjectionOrdering.length >= 2');\n\n            let formatStringPropId: DataViewObjectPropertyIdentifier = DataViewObjectDescriptors.findFormatString(objectDescriptors);\n            let concatenatedValues: string[] = concatenateValues(columnsSortedByProjectionOrdering, queryRefsToIgnore, formatStringPropId);\n\n            let columnsSourceSortedByProjectionOrdering = _.map(columnsSortedByProjectionOrdering, categoryColumn => categoryColumn.source);\n            let concatenatedColumnMetadata: DataViewMetadataColumn = createConcatenatedColumnMetadata(roleName, columnsSourceSortedByProjectionOrdering, queryRefsToIgnore);\n            let transformedDataView = inheritSingle(dataView);\n            addToMetadata(transformedDataView, concatenatedColumnMetadata);\n\n            let concatenatedCategoryColumn: DataViewCategoryColumn = createConcatenatedCategoryColumn(\n                columnsSortedByProjectionOrdering,\n                concatenatedColumnMetadata,\n                concatenatedValues);\n\n            let dataViewCategorical: DataViewCategorical = dataView.categorical;\n\n            let transformedCategoricalCategories: DataViewCategoryColumn[] = _.difference(dataViewCategorical.categories, columnsSortedByProjectionOrdering);\n            transformedCategoricalCategories.push(concatenatedCategoryColumn);\n\n            let transformedCategorical: DataViewCategorical = inheritSingle(dataViewCategorical);\n            transformedCategorical.categories = transformedCategoricalCategories;\n            transformedDataView.categorical = transformedCategorical;\n\n            return transformedDataView;\n        }\n\n        function concatenateValues(columnsSortedByProjectionOrdering: DataViewCategoryColumn[], queryRefsToIgnore: string[], formatStringPropId: DataViewObjectPropertyIdentifier): string[] {\n            debug.assertValue(columnsSortedByProjectionOrdering, 'columnsSortedByProjectionOrdering');\n            debug.assertAnyValue(queryRefsToIgnore, 'queryRefsToIgnore');\n            debug.assertAnyValue(formatStringPropId, 'formatStringPropId');\n\n            let concatenatedValues: string[] = [];\n\n            // concatenate the values in dataViewCategorical.categories[0..length-1].values[j], and store it in combinedValues[j]\n            for (let categoryColumn of columnsSortedByProjectionOrdering) {\n                let formatString = valueFormatter.getFormatString(categoryColumn.source, formatStringPropId);\n\n                for (let i = 0, len = categoryColumn.values.length; i < len; i++) {\n                    if (!_.contains(queryRefsToIgnore, categoryColumn.source.queryName)) {\n                        let value = categoryColumn.values && categoryColumn.values[i];\n                        let formattedValue = valueFormatter.format(value, formatString);\n                        concatenatedValues[i] = (concatenatedValues[i] === undefined) ? formattedValue : (formattedValue + ' ' + concatenatedValues[i]);\n                    }\n                }\n            }\n\n            return concatenatedValues;\n        }\n\n        /**\n        * Returns a new array of elements from columns as they are ordered for the specified roleName in the specified projectionOrdering.\n        */\n        function sortColumnsByProjectionOrdering(projectionOrdering: DataViewProjectionOrdering, roleName: string, columns: DataViewCategoryColumn[]): DataViewCategoryColumn[] {\n            debug.assertAnyValue(projectionOrdering, 'projectionOrdering');\n            debug.assertValue(roleName, 'roleName');\n            debug.assertValue(columns, 'columns');\n\n            let columnsInProjectionOrdering: DataViewCategoryColumn[];\n\n            if (projectionOrdering) {\n                // the numeric values in projectionOrdering correspond to the index property of DataViewMetadataColumn\n                let columnsByIndex: { [index: number]: DataViewCategoricalColumn } = {};\n                for (let column of columns) {\n                    if (column.source.roles[roleName]) {\n                        debug.assert(!columnsByIndex[column.source.index], 'The specified columns should not contain multiple columns with same index: ' + column.source.index);\n                        columnsByIndex[column.source.index] = column;\n                    }\n                }\n\n                let columnIndicesInProjectionOrdering: number[] = projectionOrdering[roleName];\n\n                columnsInProjectionOrdering = _.chain(columnIndicesInProjectionOrdering)\n                    .map(columnIndex => columnsByIndex[columnIndex])\n                    .filter((column: DataViewCategoricalColumn) => !!column)\n                    .value();\n            }\n            else {\n                // If projectionOrder is unspecified, just return the columns for the specified role in their current order\n                columnsInProjectionOrdering = _.filter(columns, column => column.source.roles[roleName]);\n            }\n\n            return columnsInProjectionOrdering;\n        }\n\n        /**\n         * Creates the column metadata that will back the column with the concatenated values. \n         */\n        function createConcatenatedColumnMetadata(roleName: string, sourceColumnsSortedByProjectionOrdering: DataViewMetadataColumn[], queryRefsToIgnore?: string[]): DataViewMetadataColumn {\n            debug.assertValue(roleName, 'roleName');\n            debug.assertNonEmpty(sourceColumnsSortedByProjectionOrdering, 'sourceColumnsSortedByProjectionOrdering');\n            debug.assert(_.chain(sourceColumnsSortedByProjectionOrdering).map(c => c.isMeasure).uniq().value().length === 1, 'pre-condition: caller code should not attempt to combine a mix of measure columns and non-measure columns');\n\n            let concatenatedDisplayName: string;\n\n            for (let columnSource of sourceColumnsSortedByProjectionOrdering) {\n                if (!_.contains(queryRefsToIgnore, columnSource.queryName)) {\n                    concatenatedDisplayName = (concatenatedDisplayName == null) ? columnSource.displayName : (columnSource.displayName + ' ' + concatenatedDisplayName);\n                }\n            }\n\n            let newRoles: { [name: string]: boolean } = {};\n            newRoles[roleName] = true;\n\n            let newColumnMetadata: DataViewMetadataColumn = {\n                displayName: concatenatedDisplayName,\n                roles: newRoles,\n                type: ValueType.fromPrimitiveTypeAndCategory(PrimitiveType.Text)\n            };\n\n            let columnSourceForCurrentDrillLevel = _.last(sourceColumnsSortedByProjectionOrdering);\n            if (columnSourceForCurrentDrillLevel.isMeasure !== undefined) {\n                newColumnMetadata.isMeasure = columnSourceForCurrentDrillLevel.isMeasure;\n            }\n\n            // TODO VSTS 6842046: Investigate whether we should change that property to mandatory or change the Chart visual code.\n            // If queryName is not set at all, the column chart visual will only render column for the first group instance.\n            // If queryName is set to any string other than columnForCurrentDrillLevel.source.queryName, then drilldown by group instance is broken (VSTS 6847879).\n            newColumnMetadata.queryName = columnSourceForCurrentDrillLevel.queryName;\n\n            return newColumnMetadata;\n        }\n\n        function addToMetadata(transformedDataView: DataView, newColumn: DataViewMetadataColumn): void {\n            debug.assertValue(transformedDataView, 'transformedDataView');\n            debug.assertValue(newColumn, 'newColumn');\n\n            let transformedColumns = inheritSingle(transformedDataView.metadata.columns);\n            transformedColumns.push(newColumn);\n\n            let transformedMetadata = inheritSingle(transformedDataView.metadata);\n            transformedMetadata.columns = transformedColumns;\n\n            transformedDataView.metadata = transformedMetadata;\n        }\n\n        function createConcatenatedCategoryColumn(\n            sourceColumnsSortedByProjectionOrdering: DataViewCategoryColumn[],\n            columnMetadata: DataViewMetadataColumn,\n            concatenatedValues: string[]): DataViewCategoryColumn {\n            debug.assert(sourceColumnsSortedByProjectionOrdering && sourceColumnsSortedByProjectionOrdering.length >= 2, 'sourceColumnsSortedByProjectionOrdering && sourceColumnsSortedByProjectionOrdering.length >= 2');\n\n            let newCategoryColumn: DataViewCategoryColumn = {\n                source: columnMetadata,\n                values: concatenatedValues\n            };\n\n            // We expect every DataViewCategoryColumn in concatenationSourceColumns to have the same set of identities, always.\n            // So, we'll just take the identities and identityFields from the first column\n            let firstColumn = sourceColumnsSortedByProjectionOrdering[0];\n\n            if (firstColumn.identity) {\n                newCategoryColumn.identity = firstColumn.identity;\n            }\n\n            if (firstColumn.identityFields) {\n                newCategoryColumn.identityFields = firstColumn.identityFields;\n            }\n\n            // It is safe to look at the first column as it is the one that is being set by findSelectedCategoricalColumn\n            if (firstColumn.objects) {\n                newCategoryColumn.objects = firstColumn.objects;\n            }\n\n            return newCategoryColumn;\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi {\n    export const enum RoleItemContext {\n        CategoricalValue,\n        CategoricalValueGroup,\n    }\n\n    export interface IDataViewMappingVisitor {\n        visitRole(role: string, context?: RoleItemContext): void;\n        visitReduction?(reductionAlgorithm?: ReductionAlgorithm): void;\n    }\n\n    export module DataViewMapping {\n        export function visitMapping(mapping: DataViewMapping, visitor: IDataViewMappingVisitor): void {\n            debug.assertValue(mapping, 'mapping');\n            debug.assertValue(visitor, 'visitor');\n\n            let categorical = mapping.categorical;\n            if (categorical)\n                visitCategorical(categorical, visitor);\n\n            let table = mapping.table;\n            if (table)\n                visitTable(table, visitor);\n\n            let matrix = mapping.matrix;\n            if (matrix)\n                visitMatrix(matrix, visitor);\n\n            let tree = mapping.tree;\n            if (tree)\n                visitTree(tree, visitor);\n            \n            let single = mapping.single;\n            if (single)\n                visitSingle(single, visitor);\n        }\n\n        export function visitCategorical(mapping: DataViewCategoricalMapping, visitor: IDataViewMappingVisitor): void {\n            debug.assertValue(mapping, 'mapping');\n            debug.assertValue(visitor, 'visitor');\n\n            visitCategoricalCategories(mapping.categories, visitor);\n\n            visitCategoricalValues(mapping.values, visitor);\n        }\n\n        export function visitCategoricalCategories(mapping: DataViewRoleMappingWithReduction | DataViewListRoleMappingWithReduction, visitor: IDataViewMappingVisitor): void {\n            debug.assertAnyValue(mapping, 'mapping');\n            debug.assertValue(visitor, 'visitor');\n\n            if (mapping) {\n                visitBind(<DataViewRoleBindMapping>mapping, visitor);\n                visitFor(<DataViewRoleForMapping>mapping, visitor);\n                visitList(<DataViewListRoleMapping>mapping, visitor);\n\n                visitReduction(mapping, visitor);\n            }\n        }\n\n        export function visitCategoricalValues(mapping: DataViewRoleMapping | DataViewGroupedRoleMapping | DataViewListRoleMapping, visitor: IDataViewMappingVisitor): void {\n            debug.assertAnyValue(mapping, 'mapping');\n            debug.assertValue(visitor, 'visitor');\n\n            if (mapping) {\n                visitBind(<DataViewRoleBindMapping>mapping, visitor, RoleItemContext.CategoricalValue);\n                visitFor(<DataViewRoleForMapping>mapping, visitor, RoleItemContext.CategoricalValue);\n                visitList(<DataViewListRoleMapping>mapping, visitor, RoleItemContext.CategoricalValue);\n\n                let groupedRoleMapping = <DataViewGroupedRoleMapping>mapping;\n                visitGrouped(groupedRoleMapping, visitor);\n\n                let group = groupedRoleMapping.group;\n                if (group) {\n                    for (let item of group.select) {\n                        visitBind(<DataViewRoleBindMapping>item, visitor, RoleItemContext.CategoricalValueGroup);\n                        visitFor(<DataViewRoleForMapping>item, visitor, RoleItemContext.CategoricalValueGroup);\n                    }\n                }\n            }\n        }\n\n        export function visitTable(mapping: DataViewTableMapping, visitor: IDataViewMappingVisitor): void {\n            debug.assertValue(mapping, 'mapping');\n            debug.assertValue(visitor, 'visitor');\n\n            let rows = mapping.rows;\n            visitBind(<DataViewRoleBindMapping>rows, visitor);\n            visitFor(<DataViewRoleForMapping>rows, visitor);\n            visitList(<DataViewListRoleMapping>rows, visitor);\n\n            visitReduction(rows, visitor);\n        }\n\n        function visitMatrix(mapping: DataViewMatrixMapping, visitor: IDataViewMappingVisitor): void {\n            debug.assertValue(mapping, 'mapping');\n            debug.assertValue(visitor, 'visitor');\n\n            visitMatrixItems(mapping.rows, visitor);\n            visitMatrixItems(mapping.columns, visitor);\n            visitMatrixItems(mapping.values, visitor);\n        }\n\n        /**\n         * For visiting DataViewMatrixMapping.rows, DataViewMatrixMapping.columns, or DataViewMatrixMapping.values.\n         *\n         * @param mapping Can be one of DataViewMatrixMapping.rows, DataViewMatrixMapping.columns, or DataViewMatrixMapping.values.\n         * @param visitor The visitor.\n         */\n        export function visitMatrixItems(mapping: DataViewRoleForMappingWithReduction | DataViewListRoleMappingWithReduction, visitor: IDataViewMappingVisitor): void {\n            debug.assertAnyValue(mapping, 'mapping');\n            debug.assertValue(visitor, 'visitor');\n\n            if (mapping) {\n                visitFor(<DataViewRoleForMapping>mapping, visitor);\n                visitList(<DataViewListRoleMapping>mapping, visitor);\n\n                visitReduction(mapping, visitor);\n            }\n        }\n\n        function visitTree(mapping: DataViewTreeMapping, visitor: IDataViewMappingVisitor): void {\n            debug.assertValue(mapping, 'mapping');\n            debug.assertValue(visitor, 'visitor');\n\n            visitTreeNodes(mapping.nodes, visitor);\n            visitTreeValues(mapping.values, visitor);\n        }\n\n        export function visitTreeNodes(mapping: DataViewRoleForMappingWithReduction, visitor: IDataViewMappingVisitor): void {\n            debug.assertAnyValue(mapping, 'mapping');\n            debug.assertValue(visitor, 'visitor');\n\n            if (mapping) {\n                visitFor(mapping, visitor);\n\n                visitReduction(mapping, visitor);\n            }\n        }\n\n        export function visitTreeValues(mapping: DataViewRoleForMapping, visitor: IDataViewMappingVisitor): void {\n            debug.assertAnyValue(mapping, 'mapping');\n            debug.assertValue(visitor, 'visitor');\n\n            if (mapping) {\n                visitFor(mapping, visitor);\n            }\n        }\n\n        function visitBind(mapping: DataViewRoleBindMapping, visitor: IDataViewMappingVisitor, context?: RoleItemContext): void {\n            debug.assertValue(mapping, 'mapping');\n            debug.assertValue(visitor, 'visitor');\n\n            let bind = mapping.bind;\n            if (bind) {\n                if (context != null)\n                    visitor.visitRole(bind.to, context);\n                else\n                    visitor.visitRole(bind.to);\n            }\n        }\n\n        function visitFor(mapping: DataViewRoleForMapping, visitor: IDataViewMappingVisitor, context?: RoleItemContext): void {\n            debug.assertValue(mapping, 'mapping');\n            debug.assertValue(visitor, 'visitor');\n\n            let forValue = mapping.for;\n            if (forValue) {\n                if (context != null)\n                    visitor.visitRole(forValue.in, context);\n                else\n                    visitor.visitRole(forValue.in);\n            }\n        }\n\n        function visitList(mapping: DataViewListRoleMapping, visitor: IDataViewMappingVisitor, context?: RoleItemContext): void {\n            debug.assertValue(mapping, 'mapping');\n            debug.assertValue(visitor, 'visitor');\n\n            let select = mapping.select;\n            if (select) {\n                for (let item of select) {\n                    visitBind(<DataViewRoleBindMapping>item, visitor, context);\n                    visitFor(<DataViewRoleForMapping>item, visitor, context);\n                }\n            }\n        }\n\n        export function visitGrouped(mapping: DataViewGroupedRoleMapping, visitor: IDataViewMappingVisitor): void {\n            debug.assertAnyValue(mapping, 'mapping');\n            debug.assertValue(visitor, 'visitor');\n\n            if (!mapping)\n                return;\n\n            let group = mapping.group;\n            if (group) {\n                visitor.visitRole(group.by);\n\n                visitReduction(group, visitor);\n            }\n        }\n\n        function visitReduction(mapping: HasReductionAlgorithm, visitor: IDataViewMappingVisitor): void {\n            debug.assertValue(mapping, 'mapping');\n            debug.assertValue(visitor, 'visitor');\n\n            if (visitor.visitReduction) {\n                let reductionAlgorithm = mapping.dataReductionAlgorithm;\n                if (reductionAlgorithm) {\n                    visitor.visitReduction(reductionAlgorithm);\n                }\n            }\n        }\n\n        function visitSingle(mapping: DataViewSingleMapping, visitor: IDataViewMappingVisitor): void {\n            debug.assertValue(mapping, 'mapping');\n            debug.assertValue(visitor, 'visitor');\n\n            visitor.visitRole(mapping.role);\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    import inheritSingle = Prototype.inheritSingle;\n\n    export interface DataViewNormalizeValuesApplyOptions {\n        dataview: DataView;\n        dataViewMappings: DataViewMapping[];\n        dataRoles: VisualDataRole[];\n    }\n\n    /**\n     * Interface of a function for deciding whether a column is tied to any role that has required type(s).\n     *\n     * @param columnIndex the position of the column in the select statement, i.e. the same semantic as the index property on the DataViewMetadataColumn interface.\n     * @returns true iff the column in the specified columnIndex is tied to any role that has required type(s), i.e. if the value in that column potentially needs to get normalized.\n     */\n    export interface IMetadataColumnFilter {\n        (columnIndex: number): boolean;\n    }\n\n    /**\n     * Returns true iff the specified value is of matching type as required by the role assigned to the column associated with this filter object.\n     */\n    export interface IColumnValueFilter {\n        (value: any): boolean;\n    }\n\n    /**\n     * Interface of a function for deciding whether a value needs to be normalized due to not having a matching type as required by a role tied to the column associated with the specified columnIndex.\n     *\n     * @param columnIndex the position of the column in the select statement, i.e. the same semantic as the index property on the DataViewMetadataColumn interface.\n     * @returns false iff the specified value needs to be normalized due to not having a matching type as required by a role tied to the column associated with the specified columnIndex.\n     */\n    export interface IValueFilter {\n        (columnIndex: number, value: any): boolean;\n    }\n\n    export module DataViewNormalizeValues {\n        export function apply(options: DataViewNormalizeValuesApplyOptions): void {\n            debug.assertValue(options, 'options');\n\n            let rolesToNormalize = _.filter(options.dataRoles, role => !_.isEmpty(role.requiredTypes));\n\n            filterVariantMeasures(options.dataview, options.dataViewMappings, rolesToNormalize);\n        }\n\n        export function filterVariantMeasures(dataview: DataView, dataViewMappings: DataViewMapping[], rolesToNormalize: VisualDataRole[]): void {\n            debug.assertValue(dataview, 'dataview');\n\n            // Don't perform this unless we actually have dataViewMappings and variant measures to suppress\n            // When we switch to lazy per-visual DataView creation, we'll be able to remove this check.\n            if (_.isEmpty(dataViewMappings) || _.isEmpty(rolesToNormalize))\n                return;\n\n            let columnFilter = generateMetadataColumnFilter(dataview.metadata.columns, rolesToNormalize);\n            let valueFilter = generateValueFilter(dataview.metadata.columns, rolesToNormalize);\n\n            let usedMappings = {};\n            for (let dataViewMapping of dataViewMappings) {\n                // Get dataview specified in mappings which are also in dataview\n                for (let dataViewMappingProp in dataViewMapping) {\n                    if (dataview[dataViewMappingProp] != null)\n                        usedMappings[dataViewMappingProp] = true;\n                }\n            }\n\n            if (usedMappings['categorical'])\n                filterVariantMeasuresCategorical(dataview.categorical, columnFilter, valueFilter);\n            if (usedMappings['table'])\n                filterVariantMeasuresTable(dataview.table, columnFilter, valueFilter);\n            if (usedMappings['tree'])\n                filterVariantMeasuresTreeNode(dataview.tree.root, columnFilter, valueFilter);\n            if (usedMappings['matrix'])\n                filterVariantMeasuresMatrix(dataview.matrix, columnFilter, valueFilter);\n            if (usedMappings['single'])\n                filterVariantMeasuresSingle(dataview, dataViewMappings, rolesToNormalize, valueFilter);\n        }\n\n        export function generateMetadataColumnFilter(columns: DataViewMetadataColumn[], rolesToNormalize: VisualDataRole[]): IMetadataColumnFilter {\n            if (!columns || !rolesToNormalize)\n                return () => false;\n\n            let columnsToNormalize = {};\n            for (let column of columns) {\n                let roles = column.roles;\n                if (!roles)\n                    continue;\n                for (let role of rolesToNormalize) {\n                    if (!roles[role.name])\n                        continue;\n                    columnsToNormalize[column.index] = true;\n                    break;\n                }\n            }\n\n            return (columnIndex: number) => {\n                if (isNaN(columnIndex))\n                    return false;\n\n                return !!columnsToNormalize[columnIndex];\n            };\n        }\n\n        export function generateValueFilter(columns: DataViewMetadataColumn[], rolesToNormalize: VisualDataRole[]): IValueFilter {\n            if (!columns || !rolesToNormalize)\n                return () => true;\n\n            let columnValueFilters: IColumnValueFilter[] = [];\n\n            // Build columnValueFilters based on role requiredTypes\n            for (let column of columns) {\n                let columnValueFilter = generateColumnValueFilter(column, rolesToNormalize);\n\n                if (columnValueFilter)\n                    columnValueFilters[column.index] = columnValueFilter;\n            }\n\n            return <IValueFilter>(columnIndex: number, value: any) => {\n                if (columnValueFilters[columnIndex])\n                    return columnValueFilters[columnIndex](value);\n\n                return true;\n            };\n        }\n\n        function generateColumnValueFilter(column: DataViewMetadataColumn, rolesToNormalize: VisualDataRole[]): IColumnValueFilter {\n            let requiredTypes = getColumnRequiredTypes(column, rolesToNormalize);\n\n            if (_.isEmpty(requiredTypes))\n                return;\n\n            return (value: any): boolean => {\n                return doesValueMatchTypes(value, requiredTypes);\n            };\n        }\n\n        export function getColumnRequiredTypes(column: DataViewMetadataColumn, rolesToNormalize: VisualDataRole[]): ValueType[] {\n            let requiredTypes = [];\n            let columnRoles = column && column.roles;\n\n            if (!columnRoles)\n                return requiredTypes;\n\n            for (let role of rolesToNormalize) {\n                if (!columnRoles[role.name])\n                    continue;\n                for (let typeDescriptor of role.requiredTypes) {\n                    let type = ValueType.fromDescriptor(typeDescriptor);\n                    requiredTypes.push(type);\n                }\n            }\n\n            return requiredTypes;\n        }\n\n        function filterVariantMeasuresCategorical(dataview: DataViewCategorical, columnFilter: IMetadataColumnFilter, valueFilter: IValueFilter): void {\n            let values = dataview && dataview.values;\n            if (!values)\n                return;\n\n            let valuesGrouped = values.grouped();\n            if (!valuesGrouped)\n                return;\n\n            for (let valueGroup of valuesGrouped) {\n                let valuesInGroup = valueGroup.values;\n                for (let valueColumn of valuesInGroup) {\n                    let columnIndex = valueColumn.source.index;\n                    if (!columnFilter(columnIndex))\n                        continue;\n\n                    for (let i = 0, ilen = valueColumn.values.length; i < ilen; i++) {\n                        valueColumn.values = normalizeVariant(valueColumn.values, i, columnIndex, valueFilter);\n                    }\n                }\n            }\n        }\n\n        function filterVariantMeasuresTable(dataview: DataViewTable, columnFilter: IMetadataColumnFilter, valueFilter: IValueFilter): void {\n            let columns = dataview && dataview.columns;\n\n            if (!columns)\n                return;\n\n            let filteredColumns = [];\n            for (let column of columns) {\n                if (columnFilter(column.index))\n                    filteredColumns.push(column.index);\n            }\n\n            let rows = dataview.rows;\n            for (let i = 0, ilen = rows.length; i < ilen; i++) {\n                for (let index of filteredColumns) {\n                    rows[i] = normalizeVariant(rows[i], index, index, valueFilter);\n                }\n            }\n        }\n\n        function filterVariantMeasuresTreeNode(node: DataViewTreeNode, columnFilter: IMetadataColumnFilter, valueFilter: IValueFilter): void {\n            if (node.values) {\n                for (let columnIndex in node.values) {\n                    // In dataView.tree, the keys in node.values correspond to columnIndex of the node value\n                    if (columnFilter(<any>columnIndex)) {\n                        // According to nojorgen, it is possible to have primitive values as values in the node.values dictionary.\n                        if (typeof (node.values[columnIndex]) === 'object' && ('value' in node.values[columnIndex]))\n                            node.values[columnIndex] = normalizeVariant(node.values[columnIndex], 'value', <any>columnIndex, valueFilter);\n                        else // if node.values[columnIndex] is a primitive value\n                            node.values = normalizeVariant(node.values, columnIndex, <any>columnIndex, valueFilter);\n                    }\n                }\n            }\n            else if (node.children) {\n                for (let child of node.children) {\n                    filterVariantMeasuresTreeNode(child, columnFilter, valueFilter);\n                }\n            }\n        }\n\n        function filterVariantMeasuresMatrix(dataview: DataViewMatrix, columnFilter: IMetadataColumnFilter, valueFilter: IValueFilter): void {\n            let root = dataview && dataview.rows && dataview.rows.root;\n\n            if (!root)\n                return;\n\n            // Recurse into rows.children\n            // e.g. rows.children -> .children -> .children.values\n            filterVariantMeasuresMatrixRecursive(dataview, root, columnFilter, valueFilter);\n        }\n\n        function filterVariantMeasuresMatrixRecursive(dataviewMatrix: DataViewMatrix, node: DataViewTreeNode, columnFilter: IMetadataColumnFilter, valueFilter: IValueFilter): void {\n            if (node.values) {\n                for (let id in node.values) {\n                    // Note related to VSTS 6547124: In dataView.matrix, the keys in node.values are NOT equivalent to value.valueSourceIndex.\n                    let nodeValue: DataViewMatrixNodeValue = node.values[id];\n\n                    // the property DataViewMatrixNodeValue.valueSourceIndex will not exist if valueSourceIndex is 0 for that value\n                    let valueSourceIndex: number = nodeValue.valueSourceIndex || 0;\n\n                    // index is an optional property on DataViewMetadataColumn, but I am not sure when it will ever be undefined in a matrix' column metadata\n                    let columnIndex = dataviewMatrix.valueSources[valueSourceIndex].index;\n\n                    if (_.isNumber(columnIndex) && columnFilter(columnIndex)) {\n                        node.values[id] = normalizeVariant(nodeValue, 'value', columnIndex, valueFilter);\n                    }\n                }\n            }\n            else if (node.children) {\n                for (let child of node.children) {\n                    filterVariantMeasuresMatrixRecursive(dataviewMatrix, child, columnFilter, valueFilter);\n                }\n            }\n        }\n\n        function filterVariantMeasuresSingle(dataview: DataView, dataViewMappings: DataViewMapping[], rolesToNormalize: VisualDataRole[], valueFilter: IValueFilter): void {\n            if (!dataview.single)\n                return;\n\n            let roleNames: string[] = [];\n            for (let role of rolesToNormalize) {\n                if (role.name)\n                    roleNames.push(role.name);\n            }\n\n            let columns = dataview.metadata.columns;\n            for (let dataViewMapping of dataViewMappings) {\n                let roleName = dataViewMapping.single.role;\n                if (roleNames.indexOf(roleName) !== -1) {\n                    let column = firstColumnByRoleName(columns, roleName);\n                    if (column)\n                        dataview.single = normalizeVariant(dataview.single, 'value', column.index, valueFilter);\n                    return;\n                }\n            }\n        }\n\n        export function normalizeVariant<T>(object: T, key: string|number, columnIndex: number, valueFilter: IValueFilter): T {\n            if (!object)\n                return;\n\n            let value = object[key];\n            if (value !== null && !valueFilter(columnIndex, value)) {\n                object = inheritSingle(object);\n                object[key] = null;\n            }\n\n            return object;\n        }\n\n        function doesValueMatchTypes<T>(value: T, types: ValueType[]): boolean {\n            for (let type of types) {\n                if (type.numeric || type.integer)\n                    return typeof (value) === 'number';\n            }\n\n            return false;\n        }\n\n        function firstColumnByRoleName(columns: DataViewMetadataColumn[], roleName: string): DataViewMetadataColumn {\n            for (let column of columns) {\n                let columnRoles = column && column.roles;\n                if (columnRoles && columnRoles[roleName])\n                    return column;\n            }\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi {\n\n    export module DataViewObjects {\n        /** Gets the value of the given object/property pair. */\n        export function getValue<T>(objects: DataViewObjects, propertyId: DataViewObjectPropertyIdentifier, defaultValue?: T): T {\n            debug.assertAnyValue(objects, 'objects');\n            debug.assertValue(propertyId, 'propertyId');\n\n            if (!objects)\n                return defaultValue;\n\n            let objectOrMap = objects[propertyId.objectName];\n            debug.assert(!isUserDefined(objectOrMap), 'expected DataViewObject');\n\n            let object = <DataViewObject>objectOrMap;\n            return DataViewObject.getValue(object, propertyId.propertyName, defaultValue);\n        }\n\n        /** Gets an object from objects. */\n        export function getObject(objects: DataViewObjects, objectName: string, defaultValue?: DataViewObject): DataViewObject {\n            if (objects && objects[objectName]) {\n                let object = <DataViewObject>objects[objectName];\n                debug.assert(!isUserDefined(object), 'expected DataViewObject');\n                return object;\n            }\n            else {\n                return defaultValue;\n            }\n        }\n\n        /** Gets a map of user-defined objects. */\n        export function getUserDefinedObjects(objects: DataViewObjects, objectName: string): DataViewObjectMap {\n            if (objects && objects[objectName]) {\n                let map = <DataViewObjectMap>objects[objectName];\n                debug.assert(isUserDefined(map), 'expected DataViewObjectMap');\n                return map;\n            }\n        }\n\n        /** Gets the solid color from a fill property. */\n        export function getFillColor(objects: DataViewObjects, propertyId: DataViewObjectPropertyIdentifier, defaultColor?: string): string {\n            let value: Fill = getValue(objects, propertyId);\n            if (!value || !value.solid)\n                return defaultColor;\n\n            return value.solid.color;\n        }\n\n        /** Returns true if the given object represents a collection of user-defined objects */\n        export function isUserDefined(objectOrMap: DataViewObject | DataViewObjectMap): boolean {\n            return _.isArray(objectOrMap);\n        }\n    }\n\n    export module DataViewObject {\n        export function getValue<T>(object: DataViewObject, propertyName: string, defaultValue?: T): T {\n            debug.assertAnyValue(object, 'object');\n            debug.assertValue(propertyName, 'propertyName');\n\n            if (!object)\n                return defaultValue;\n\n            let propertyValue = <T>object[propertyName];\n            if (propertyValue === undefined)\n                return defaultValue;\n\n            return propertyValue;\n        }\n\n        /** Gets the solid color from a fill property using only a propertyName */\n        export function getFillColorByPropertyName(objects: DataViewObjects, propertyName: string, defaultColor?: string): string {\n            let value: Fill = DataViewObject.getValue(objects, propertyName);\n            if (!value || !value.solid)\n                return defaultColor;\n\n            return value.solid.color;\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    import JsonComparer = jsCommon.JsonComparer;\n\n    /** Defines the values for particular objects. */\n    export interface DataViewObjectDefinitions {\n        [objectName: string]: DataViewObjectDefinition[];\n    }\n\n    export interface DataViewObjectDefinition {\n        selector?: Selector;\n        properties: DataViewObjectPropertyDefinitions;\n    }\n\n    export interface DataViewObjectPropertyDefinitions {\n        [name: string]: DataViewObjectPropertyDefinition;\n    }\n\n    export type DataViewObjectPropertyDefinition = SQExpr | StructuralObjectDefinition;\n\n    export module DataViewObjectDefinitions {\n\n        /** Creates or reuses a DataViewObjectDefinition for matching the given objectName and selector within the defns. */\n        export function ensure(\n            defns: DataViewObjectDefinitions,\n            objectName: string,\n            selector: Selector): DataViewObjectDefinition {\n            debug.assertValue(defns, 'defns');\n\n            let defnsForObject = defns[objectName];\n            if (!defnsForObject)\n                defns[objectName] = defnsForObject = [];\n\n            for (let i = 0, len = defnsForObject.length; i < len; i++) {\n                let defn = defnsForObject[i];\n                if (Selector.equals(defn.selector, selector))\n                    return defn;\n            }\n\n            let newDefn: DataViewObjectDefinition = {\n                selector: selector,\n                properties: {},\n            };\n            defnsForObject.push(newDefn);\n\n            return newDefn;\n        }\n\n        export function deleteProperty(\n            defns: DataViewObjectDefinitions,\n            objectName: string,\n            selector: Selector,\n            propertyName: string): void {\n            debug.assertValue(defns, 'defns');\n\n            let defn = getObjectDefinition(defns, objectName, selector);\n            if (!defn)\n                return;\n\n            DataViewObjectDefinition.deleteSingleProperty(defn, propertyName);\n        }\n        \n        export function setValue(\n            defns: DataViewObjectDefinitions,\n            propertyId: DataViewObjectPropertyIdentifier,\n            selector: Selector,\n            value: DataViewObjectPropertyDefinition): void {\n            debug.assertValue(defns, 'defns');\n            debug.assertValue(propertyId, 'propertyId');\n\n            ensure(defns, propertyId.objectName, selector).properties[propertyId.propertyName] = value;\n        }\n\n        export function getValue(\n            defns: DataViewObjectDefinitions,\n            propertyId: DataViewObjectPropertyIdentifier,\n            selector: Selector): DataViewObjectPropertyDefinition {\n\n            let properties = getPropertyContainer(defns, propertyId, selector);\n            if (!properties)\n                return;\n\n            return properties[propertyId.propertyName];\n        }\n\n        export function getPropertyContainer(\n            defns: DataViewObjectDefinitions,\n            propertyId: DataViewObjectPropertyIdentifier,\n            selector: Selector): DataViewObjectPropertyDefinitions {\n\n            let defn = getObjectDefinition(defns, propertyId.objectName, selector);\n            if (!defn)\n                return;\n\n            return defn.properties;\n        }\n\n        export function getObjectDefinition(\n            defns: DataViewObjectDefinitions,\n            objectName: string,\n            selector: Selector): DataViewObjectDefinition {\n            debug.assertAnyValue(defns, 'defns');\n            debug.assertValue(objectName, 'objectName');\n            debug.assertAnyValue(selector, 'selector');\n\n            if (!defns)\n                return;\n\n            let defnsForObject = defns[objectName];\n            if (!defnsForObject)\n                return;\n\n            for (let i = 0, len = defnsForObject.length; i < len; i++) {\n                let defn = defnsForObject[i];\n                if (Selector.equals(defn.selector, selector))\n                    return defn;\n            }\n        }\n\n        export function propertiesAreEqual(a: DataViewObjectPropertyDefinition, b: DataViewObjectPropertyDefinition): boolean {\n            if (a instanceof SemanticFilter && b instanceof SemanticFilter) {\n                return SemanticFilter.isSameFilter(<SemanticFilter>a, <SemanticFilter>b);\n            }\n\n            return JsonComparer.equals(a, b);\n        }\n\n        export function allPropertiesAreEqual(a: DataViewObjectPropertyDefinitions, b: DataViewObjectPropertyDefinitions): boolean {\n            debug.assertValue(a, 'a');\n            debug.assertValue(b, 'b');\n\n            if (Object.keys(a).length !== Object.keys(b).length)\n                return false;\n\n            for (let property in a) {\n                if (!propertiesAreEqual(a[property], b[property]))\n                    return false;\n            }\n\n            return true;\n        }\n\n        export function encodePropertyValue(value: DataViewPropertyValue, valueTypeDescriptor: ValueTypeDescriptor): DataViewObjectPropertyDefinition {\n            debug.assertAnyValue(value, 'value');\n            debug.assertValue(valueTypeDescriptor, 'valueTypeDescriptor');\n\n            if (valueTypeDescriptor.bool) {\n                if (typeof (value) !== 'boolean')\n                    value = false; // This is fallback, which doesn't really belong here.\n\n                return SQExprBuilder.boolean(<boolean>value);\n            }\n            else if (valueTypeDescriptor.text || (valueTypeDescriptor.scripting && valueTypeDescriptor.scripting.source)) {\n                return SQExprBuilder.text(<string>value);\n            }\n            else if (valueTypeDescriptor.numeric) {\n                if ($.isNumeric(value))\n                    return SQExprBuilder.double(+value);\n            }\n            else if ((<StructuralTypeDescriptor>valueTypeDescriptor).fill) {\n                if (value) {\n                    return {\n                        solid: { color: SQExprBuilder.text(<string>value) }\n                    };\n                }\n            }\n            else if (valueTypeDescriptor.formatting) {\n                if (valueTypeDescriptor.formatting.labelDisplayUnits) {\n                    return SQExprBuilder.double(+value);\n                }\n                else {\n                    return SQExprBuilder.text(<string>value);\n                }\n            }\n            else if (valueTypeDescriptor.enumeration) {\n                if ($.isNumeric(value))\n                    return SQExprBuilder.double(+value);\n                else\n                    return SQExprBuilder.text(<string>value);\n            }\n            else if (valueTypeDescriptor.misc) {\n                if (value) {\n                    value = SQExprBuilder.text(<string>value);\n                } else {\n                    value = null;\n                }\n            }\n            else if ((<StructuralTypeDescriptor>valueTypeDescriptor).image) {\n                if (value) {\n                    let imageValue = <ImageValue>value;\n                    let imageDefinition: ImageDefinition = {\n                        name: SQExprBuilder.text(imageValue.name),\n                        url: SQExprBuilder.text(imageValue.url),\n                    };\n\n                    if (imageValue.scaling)\n                        imageDefinition.scaling = SQExprBuilder.text(imageValue.scaling);\n\n                    return imageDefinition;\n                }\n            }\n\n            return value;\n        }\n\n        export function clone(original: DataViewObjectDefinitions): DataViewObjectDefinitions {\n            debug.assertValue(original, 'original');\n\n            let cloned: DataViewObjectDefinitions = {};\n\n            for (let objectName in original) {\n                let originalDefns = original[objectName];\n                if (_.isEmpty(originalDefns))\n                    continue;\n\n                let clonedDefns: DataViewObjectDefinition[] = [];\n                for (let originalDefn of originalDefns) {\n                    clonedDefns.push({\n                        properties: cloneProperties(originalDefn.properties),\n                        selector: originalDefn.selector,\n                    });\n                }\n                cloned[objectName] = clonedDefns;\n            }\n\n            return cloned;\n        }\n\n        function cloneProperties(original: DataViewObjectPropertyDefinitions): DataViewObjectPropertyDefinitions {\n            debug.assertValue(original, 'original');\n\n            // NOTE: properties are considered atomic, so a shallow clone is appropriate here.\n            return _.clone(original);\n        }\n    }\n\n    export module DataViewObjectDefinition {\n\n        export function deleteSingleProperty(\n            defn: DataViewObjectDefinition,\n            propertyName: string): void {\n\n            //note: We decided that delete is acceptable here and that we don't need optimization here\n            delete defn.properties[propertyName];\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n\n    export module DataViewObjectDescriptors {\n        /** Attempts to find the format string property.  This can be useful for upgrade and conversion. */\n        export function findFormatString(descriptors: DataViewObjectDescriptors): DataViewObjectPropertyIdentifier {\n            return findProperty(\n                descriptors,\n                (propDesc: DataViewObjectPropertyDescriptor) => {\n                    let formattingTypeDesc = ValueType.fromDescriptor(propDesc.type).formatting;\n                    return formattingTypeDesc && formattingTypeDesc.formatString;\n                });\n        }\n\n        /** Attempts to find the filter property.  This can be useful for propagating filters from one visual to others. */\n        export function findFilterOutput(descriptors: DataViewObjectDescriptors): DataViewObjectPropertyIdentifier {\n            return findProperty(\n                descriptors,\n                (propDesc: DataViewObjectPropertyDescriptor) => {\n                    let propType: StructuralTypeDescriptor = propDesc.type;\n                    return propType && propType.filter && !propType.filter.selfFilter;\n                });\n        }\n\n        /** Attempts to find the self filter property. */\n        export function findSelfFilter(descriptors: DataViewObjectDescriptors): DataViewObjectPropertyIdentifier {\n            return findProperty(\n                descriptors,\n                (propDesc: DataViewObjectPropertyDescriptor) => {\n                    let propType: StructuralTypeDescriptor = propDesc.type;\n                    return propType && propType.filter && propType.filter.selfFilter;\n                });\n        }\n\n        /** Attempts to find the self filter enabled property. */\n        export function findSelfFilterEnabled(descriptors: DataViewObjectDescriptors): DataViewObjectPropertyIdentifier {\n            return findProperty(\n                descriptors,\n                (propDesc: DataViewObjectPropertyDescriptor) => {\n                    let propType: ValueTypeDescriptor = propDesc.type;\n                    return propType && propType.operations && propType.operations.searchEnabled;\n                });\n        }\n\n        /** Attempts to find the default value property.  This can be useful for propagating schema default value. */\n        export function findDefaultValue(descriptors: DataViewObjectDescriptors): DataViewObjectPropertyIdentifier {\n            return findProperty(\n                descriptors,\n                (propDesc: DataViewObjectPropertyDescriptor) => {\n                    let propType: StructuralTypeDescriptor = propDesc.type;\n                    return propType && !!propType.expression && propType.expression.defaultValue;\n                });\n        }\n\n        function findProperty(descriptors: DataViewObjectDescriptors, propPredicate: (propDesc: DataViewObjectPropertyDescriptor) => boolean): DataViewObjectPropertyIdentifier {\n            debug.assertAnyValue(descriptors, 'descriptors');\n            debug.assertAnyValue(propPredicate, 'propPredicate');\n\n            if (!descriptors)\n                return;\n\n            for (let objectName in descriptors) {\n                let objPropDescs = descriptors[objectName].properties;\n\n                for (let propertyName in objPropDescs) {\n                    if (propPredicate(objPropDescs[propertyName])) {\n                        return {\n                            objectName: objectName,\n                            propertyName: propertyName,\n                        };\n                    }\n                }\n            }\n        }\n    }\n}","/*\n*  Power BI Visualizations\n*\n*  Copyright (c) Microsoft Corporation\n*  All rights reserved. \n *  MIT License\n*\n*  Permission is hereby granted, free of charge, to any person obtaining a copy\n*  of this software and associated documentation files (the \"\"Software\"\"), to deal\n*  in the Software without restriction, including without limitation the rights\n*  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n*  copies of the Software, and to permit persons to whom the Software is\n*  furnished to do so, subject to the following conditions:\n*   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n*   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n*  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n*  THE SOFTWARE.\n*/\n\nmodule powerbi.data {\n    export interface DataViewObjectDefinitionsByRepetition {\n        metadataOnce?: DataViewObjectDefinitionsForSelector;\n        userDefined?: DataViewObjectDefinitionsForSelector[];\n        metadata?: DataViewObjectDefinitionsForSelector[];\n        data: DataViewObjectDefinitionsForSelectorWithRule[];\n    }\n\n    export interface DataViewObjectDefinitionsForSelector {\n        selector?: Selector;\n        objects: DataViewNamedObjectDefinition[];\n    }\n\n    export interface DataViewObjectDefinitionsForSelectorWithRule extends DataViewObjectDefinitionsForSelector {\n        rules?: RuleEvaluation[];\n    }\n\n    export interface DataViewNamedObjectDefinition {\n        name: string;\n        properties: DataViewObjectPropertyDefinitions;\n    }\n\n    export module DataViewObjectEvaluationUtils {\n        export function evaluateDataViewObjects(\n            evalContext: IEvalContext,\n            objectDescriptors: DataViewObjectDescriptors,\n            objectDefns: DataViewNamedObjectDefinition[]): DataViewObjects {\n            debug.assertValue(evalContext, 'evalContext');\n            debug.assertValue(objectDescriptors, 'objectDescriptors');\n            debug.assertValue(objectDefns, 'objectDefns');\n\n            let objects: DataViewObjects;\n\n            for (let j = 0, jlen = objectDefns.length; j < jlen; j++) {\n                let objectDefinition = objectDefns[j],\n                    objectName = objectDefinition.name;\n\n                let evaluatedObject: DataViewObject = DataViewObjectEvaluator.run(\n                    evalContext,\n                    objectDescriptors[objectName],\n                    objectDefinition.properties);\n\n                if (!evaluatedObject)\n                    continue;\n\n                if (!objects)\n                    objects = {};\n\n                // NOTE: this currently has last-object-wins semantics.\n                objects[objectName] = evaluatedObject;\n            }\n\n            return objects;\n        }\n\n        export function groupObjectsBySelector(objectDefinitions: DataViewObjectDefinitions): DataViewObjectDefinitionsByRepetition {\n            debug.assertAnyValue(objectDefinitions, 'objectDefinitions');\n\n            let grouped: DataViewObjectDefinitionsByRepetition = {\n                data: [],\n            };\n\n            if (objectDefinitions) {\n                for (let objectName in objectDefinitions) {\n                    let objectDefnList = objectDefinitions[objectName];\n\n                    for (let i = 0, len = objectDefnList.length; i < len; i++) {\n                        let objectDefn = objectDefnList[i];\n\n                        ensureDefinitionListForSelector(grouped, objectDefn.selector).objects.push({\n                            name: objectName,\n                            properties: objectDefn.properties,\n                        });\n                    }\n                }\n            }\n\n            return grouped;\n        }\n\n        function ensureDefinitionListForSelector(grouped: DataViewObjectDefinitionsByRepetition, selector: Selector): DataViewObjectDefinitionsForSelector {\n            debug.assertValue(grouped, 'grouped');\n            debug.assertAnyValue(selector, 'selector');\n\n            if (!selector) {\n                if (!grouped.metadataOnce)\n                    grouped.metadataOnce = { objects: [] };\n                return grouped.metadataOnce;\n            }\n\n            let groupedObjects: DataViewObjectDefinitionsForSelector[];\n            if (selector.data) {\n                groupedObjects = grouped.data;\n            }\n            else if (selector.metadata) {\n                if (!grouped.metadata)\n                    grouped.metadata = [];\n                groupedObjects = grouped.metadata;\n            }\n            else if (selector.id) {\n                if (!grouped.userDefined)\n                    grouped.userDefined = [];\n                groupedObjects = grouped.userDefined;\n            }\n\n            debug.assert(!!groupedObjects, 'GroupedObjects is not defined.  Indicates malformed selector.');\n\n            for (let item of groupedObjects) {\n                if (Selector.equals(selector, item.selector))\n                    return item;\n            }\n\n            let item: DataViewObjectDefinitionsForSelector = {\n                selector: selector,\n                objects: [],\n            };\n            groupedObjects.push(item);\n\n            return item;\n        }\n\n        export function addImplicitObjects(\n            objectsForAllSelectors: DataViewObjectDefinitionsByRepetition,\n            objectDescriptors: DataViewObjectDescriptors,\n            columns: DataViewMetadataColumn[],\n            selectTransforms: DataViewSelectTransform[]): void {\n            debug.assertValue(objectsForAllSelectors, 'objectsForAllSelectors');\n            debug.assertValue(objectDescriptors, 'objectDescriptors');\n            debug.assertValue(columns, 'columns');\n            debug.assertAnyValue(selectTransforms, 'selectTransforms');\n\n            if (selectTransforms) {\n                addDefaultFormatString(objectsForAllSelectors, objectDescriptors, columns, selectTransforms);\n                addDefaultValue(objectsForAllSelectors, objectDescriptors, columns, selectTransforms);\n            }\n        }\n\n        function addDefaultFormatString(\n            objectsForAllSelectors: DataViewObjectDefinitionsByRepetition,\n            objectDescriptors: DataViewObjectDescriptors,\n            columns: DataViewMetadataColumn[],\n            selectTransforms: DataViewSelectTransform[]): void {\n            debug.assertValue(objectsForAllSelectors, 'objectsForAllSelectors');\n            debug.assertValue(objectDescriptors, 'objectDescriptors');\n            debug.assertValue(columns, 'columns');\n            debug.assertValue(selectTransforms, 'selectTransforms');\n\n            let formatStringProp = DataViewObjectDescriptors.findFormatString(objectDescriptors);\n            if (!formatStringProp)\n                return;\n\n            for (let selectIdx = 0, selectLen = selectTransforms.length; selectIdx < selectLen; selectIdx++) {\n                let selectTransform = selectTransforms[selectIdx];\n                if (!selectTransform)\n                    continue;\n                debug.assertValue(selectTransform.queryName, 'selectTransform.queryName');\n\n                applyFormatString(\n                    objectsForAllSelectors,\n                    formatStringProp,\n                    selectTransform.queryName,\n                    selectTransform.format || getColumnFormatForIndex(columns, selectIdx));\n            }\n        }\n\n        /** Registers properties for default value, if the properties are not explicitly provided. */\n        function addDefaultValue (\n            objectsForAllSelectors: DataViewObjectDefinitionsByRepetition,\n            objectDescriptors: DataViewObjectDescriptors,\n            columns: DataViewMetadataColumn[],\n            selectTransforms: DataViewSelectTransform[]): void {\n            debug.assertValue(objectsForAllSelectors, 'objectsForAllSelectors');\n            debug.assertValue(objectDescriptors, 'objectDescriptors');\n            debug.assertValue(columns, 'columns');\n            debug.assertValue(selectTransforms, 'selectTransforms');\n\n            let defaultValueProp = DataViewObjectDescriptors.findDefaultValue(objectDescriptors);\n            if (!defaultValueProp)\n                return;\n\n            for (let selectTransform of selectTransforms) {\n                if (!selectTransform)\n                    continue;\n                debug.assertValue(selectTransform.queryName, 'selectTransform.queryName');\n\n                applyDefaultValue(\n                    objectsForAllSelectors,\n                    defaultValueProp,\n                    selectTransform.queryName,\n                    selectTransform.defaultValue);\n            }\n        }\n\n        function getColumnFormatForIndex(columns: DataViewMetadataColumn[], selectIdx: number): string {\n            for (let columnIdx = 0, columnLen = columns.length; columnIdx < columnLen; columnIdx++) {\n                let column = columns[columnIdx];\n                if (!column || column.index !== selectIdx)\n                    continue;\n\n                return column.format;\n            }\n        }\n\n        function applyFormatString(\n            objectsForAllSelectors: DataViewObjectDefinitionsByRepetition,\n            formatStringProp: DataViewObjectPropertyIdentifier,\n            queryName: string,\n            formatStringValue: string): void {\n            if (!formatStringValue)\n                return;\n\n            // There is a format string specified -- apply it as an object property, if there is not already one specified.\n            applyMetadataProperty(\n                objectsForAllSelectors,\n                formatStringProp,\n                { metadata: queryName },\n                SQExprBuilder.text(formatStringValue));\n        }\n\n        function applyDefaultValue(\n            objectsForAllSelectors: DataViewObjectDefinitionsByRepetition,\n            defaultValueProp: DataViewObjectPropertyIdentifier,\n            queryName: string,\n            defaultValue: DefaultValueDefinition): void {\n            if (!defaultValue)\n                return;\n\n            // There is a default value specified -- apply it as an object property, if there is not already one specified.\n            applyMetadataProperty(\n                objectsForAllSelectors,\n                defaultValueProp,\n                { metadata: queryName },\n                defaultValue);\n        }\n\n        function applyMetadataProperty(\n            objectsForAllSelectors: DataViewObjectDefinitionsByRepetition,\n            propertyId: DataViewObjectPropertyIdentifier,\n            selector: Selector,\n            value: DataViewObjectPropertyDefinition): void {\n\n            let objectDefns: DataViewObjectDefinitionsForSelector[];\n            if (selector) {\n                let metadataObjects = objectsForAllSelectors.metadata;\n                if (!metadataObjects)\n                    metadataObjects = objectsForAllSelectors.metadata = [];\n                objectDefns = metadataObjects;\n            }\n            else {\n                let metadataOnce = objectsForAllSelectors.metadataOnce;\n                if (!metadataOnce)\n                    metadataOnce = objectsForAllSelectors.metadataOnce = { selector: selector, objects: [] };\n                objectDefns = [metadataOnce];\n            }\n\n            let targetMetadataObject = findWithMatchingSelector(objectDefns, selector);\n            let targetObjectDefn: DataViewNamedObjectDefinition;\n            if (targetMetadataObject) {\n                let targetObjectDefns = targetMetadataObject.objects;\n                targetObjectDefn = findExistingObject(targetObjectDefns, propertyId.objectName);\n                if (targetObjectDefn) {\n                    if (targetObjectDefn.properties[propertyId.propertyName])\n                        return;\n                }\n                else {\n                    targetObjectDefn = {\n                        name: propertyId.objectName,\n                        properties: {},\n                    };\n                    targetObjectDefns.push(targetObjectDefn);\n                }\n            }\n            else {\n                targetObjectDefn = {\n                    name: propertyId.objectName,\n                    properties: {}\n                };\n\n                objectDefns.push({\n                    selector: selector,\n                    objects: [targetObjectDefn],\n                });\n            }\n\n            targetObjectDefn.properties[propertyId.propertyName] = value;\n        }\n\n        function findWithMatchingSelector(objects: DataViewObjectDefinitionsForSelector[], selector: Selector): DataViewObjectDefinitionsForSelector {\n            debug.assertValue(objects, 'objects');\n            debug.assertAnyValue(selector, 'selector');\n\n            for (let i = 0, len = objects.length; i < len; i++) {\n                let object = objects[i];\n                if (Selector.equals(object.selector, selector))\n                    return object;\n            }\n        }\n\n        function findExistingObject(objectDefns: DataViewNamedObjectDefinition[], objectName: string): DataViewNamedObjectDefinition {\n            debug.assertValue(objectDefns, 'objectDefns');\n            debug.assertValue(objectName, 'objectName');\n\n            for (let i = 0, len = objectDefns.length; i < len; i++) {\n                let objectDefn = objectDefns[i];\n\n                if (objectDefn.name === objectName)\n                    return objectDefn;\n            }\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n \n\nmodule powerbi.data {\n    /** Responsible for evaluating object property expressions to be applied at various scopes in a DataView. */\n    export module DataViewObjectEvaluator {\n        const colorValueType: ValueType = ValueType.fromDescriptor({ formatting: { color: true } });\n        const numericType: ValueType = ValueType.fromDescriptor({ numeric: true });\n        const textType: ValueType = ValueType.fromDescriptor({ text: true });\n\n        export function run(\n            evalContext: IEvalContext,\n            objectDescriptor: DataViewObjectDescriptor,\n            propertyDefinitions: DataViewObjectPropertyDefinitions): DataViewObject {\n            debug.assertValue(evalContext, 'evalContext');\n            debug.assertAnyValue(objectDescriptor, 'objectDescriptor');\n            debug.assertValue(propertyDefinitions, 'propertyDefinitions');\n\n            if (!objectDescriptor)\n                return;\n\n            let object: DataViewObject,\n                propertyDescriptors = objectDescriptor.properties;\n            for (let propertyName in propertyDefinitions) {\n                let propertyDefinition = propertyDefinitions[propertyName],\n                    propertyDescriptor = propertyDescriptors[propertyName];\n\n                if (!propertyDescriptor)\n                    continue;\n\n                let propertyValue = evaluateProperty(evalContext, propertyDescriptor, propertyDefinition);\n                if (propertyValue === undefined)\n                    continue;\n\n                if (!object)\n                    object = {};\n                object[propertyName] = propertyValue;\n            }\n\n            return object;\n        }\n\n        /** Note: Exported for testability */\n        export function evaluateProperty(\n            evalContext: IEvalContext,\n            propertyDescriptor: DataViewObjectPropertyDescriptor,\n            propertyDefinition: DataViewObjectPropertyDefinition): any {\n            debug.assertValue(evalContext, 'evalContext');\n            debug.assertValue(propertyDescriptor, 'propertyDescriptor');\n            debug.assertValue(propertyDefinition, 'propertyDefinition');\n\n            let structuralType = <StructuralTypeDescriptor>propertyDescriptor.type;\n            if (structuralType && structuralType.expression)\n                return propertyDefinition;\n\n            let value = evaluateValue(evalContext, <any>propertyDefinition, ValueType.fromDescriptor(propertyDescriptor.type));\n            if (value !== undefined || (propertyDefinition instanceof RuleEvaluation))\n                return value;\n\n            return evaluateFill(evalContext, <FillDefinition>propertyDefinition, structuralType)\n                || evaluateFillRule(evalContext, <FillRuleDefinition>propertyDefinition, structuralType)\n                || evaluateImage(evalContext, <ImageDefinition>propertyDefinition, structuralType)\n                || evaluateParagraphs(evalContext, <ParagraphsDefinition>propertyDefinition, structuralType)\n                || propertyDefinition;\n        }\n\n        function evaluateFill(evalContext: IEvalContext, fillDefn: FillDefinition, type: StructuralTypeDescriptor): Fill {\n            let fillType = type.fill;\n            if (!fillType)\n                return;\n\n            if (fillType && fillType.solid && fillType.solid.color && fillDefn.solid) {\n                return {\n                    solid: {\n                        color: evaluateValue(evalContext, fillDefn.solid.color, ValueType.fromExtendedType(ExtendedType.Color)),\n                    }\n                };\n            }\n        }\n\n        function evaluateFillRule(evalContext: IEvalContext, fillRuleDefn: FillRuleDefinition, type: StructuralTypeDescriptor): FillRule {\n            if (!type.fillRule)\n                return;\n\n            if (fillRuleDefn.linearGradient2) {\n                let linearGradient2 = fillRuleDefn.linearGradient2;\n                return {\n                    linearGradient2: {\n                        min: evaluateColorStop(evalContext, linearGradient2.min),\n                        max: evaluateColorStop(evalContext, linearGradient2.max),\n                    }\n                };\n            }\n\n            if (fillRuleDefn.linearGradient3) {\n                let linearGradient3 = fillRuleDefn.linearGradient3;\n                return {\n                    linearGradient3: {\n                        min: evaluateColorStop(evalContext, linearGradient3.min),\n                        mid: evaluateColorStop(evalContext, linearGradient3.mid),\n                        max: evaluateColorStop(evalContext, linearGradient3.max),\n                    }\n                };\n            }\n        }\n\n        function evaluateColorStop(evalContext: IEvalContext, colorStop: RuleColorStopDefinition): RuleColorStop {\n            debug.assertValue(evalContext, 'evalContext');\n            debug.assertValue(colorStop, 'colorStop');\n\n            let step: RuleColorStop = {\n                color: evaluateValue(evalContext, colorStop.color, colorValueType),\n            };\n\n            let value = evaluateValue(evalContext, colorStop.value, numericType);\n            if (value != null)\n                step.value = value;\n\n            return step;\n        }\n\n        function evaluateImage(evalContext: IEvalContext, definition: ImageDefinition, type: StructuralTypeDescriptor): ImageValue {\n            debug.assertValue(evalContext, 'evalContext');\n            debug.assertAnyValue(definition, 'definition');\n            debug.assertValue(type, 'type');\n\n            if (!type.image || !definition)\n                return;\n\n            let value: ImageValue = {\n                name: evaluateValue(evalContext, definition.name, textType),\n                url: evaluateValue(evalContext, definition.url, ValueType.fromDescriptor(ImageDefinition.urlType)),\n            };\n\n            if (definition.scaling)\n                value.scaling = evaluateValue(evalContext, definition.scaling, textType);\n\n            return value;\n        }\n\n        function evaluateParagraphs(evalContext: IEvalContext, definition: ParagraphsDefinition, type: StructuralTypeDescriptor): Paragraphs {\n            debug.assertValue(evalContext, 'evalContext');\n            debug.assertAnyValue(definition, 'definition');\n            debug.assertValue(type, 'type');\n\n            if (!type.paragraphs || !definition)\n                return;\n\n            return evaluateArrayCopyOnChange(evalContext, definition, evaluateParagraph);\n        }\n\n        function evaluateParagraph(evalContext: IEvalContext, definition: ParagraphDefinition): Paragraph {\n            debug.assertValue(evalContext, 'evalContext');\n            debug.assertValue(definition, 'definition');\n\n            let evaluated: Paragraph;\n\n            let definitionTextRuns = definition.textRuns;\n            let evaluatedTextRuns: TextRun[] = evaluateArrayCopyOnChange(evalContext, definitionTextRuns, evaluateTextRun);\n            if (definitionTextRuns !== evaluatedTextRuns) {\n                evaluated = _.clone(<any>definition);\n                evaluated.textRuns = evaluatedTextRuns;\n            }\n\n            return evaluated || <Paragraph>definition;\n        }\n\n        function evaluateTextRun(evalContext: IEvalContext, definition: TextRunDefinition): TextRun {\n            debug.assertValue(evalContext, 'evalContext');\n            debug.assertValue(definition, 'definition');\n\n            let evaluated: TextRun;\n\n            let definitionValue = definition.value;\n            let evaluatedValue = evaluateValue(evalContext, <any> definitionValue, textType);\n            if (evaluatedValue !== undefined) {\n                evaluated = _.clone(<any>definition);\n                evaluated.value = evaluatedValue;\n            }\n\n            return evaluated || <TextRun>definition;\n        }\n\n        /**\n         * Evaluates an array, and lazily copies on write whenever the evaluator function returns something\n         * other than the input to it.\n         */\n        function evaluateArrayCopyOnChange<TDefinition, TEvaluated>(\n            evalContext: IEvalContext,\n            definitions: TDefinition[],\n            evaluator: (ctx: IEvalContext, defn: TDefinition) => TEvaluated): TEvaluated[] {\n            debug.assertValue(evalContext, 'evalContext');\n            debug.assertValue(definitions, 'definitions');\n            debug.assertValue(evaluator, 'evaluator');\n\n            let evaluatedValues: TEvaluated[];\n\n            for (let i = 0, len = definitions.length; i < len; i++) {\n                let definition = definitions[i];\n                let evaluated: TEvaluated = evaluator(evalContext, definition);\n\n                // NOTE: the any casts here are necessary due to the compiler not knowing the relationship\n                // between TEvaluated & TDefinition\n                if (!evaluatedValues && <any>definition !== evaluated) {\n                    evaluatedValues = _.take(<TEvaluated[]><any>definitions, i);\n                }\n\n                if (evaluatedValues) {\n                    evaluatedValues.push(evaluated);\n                }\n            }\n\n            return evaluatedValues || <TEvaluated[]><any>definitions;\n        }\n\n        function evaluateValue(evalContext: IEvalContext, definition: SQExpr | RuleEvaluation, valueType: ValueType): any {\n            if (definition instanceof SQExpr)\n                return ExpressionEvaluator.evaluate(definition, evalContext);\n\n            if (definition instanceof RuleEvaluation)\n                return definition.evaluate(evalContext);\n        }\n\n        /** Responsible for evaluating SQExprs into values. */\n        class ExpressionEvaluator extends DefaultSQExprVisitorWithArg<PrimitiveValue, IEvalContext> {\n            private static instance: ExpressionEvaluator = new ExpressionEvaluator();\n\n            public static evaluate(expr: SQExpr, evalContext: IEvalContext): PrimitiveValue {\n                if (expr == null)\n                    return;\n\n                return expr.accept(ExpressionEvaluator.instance, evalContext);\n            }\n\n            public visitColumnRef(expr: SQColumnRefExpr, evalContext: IEvalContext): PrimitiveValue {\n                return evalContext.getExprValue(expr);\n            }\n\n            public visitConstant(expr: SQConstantExpr, evalContext: IEvalContext): PrimitiveValue {\n                return expr.value;\n            }\n\n            public visitMeasureRef(expr: SQMeasureRefExpr, evalContext: IEvalContext): PrimitiveValue {\n                return evalContext.getExprValue(expr);\n            }\n\n            public visitAggr(expr: SQAggregationExpr, evalContext: IEvalContext): PrimitiveValue {\n                return evalContext.getExprValue(expr);\n            }\n\n            public visitFillRule(expr: SQFillRuleExpr, evalContext: IEvalContext): PrimitiveValue {\n                let inputValue = expr.input.accept(this, evalContext);\n                if (inputValue !== undefined) {\n                    let colorAllocator = evalContext.getColorAllocator(expr);\n                    if (colorAllocator) {\n                        return colorAllocator.color(inputValue);\n                    }\n                }\n            }\n\n            public visitSelectRef(expr: SQSelectRefExpr, evalContext: IEvalContext): PrimitiveValue {\n                return evalContext.getExprValue(expr);\n            }\n        }\n    }\n} \n","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    import inherit = Prototype.inherit;\n\n    export module DataViewPivotCategorical {\n        /**\n         * Pivots categories in a categorical DataView into valueGroupings.\n         * This is akin to a mathematical matrix transpose.\n         */\n        export function apply(dataView: DataView): DataView {\n            debug.assertValue(dataView, 'dataView');\n\n            let categorical = dataView.categorical;\n            if (!categorical)\n                return null;\n\n            let categories = categorical.categories;\n            if (!categories || categories.length !== 1)\n                return null;\n\n            let values = categorical.values;\n            if (_.isEmpty(values) || values.source)\n                return null;\n\n            let category = categories[0],\n                categoryIdentities = category.identity,\n                categoryValues = category.values,\n                pivotedColumns: DataViewMetadataColumn[] = [],\n                pivotedValues: DataViewValueColumn[] = [];\n            for (let rowIdx = 0, rowCount = categoryValues.length; rowIdx < rowCount; rowIdx++) {\n                let categoryValue = categoryValues[rowIdx],\n                    categoryIdentity = categoryIdentities[rowIdx];\n                for (let colIdx = 0, colCount = values.length; colIdx < colCount; colIdx++) {\n                    let value = values[colIdx],\n                        pivotedColumn = inherit(value.source);\n\n                    // A value has a series group, which is not implemented for pivoting -- just give up.\n                    if (value.identity)\n                        return null;\n\n                    pivotedColumn.groupName = categoryValue;\n                    let pivotedValue: DataViewValueColumn = {\n                        source: pivotedColumn,\n                        values: [value.values[rowIdx]],\n                        identity: categoryIdentity,\n                        min: value.min,\n                        max: value.max,\n                        subtotal: value.subtotal\n                    };\n\n                    let highlights = value.highlights;\n                    if (highlights) {\n                        pivotedValue.highlights = [highlights[rowIdx]];\n                    }\n\n                    pivotedColumns.push(pivotedColumn);\n                    pivotedValues.push(pivotedValue);\n                }\n            }\n\n            let pivotedMetadata = inherit(dataView.metadata);\n            pivotedMetadata.columns = pivotedColumns;\n\n            values = DataViewTransform.createValueColumns(pivotedValues, <SQExpr[]>category.identityFields, category.source);\n            return {\n                metadata: pivotedMetadata,\n                categorical: {\n                    values: values,\n                },\n                matrix: dataView.matrix\n            };\n        }\n    }\n} ","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    export module DataViewPivotMatrix {\n        /** Pivots row hierarchy members in a matrix DataView into column hierarchy. */\n        export function apply(dataViewMatrix: DataViewMatrix, context: MatrixTransformationContext): void {\n            debug.assertValue(dataViewMatrix, 'dataViewMatrix');\n\n            if (!context.columnHierarchyRewritten)\n                dataViewMatrix.columns = Prototype.inherit(dataViewMatrix.columns);\n            let columns = dataViewMatrix.columns;\n\n            if (!context.rowHierarchyRewritten)\n                dataViewMatrix.rows = Prototype.inherit(dataViewMatrix.rows);\n            let rows = dataViewMatrix.rows;\n\n            if (columns.levels.length > 1)\n                return;\n\n            let pivotedRowNode: DataViewMatrixNode = {\n                level: 0\n            };\n\n            let columnLeafNodes: DataViewMatrixNode[] = columns.root.children;\n            let measureCount = columnLeafNodes.length;\n\n            // Notes related to VSTS 6999369: The level value of Measure Header nodes is not necessarily its parent node's level + 1.\n            // In particular, the Measure Header column nodes directly under the Grand Total node at level 0 (i.e. _.last(pivotResultMatrix.columns.root.children))\n            // will have level === (pivotResultMatrix.columns.levels.length - 1), which will be greater than the Grand Total node's 'level + 1' \n            // in a matrix with 2+ column fields and 2+ measure fields.\n            // In this code, all row levels will get pivoted over to the columns hierarchy, hence the level of any Measure Header nodes in the pivot result\n            // is just (1 + the level of the deepest row node's level), which === rows.levels.length.\n            let pivotResultMeasureHeaderLevel = rows.levels.length;\n\n            if (measureCount > 0) {\n                let index = 0;\n                let callback = function (node: DataViewMatrixNode) {\n                    // Collect values and remove them from row leaves\n                    if (node.values) {\n                        if (!pivotedRowNode.values)\n                            pivotedRowNode.values = {};\n\n                        for (let i = 0; i < measureCount; i++)\n                            pivotedRowNode.values[index++] = node.values[i];\n\n                        delete node.values;\n                    }\n\n                    // Create measure headers if there are more than one measures\n                    if (measureCount > 1) {\n                        if (!node.children)\n                            node.children = [];\n\n                        for (let j = 0; j < measureCount; j++) {\n                            let measureHeaderLeaf: DataViewMatrixNode = { level: pivotResultMeasureHeaderLevel };\n\n                            // Copy levelSourceIndex from columnLeafNodes (as they might have been reordered)\n                            let columnLeafNode = columnLeafNodes[j];\n                            measureHeaderLeaf.levelSourceIndex = columnLeafNode.levelSourceIndex;\n\n                            if (node.isSubtotal)\n                                measureHeaderLeaf.isSubtotal = true;\n\n                            node.children.push(measureHeaderLeaf);\n                        }\n                    }\n                };\n\n                if (context.hierarchyTreesRewritten) {\n                    forEachLeaf(rows.root, callback);\n                }\n                else {\n                    dataViewMatrix.columns.root = cloneTreeExecuteOnLeaf(rows.root, callback);\n                }\n            }\n            else {\n                if (!context.hierarchyTreesRewritten) {\n                    dataViewMatrix.columns.root = cloneTree(rows.root);\n                }\n            }\n\n            if (measureCount > 1) {\n                // Keep measure headers, but move them to the innermost level\n                let level: DataViewHierarchyLevel = { sources: columns.levels[0].sources };\n                rows.levels.push(level);\n\n                columns.levels.length = 0;\n            }\n\n            if (context.hierarchyTreesRewritten) {\n                dataViewMatrix.columns.root = rows.root;\n                dataViewMatrix.rows.root = {\n                    children: [pivotedRowNode]\n                };\n            }\n            else {\n                let updatedRowRoot = Prototype.inherit(dataViewMatrix.rows.root);\n                updatedRowRoot.children = [pivotedRowNode];\n                dataViewMatrix.rows.root = updatedRowRoot;\n            }\n\n            dataViewMatrix.columns.levels = rows.levels;\n            dataViewMatrix.rows.levels = [];\n        }\n\n        function forEachLeaf(root: DataViewMatrixNode, callback: (node: DataViewMatrixNode) => void): void {\n            let children = root.children;\n            if (children && children.length > 0) {\n                for (let i = 0, ilen = children.length; i < ilen; i++)\n                    forEachLeaf(children[i], callback);\n\n                return;\n            }\n\n            callback(root);\n        }\n\n        export function cloneTree(node: DataViewMatrixNode): DataViewMatrixNode {\n            return cloneTreeExecuteOnLeaf(node);\n        }\n\n        export function cloneTreeExecuteOnLeaf(node: DataViewMatrixNode, callback?: (node: DataViewMatrixNode) => void): DataViewMatrixNode {\n            let updatedNode = Prototype.inherit(node);\n\n            let children = node.children;\n            if (children && children.length > 0) {\n                let newChildren: DataViewTreeNode[] = [];\n\n                for (let i = 0, ilen = children.length; i < ilen; i++) {\n                    let updatedChild = cloneTreeExecuteOnLeaf(children[i], callback);\n                    newChildren.push(updatedChild);\n                }\n                updatedNode.children = newChildren;\n            }\n            else {\n                if (callback)\n                    callback(updatedNode);\n            }\n\n            return updatedNode;\n        }\n    }\n} ","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    export module DataViewSelfCrossJoin {\n        /**\n         * Returns a new DataView based on the original, with a single DataViewCategorical category that is \"cross joined\"\n         * to itself as a value grouping.\n         * This is the mathematical equivalent of taking an array and turning it into an identity matrix.\n         */\n        export function apply(dataView: DataView): DataView {\n            debug.assertValue(dataView, 'dataView');\n\n            if (!dataView.categorical)\n                return;\n            let dataViewCategorical = dataView.categorical;\n            if (!dataViewCategorical.categories || dataViewCategorical.categories.length !== 1)\n                return;\n            if (dataViewCategorical.values && dataViewCategorical.values.source)\n                return;\n\n            return applyCategorical(dataView.metadata, dataViewCategorical);\n        }\n\n        function applyCategorical(dataViewMetadata: DataViewMetadata, dataViewCategorical: DataViewCategorical): DataView {\n            debug.assertValue(dataViewMetadata, 'dataViewMetadata');\n            debug.assertValue(dataViewCategorical, 'dataViewCategorical');\n            debug.assertValue(dataViewCategorical.categories, 'dataViewCategorical.categories');\n\n            let category = dataViewCategorical.categories[0],\n                categoryValues = category.values,\n                categoryLength = categoryValues.length;\n\n            if (categoryLength === 0)\n                return;\n\n            let valuesArray: DataViewValueColumn[] = dataViewCategorical.values\n                ? dataViewCategorical.values.grouped()[0].values\n                : [];\n            let transformedDataView = createCategoricalDataViewBuilder()\n                .withCategories(dataViewCategorical.categories)\n                .withGroupedValues(createGroupedValues(category, categoryValues, categoryLength, valuesArray))\n                .build();\n\n            dataViewMetadata = Prototype.inherit(dataViewMetadata);\n            dataViewMetadata.columns = transformedDataView.metadata.columns;\n\n            return {\n                metadata: dataViewMetadata,\n                categorical: transformedDataView.categorical,\n            };\n        }\n\n        function createGroupedValues(\n            category: DataViewCategoryColumn,\n            categoryValues: any[],\n            categoryLength: number,\n            valuesArray: DataViewValueColumn[]): DataViewBuilderGroupedValuesOptions {\n            debug.assertValue(category, 'category');\n            debug.assertValue(categoryValues, 'categoryValues');\n            debug.assertValue(categoryLength, 'categoryLength');\n            debug.assertValue(valuesArray, 'valuesArray');\n\n            let nullValuesArray: any[] = createNullValues(categoryLength),\n                valuesArrayLen = valuesArray.length,\n                seriesData: DataViewBuilderSeriesData[][] = [];\n\n            for (let i = 0; i < categoryLength; i++) {\n                let seriesDataItem: DataViewBuilderSeriesData[] = [];\n\n                for (let j = 0; j < valuesArrayLen; j++) {\n                    let originalValueColumn = valuesArray[j],\n                        originalHighlightValues = originalValueColumn.highlights;\n\n                    let seriesDataItemCategory: DataViewBuilderSeriesData = {\n                        values: inheritArrayWithValue(nullValuesArray, originalValueColumn.values, i),\n                    };\n                    if (originalHighlightValues)\n                        seriesDataItemCategory.highlights = inheritArrayWithValue(nullValuesArray, originalHighlightValues, i);\n\n                    seriesDataItem.push(seriesDataItemCategory);\n                }\n\n                seriesData.push(seriesDataItem);\n            }\n\n            return {\n                groupColumn: {\n                    source: category.source,\n                    identityFrom: { fields: <SQExpr[]>category.identityFields, identities: category.identity },\n                    values: category.values,\n                },\n                valueColumns: _.map(valuesArray, v => <DataViewBuilderColumnOptions>{ source: v.source }),\n                data: seriesData,\n            };\n        }\n    }\n\n    function createNullValues(length: number): any[] {\n        debug.assertValue(length, 'length');\n\n        let array = new Array(length);\n        for (let i = 0; i < length; i++)\n            array[i] = null;\n        return array;\n    }\n\n    function inheritArrayWithValue(nullValues: any[], original: any[], index: number): any[] {\n        let inherited = Prototype.inherit(nullValues);\n        inherited[index] = original[index];\n\n        return inherited;\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    import ArrayExtensions = jsCommon.ArrayExtensions;\n    import DataShapeBindingDataReduction = powerbi.data.DataShapeBindingDataReduction;\n    import inheritSingle = powerbi.Prototype.inheritSingle;\n    import RoleKindByQueryRef = DataViewAnalysis.RoleKindByQueryRef;\n\n    export module DataViewPivotCategoricalToPrimaryGroups {\n\n        /**\n         * If mapping requests cross axis data reduction and the binding has secondary grouping, mutates the binding to\n         * pivot the secondary before the primary.\n         */\n        export function pivotBinding(binding: DataShapeBinding, allMappings: CompiledDataViewMapping[], finalMapping: CompiledDataViewMapping, defaultDataVolume: number): void {\n            // unpivot is inferred from result in DataViewTransform.apply but it does not have the\n            // compiled mappings available, let alone the merged mapping, only the original\n            // DataViewMappings. to keep that inference easy, only apply pivot when there's\n            // only one matching mapping\n            if (!allMappings || allMappings.length !== 1)\n                return;\n\n            if (!finalMapping.categorical || !finalMapping.categorical.dataReductionAlgorithm)\n                return;\n\n            if (!binding)\n                return;\n\n            if (!canPivotCategorical(binding, finalMapping))\n                return;\n\n            // pivot secondary onto front of primary\n            binding.Primary.Groupings = [binding.Secondary.Groupings[0], binding.Primary.Groupings[0]];\n\n            binding.Secondary = undefined;\n        \n            // set primary to pivot reduction\n            binding.DataReduction = {\n                Primary: DataShapeBindingDataReduction.createFrom(finalMapping.categorical.dataReductionAlgorithm),\n                DataVolume: finalMapping.categorical.dataVolume || defaultDataVolume,\n            };\n        }\n\n        /** narrowly targets scatter chart scenario for now to keep code simple */\n        function isPivotableAxis(axis: powerbi.data.DataShapeBindingAxis): boolean {\n            return axis\n                && axis.Groupings\n                && axis.Groupings.length === 1\n                && !_.isEmpty(axis.Groupings[0].Projections)\n                && !axis.Groupings[0].Subtotal\n                && _.isEmpty(axis.Groupings[0].SuppressedProjections);\n        }\n\n        function canPivotCategorical(binding: DataShapeBinding, mapping: CompiledDataViewMapping): boolean {\n            if (!isPivotableAxis(binding.Primary))\n                return false;\n            if (!isPivotableAxis(binding.Secondary) || binding.Secondary.Groupings[0].Projections.length !== 1)\n                return false;\n\n            // don't pivot if either axis has a data reduction\n            if (binding.DataReduction && (binding.DataReduction.Primary || binding.DataReduction.Secondary))\n                return false;\n\n            return true;\n        }\n\n        export function unpivotResult(oldDataView: DataView, selects: DataViewSelectTransform[], dataViewMappings: DataViewMapping[], projectionActiveItems: DataViewProjectionActiveItems): DataView {\n            if (!inferUnpivotTransform(selects, dataViewMappings, oldDataView, projectionActiveItems))\n                return oldDataView;\n\n            // This returns a subsetted version of the DataView rather than using prototypal inheritance because\n            // any dataviews in the old one (including ones invented after this code is written) will correspond\n            // to a pivoted query result and therefore will be in the wrong shape for the unpivoted query the\n            // querying code made.\n            let newDataView: DataView = {\n                metadata: {\n                    columns: ArrayExtensions.copy(oldDataView.metadata.columns),\n                },\n            };\n            \n            // preserve view types that aren't affected by pivoting\n            if (oldDataView.single)\n                newDataView.single = oldDataView.single;\n            if (oldDataView.table)\n                newDataView.table = oldDataView.table;\n\n            // other views are derived from matrix\n            if (oldDataView.matrix) {\n                let newDataViewMatrix = unpivotMatrix(oldDataView.matrix);\n\n                // categorical only if there's data\n                if (!_.isEmpty(newDataViewMatrix.valueSources)) {\n                    // Guard against a DataViewMatrix with composite grouping in columns, because composite group in Series is \n                    // not yet expressible in the current version of DataViewValueColumns and DataViewValueColumnGroup interfaces.\n                    // this.canPivotCategorical() would have returned false in the first place for this query.\n                    let hasCompositeGroupInSeries = utils.DataViewMatrixUtils.containsCompositeGroup(newDataViewMatrix.columns);\n                    if (!hasCompositeGroupInSeries) {\n                        newDataView.categorical = categoricalFromUnpivotedMatrix(newDataViewMatrix, newDataView.metadata.columns);\n                    }\n                }\n            }\n\n            return newDataView;\n        }\n\n        /**\n         * Infer from the query result and the visual mappings whether the query was pivoted.\n         * Narrowly targets scatter chart scenario for now to keep code simple\n         */\n        function inferUnpivotTransform(selects: DataViewSelectTransform[], dataViewMappings: DataViewMapping[], dataView: DataView, projectionActiveItems: DataViewProjectionActiveItems): boolean {\n            if (_.isEmpty(selects) || _.isEmpty(dataViewMappings) || !dataView)\n                return false;\n\n            // select applicable mappings based on select roles\n            let roleKinds: RoleKindByQueryRef = DataViewSelectTransform.createRoleKindFromMetadata(selects, dataView.metadata);\n            let projections: QueryProjectionsByRole = DataViewSelectTransform.projectionsFromSelects(selects, projectionActiveItems);\n            let supportedDataViewMappings = DataViewAnalysis.chooseDataViewMappings(projections, dataViewMappings, roleKinds).supportedMappings;\n\n            // NOTE: limiting to simple situation that handles scatter for now - see the other side in canPivotCategorical\n            if (!supportedDataViewMappings || supportedDataViewMappings.length !== 1)\n                return false;\n\n            let categoricalMapping = supportedDataViewMappings[0].categorical;\n            if (!categoricalMapping)\n                return false;\n\n            // pivoted query will have produced a matrix\n            let matrixDataview = dataView.matrix;\n            if (!matrixDataview)\n                return false;\n\n            // matrix must have two levels of grouping\n            if (!matrixDataview.rows || !matrixDataview.rows.levels || matrixDataview.rows.levels.length !== 2)\n                return false;\n            \n            // get category and value grouping roles\n            let categoryGroups: string[] = [];\n            let valueGroups: string[] = [];\n\n            let addGroupingRole = (roleName: string, groups: string[]) => {\n                let roleProjections: QueryProjectionCollection = projections[roleName];\n                if (!roleProjections)\n                    return;\n\n                for (let roleProjection of roleProjections.all()) {\n                    if (roleKinds[roleProjection.queryRef] === VisualDataRoleKind.Grouping)\n                        groups.push(roleProjection.queryRef);\n                }\n            };\n\n            DataViewMapping.visitCategoricalCategories(categoricalMapping.categories, {\n                visitRole: (roleName: string) => { addGroupingRole(roleName, categoryGroups); }\n            });\n\n            DataViewMapping.visitCategoricalValues(categoricalMapping.values, {\n                visitRole: (roleName: string) => { addGroupingRole(roleName, valueGroups); }\n            });\n\n            // need both for pivot to have been done\n            if (_.isEmpty(categoryGroups) || _.isEmpty(valueGroups))\n                return false;\n\n            // if there was a pivot, there won't be any measures left in the columns\n            for (let level of matrixDataview.columns.levels) {\n                for (let source of level.sources) {\n                    if (!source.isMeasure)\n                        return false;\n                }\n            }\n\n            return true;\n        }\n\n        interface DataViewMatrixNodeValues {\n            [id: number]: DataViewMatrixNodeValue;\n        }\n\n        /**\n         * matrix will have two groupings in the rows, outer (series) and inner (categories), and none in the columns.\n         * this function changes that so that the categories become the rows and the series the columns.\n         */\n        function unpivotMatrix(oldMatrix: DataViewMatrix): DataViewMatrix {\n            let oldRows = oldMatrix.rows;\n            let oldRoot = oldRows.root;\n            let oldChildren = oldRoot.children;\n\n            // series are the outer grouping\n            let series: DataViewMatrixNode[] = [];\n            let seriesIdLevel = oldRows.levels[0];\n            let seriesIdFields = oldRoot.childIdentityFields;\n\n            // categories are the inner grouping. \n            let categoryIndex: _.Dictionary<number> = {};\n            let categories: DataViewMatrixNode[] = [];\n            let categoryIdLevel = oldRows.levels[1];\n            let categoryIdFields = _.isEmpty(oldChildren) ? undefined : oldChildren[0].childIdentityFields;\n\n            let measureCount = oldMatrix.valueSources.length;\n\n            // within each series value, the category list may not be complete so cannot simply use the inner loop index\n            // to reference it.\n            let findCategory = (identity: DataViewScopeIdentity) => {\n                let index = categoryIndex[identity.key];\n\n                debug.assert(index !== undefined, \"findcat() !== undefined\");\n\n                return index;\n            };\n\n            // collect series and categories from the row hierarchy\n            if (oldChildren) {\n                let addCategory = (categoryNode: DataViewMatrixNode) => {\n                    let key = categoryNode.identity.key;\n                    let index = categoryIndex[key];\n                    if (index === undefined) {\n                        index = categories.length;\n                        categoryIndex[key] = index;\n                        categories.push(categoryNode);\n                    }\n                };\n\n                for (let seriesNode of oldChildren) {\n                    series.push(seriesNode);\n\n                    for (let categoryNode of seriesNode.children) {\n                        addCategory(categoryNode);\n                    }\n                }\n            }\n            \n            // extract intersection values from pivoted matrix\n            // values will be indexed by categories then series\n            let matrixValues: DataViewMatrixNodeValues[][] = new Array<DataViewMatrixNodeValues[]>(categories.length);\n            for (let j = 0; j < series.length; ++j) { // outer is series\n                let seriesNode = oldChildren[j];\n                for (let categoryNode of seriesNode.children) { // inner is categories but maybe a subset\n                    let i = findCategory(categoryNode.identity); // must lookup actual category index\n\n                    if (!matrixValues[i])\n                        matrixValues[i] = new Array<DataViewMatrixNodeValues>(series.length);\n\n                    matrixValues[i][j] = categoryNode.values;\n                }\n            }\n\n            // columns of the unpivoted matrix are the series\n            let newColumns: DataViewHierarchy = {\n                root: {\n                    children: _.map(series, s => {\n                        let inheritedNode = inheritSingle(s);\n                        inheritedNode.level = 0; // s.level should already be 0, but just in case...\n                        inheritedNode.children = undefined; // if Measure Headers exist in oldMatrix.columns, newColumns.root.children will get populated later in this function\n                        inheritedNode.childIdentityFields = undefined;\n                        return inheritedNode;\n                    }),\n                    childIdentityFields: seriesIdFields,\n                },\n                levels: [\n                    seriesIdLevel,\n                    \n                ],\n            };\n\n            // Re-add any Measure Headers from oldMatrix.columns as leaf nodes under newColumns\n            if (measureCount > 0) {\n                let newColChildren: DataViewMatrixNode[] = _.map(oldMatrix.columns.root.children, (srcnode: DataViewMatrixNode) => {\n                    let dstnode: DataViewMatrixNode = { level: 1 };\n                    if (srcnode.levelSourceIndex)\n                        dstnode.levelSourceIndex = srcnode.levelSourceIndex;\n                    return dstnode;\n                });\n\n                for (let i = 0; i < newColumns.root.children.length; ++i)\n                    newColumns.root.children[i].children = newColChildren;\n\n                newColumns.levels.push(oldMatrix.columns.levels[0]);\n            }\n\n            // rows of the unpivoted matrix are the categories\n            let newRows: DataViewHierarchy = {\n                root: {\n                    children: _.map(categories, c => {\n                        let inheritedNode = inheritSingle(c);\n                        inheritedNode.level = 0;\n                        inheritedNode.children = undefined; // c.children should already be undefined, but just in case...\n                        inheritedNode.childIdentityFields = undefined; // c.children should already be undefined, but just in case...\n                        return inheritedNode;\n                    }),\n                    childIdentityFields: categoryIdFields,\n                },\n                levels: [\n                    categoryIdLevel,\n                ],\n            };\n\n            // put values into rows\n            if (measureCount > 0) {\n                for (let i = 0; i < categories.length; ++i) {\n                    let row = newRows.root.children[i];\n                    let rowValues: DataViewMatrixNodeValues = {};\n\n                    for (let j = 0; j < series.length; ++j) {\n                        let mvalues = matrixValues[i] && matrixValues[i][j];\n                        for (let k = 0; k < measureCount; ++k) {\n                            let l = j * measureCount + k;\n                            rowValues[l] = !mvalues\n                                ? ( k === 0 ? { value: null } : { value: null, valueSourceIndex: k } )\n                                : mvalues[k];\n                        }\n                    }\n\n                    row.values = rowValues;\n                }\n            }\n\n            let newMatrix: DataViewMatrix = {\n                rows: newRows,\n                columns: newColumns,\n                valueSources: oldMatrix.valueSources,\n            };\n\n            return newMatrix;\n        }\n\n        /** build a categorical data view from an unpivoted matrix. */\n        function categoricalFromUnpivotedMatrix(matrix: DataViewMatrix, columnMetadata: DataViewMetadataColumn[]): DataViewCategorical {\n            let seriesCount = matrix.columns.root.children.length;\n            let measureMetadata = matrix.valueSources;\n            let measureCount = measureMetadata.length;\n\n            let categories: DataViewCategoryColumn[] = createCategoryColumnsFromUnpivotedMatrix(matrix);\n\n            // create grouped values\n            let groups: DataViewValueColumnGroup[] = [];\n            for (let j = 0; j < seriesCount; ++j) {\n                let seriesColumn = matrix.columns.root.children[j];\n                let group: DataViewValueColumnGroup = {\n                    values: [],\n                    identity: seriesColumn.identity,\n                    name: seriesColumn.value || null,\n                };\n\n                groups.push(group);\n\n                for (let k = 0; k < measureCount; ++k) {\n                    let valueColumnMetadataSrc = measureMetadata[k];\n                    let valueColumnMetadataDst: DataViewMetadataColumn = <DataViewMetadataColumn>{};\n                    for (let key in valueColumnMetadataSrc)\n                        valueColumnMetadataDst[key] = valueColumnMetadataSrc[key];\n                    valueColumnMetadataDst.groupName = group.name;\n\n                    columnMetadata.push(valueColumnMetadataDst);\n\n                    let valueColumn: DataViewValueColumn = {\n                        source: valueColumnMetadataDst,\n                        values: [],\n                        identity: group.identity,\n                    };\n\n                    group.values.push(valueColumn);\n\n                    // grab measure values in the group from across rows of matrix\n                    let index = k + j * measureCount;\n\n                    for (let categoryNode of matrix.rows.root.children) {\n                        let value = categoryNode.values[index].value;\n\n                        valueColumn.values.push(value);\n                    }\n                }\n            }\n\n            // and now ungrouped\n            let values: DataViewValueColumns = <DataViewValueColumns>[];\n            for (let group of groups) {\n                for (let k = 0; k < measureCount; ++k) {\n                    values.push(group.values[k]);\n                }\n            }\n\n            values.grouped = () => groups;\n            values.identityFields = matrix.columns.root.childIdentityFields;\n            values.source = matrix.columns.levels[0].sources[0];\n\n            // final assembly\n            let categorical: DataViewCategorical = {\n                categories: categories,\n                values: values,\n            };\n\n            return categorical;\n        }\n\n        function createCategoryColumnsFromUnpivotedMatrix(unpivotedMatrix: DataViewMatrix): DataViewCategoryColumn[] {\n            debug.assertValue(unpivotedMatrix, 'unpivotedMatrix');\n            debug.assert(unpivotedMatrix && unpivotedMatrix.rows && unpivotedMatrix.rows.levels && (unpivotedMatrix.rows.levels.length === 1),\n                'pre-condition: unpivotedMatrix should have exactly one level in row hierarchy');\n\n            // Create categories from rows.  If matrix.rows.levels[0].sources represents a composite group, expand each column in the \n            // composite group into a separate DataViewCategoryColumn.  The identity and childIdentityFields properties will be the \n            // same amongst the resulting DataViewCategoryColumns.\n            let categoryIdentity = _.map(unpivotedMatrix.rows.root.children, x => x.identity);\n            let categoryIdentityFields = unpivotedMatrix.rows.root.childIdentityFields;\n            let categorySourceColumns = unpivotedMatrix.rows.levels[0].sources;\n\n            let categories: DataViewCategoryColumn[] = [];\n            for (var i = 0, ilen = categorySourceColumns.length; i < ilen; i++) {\n                let groupLevelValues = _.map(unpivotedMatrix.rows.root.children, (categoryNode: DataViewMatrixNode) => {\n                    let levelValues: DataViewMatrixGroupValue[] = categoryNode.levelValues;\n\n                    // Please refer to the interface comments on when this is undefined... But in today's code\n                    // I believe we will not see undefined levelValues in the rows of any unpivotedMatrix. \n                    if (levelValues !== undefined) {\n                        debug.assert(levelValues[i] && (levelValues[i].levelSourceIndex === i),\n                            'pre-condition: DataViewMatrixNode.levelValues is expected to have one DataViewMatrixGroupValue node per level source column, sorted by levelSourceIndex.');\n                        return levelValues[i].value;\n                    }\n                });\n\n                categories.push({\n                    source: categorySourceColumns[i],\n                    values: groupLevelValues,\n                    identity: categoryIdentity,\n                    identityFields: categoryIdentityFields,\n                });\n            }\n\n            return categories;\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    import inherit = Prototype.inherit;\n    import inheritSingle = Prototype.inheritSingle;\n    import ArrayExtensions = jsCommon.ArrayExtensions;\n    import EnumExtensions = jsCommon.EnumExtensions;\n    import INumberDictionary = jsCommon.INumberDictionary;\n\n    export interface DataViewTransformApplyOptions {\n        prototype: DataView;\n        objectDescriptors: DataViewObjectDescriptors;\n        dataViewMappings?: DataViewMapping[];\n        transforms: DataViewTransformActions;\n        colorAllocatorFactory: IColorAllocatorFactory;\n        dataRoles: VisualDataRole[];\n    }\n\n    /** Describes the Transform actions to be done to a prototype DataView. */\n    export interface DataViewTransformActions {\n        /** Describes transform metadata for each semantic query select item, as the arrays align, by index. */\n        selects?: DataViewSelectTransform[];\n\n        /** Describes the DataViewObject definitions. */\n        objects?: DataViewObjectDefinitions;\n\n        /** Describes the splitting of a single input DataView into multiple DataViews. */\n        splits?: DataViewSplitTransform[];\n\n        /** Describes the projection metadata which includes projection ordering and active items. */\n        roles?: DataViewRoleTransformMetadata;\n    }\n\n    export interface DataViewSplitTransform {\n        selects: INumberDictionary<boolean>;\n    }\n\n    export interface DataViewProjectionOrdering {\n        [roleName: string]: number[];\n    }\n\n    export interface DataViewProjectionActiveItemInfo {\n        queryRef: string;\n\n        /** Describes if the active item should be ignored in concatenation.\n            If the active item has a drill filter, it will not be used in concatenation.\n            If the value of suppressConcat is true, the activeItem will be ommitted from concatenation. */\n        suppressConcat?: boolean;\n    }\n\n    export interface DataViewProjectionActiveItems {\n        [roleName: string]: DataViewProjectionActiveItemInfo[];\n    }\n\n    export interface DataViewRoleTransformMetadata {\n        /** Describes the order of selects (referenced by query index) in each role. */\n        ordering?: DataViewProjectionOrdering;\n\n        /** Describes the active items in each role. */\n        activeItems?: DataViewProjectionActiveItems;\n    }\n\n    export interface MatrixTransformationContext {\n        rowHierarchyRewritten: boolean;\n        columnHierarchyRewritten: boolean;\n        hierarchyTreesRewritten: boolean;\n    }\n\n    interface ValueRewrite<T> {\n        from: T;\n        to: T;\n    }\n\n    interface NumberToNumberMapping {\n        [position: number]: number;\n    }\n\n    const enum CategoricalDataViewTransformation {\n        None,\n        Pivot,\n        SelfCrossJoin,\n    }\n\n    export const enum StandardDataViewKinds {\n        None = 0,\n        Categorical = 1,\n        Matrix = 1 << 1,\n        Single = 1 << 2,\n        Table = 1 << 3,\n        Tree = 1 << 4,\n    }\n\n    // TODO: refactor & focus DataViewTransform into a service with well-defined dependencies.\n    export module DataViewTransform {\n        const fillRulePropertyDescriptor: DataViewObjectPropertyDescriptor = { type: { fillRule: {} } };\n\n        const enum ColumnIdentifierKind {\n            QueryName,\n            Role,\n        }\n\n        export function apply(options: DataViewTransformApplyOptions): DataView[] {\n            debug.assertValue(options, 'options');\n\n            // TODO: Flow a context object through to capture errors/warnings about what happens here for better diagnosability.\n\n            let prototype = options.prototype,\n                objectDescriptors = options.objectDescriptors,\n                dataViewMappings = options.dataViewMappings,\n                transforms = options.transforms,\n                projectionActiveItems = transforms && transforms.roles && transforms.roles.activeItems,\n                colorAllocatorFactory = options.colorAllocatorFactory,\n                dataRoles = options.dataRoles;\n\n            if (!prototype)\n                return transformEmptyDataView(objectDescriptors, transforms, colorAllocatorFactory);\n\n            if (!transforms)\n                return [prototype];\n\n            // Transform Query DataView\n            prototype = DataViewPivotCategoricalToPrimaryGroups.unpivotResult(prototype, transforms.selects, dataViewMappings, projectionActiveItems);\n            let visualDataViews: DataView[] = transformQueryToVisualDataView(prototype, transforms, objectDescriptors, dataViewMappings, colorAllocatorFactory, dataRoles);\n\n            // Transform and generate derived visual DataViews\n            visualDataViews = DataViewRegression.run({\n                dataViewMappings: dataViewMappings,\n                visualDataViews: visualDataViews,\n                dataRoles: dataRoles,\n                objectDescriptors: objectDescriptors,\n                objectDefinitions: transforms.objects,\n                colorAllocatorFactory: colorAllocatorFactory,\n                transformSelects: transforms.selects,\n                metadata: prototype.metadata,\n                projectionActiveItems: projectionActiveItems,\n            });\n\n            return visualDataViews;\n        }\n\n        function transformQueryToVisualDataView(\n            prototype: DataView,\n            transforms: DataViewTransformActions,\n            objectDescriptors: DataViewObjectDescriptors,\n            dataViewMappings: DataViewMapping[],\n            colorAllocatorFactory: IColorAllocatorFactory,\n            dataRoles: VisualDataRole[]): DataView[] {\n            let transformedDataViews: DataView[] = [];\n            let splits = transforms.splits;\n            if (_.isEmpty(splits)) {\n                transformedDataViews.push(transformDataView(prototype, objectDescriptors, dataViewMappings, transforms, colorAllocatorFactory, dataRoles));\n            } else {\n                for (let split of splits) {\n                    let transformed = transformDataView(prototype, objectDescriptors, dataViewMappings, transforms, colorAllocatorFactory, dataRoles, split.selects);\n                    transformedDataViews.push(transformed);\n                }\n            }\n            return transformedDataViews;\n        }\n\n        function transformEmptyDataView(objectDescriptors: DataViewObjectDescriptors, transforms: DataViewTransformActions, colorAllocatorFactory: IColorAllocatorFactory): DataView[] {\n            if (transforms && transforms.objects) {\n                let emptyDataView: DataView = {\n                    metadata: {\n                        columns: [],\n                    }\n                };\n\n                transformObjects(\n                    emptyDataView,\n                    StandardDataViewKinds.None,\n                    objectDescriptors,\n                    transforms.objects,\n                    transforms.selects,\n                    colorAllocatorFactory);\n\n                return [emptyDataView];\n            }\n\n            return [];\n        }\n\n        function transformDataView(\n            prototype: DataView,\n            objectDescriptors: DataViewObjectDescriptors,\n            roleMappings: DataViewMapping[],\n            transforms: DataViewTransformActions,\n            colorAllocatorFactory: IColorAllocatorFactory,\n            dataRoles: VisualDataRole[],\n            selectsToInclude?: INumberDictionary<boolean>): DataView {\n            debug.assertValue(prototype, 'prototype');\n            debug.assertValue(transforms, 'transforms');\n            debug.assert(!selectsToInclude ||\n                _.filter(\n                    Object.keys(selectsToInclude),\n                    (selectIndex) => selectsToInclude[selectIndex] && (!transforms.selects || !transforms.selects[selectIndex]))\n                    .length === 0, // asserts that the number of select indices in selectsToInclude without a corresponding Select Transform === 0\n                'If selectsToInclude is specified, every Select Index in it must have a corresponding Select Transform.');\n\n            let targetKinds = getTargetKinds(roleMappings);\n            let transformed = inherit(prototype);\n            transformed.metadata = inherit(prototype.metadata);\n\n            let projectionOrdering = transforms.roles && transforms.roles.ordering;\n            let projectionActiveItems = transforms.roles && transforms.roles.activeItems;\n            transformed = transformSelects(transformed, targetKinds, roleMappings, transforms.selects, projectionOrdering, selectsToInclude);\n            transformObjects(transformed, targetKinds, objectDescriptors, transforms.objects, transforms.selects, colorAllocatorFactory);\n\n            // Note: Do this step after transformObjects() so that metadata columns in 'transformed' have roles and objects.general.formatString populated\n            transformed = DataViewConcatenateCategoricalColumns.detectAndApply(transformed, objectDescriptors, roleMappings, projectionOrdering, transforms.selects, projectionActiveItems);\n\n            DataViewNormalizeValues.apply({\n                dataview: transformed,\n                dataViewMappings: roleMappings,\n                dataRoles: dataRoles,\n            });\n\n            return transformed;\n        }\n\n        function getTargetKinds(roleMappings: DataViewMapping[]): StandardDataViewKinds {\n            debug.assertAnyValue(roleMappings, 'roleMappings');\n\n            if (!roleMappings)\n                return StandardDataViewKinds.None;\n\n            let result = StandardDataViewKinds.None;\n            for (let roleMapping of roleMappings) {\n                if (roleMapping.categorical)\n                    result |= StandardDataViewKinds.Categorical;\n                if (roleMapping.matrix)\n                    result |= StandardDataViewKinds.Matrix;\n                if (roleMapping.single)\n                    result |= StandardDataViewKinds.Single;\n                if (roleMapping.table)\n                    result |= StandardDataViewKinds.Table;\n                if (roleMapping.tree)\n                    result |= StandardDataViewKinds.Tree;\n            }\n            return result;\n        }\n\n        function transformSelects(\n            dataView: DataView,\n            targetDataViewKinds: StandardDataViewKinds,\n            roleMappings: DataViewMapping[],\n            selectTransforms: DataViewSelectTransform[],\n            projectionOrdering?: DataViewProjectionOrdering,\n            selectsToInclude?: INumberDictionary<boolean>): DataView {\n\n            let columnRewrites: ValueRewrite<DataViewMetadataColumn>[] = [];\n            if (selectTransforms) {\n                dataView.metadata.columns = applyTransformsToColumns(\n                    dataView.metadata.columns,\n                    selectTransforms,\n                    columnRewrites);\n            }\n\n            // NOTE: no rewrites necessary for Tree (it doesn't reference the columns)\n\n            if (dataView.categorical && EnumExtensions.hasFlag(targetDataViewKinds, StandardDataViewKinds.Categorical)) {\n                dataView.categorical = applyRewritesToCategorical(dataView.categorical, columnRewrites, selectsToInclude);\n\n                // TODO VSTS 7024199: separate out structural transformations from dataViewTransform.transformSelects(...)\n                // NOTE: This is slightly DSR-specific.\n                dataView = pivotIfNecessary(dataView, roleMappings);\n            }\n\n            // Don't perform this potentially expensive transform unless we actually have a matrix.\n            // When we switch to lazy per-visual DataView creation, we'll be able to remove this check.\n            if (dataView.matrix && EnumExtensions.hasFlag(targetDataViewKinds, StandardDataViewKinds.Matrix)) {\n                let matrixTransformationContext: MatrixTransformationContext = {\n                    rowHierarchyRewritten: false,\n                    columnHierarchyRewritten: false,\n                    hierarchyTreesRewritten: false\n                };\n                dataView.matrix = applyRewritesToMatrix(dataView.matrix, columnRewrites, roleMappings, projectionOrdering, matrixTransformationContext);\n\n                // TODO VSTS 7024199: separate out structural transformations from dataViewTransform.transformSelects(...)\n                if (shouldPivotMatrix(dataView.matrix, roleMappings))\n                    DataViewPivotMatrix.apply(dataView.matrix, matrixTransformationContext);\n            }\n\n            // Don't perform this potentially expensive transform unless we actually have a table.\n            // When we switch to lazy per-visual DataView creation, we'll be able to remove this check.\n            if (dataView.table && EnumExtensions.hasFlag(targetDataViewKinds, StandardDataViewKinds.Table)) {\n                dataView.table = applyRewritesToTable(dataView.table, columnRewrites, projectionOrdering);\n            }\n\n            return dataView;\n        }\n\n        function applyTransformsToColumns(\n            prototypeColumns: DataViewMetadataColumn[],\n            selects: DataViewSelectTransform[],\n            rewrites: ValueRewrite<DataViewMetadataColumn>[]): DataViewMetadataColumn[] {\n            debug.assertValue(prototypeColumns, 'columns');\n\n            if (!selects)\n                return prototypeColumns;\n\n            //column may contain undefined entries\n            let columns = inherit(prototypeColumns);\n\n            for (let i = 0, len = prototypeColumns.length; i < len; i++) {\n                let prototypeColumn = prototypeColumns[i];\n                let select = selects[prototypeColumn.index];\n                if (!select)\n                    continue;\n\n                let column: DataViewMetadataColumn = columns[i] = inherit(prototypeColumn);\n\n                if (select.roles)\n                    column.roles = select.roles;\n                if (select.type)\n                    column.type = select.type;\n                column.format = getFormatForColumn(select, column);\n\n                if (select.displayName)\n                    column.displayName = select.displayName;\n                if (select.queryName)\n                    column.queryName = select.queryName;\n                if (select.kpi)\n                    column.kpi = select.kpi;\n                if (select.sort)\n                    column.sort = select.sort;\n                if (select.discourageAggregationAcrossGroups)\n                    column.discourageAggregationAcrossGroups = select.discourageAggregationAcrossGroups;\n\n                rewrites.push({\n                    from: prototypeColumn,\n                    to: column,\n                });\n            }\n\n            return columns;\n        }\n\n        /**\n         * Get the column format. Order of precendence is:\n         *  1. Select format\n         *  2. Column format\n         */\n        function getFormatForColumn(select: DataViewSelectTransform, column: DataViewMetadataColumn): string {\n            // TODO: we already copied the select.Format to column.format, we probably don't need this check\n            return select.format || column.format;\n        }\n\n        function applyRewritesToCategorical(prototype: DataViewCategorical, columnRewrites: ValueRewrite<DataViewMetadataColumn>[], selectsToInclude?: INumberDictionary<boolean>): DataViewCategorical {\n            debug.assertValue(prototype, 'prototype');\n            debug.assertValue(columnRewrites, 'columnRewrites');\n\n            let categorical = inherit(prototype);\n\n            function override(value: { source?: DataViewMetadataColumn }) {\n                let rewrittenSource = findOverride(value.source, columnRewrites);\n                if (rewrittenSource) {\n                    let rewritten = inherit(value);\n                    rewritten.source = rewrittenSource;\n                    return rewritten;\n                }\n            }\n\n            let categories = Prototype.overrideArray(prototype.categories, override);\n            if (categories)\n                categorical.categories = categories;\n\n            let valuesOverride = Prototype.overrideArray(prototype.values, override);\n            let valueColumns = valuesOverride || prototype.values;\n\n            if (valueColumns) {\n                if (valueColumns.source) {\n                    if (selectsToInclude && !selectsToInclude[valueColumns.source.index]) {\n                        // if processing a split and this is the split without series...\n                        valueColumns.source = undefined;\n                    }\n                    else {\n                        let rewrittenValuesSource = findOverride(valueColumns.source, columnRewrites);\n                        if (rewrittenValuesSource)\n                            valueColumns.source = rewrittenValuesSource;\n                    }\n                }\n\n                if (selectsToInclude) {\n                    // Apply selectsToInclude to values by removing value columns not included\n                    for (let i = valueColumns.length - 1; i >= 0; i--) {\n                        if (!selectsToInclude[valueColumns[i].source.index]) {\n                            valueColumns.splice(i, 1);\n                        }\n                    }\n                }\n\n                let isDynamicSeries = !!valueColumns.source;\n\n                debug.assert(_.every(valueColumns, (valueColumn) => _.isEmpty(valueColumn.values)) ||\n                    _.every(valueColumns, (valueColumn) => isDynamicSeries === !!valueColumn.identity),\n                    'After applying selectsToInclude, all remaining DataViewValueColumn objects should have a consistent scope type (static vs. dynamic) with the parent DataViewValueColumns object.');\n                    \n                // Dynamic or not, always update the return values of grouped() to have the rewritten 'source' property\n                let seriesGroups: DataViewValueColumnGroup[];\n                if (isDynamicSeries) {\n                    // We have a dynamic series, so update the return value of grouped() to have the DataViewValueColumn objects with rewritten 'source'.\n                    // Also, exclude any column that belongs to a static series.\n                    seriesGroups = inherit(valueColumns.grouped());\n                    \n                    let nextSeriesGroupIndex = 0;\n                    let currentSeriesGroup: DataViewValueColumnGroup;\n                    for (let i = 0, ilen = valueColumns.length; i < ilen; i++) {\n                        let currentValueColumn = valueColumns[i];\n                        if (!currentSeriesGroup || (currentValueColumn.identity !== currentSeriesGroup.identity)) {\n                            currentSeriesGroup = inherit(seriesGroups[nextSeriesGroupIndex]);\n                            seriesGroups[nextSeriesGroupIndex] = currentSeriesGroup;\n                            currentSeriesGroup.values = [];\n                            nextSeriesGroupIndex++;\n                            debug.assert(currentValueColumn.identity === currentSeriesGroup.identity, 'expecting the value columns are sequenced by series groups');\n                        }\n                        currentSeriesGroup.values.push(currentValueColumn);\n                    }\n                }\n                else {\n                    // We are in a static series, so we should throw away the grouped and recreate it using the static values\n                    //   which have already been filtered\n                    seriesGroups = [{ values: valueColumns }];\n                }\n\n                valueColumns.grouped = () => seriesGroups;\n                categorical.values = valueColumns;\n            }\n\n            return categorical;\n        }\n\n        function applyRewritesToTable(\n            prototype: DataViewTable,\n            columnRewrites: ValueRewrite<DataViewMetadataColumn>[],\n            projectionOrdering: DataViewProjectionOrdering): DataViewTable {\n            debug.assertValue(prototype, 'prototype');\n            debug.assertValue(columnRewrites, 'columnRewrites');\n\n            let table = inherit(prototype);\n\n            // Copy the rewritten columns into the table view\n            let override = (metadata: DataViewMetadataColumn) => findOverride(metadata, columnRewrites);\n            let columns = Prototype.overrideArray(prototype.columns, override);\n            if (columns)\n                table.columns = columns;\n\n            if (!projectionOrdering)\n                return table;\n\n            let newToOldPositions = createTableColumnPositionMapping(projectionOrdering, columnRewrites);\n            if (!newToOldPositions)\n                return table;\n\n            // Reorder the columns\n            let columnsClone = columns.slice(0);\n            let keys = Object.keys(newToOldPositions);\n            for (let i = 0, len = keys.length; i < len; i++) {\n                let sourceColumn = columnsClone[newToOldPositions[keys[i]]];\n\n                // In the case we've hit the end of our columns array, but still have position reordering keys,\n                // there is a duplicate column so we will need to add a new column for the duplicate data\n                if (i === columns.length)\n                    columns.push(sourceColumn);\n                else {\n                    debug.assert(i < columns.length, 'The column index is out of range for reordering.');\n                    columns[i] = sourceColumn;\n                }\n            }\n\n            // Reorder the rows\n            let rows = Prototype.overrideArray(table.rows,\n                (row: any[]) => {\n                    let newRow: any[] = [];\n                    for (let i = 0, len = keys.length; i < len; ++i)\n                        newRow[i] = row[newToOldPositions[keys[i]]];\n\n                    return newRow;\n                });\n\n            if (rows)\n                table.rows = rows;\n\n            return table;\n        }\n\n        /** Creates a mapping of new position to original position. */\n        function createTableColumnPositionMapping(\n            projectionOrdering: DataViewProjectionOrdering,\n            columnRewrites: ValueRewrite<DataViewMetadataColumn>[]): NumberToNumberMapping {\n            let roles = Object.keys(projectionOrdering);\n\n            // If we have more than one role then the ordering of columns between roles is ambiguous, so don't reorder anything.\n            if (roles.length !== 1)\n                return;\n\n            let role = roles[0],\n                originalOrder = _.map(columnRewrites, (rewrite: ValueRewrite<DataViewMetadataColumn>) => rewrite.from.index),\n                newOrder = projectionOrdering[role];\n\n            return createOrderMapping(originalOrder, newOrder);\n        }\n\n        function applyRewritesToMatrix(\n            prototype: DataViewMatrix,\n            columnRewrites: ValueRewrite<DataViewMetadataColumn>[],\n            roleMappings: DataViewMapping[],\n            projectionOrdering: DataViewProjectionOrdering,\n            context: MatrixTransformationContext): DataViewMatrix {\n            debug.assertValue(prototype, 'prototype');\n            debug.assertValue(columnRewrites, 'columnRewrites');\n            debug.assertValue(roleMappings, 'roleMappings');\n            \n            let firstRoleMappingWithMatrix = _.find(roleMappings, (roleMapping) => !!roleMapping.matrix);\n            debug.assertValue(firstRoleMappingWithMatrix, 'roleMappings - at least one role mapping is expected to target DataViewMatrix');\n\n            let matrixMapping = firstRoleMappingWithMatrix.matrix;\n            let matrix = inherit(prototype);\n\n            function override(metadata: DataViewMetadataColumn) {\n                return findOverride(metadata, columnRewrites);\n            }\n\n            function overrideHierarchy(hierarchy: DataViewHierarchy): DataViewHierarchy {\n                let rewrittenHierarchy: DataViewHierarchy = null;\n\n                let newLevels = Prototype.overrideArray(\n                    hierarchy.levels,\n                    (level: DataViewHierarchyLevel) => {\n                        let newLevel: DataViewHierarchyLevel = null;\n                        let levelSources = Prototype.overrideArray(level.sources, override);\n                        if (levelSources)\n                            newLevel = ensureRewritten<DataViewHierarchyLevel>(newLevel, level, h => h.sources = levelSources);\n\n                        return newLevel;\n                    });\n                if (newLevels)\n                    rewrittenHierarchy = ensureRewritten<DataViewHierarchy>(rewrittenHierarchy, hierarchy, r => r.levels = newLevels);\n\n                return rewrittenHierarchy;\n            }\n\n            let rows = overrideHierarchy(matrix.rows);\n            if (rows) {\n                matrix.rows = rows;\n                context.rowHierarchyRewritten = true;\n            }\n\n            let columns = overrideHierarchy(matrix.columns);\n            if (columns) {\n                matrix.columns = columns;\n                context.columnHierarchyRewritten = true;\n            }\n\n            let valueSources = Prototype.overrideArray(matrix.valueSources, override);\n            if (valueSources) {\n                matrix.valueSources = valueSources;\n\n                // Only need to reorder if we have more than one value source, and they are all bound to the same role\n                let matrixValues = <DataViewRoleForMapping>matrixMapping.values;\n                if (projectionOrdering && valueSources.length > 1 && matrixValues && matrixValues.for) {\n                    let columnLevels = columns.levels.length;\n                    if (columnLevels > 0) {\n                        let newToOldPositions = createMatrixValuesPositionMapping(matrixValues, projectionOrdering, valueSources, columnRewrites);\n                        if (newToOldPositions) {\n                            let keys = Object.keys(newToOldPositions);\n                            let numKeys = keys.length;\n\n                            // Reorder the value columns\n                            columns.root = DataViewPivotMatrix.cloneTree(columns.root);\n                            if (columnLevels === 1)\n                                reorderChildNodes(columns.root, newToOldPositions);\n                            else\n                                forEachNodeAtLevel(columns.root, columnLevels - 2, (node: DataViewMatrixNode) => reorderChildNodes(node, newToOldPositions));\n\n                            // Reorder the value rows\n                            matrix.rows.root = DataViewPivotMatrix.cloneTreeExecuteOnLeaf(matrix.rows.root, (node: DataViewMatrixNode) => {\n\n                                if (!node.values)\n                                    return;\n\n                                let newValues: { [id: number]: DataViewTreeNodeValue } = {};\n\n                                let iterations = Object.keys(node.values).length / numKeys;\n                                for (let i = 0, len = iterations; i < len; i++) {\n                                    let offset = i * numKeys;\n                                    for (let keysIndex = 0; keysIndex < numKeys; keysIndex++)\n                                        newValues[offset + keysIndex] = node.values[offset + newToOldPositions[keys[keysIndex]]];\n                                }\n\n                                node.values = newValues;\n                            });\n\n                            context.hierarchyTreesRewritten = true;\n                        }\n                    }\n                }\n            }\n\n            reorderMatrixCompositeGroups(matrix, matrixMapping, projectionOrdering);\n\n            return matrix;\n        }\n\n        function reorderChildNodes(node: DataViewMatrixNode, newToOldPositions: NumberToNumberMapping): void {\n            let keys = Object.keys(newToOldPositions);\n            let numKeys = keys.length;\n            let children = node.children;\n\n            let childrenClone = children.slice(0);\n            for (let i = 0, len = numKeys; i < len; i++) {\n                let sourceColumn = childrenClone[newToOldPositions[keys[i]]];\n\n                // In the case we've hit the end of our columns array, but still have position reordering keys,\n                // there is a duplicate column so we will need to add a new column for the duplicate data\n                if (i === children.length)\n                    children.push(sourceColumn);\n                else {\n                    debug.assert(i < children.length, 'The column index is out of range for reordering.');\n                    children[i] = sourceColumn;\n                }\n            }\n        }\n\n        /**\n         * Returns a inheritSingle() version of the specified prototype DataViewMatrix with any composite group levels\n         * and values re-ordered by projection ordering.\n         * Returns undefined if no re-ordering under the specified prototype is necessary.\n         */\n        function reorderMatrixCompositeGroups(\n            prototype: DataViewMatrix,\n            supportedDataViewMapping: DataViewMatrixMapping,\n            projection: DataViewProjectionOrdering): DataViewMatrix {\n\n            let transformedDataView: DataViewMatrix;\n\n            if (prototype && supportedDataViewMapping && projection) {\n\n                // reorder levelValues in any composite groups in rows hierarchy\n                let transformedRowsHierarchy: DataViewHierarchy;\n                DataViewMapping.visitMatrixItems(supportedDataViewMapping.rows, {\n                    visitRole: (role: string, context?: RoleItemContext): void => {\n                        transformedRowsHierarchy = reorderMatrixHierarchyCompositeGroups(\n                            transformedRowsHierarchy || prototype.rows,\n                            role,\n                            projection);\n                    }\n                });\n\n                // reorder levelValues in any composite groups in columns hierarchy\n                let transformedColumnsHierarchy: DataViewHierarchy;\n                DataViewMapping.visitMatrixItems(supportedDataViewMapping.columns, {\n                    visitRole: (role: string, context?: RoleItemContext): void => {\n                        transformedColumnsHierarchy = reorderMatrixHierarchyCompositeGroups(\n                            transformedColumnsHierarchy || prototype.columns,\n                            role,\n                            projection);\n                    }\n                });\n\n                if (transformedRowsHierarchy || transformedColumnsHierarchy) {\n                    transformedDataView = inheritSingle(prototype);\n                    transformedDataView.rows = transformedRowsHierarchy || transformedDataView.rows;\n                    transformedDataView.columns = transformedColumnsHierarchy || transformedDataView.columns;\n                }\n            }\n\n            return transformedDataView;\n        }\n\n        /**\n         * Returns a inheritSingle() version of the specified matrixHierarchy with any composite group levels and\n         * values re-ordered by projection ordering.\n         * Returns undefined if no re-ordering under the specified matrixHierarchy is necessary.\n         */\n        function reorderMatrixHierarchyCompositeGroups(\n            matrixHierarchy: DataViewHierarchy,\n            hierarchyRole: string,\n            projection: DataViewProjectionOrdering): DataViewHierarchy {\n            debug.assertValue(matrixHierarchy, 'matrixHierarchy');\n            debug.assertValue(hierarchyRole, 'hierarchyRole');\n            debug.assertValue(projection, 'projection');\n\n            let transformedHierarchy: DataViewHierarchy;\n            let selectIndicesInProjectionOrder: number[] = projection[hierarchyRole];\n\n            // reordering needs to happen only if there are multiple columns for the hierarchy's role in the projection\n            let hasMultipleColumnsInProjection = selectIndicesInProjectionOrder && selectIndicesInProjectionOrder.length >= 2;\n            if (hasMultipleColumnsInProjection && !_.isEmpty(matrixHierarchy.levels)) {\n                for (let i = matrixHierarchy.levels.length - 1; i >= 0; i--) {\n                    var hierarchyLevel: DataViewHierarchyLevel = matrixHierarchy.levels[i];\n\n                    // compute a mapping for any necessary reordering of columns at this given level, based on projection ordering\n                    let newToOldLevelSourceIndicesMapping: NumberToNumberMapping =\n                        createMatrixHierarchyLevelSourcesPositionMapping(hierarchyLevel, hierarchyRole, projection);\n\n                    if (newToOldLevelSourceIndicesMapping) {\n                        if (_.isUndefined(transformedHierarchy)) {\n                            // Because we start inspecting the hierarchy from the deepest level and work backwards to the root,\n                            // the current hierarchyLevel is therefore the inner-most level that needs re-ordering of composite group values...\n                            transformedHierarchy = inheritSingle(matrixHierarchy);\n                            transformedHierarchy.levels = inheritSingle(matrixHierarchy.levels);\n\n                            // Because the current hierarchyLevel is the inner-most level that needs re-ordering of composite group values,\n                            // inheriting all nodes from root down to this level will also prepare the nodes for any transform that needs to\n                            // happen in other hierarchy levels in the later iterations of this for-loop.\n                            transformedHierarchy.root = utils.DataViewMatrixUtils.inheritMatrixNodeHierarchy(matrixHierarchy.root, i, true);\n                        }\n\n                        // reorder the metadata columns in the sources array at that level\n                        let transformingHierarchyLevel = inheritSingle(matrixHierarchy.levels[i]); // inherit at most once during the whole dataViewTransform for this obj...\n                        transformedHierarchy.levels[i] = reorderMatrixHierarchyLevelColumnSources(transformingHierarchyLevel, newToOldLevelSourceIndicesMapping);\n\n                        // reorder the level values in the composite group nodes at the current hierarchy level\n                        reorderMatrixHierarchyLevelValues(transformedHierarchy.root, i, newToOldLevelSourceIndicesMapping);\n                    }\n                }\n            }\n\n            return transformedHierarchy;\n        }\n\n        /**\n         * If reordering is needed on the level's metadata column sources (i.e. hierarchyLevel.sources),\n         * returns the mapping from the target LevelSourceIndex (based on projection order) to original LevelSourceIndex.\n         *\n         * The returned value maps level source indices from the new target order (calculated from projection order)\n         * back to the original order as they appear in the specified hierarchyLevel's sources.\n         * Please refer to comments on the createOrderMapping() function for more explanation on the mappings in the return value.\n         *\n         * Note: The return value is the mapping from new index to old index, for consistency with existing and similar functions in this module.\n         *\n         * @param hierarchyLevel The hierarchy level that contains the metadata column sources.\n         * @param hierarchyRoleName The role name for the hierarchy where the specified hierarchyLevel belongs.\n         * @param projection The projection ordering that includes an ordering for the specified hierarchyRoleName.\n         */\n        function createMatrixHierarchyLevelSourcesPositionMapping(\n            hierarchyLevel: DataViewHierarchyLevel,\n            hierarchyRole: string,\n            projection: DataViewProjectionOrdering): NumberToNumberMapping {\n            debug.assertValue(hierarchyLevel, 'hierarchyLevel');\n            debug.assertValue(hierarchyRole, 'hierarchyRole');\n            debug.assertValue(projection, 'projection');\n            debug.assertValue(projection[hierarchyRole], 'pre-condition: The specified projection must contain an ordering for the specified hierarchyRoleName.');\n\n            let newToOldLevelSourceIndicesMapping: NumberToNumberMapping;\n            let levelSourceColumns = hierarchyLevel.sources;\n\n            if (levelSourceColumns && levelSourceColumns.length >= 2) {\n                // The hierarchy level has multiple columns, so it is possible to have composite group, go on to check other conditions...\n\n                let columnsForHierarchyRoleOrderedByLevelSourceIndex = utils.DataViewMetadataColumnUtils.joinMetadataColumnsAndProjectionOrder(\n                    levelSourceColumns,\n                    projection,\n                    hierarchyRole);\n\n                if (columnsForHierarchyRoleOrderedByLevelSourceIndex && columnsForHierarchyRoleOrderedByLevelSourceIndex.length >= 2) {\n                    // The hierarchy level has multiple columns for the hierarchy's role, go on to calculate newToOldLevelSourceIndicesMapping...\n                    let columnsForHierarchyRoleOrderedByProjection = _.sortBy(\n                        columnsForHierarchyRoleOrderedByLevelSourceIndex,\n                        columnInfo => columnInfo.projectionOrderIndex);\n\n                    newToOldLevelSourceIndicesMapping = createOrderMapping(\n                        _.map(columnsForHierarchyRoleOrderedByLevelSourceIndex, columnInfo => columnInfo.sourceIndex),\n                        _.map(columnsForHierarchyRoleOrderedByProjection, columnInfo => columnInfo.sourceIndex));\n                }\n            }\n\n            return newToOldLevelSourceIndicesMapping;\n        }\n\n        /**\n         * Applies re-ordering on the specified transformingHierarchyLevel's sources.\n         * Returns the same object as the specified transformingHierarchyLevel.\n         */\n        function reorderMatrixHierarchyLevelColumnSources(transformingHierarchyLevel: DataViewHierarchyLevel, newToOldLevelSourceIndicesMapping: NumberToNumberMapping): DataViewHierarchyLevel {\n            debug.assertValue(transformingHierarchyLevel, 'transformingHierarchyLevel');\n            debug.assertValue(newToOldLevelSourceIndicesMapping, 'newToOldLevelSourceIndicesMapping');\n\n            let originalLevelSources = transformingHierarchyLevel.sources;\n\n            transformingHierarchyLevel.sources = originalLevelSources.slice(0); // make a clone of the array before modifying it, because the for-loop depends on the origin array.\n\n            let newLevelSourceIndices = Object.keys(newToOldLevelSourceIndicesMapping);\n            for (let i = 0, ilen = newLevelSourceIndices.length; i < ilen; i++) {\n                let newLevelSourceIndex = newLevelSourceIndices[i];\n                let oldLevelSourceIndex = newToOldLevelSourceIndicesMapping[newLevelSourceIndex];\n\n                debug.assert(oldLevelSourceIndex < originalLevelSources.length,\n                    'pre-condition: The value in every mapping in the specified levelSourceIndicesReorderingMap must be a valid index to the specified hierarchyLevel.sources array property');\n\n                transformingHierarchyLevel.sources[newLevelSourceIndex] = originalLevelSources[oldLevelSourceIndex];\n            }\n\n            return transformingHierarchyLevel;\n        }\n\n        /**\n         * Reorders the elements in levelValues in each node under transformingHierarchyRootNode at the specified hierarchyLevel,\n         * and updates their DataViewMatrixGroupValue.levelSourceIndex property.\n         *\n         * Returns the same object as the specified transformingHierarchyRootNode.\n         */\n        function reorderMatrixHierarchyLevelValues(\n            transformingHierarchyRootNode: DataViewMatrixNode,\n            transformingHierarchyLevelIndex: number,\n            newToOldLevelSourceIndicesMapping: NumberToNumberMapping): DataViewMatrixNode {\n            debug.assertValue(transformingHierarchyRootNode, 'transformingHierarchyRootNode');\n            debug.assertValue(newToOldLevelSourceIndicesMapping, 'newToOldLevelSourceIndicesMapping');\n\n            let oldToNewLevelSourceIndicesMapping: NumberToNumberMapping = createReversedMapping(newToOldLevelSourceIndicesMapping);\n\n            forEachNodeAtLevel(transformingHierarchyRootNode, transformingHierarchyLevelIndex, (transformingMatrixNode: DataViewMatrixNode) => {\n                let originalLevelValues = transformingMatrixNode.levelValues;\n\n                // Note: Technically this function is incorrect, because the driving source of the new LevelValues is really\n                // the \"projection for this composite group\", a concept that isn't yet implemented in DataViewProjectionOrdering.\n                // The following code isn't correct in the special case where a column is projected twice in this composite group,\n                // in which case the DSR will not have the duplicate columns; DataViewTransform is supposed to expand the duplicates.\n                // Until we fully implement composite group projection, though, we'll just sort what we have in transformingMatrixNode.levelValues.\n\n                if (!_.isEmpty(originalLevelValues)) {\n                    // First, re-order the elements in transformingMatrixNode.levelValues by the new levelSourceIndex order.\n                    // _.sortBy() also creates a new array, which we want to do for all nodes (including when levelValues.length === 1)\n                    // because we don't want to accidentally modify the array AND its value references in Query DataView\n                    let newlyOrderedLevelValues = _.sortBy(originalLevelValues, levelValue => oldToNewLevelSourceIndicesMapping[levelValue.levelSourceIndex]);\n\n                    for (let i = 0, ilen = newlyOrderedLevelValues.length; i < ilen; i++) {\n                        let transformingLevelValue = inheritSingle(newlyOrderedLevelValues[i]);\n                        transformingLevelValue.levelSourceIndex = oldToNewLevelSourceIndicesMapping[transformingLevelValue.levelSourceIndex];\n                        newlyOrderedLevelValues[i] = transformingLevelValue;\n                    }\n\n                    transformingMatrixNode.levelValues = newlyOrderedLevelValues;\n\n                    // For consistency with how DataViewTreeNode.value works, and for a bit of backward compatibility,\n                    // copy the last value from DataViewMatrixNode.levelValues to DataViewMatrixNode.value.\n                    let newlyOrderedLastLevelValue = _.last(newlyOrderedLevelValues);\n                    if (transformingMatrixNode.value !== newlyOrderedLastLevelValue.value) {\n                        transformingMatrixNode.value = newlyOrderedLastLevelValue.value;\n                    }\n                    if ((transformingMatrixNode.levelSourceIndex || 0) !== newlyOrderedLastLevelValue.levelSourceIndex) {\n                        transformingMatrixNode.levelSourceIndex = newlyOrderedLastLevelValue.levelSourceIndex;\n                    }\n                }\n            });\n\n            return transformingHierarchyRootNode;\n        }\n\n        /**\n         * Creates a mapping of new position to original position.\n         *\n         * The return value is a mapping where each key-value pair represent the order  mapping of a particular column:\n         * - the key in the key-value pair is the index of the particular column in the new order (e.g. projection order)\n         * - the value in the key-value pair is the index of the particular column in the original order\n         */\n        function createMatrixValuesPositionMapping(\n            matrixValues: DataViewRoleForMapping,\n            projectionOrdering: DataViewProjectionOrdering,\n            valueSources: DataViewMetadataColumn[],\n            columnRewrites: ValueRewrite<DataViewMetadataColumn>[]): NumberToNumberMapping {\n\n            let role = matrixValues.for.in;\n            let newOrder = projectionOrdering[role];\n\n            let originalOrder = _.chain(columnRewrites)\n                .filter(rewrite => _.contains(valueSources, rewrite.to))\n                .map(rewrite => rewrite.from.index)\n                .value();\n\n            return createOrderMapping(originalOrder, newOrder);\n        }\n\n        /**\n         * Creates a mapping of indices, from indices to the specified newOrder array, back to indices to the specified\n         * originalOrder array.\n         * Each of the number value in originalOrder and newOrder is actually the unique key of a column (unqiue\n         * under the context of the caller code), e.g. the Select Index in projection ordering array.\n         * Also, the specified originalOrder must contain every value that exists in newOrder.\n         *\n         * If the specified originalOrder and newOrder are different in sequence order, then this function returns a collection of\n         * key-value pair, each of which represents the new and old indices of a particular column:\n         * - the key in each key-value pair is the index of the particular column key as it exists in the specified newOrder array\n         * - the value in each key-value pair is the index of the particular column key as it exists in the specified originalOrder array\n         *\n         * For example on how the return value is consumed, see functions such as reorderMatrixHierarchyLevelColumnSources(...).\n         *\n         * If the specified originalOrder and newOrder are same, then this function returns undefined.\n         *\n         * @param originalOrder E.g. an array of metadata column \"select indices\", in the original order as they exist in Query DataView.\n         * @param newOrder E.g. an array of metadata column \"select indices\", in rojection ordering.\n         */\n        function createOrderMapping(originalOrder: number[], newOrder: number[]): NumberToNumberMapping {\n            // Optimization: avoid rewriting if the current order is correct\n            if (ArrayExtensions.sequenceEqual(originalOrder, newOrder, (x: number, y: number) => x === y))\n                return;\n\n            let mapping: NumberToNumberMapping = {};\n            for (let i = 0, len = newOrder.length; i < len; ++i) {\n                let newPosition = newOrder[i];\n                mapping[i] = originalOrder.indexOf(newPosition);\n            }\n\n            return mapping;\n        }\n\n        function createReversedMapping(mapping: NumberToNumberMapping): NumberToNumberMapping {\n            debug.assertValue(mapping, 'mapping');\n\n            let reversed: NumberToNumberMapping = {};\n\n            for (let key in mapping) {\n                // Note: key is a string after we get it out from mapping, thus we need to parse it\n                // back into a number before putting it as the value in the reversed mapping\n                let value = mapping[key];\n                let keyAsNumber = parseInt(key, 10);\n                reversed[value] = keyAsNumber;\n            }\n\n            debug.assertValue(Object.keys(mapping).length === Object.keys(reversed).length,\n                'pre-condition: The specified mapping must not contain any duplicate value because duplicate values are obmitted from the reversed mapping.');\n\n            return reversed;\n        }\n\n        export function forEachNodeAtLevel(node: DataViewMatrixNode, targetLevel: number, callback: (node: DataViewMatrixNode) => void): void {\n            debug.assertValue(node, 'node');\n            debug.assert(targetLevel >= 0, 'argetLevel >= 0');\n            debug.assertValue(callback, 'callback');\n\n            if (node.level === targetLevel) {\n                callback(node);\n                return;\n            }\n\n            let children = node.children;\n            if (children && children.length > 0) {\n                for (let i = 0, ilen = children.length; i < ilen; i++)\n                    forEachNodeAtLevel(children[i], targetLevel, callback);\n            }\n        }\n\n        function findOverride(source: DataViewMetadataColumn, columnRewrites: ValueRewrite<DataViewMetadataColumn>[]): DataViewMetadataColumn {\n            for (let i = 0, len = columnRewrites.length; i < len; i++) {\n                let columnRewrite = columnRewrites[i];\n                if (columnRewrite.from === source)\n                    return columnRewrite.to;\n            }\n        }\n\n        function ensureRewritten<T>(rewritten: T, prototype: T, callback?: (rewritten: T) => void): T {\n            if (!rewritten)\n                rewritten = inherit(prototype);\n\n            if (callback)\n                callback(rewritten);\n\n            return rewritten;\n        }\n\n        export function transformObjects(\n            dataView: DataView,\n            targetDataViewKinds: StandardDataViewKinds,\n            objectDescriptors: DataViewObjectDescriptors,\n            objectDefinitions: DataViewObjectDefinitions,\n            selectTransforms: DataViewSelectTransform[],\n            colorAllocatorFactory: IColorAllocatorFactory): void {\n            debug.assertValue(dataView, 'dataView');\n            debug.assertValue(targetDataViewKinds, 'targetDataViewKinds');\n            debug.assertAnyValue(objectDescriptors, 'objectDescriptors');\n            debug.assertAnyValue(objectDefinitions, 'objectDefinitions');\n            debug.assertAnyValue(selectTransforms, 'selectTransforms');\n            debug.assertValue(colorAllocatorFactory, 'colorAllocatorFactory');\n\n            if (!objectDescriptors)\n                return;\n\n            let objectsForAllSelectors = DataViewObjectEvaluationUtils.groupObjectsBySelector(objectDefinitions);\n            DataViewObjectEvaluationUtils.addImplicitObjects(objectsForAllSelectors, objectDescriptors, dataView.metadata.columns, selectTransforms);\n\n            let metadataOnce = objectsForAllSelectors.metadataOnce;\n            let dataObjects = objectsForAllSelectors.data;\n            if (metadataOnce)\n                evaluateMetadataObjects(dataView, selectTransforms, objectDescriptors, metadataOnce.objects, dataObjects, colorAllocatorFactory);\n\n            let metadataObjects = objectsForAllSelectors.metadata;\n            if (metadataObjects) {\n                for (let i = 0, len = metadataObjects.length; i < len; i++) {\n                    let metadataObject = metadataObjects[i];\n                    let objectDefns = metadataObject.objects;\n                    let colorAllocatorCache = populateColorAllocatorCache(dataView, selectTransforms, objectDefns, colorAllocatorFactory);\n                    evaluateMetadataRepetition(dataView, selectTransforms, objectDescriptors, metadataObject.selector, objectDefns, colorAllocatorCache);\n                }\n            }\n\n            for (let i = 0, len = dataObjects.length; i < len; i++) {\n                let dataObject = dataObjects[i];\n                let objectDefns = dataObject.objects;\n                let colorAllocatorCache = populateColorAllocatorCache(dataView, selectTransforms, objectDefns, colorAllocatorFactory);\n                evaluateDataRepetition(dataView, targetDataViewKinds, selectTransforms, objectDescriptors, dataObject.selector, dataObject.rules, objectDefns, colorAllocatorCache);\n            }\n\n            let userDefined = objectsForAllSelectors.userDefined;\n            if (userDefined) {\n                // TODO: We only handle user defined objects at the metadata level, but should be able to support them with arbitrary repetition.\n                evaluateUserDefinedObjects(dataView, selectTransforms, objectDescriptors, userDefined, colorAllocatorFactory);\n            }\n        }\n\n        function evaluateUserDefinedObjects(\n            dataView: DataView,\n            selectTransforms: DataViewSelectTransform[],\n            objectDescriptors: DataViewObjectDescriptors,\n            objectDefns: DataViewObjectDefinitionsForSelector[],\n            colorAllocatorFactory: IColorAllocatorFactory): void {\n            debug.assertValue(dataView, 'dataView');\n            debug.assertAnyValue(selectTransforms, 'selectTransforms');\n            debug.assertValue(objectDescriptors, 'objectDescriptors');\n            debug.assertValue(objectDefns, 'objectDefns');\n            debug.assertValue(colorAllocatorFactory, 'colorAllocatorFactory');\n\n            let dataViewObjects: DataViewObjects = dataView.metadata.objects;\n            if (!dataViewObjects) {\n                dataViewObjects = dataView.metadata.objects = {};\n            }\n\n            for (let objectDefn of objectDefns) {\n                let id = objectDefn.selector.id;\n\n                let colorAllocatorCache = populateColorAllocatorCache(dataView, selectTransforms, objectDefn.objects, colorAllocatorFactory);\n                let evalContext = createStaticEvalContext(colorAllocatorCache, dataView, selectTransforms);\n                let objects = DataViewObjectEvaluationUtils.evaluateDataViewObjects(evalContext, objectDescriptors, objectDefn.objects);\n\n                for (let objectName in objects) {\n                    let object = <DataViewObject>objects[objectName];\n\n                    let map = <DataViewObjectMap>dataViewObjects[objectName];\n                    if (!map)\n                        map = dataViewObjects[objectName] = [];\n                    debug.assert(DataViewObjects.isUserDefined(map), 'expected DataViewObjectMap');\n\n                    // NOTE: We do not check for duplicate ids.\n                    map.push({ id: id, object: object });\n                }\n            }\n        }\n\n        /** Evaluates and sets properties on the DataView metadata. */\n        function evaluateMetadataObjects(\n            dataView: DataView,\n            selectTransforms: DataViewSelectTransform[],\n            objectDescriptors: DataViewObjectDescriptors,\n            objectDefns: DataViewNamedObjectDefinition[],\n            dataObjects: DataViewObjectDefinitionsForSelectorWithRule[],\n            colorAllocatorFactory: IColorAllocatorFactory): void {\n            debug.assertValue(dataView, 'dataView');\n            debug.assertAnyValue(selectTransforms, 'selectTransforms');\n            debug.assertValue(objectDescriptors, 'objectDescriptors');\n            debug.assertValue(objectDefns, 'objectDefns');\n            debug.assertValue(dataObjects, 'dataObjects');\n            debug.assertValue(colorAllocatorFactory, 'colorAllocatorFactory');\n\n            let colorAllocatorCache = populateColorAllocatorCache(dataView, selectTransforms, objectDefns, colorAllocatorFactory);\n            let evalContext = createStaticEvalContext(colorAllocatorCache, dataView, selectTransforms);\n            let objects = DataViewObjectEvaluationUtils.evaluateDataViewObjects(evalContext, objectDescriptors, objectDefns);\n            if (objects) {\n                dataView.metadata.objects = objects;\n\n                for (let objectName in objects) {\n                    let object = <DataViewObject>objects[objectName],\n                        objectDesc = objectDescriptors[objectName];\n\n                    for (let propertyName in object) {\n                        let propertyDesc = objectDesc.properties[propertyName],\n                            ruleDesc = propertyDesc.rule;\n                        if (!ruleDesc)\n                            continue;\n\n                        let definition = createRuleEvaluationInstance(\n                            dataView,\n                            colorAllocatorFactory,\n                            ruleDesc,\n                            objectName,\n                            object[propertyName],\n                            propertyDesc.type);\n                        if (!definition)\n                            continue;\n\n                        dataObjects.push(definition);\n                    }\n                }\n            }\n        }\n\n        function createRuleEvaluationInstance(\n            dataView: DataView,\n            colorAllocatorFactory: IColorAllocatorFactory,\n            ruleDesc: DataViewObjectPropertyRuleDescriptor,\n            objectName: string,\n            propertyValue: DataViewPropertyValue,\n            ruleType: StructuralTypeDescriptor): DataViewObjectDefinitionsForSelectorWithRule {\n            debug.assertValue(dataView, 'dataView');\n            debug.assertValue(colorAllocatorFactory, 'colorAllocatorFactory');\n            debug.assertValue(ruleDesc, 'ruleDesc');\n            debug.assertValue(propertyValue, 'propertyValue');\n            debug.assertValue(ruleType, 'ruleType');\n\n            let ruleOutput = ruleDesc.output;\n            if (!ruleOutput)\n                return;\n\n            let selectorToCreate = findSelectorForRuleInput(dataView, ruleOutput.selector);\n            if (!selectorToCreate)\n                return;\n\n            if (ruleType.fillRule) {\n                return createRuleEvaluationInstanceFillRule(dataView, colorAllocatorFactory, ruleDesc, selectorToCreate, objectName, <FillRule>propertyValue);\n            }\n        }\n\n        function createRuleEvaluationInstanceFillRule(\n            dataView: DataView,\n            colorAllocatorFactory: IColorAllocatorFactory,\n            ruleDesc: DataViewObjectPropertyRuleDescriptor,\n            selectorToCreate: Selector,\n            objectName: string,\n            propertyValue: FillRule): DataViewObjectDefinitionsForSelectorWithRule {\n            debug.assertValue(dataView, 'dataView');\n            debug.assertValue(colorAllocatorFactory, 'colorAllocatorFactory');\n            debug.assertValue(ruleDesc, 'ruleDesc');\n            debug.assertValue(selectorToCreate, 'selectorToCreate');\n            debug.assertValue(propertyValue, 'propertyValue');\n\n            let colorAllocator = tryCreateColorAllocatorForFillRule(dataView, colorAllocatorFactory, ruleDesc.inputRole, ColumnIdentifierKind.Role, propertyValue);\n\n            if (!colorAllocator)\n                return;\n\n            let rule = new ColorRuleEvaluation(ruleDesc.inputRole, colorAllocator);\n            let fillRuleProperties: DataViewObjectPropertyDefinitions = {};\n            fillRuleProperties[ruleDesc.output.property] = {\n                solid: { color: rule }\n            };\n\n            return {\n                selector: selectorToCreate,\n                rules: [rule],\n                objects: [{\n                    name: objectName,\n                    properties: fillRuleProperties,\n                }]\n            };\n        }\n\n        function tryCreateColorAllocatorForFillRule(\n            dataView: DataView,\n            colorAllocatorFactory: IColorAllocatorFactory,\n            identifier: string,\n            identifierKind: ColumnIdentifierKind,\n            propertyValue: FillRule): IColorAllocator {\n            debug.assertValue(dataView, 'dataView');\n            debug.assertValue(colorAllocatorFactory, 'colorAllocatorFactory');\n            debug.assertValue(identifier, 'identifier');\n            debug.assertValue(identifierKind, 'identifierKind');\n            debug.assertValue(propertyValue, 'propertyValue');\n\n            if (propertyValue.linearGradient2)\n                return createColorAllocatorLinearGradient2(dataView, colorAllocatorFactory, identifier, identifierKind, propertyValue, propertyValue.linearGradient2);\n\n            if (propertyValue.linearGradient3)\n                return createColorAllocatorLinearGradient3(dataView, colorAllocatorFactory, identifier, identifierKind, propertyValue, propertyValue.linearGradient3);\n        }\n\n        function createColorAllocatorLinearGradient2(\n            dataView: DataView,\n            colorAllocatorFactory: IColorAllocatorFactory,\n            identifier: string,\n            identifierKind: ColumnIdentifierKind,\n            propertyValueFillRule: FillRule,\n            linearGradient2: LinearGradient2): IColorAllocator {\n            debug.assertValue(dataView, 'dataView');\n            debug.assertValue(colorAllocatorFactory, 'colorAllocatorFactory');\n            debug.assertValue(identifier, 'identifier');\n            debug.assertValue(identifierKind, 'identifierKind');\n            debug.assertValue(linearGradient2, 'linearGradient2');\n\n            linearGradient2 = propertyValueFillRule.linearGradient2;\n            if (linearGradient2.min.value === undefined ||\n                linearGradient2.max.value === undefined) {\n                let inputRange = findRuleInputColumnNumberRange(dataView, identifier, identifierKind);\n                if (!inputRange)\n                    return;\n\n                if (linearGradient2.min.value === undefined)\n                    linearGradient2.min.value = inputRange.min;\n                if (linearGradient2.max.value === undefined)\n                    linearGradient2.max.value = inputRange.max;\n            }\n\n            return colorAllocatorFactory.linearGradient2(propertyValueFillRule.linearGradient2);\n        }\n\n        function createColorAllocatorLinearGradient3(\n            dataView: DataView,\n            colorAllocatorFactory: IColorAllocatorFactory,\n            identifier: string,\n            identifierKind: ColumnIdentifierKind,\n            propertyValueFillRule: FillRule,\n            linearGradient3: LinearGradient3): IColorAllocator {\n            debug.assertValue(dataView, 'dataView');\n            debug.assertValue(colorAllocatorFactory, 'colorAllocatorFactory');\n            debug.assertValue(identifier, 'identifier');\n            debug.assertValue(identifierKind, 'identifierKind');\n            debug.assertValue(linearGradient3, 'linearGradient3');\n\n            let splitScales: boolean;\n            linearGradient3 = propertyValueFillRule.linearGradient3;\n            if (linearGradient3.min.value === undefined ||\n                linearGradient3.mid.value === undefined ||\n                linearGradient3.max.value === undefined) {\n                let inputRange = findRuleInputColumnNumberRange(dataView, identifier, identifierKind);\n                if (!inputRange)\n                    return;\n\n                splitScales =\n                linearGradient3.min.value === undefined &&\n                linearGradient3.max.value === undefined &&\n                linearGradient3.mid.value !== undefined;\n\n                if (linearGradient3.min.value === undefined) {\n                    linearGradient3.min.value = inputRange.min;\n                }\n                if (linearGradient3.max.value === undefined) {\n                    linearGradient3.max.value = inputRange.max;\n                }\n                if (linearGradient3.mid.value === undefined) {\n                    let midValue: number = (linearGradient3.max.value + linearGradient3.min.value) / 2;\n                    linearGradient3.mid.value = midValue;\n                }\n            }\n\n            return colorAllocatorFactory.linearGradient3(propertyValueFillRule.linearGradient3, splitScales);\n        }\n\n        function populateColorAllocatorCache(\n            dataView: DataView,\n            selectTransforms: DataViewSelectTransform[],\n            objectDefns: DataViewNamedObjectDefinition[],\n            colorAllocatorFactory: IColorAllocatorFactory): IColorAllocatorCache {\n            debug.assertValue(dataView, 'dataView');\n            debug.assertAnyValue(selectTransforms, 'selectTransforms');\n            debug.assertValue(objectDefns, 'objectDefns');\n            debug.assertValue(colorAllocatorFactory, 'colorAllocatorFactory');\n\n            let cache = createColorAllocatorCache();\n            let staticEvalContext = createStaticEvalContext();\n\n            for (let i = 0, len = objectDefns.length; i < len; i++) {\n                let objectDefnProperties = objectDefns[i].properties;\n\n                for (let propertyName in objectDefnProperties) {\n                    let fillProperty = <FillDefinition>objectDefnProperties[propertyName];\n                    if (fillProperty &&\n                        fillProperty.solid &&\n                        fillProperty.solid.color &&\n                        fillProperty.solid.color.kind === SQExprKind.FillRule) {\n\n                        let fillRuleExpr = <SQFillRuleExpr>fillProperty.solid.color;\n\n                        let inputExprQueryName = findFirstQueryNameForExpr(selectTransforms, fillRuleExpr.input);\n                        if (!inputExprQueryName)\n                            continue;\n\n                        let fillRule = DataViewObjectEvaluator.evaluateProperty(\n                            staticEvalContext,\n                            fillRulePropertyDescriptor,\n                            fillRuleExpr.rule);\n\n                        let colorAllocator = tryCreateColorAllocatorForFillRule(dataView, colorAllocatorFactory, inputExprQueryName, ColumnIdentifierKind.QueryName, fillRule);\n                        if (colorAllocator)\n                            cache.register(fillRuleExpr, colorAllocator);\n                    }\n                }\n            }\n\n            return cache;\n        }\n\n        function evaluateDataRepetition(\n            dataView: DataView,\n            targetDataViewKinds: StandardDataViewKinds,\n            selectTransforms: DataViewSelectTransform[],\n            objectDescriptors: DataViewObjectDescriptors,\n            selector: Selector,\n            rules: RuleEvaluation[],\n            objectDefns: DataViewNamedObjectDefinition[],\n            colorAllocatorCache: IColorAllocatorCache): void {\n            debug.assertValue(dataView, 'dataView');\n            debug.assertValue(targetDataViewKinds, 'targetDataViewKinds');\n            debug.assertAnyValue(selectTransforms, 'selectTransforms');\n            debug.assertValue(objectDescriptors, 'objectDescriptors');\n            debug.assertValue(selector, 'selector');\n            debug.assertAnyValue(rules, 'rules');\n            debug.assertValue(objectDefns, 'objectDefns');\n            debug.assertValue(colorAllocatorCache, 'colorAllocatorFactory');\n\n            let containsWildcard = Selector.containsWildcard(selector);\n\n            let dataViewCategorical = dataView.categorical;\n            if (dataViewCategorical && EnumExtensions.hasFlag(targetDataViewKinds, StandardDataViewKinds.Categorical)) {\n                // 1) Match against categories\n                evaluateDataRepetitionCategoricalCategory(dataViewCategorical, objectDescriptors, selector, rules, containsWildcard, objectDefns, colorAllocatorCache);\n\n                // 2) Match against valueGrouping\n                evaluateDataRepetitionCategoricalValueGrouping(dataViewCategorical, objectDescriptors, selector, rules, containsWildcard, objectDefns, colorAllocatorCache);\n\n                // Consider capturing diagnostics for unmatched selectors to help debugging.\n            }\n\n            let dataViewMatrix = dataView.matrix;\n            if (dataViewMatrix && EnumExtensions.hasFlag(targetDataViewKinds, StandardDataViewKinds.Matrix)) {\n                let rewrittenMatrix = evaluateDataRepetitionMatrix(dataViewMatrix, objectDescriptors, selector, rules, containsWildcard, objectDefns, colorAllocatorCache);\n                if (rewrittenMatrix) {\n                    // TODO: This mutates the DataView -- the assumption is that prototypal inheritance has already occurred.  We should\n                    // revisit this, likely when we do lazy evaluation of DataView.\n                    dataView.matrix = rewrittenMatrix;\n                }\n\n                // Consider capturing diagnostics for unmatched selectors to help debugging.\n            }\n\n            let dataViewTable = dataView.table;\n            if (dataViewTable && EnumExtensions.hasFlag(targetDataViewKinds, StandardDataViewKinds.Table)) {\n                let rewrittenSelector = rewriteTableRoleSelector(dataViewTable, selector);\n                let rewrittenTable = evaluateDataRepetitionTable(dataViewTable, selectTransforms, objectDescriptors, rewrittenSelector, rules, containsWildcard, objectDefns, colorAllocatorCache);\n                if (rewrittenTable) {\n                    // TODO: This mutates the DataView -- the assumption is that prototypal inheritance has already occurred.  We should\n                    // revisit this, likely when we do lazy evaluation of DataView.\n                    dataView.table = rewrittenTable;\n                }\n\n                // Consider capturing diagnostics for unmatched selectors to help debugging.\n            }\n        }\n\n        function rewriteTableRoleSelector(dataViewTable: DataViewTable, selector: Selector): Selector {\n            if (Selector.hasRoleWildcard(selector)) {\n                selector = findSelectorForRoleWildcard(dataViewTable, selector);\n            }\n\n            return selector;\n        }\n\n        function findSelectorForRoleWildcard(dataViewTable: DataViewTable, selector: Selector): Selector {\n            let resultingSelector: Selector = {\n                data: [],\n                id: selector.id,\n                metadata: selector.metadata\n            };\n\n            for (let dataSelector of selector.data) {\n                if (Selector.isRoleWildcard(dataSelector)) {\n                    let selectorRoles = dataSelector.roles;\n                    let allColumnsBelongToSelectorRole: boolean = allColumnsBelongToRole(dataViewTable.columns, selectorRoles);\n                    let exprs = dataViewTable.identityFields;\n                    if (allColumnsBelongToSelectorRole && exprs) {\n                        resultingSelector.data.push(DataViewScopeWildcard.fromExprs(<SQExpr[]>exprs));\n                        continue;\n                    }\n                }\n\n                if (isUniqueDataSelector(resultingSelector.data, dataSelector)) {\n                    resultingSelector.data.push(dataSelector);\n                }\n            }\n\n            return resultingSelector;\n        }\n\n        function isUniqueDataSelector(dataSelectors: DataRepetitionSelector[], newSelector: DataRepetitionSelector): boolean {\n            if (_.isEmpty(dataSelectors))\n                return true;\n\n            return !_.any(dataSelectors, (dataSelector: DataRepetitionSelector) => dataSelector.key === newSelector.key);\n        }\n\n        function allColumnsBelongToRole(columns: DataViewMetadataColumn[], selectorRoles: string[]): boolean {\n            for (let column of columns) {\n                var roles = column.roles;\n                if (!roles || !_.any(selectorRoles, (selectorRole) => roles[selectorRole]))\n                    return false;\n            }\n\n            return true;\n        }\n\n        function evaluateDataRepetitionCategoricalCategory(\n            dataViewCategorical: DataViewCategorical,\n            objectDescriptors: DataViewObjectDescriptors,\n            selector: Selector,\n            rules: RuleEvaluation[],\n            containsWildcard: boolean,\n            objectDefns: DataViewNamedObjectDefinition[],\n            colorAllocatorCache: IColorAllocatorCache): boolean {\n            debug.assertValue(dataViewCategorical, 'dataViewCategorical');\n            debug.assertValue(objectDescriptors, 'objectDescriptors');\n            debug.assertValue(selector, 'selector');\n            debug.assertAnyValue(rules, 'rules');\n            debug.assertValue(containsWildcard, 'containsWildcard');\n            debug.assertValue(objectDefns, 'objectDefns');\n            debug.assertValue(colorAllocatorCache, 'colorAllocatorCache');\n\n            if (!dataViewCategorical.categories || dataViewCategorical.categories.length === 0)\n                return;\n\n            let targetColumn = findSelectedCategoricalColumn(dataViewCategorical, selector);\n            if (!targetColumn)\n                return;\n\n            let identities = targetColumn.identities,\n                foundMatch: boolean,\n                evalContext = createCategoricalEvalContext(colorAllocatorCache, dataViewCategorical);\n\n            if (!identities)\n                return;\n\n            debug.assert(targetColumn.column.values.length === identities.length, 'Column length mismatch');\n\n            for (let i = 0, len = identities.length; i < len; i++) {\n                let identity = identities[i];\n\n                if (containsWildcard || Selector.matchesData(selector, [identity])) {\n                    evalContext.setCurrentRowIndex(i);\n\n                    let objects = DataViewObjectEvaluationUtils.evaluateDataViewObjects(evalContext, objectDescriptors, objectDefns);\n                    if (objects) {\n                        // TODO: This mutates the DataView -- the assumption is that prototypal inheritance has already occurred.  We should\n                        // revisit this, likely when we do lazy evaluation of DataView.\n                        if (!targetColumn.column.objects) {\n                            targetColumn.column.objects = [];\n                            targetColumn.column.objects.length = len;\n                        }\n                        targetColumn.column.objects[i] = objects;\n                    }\n\n                    if (!containsWildcard)\n                        return true;\n\n                    foundMatch = true;\n                }\n            }\n\n            return foundMatch;\n        }\n\n        function evaluateDataRepetitionCategoricalValueGrouping(\n            dataViewCategorical: DataViewCategorical,\n            objectDescriptors: DataViewObjectDescriptors,\n            selector: Selector,\n            rules: RuleEvaluation[],\n            containsWildcard: boolean,\n            objectDefns: DataViewNamedObjectDefinition[],\n            colorAllocatorCache: IColorAllocatorCache): boolean {\n            debug.assertValue(dataViewCategorical, 'dataViewCategorical');\n            debug.assertValue(objectDescriptors, 'objectDescriptors');\n            debug.assertValue(selector, 'selector');\n            debug.assertAnyValue(rules, 'rules');\n            debug.assertValue(containsWildcard, 'containsWildcard');\n            debug.assertValue(objectDefns, 'objectDefns');\n            debug.assertValue(colorAllocatorCache, 'colorAllocatorCache');\n\n            let dataViewCategoricalValues = dataViewCategorical.values;\n            if (!dataViewCategoricalValues || !dataViewCategoricalValues.identityFields)\n                return;\n\n            if (!Selector.matchesKeys(selector, <SQExpr[][]>[dataViewCategoricalValues.identityFields]))\n                return;\n\n            let valuesGrouped = dataViewCategoricalValues.grouped();\n            if (!valuesGrouped)\n                return;\n\n            // NOTE: We do not set the evalContext row index below because iteration is over value groups (i.e., columns, no rows).\n            // This should be enhanced in the future.\n            let evalContext = createCategoricalEvalContext(colorAllocatorCache, dataViewCategorical);\n\n            let foundMatch: boolean;\n            for (let i = 0, len = valuesGrouped.length; i < len; i++) {\n                let valueGroup = valuesGrouped[i];\n                let selectorMetadata = selector.metadata;\n                let valuesInGroup = valueGroup.values;\n                if (containsWildcard || Selector.matchesData(selector, [valueGroup.identity])) {\n                    let objects = DataViewObjectEvaluationUtils.evaluateDataViewObjects(evalContext, objectDescriptors, objectDefns);\n                    if (objects) {\n                        // TODO: This mutates the DataView -- the assumption is that prototypal inheritance has already occurred.  We should\n                        // revisit this, likely when we do lazy evaluation of DataView.\n\n                        if (selectorMetadata) {\n                            for (let j = 0, jlen = valuesInGroup.length; j < jlen; j++) {\n                                let valueColumn = valuesInGroup[j],\n                                    valueSource = valueColumn.source;\n                                if (valueSource.queryName === selectorMetadata) {\n                                    let valueSourceOverwrite = Prototype.inherit(valueSource);\n                                    valueSourceOverwrite.objects = objects;\n                                    valueColumn.source = valueSourceOverwrite;\n\n                                    foundMatch = true;\n                                    break;\n                                }\n                            }\n                        }\n                        else {\n                            valueGroup.objects = objects;\n                            setGrouped(dataViewCategoricalValues, valuesGrouped);\n\n                            foundMatch = true;\n                        }\n                    }\n\n                    if (!containsWildcard)\n                        return true;\n                }\n            }\n\n            return foundMatch;\n        }\n\n        function evaluateDataRepetitionMatrix(\n            dataViewMatrix: DataViewMatrix,\n            objectDescriptors: DataViewObjectDescriptors,\n            selector: Selector,\n            rules: RuleEvaluation[],\n            containsWildcard: boolean,\n            objectDefns: DataViewNamedObjectDefinition[],\n            colorAllocatorCache: IColorAllocatorCache): DataViewMatrix {\n\n            let evalContext = createMatrixEvalContext(colorAllocatorCache, dataViewMatrix);\n            let rewrittenRows = evaluateDataRepetitionMatrixHierarchy(evalContext, dataViewMatrix.rows, objectDescriptors, selector, rules, containsWildcard, objectDefns);\n            let rewrittenCols = evaluateDataRepetitionMatrixHierarchy(evalContext, dataViewMatrix.columns, objectDescriptors, selector, rules, containsWildcard, objectDefns);\n\n            if (rewrittenRows || rewrittenCols) {\n                let rewrittenMatrix = inheritSingle(dataViewMatrix);\n\n                if (rewrittenRows)\n                    rewrittenMatrix.rows = rewrittenRows;\n                if (rewrittenCols)\n                    rewrittenMatrix.columns = rewrittenCols;\n\n                return rewrittenMatrix;\n            }\n        }\n\n        function evaluateDataRepetitionMatrixHierarchy(\n            evalContext: IEvalContext,\n            dataViewMatrixHierarchy: DataViewHierarchy,\n            objectDescriptors: DataViewObjectDescriptors,\n            selector: Selector,\n            rules: RuleEvaluation[],\n            containsWildcard: boolean,\n            objectDefns: DataViewNamedObjectDefinition[]): DataViewHierarchy {\n            debug.assertAnyValue(dataViewMatrixHierarchy, 'dataViewMatrixHierarchy');\n            debug.assertValue(objectDescriptors, 'objectDescriptors');\n            debug.assertValue(selector, 'selector');\n            debug.assertAnyValue(rules, 'rules');\n            debug.assertValue(objectDefns, 'objectDefns');\n\n            if (!dataViewMatrixHierarchy)\n                return;\n\n            let root = dataViewMatrixHierarchy.root;\n            if (!root)\n                return;\n\n            let rewrittenRoot = evaluateDataRepetitionMatrixNode(evalContext, root, objectDescriptors, selector, rules, containsWildcard, objectDefns);\n            if (rewrittenRoot) {\n                let rewrittenHierarchy = inheritSingle(dataViewMatrixHierarchy);\n                rewrittenHierarchy.root = rewrittenRoot;\n\n                return rewrittenHierarchy;\n            }\n        }\n\n        function evaluateDataRepetitionMatrixNode(\n            evalContext: IEvalContext,\n            dataViewNode: DataViewMatrixNode,\n            objectDescriptors: DataViewObjectDescriptors,\n            selector: Selector,\n            rules: RuleEvaluation[],\n            containsWildcard: boolean,\n            objectDefns: DataViewNamedObjectDefinition[]): DataViewMatrixNode {\n            debug.assertValue(evalContext, 'evalContext');\n            debug.assertValue(dataViewNode, 'dataViewNode');\n            debug.assertValue(objectDescriptors, 'objectDescriptors');\n            debug.assertValue(selector, 'selector');\n            debug.assertAnyValue(rules, 'rules');\n            debug.assertValue(objectDefns, 'objectDefns');\n\n            let childNodes = dataViewNode.children;\n            if (!childNodes)\n                return;\n\n            let rewrittenNode: DataViewMatrixNode;\n            let shouldSearchChildren: boolean;\n            let childIdentityFields = dataViewNode.childIdentityFields;\n            if (childIdentityFields) {\n                // NOTE: selector matching in matrix currently only considers the current node, and does not consider parents as part of the match.\n                shouldSearchChildren = Selector.matchesKeys(selector, <SQExpr[][]>[childIdentityFields]);\n            }\n\n            for (let i = 0, len = childNodes.length; i < len; i++) {\n                let childNode = childNodes[i],\n                    identity = childNode.identity,\n                    rewrittenChildNode: DataViewMatrixNode = null;\n\n                if (shouldSearchChildren) {\n                    if (containsWildcard || Selector.matchesData(selector, [identity])) {\n                        // TODO: Need to initialize context for rule-based properties.  Rule-based properties\n                        // (such as fillRule/gradients) are not currently implemented.\n\n                        let objects = DataViewObjectEvaluationUtils.evaluateDataViewObjects(evalContext, objectDescriptors, objectDefns);\n                        if (objects) {\n                            rewrittenChildNode = inheritSingle(childNode);\n                            rewrittenChildNode.objects = objects;\n                        }\n                    }\n                }\n                else {\n                    rewrittenChildNode = evaluateDataRepetitionMatrixNode(\n                        evalContext,\n                        childNode,\n                        objectDescriptors,\n                        selector,\n                        rules,\n                        containsWildcard,\n                        objectDefns);\n                }\n\n                if (rewrittenChildNode) {\n                    if (!rewrittenNode)\n                        rewrittenNode = inheritNodeAndChildren(dataViewNode);\n                    rewrittenNode.children[i] = rewrittenChildNode;\n\n                    if (!containsWildcard) {\n                        // NOTE: once we find a match for a non-wildcard selector, stop looking.\n                        break;\n                    }\n                }\n            }\n\n            return rewrittenNode;\n        }\n\n        function inheritNodeAndChildren(node: DataViewMatrixNode): DataViewMatrixNode {\n            if (Object.getPrototypeOf(node) !== Object.prototype) {\n                return node;\n            }\n\n            let inherited = inheritSingle(node);\n            inherited.children = inherit(node.children);\n            return inherited;\n        }\n\n        function evaluateDataRepetitionTable(\n            dataViewTable: DataViewTable,\n            selectTransforms: DataViewSelectTransform[],\n            objectDescriptors: DataViewObjectDescriptors,\n            selector: Selector,\n            rules: RuleEvaluation[],\n            containsWildcard: boolean,\n            objectDefns: DataViewNamedObjectDefinition[],\n            colorAllocatorCache: IColorAllocatorCache): DataViewTable {\n            debug.assertValue(dataViewTable, 'dataViewTable');\n            debug.assertAnyValue(selectTransforms, 'selectTransforms');\n            debug.assertValue(objectDescriptors, 'objectDescriptors');\n            debug.assertValue(selector, 'selector');\n            debug.assertAnyValue(rules, 'rules');\n            debug.assertValue(objectDefns, 'objectDefns');\n            debug.assertValue(colorAllocatorCache, 'colorAllocatorCache');\n\n            let evalContext = createTableEvalContext(colorAllocatorCache, dataViewTable, selectTransforms);\n            let rewrittenRows = evaluateDataRepetitionTableRows(\n                evalContext,\n                dataViewTable.columns,\n                dataViewTable.rows,\n                dataViewTable.identity,\n                dataViewTable.identityFields,\n                objectDescriptors,\n                selector,\n                rules,\n                containsWildcard,\n                objectDefns);\n\n            if (rewrittenRows) {\n                let rewrittenTable = inheritSingle(dataViewTable);\n                rewrittenTable.rows = rewrittenRows;\n\n                return rewrittenTable;\n            }\n        }\n\n        function evaluateDataRepetitionTableRows(\n            evalContext: ITableEvalContext,\n            columns: DataViewMetadataColumn[],\n            rows: DataViewTableRow[],\n            identities: DataViewScopeIdentity[],\n            identityFields: ISQExpr[],\n            objectDescriptors: DataViewObjectDescriptors,\n            selector: Selector,\n            rules: RuleEvaluation[],\n            containsWildcard: boolean,\n            objectDefns: DataViewNamedObjectDefinition[]): DataViewTableRow[] {\n            debug.assertValue(evalContext, 'evalContext');\n            debug.assertValue(columns, 'columns');\n            debug.assertValue(rows, 'rows');\n            debug.assertAnyValue(identities, 'identities');\n            debug.assertAnyValue(identityFields, 'identityFields');\n            debug.assertValue(objectDescriptors, 'objectDescriptors');\n            debug.assertValue(selector, 'selector');\n            debug.assertAnyValue(rules, 'rules');\n            debug.assertValue(objectDefns, 'objectDefns');\n\n            if (_.isEmpty(identities) || _.isEmpty(identityFields))\n                return;\n\n            if (!selector.metadata ||\n                !Selector.matchesKeys(selector, <SQExpr[][]>[identityFields]))\n                return;\n\n            let colIdx = _.findIndex(columns, col => col.queryName === selector.metadata);\n            if (colIdx < 0)\n                return;\n\n            debug.assert(rows.length === identities.length, 'row length mismatch');\n            let colLen = columns.length;\n            let inheritedRows: DataViewTableRow[];\n\n            for (let rowIdx = 0, rowLen = identities.length; rowIdx < rowLen; rowIdx++) {\n                let identity = identities[rowIdx];\n\n                if (containsWildcard || Selector.matchesData(selector, [identity])) {\n                    evalContext.setCurrentRowIndex(rowIdx);\n\n                    let objects = DataViewObjectEvaluationUtils.evaluateDataViewObjects(evalContext, objectDescriptors, objectDefns);\n                    if (objects) {\n                        if (!inheritedRows)\n                            inheritedRows = inheritSingle(rows);\n\n                        let inheritedRow = inheritedRows[rowIdx] = inheritSingle(inheritedRows[rowIdx]);\n                        let objectsForColumns = inheritedRow.objects;\n                        if (!objectsForColumns)\n                            inheritedRow.objects = objectsForColumns = new Array(colLen);\n\n                        objectsForColumns[colIdx] = objects;\n                    }\n\n                    if (!containsWildcard)\n                        break;\n                }\n            }\n\n            return inheritedRows;\n        }\n\n        function evaluateMetadataRepetition(\n            dataView: DataView,\n            selectTransforms: DataViewSelectTransform[],\n            objectDescriptors: DataViewObjectDescriptors,\n            selector: Selector,\n            objectDefns: DataViewNamedObjectDefinition[],\n            colorAllocatorCache: IColorAllocatorCache): void {\n            debug.assertValue(dataView, 'dataView');\n            debug.assertAnyValue(selectTransforms, 'selectTransforms');\n            debug.assertValue(objectDescriptors, 'objectDescriptors');\n            debug.assertValue(selector, 'selector');\n            debug.assertValue(objectDefns, 'objectDefns');\n            debug.assertValue(colorAllocatorCache, 'colorAllocatorCache');\n\n            // TODO: This mutates the DataView -- the assumption is that prototypal inheritance has already occurred.  We should\n            // revisit this, likely when we do lazy evaluation of DataView.\n            let columns = dataView.metadata.columns,\n                metadataId = selector.metadata,\n                evalContext = createStaticEvalContext(colorAllocatorCache, dataView, selectTransforms);\n            for (let i = 0, len = columns.length; i < len; i++) {\n                let column = columns[i];\n                if (column.queryName === metadataId) {\n                    let objects = DataViewObjectEvaluationUtils.evaluateDataViewObjects(evalContext, objectDescriptors, objectDefns);\n                    if (objects)\n                        column.objects = objects;\n                }\n            }\n        }\n\n        /** Attempts to find a column that can possibly match the selector. */\n        function findSelectedCategoricalColumn(dataViewCategorical: DataViewCategorical, selector: Selector) {\n            debug.assertValue(dataViewCategorical.categories[0], 'dataViewCategorical.categories[0]');\n\n            let categoricalColumn = dataViewCategorical.categories[0];\n            if (!categoricalColumn.identityFields)\n                return;\n            if (!Selector.matchesKeys(selector, <SQExpr[][]>[categoricalColumn.identityFields]))\n                return;\n\n            let identities = categoricalColumn.identity,\n                targetColumn: DataViewCategoricalColumn = categoricalColumn;\n\n            let selectedMetadataId = selector.metadata;\n            if (selectedMetadataId) {\n                let valueColumns = dataViewCategorical.values;\n                if (valueColumns) {\n                    for (let i = 0, len = valueColumns.length; i < len; i++) {\n                        let valueColumn = valueColumns[i];\n                        if (valueColumn.source.queryName === selectedMetadataId) {\n                            targetColumn = valueColumn;\n                            break;\n                        }\n                    }\n                }\n            }\n\n            return {\n                column: targetColumn,\n                identities: identities,\n            };\n        }\n\n        function findSelectorForRuleInput(dataView: DataView, selectorRoles: string[]): Selector {\n            debug.assertValue(dataView, 'dataView');\n            debug.assertValue(selectorRoles, 'selectorRoles');\n\n            if (selectorRoles.length !== 1)\n                return;\n\n            let dataViewCategorical = dataView.categorical;\n            if (!dataViewCategorical)\n                return;\n\n            let categories = dataViewCategorical.categories;\n            if (!categories || categories.length !== 1)\n                return;\n\n            let categoryColumn = categories[0],\n                categoryRoles = categoryColumn.source.roles,\n                categoryIdentityFields = categoryColumn.identityFields;\n            if (!categoryRoles || !categoryIdentityFields || !categoryRoles[selectorRoles[0]])\n                return;\n\n            return { data: [DataViewScopeWildcard.fromExprs(<SQExpr[]>categoryIdentityFields)] };\n        }\n\n        function findFirstQueryNameForExpr(selectTransforms: DataViewSelectTransform[], expr: SQExpr): string {\n            debug.assertAnyValue(selectTransforms, 'selectTransforms');\n            debug.assertValue(expr, 'expr');\n\n            if (SQExpr.isSelectRef(expr))\n                return expr.expressionName;\n\n            if (!selectTransforms)\n                return;\n\n            for (let i = 0, len = selectTransforms.length; i < len; i++) {\n                let select = selectTransforms[i],\n                    columnExpr = select.expr;\n\n                if (!columnExpr || !SQExpr.equals(expr, select.expr))\n                    continue;\n\n                return select.queryName;\n            }\n        }\n\n        /** Attempts to find the value range for the single column with the given identifier/identifierKind. */\n        function findRuleInputColumnNumberRange(dataView: DataView, identifier: string, identifierKind: ColumnIdentifierKind): NumberRange {\n            debug.assertValue(dataView, 'dataView');\n            debug.assertValue(identifier, 'identifier');\n            debug.assertValue(identifierKind, 'identifierKind');\n\n            let columns = dataView.metadata.columns;\n\n            for (let i = 0, len = columns.length; i < len; i++) {\n                let column = columns[i];\n\n                if (identifierKind === ColumnIdentifierKind.Role) {\n                    let valueColRoles = column.roles;\n\n                    if (!valueColRoles || !valueColRoles[identifier])\n                        continue;\n                }\n                else {\n                    debug.assert(identifierKind === ColumnIdentifierKind.QueryName, 'identifierKind === ColumnIdentifierKind.QueryName');\n\n                    if (column.queryName !== identifier)\n                        continue;\n                }\n\n                let aggregates = column.aggregates;\n                if (!aggregates)\n                    continue;\n\n                let min = <number>aggregates.min;\n                if (min === undefined)\n                    min = <number>aggregates.minLocal;\n                if (min === undefined)\n                    continue;\n\n                let max = <number>aggregates.max;\n                if (max === undefined)\n                    max = <number>aggregates.maxLocal;\n                if (max === undefined)\n                    continue;\n\n                return { min: min, max: max };\n            }\n        }\n\n        // TODO: refactor this, setGrouped, and groupValues to a test helper to stop using it in the product\n        export function createValueColumns(\n            values: DataViewValueColumn[] = [],\n            valueIdentityFields?: SQExpr[],\n            source?: DataViewMetadataColumn): DataViewValueColumns {\n            let result = <DataViewValueColumns>values;\n            setGrouped(<DataViewValueColumns>values);\n\n            if (valueIdentityFields)\n                result.identityFields = valueIdentityFields;\n\n            if (source)\n                result.source = source;\n\n            return result;\n        }\n\n        export function setGrouped(values: DataViewValueColumns, groupedResult?: DataViewValueColumnGroup[]): void {\n            values.grouped = groupedResult\n                ? () => groupedResult\n                : () => groupValues(values);\n        }\n\n        /** Group together the values with a common identity. */\n        function groupValues(values: DataViewValueColumn[]): DataViewValueColumnGroup[] {\n            debug.assertValue(values, 'values');\n\n            let groups: DataViewValueColumnGroup[] = [],\n                currentGroup: DataViewValueColumnGroup;\n\n            for (let i = 0, len = values.length; i < len; i++) {\n                let value = values[i];\n\n                if (!currentGroup || currentGroup.identity !== value.identity) {\n                    currentGroup = {\n                        values: []\n                    };\n\n                    if (value.identity) {\n                        currentGroup.identity = value.identity;\n\n                        let source = value.source;\n\n                        // allow null, which will be formatted as (Blank).\n                        if (source.groupName !== undefined)\n                            currentGroup.name = source.groupName;\n                        else if (source.displayName)\n                            currentGroup.name = source.displayName;\n                    }\n\n                    groups.push(currentGroup);\n                }\n\n                currentGroup.values.push(value);\n            }\n\n            return groups;\n        }\n\n        function pivotIfNecessary(dataView: DataView, dataViewMappings: DataViewMapping[]): DataView {\n            debug.assertValue(dataView, 'dataView');\n\n            let transformedDataView: DataView;\n            switch (determineCategoricalTransformation(dataView.categorical, dataViewMappings)) {\n                case CategoricalDataViewTransformation.Pivot:\n                    transformedDataView = DataViewPivotCategorical.apply(dataView);\n                    break;\n\n                case CategoricalDataViewTransformation.SelfCrossJoin:\n                    transformedDataView = DataViewSelfCrossJoin.apply(dataView);\n                    break;\n            }\n\n            return transformedDataView || dataView;\n        }\n\n        function determineCategoricalTransformation(categorical: DataViewCategorical, dataViewMappings: DataViewMapping[]): CategoricalDataViewTransformation {\n            if (!categorical || _.isEmpty(dataViewMappings))\n                return;\n\n            let categories = categorical.categories;\n            if (!categories || categories.length !== 1)\n                return;\n\n            let values = categorical.values;\n            if (_.isEmpty(values))\n                return;\n\n            if (values.grouped().some(vg => !!vg.identity))\n                return;\n\n            // If we made it here, the DataView has a single category and no valueGrouping.\n            let categoryRoles = categories[0].source.roles;\n\n            for (let i = 0, len = dataViewMappings.length; i < len; i++) {\n                let roleMappingCategorical = dataViewMappings[i].categorical;\n                if (!roleMappingCategorical)\n                    continue;\n\n                if (!hasRolesGrouped(categoryRoles, <DataViewGroupedRoleMapping>roleMappingCategorical.values))\n                    continue;\n\n                // If we made it here, the DataView's single category has the value grouping role.\n                let categoriesMapping = roleMappingCategorical.categories;\n                let hasCategoryRole =\n                    hasRolesBind(categoryRoles, <DataViewRoleBindMappingWithReduction>categoriesMapping) ||\n                    hasRolesFor(categoryRoles, <DataViewRoleForMappingWithReduction>categoriesMapping);\n\n                if (hasCategoryRole)\n                    return CategoricalDataViewTransformation.SelfCrossJoin;\n\n                return CategoricalDataViewTransformation.Pivot;\n            }\n        }\n\n        function shouldPivotMatrix(matrix: DataViewMatrix, dataViewMappings: DataViewMapping[]): boolean {\n            if (!matrix || _.isEmpty(dataViewMappings))\n                return;\n\n            let rowLevels = matrix.rows.levels;\n            if (rowLevels.length < 1)\n                return;\n\n            let rows = matrix.rows.root.children;\n            if (!rows || rows.length === 0)\n                return;\n\n            let rowRoles = rowLevels[0].sources[0].roles;\n\n            for (let i = 0, len = dataViewMappings.length; i < len; i++) {\n                let roleMappingMatrix = dataViewMappings[i].matrix;\n                if (!roleMappingMatrix)\n                    continue;\n\n                if (!hasRolesFor(rowRoles, <DataViewRoleForMappingWithReduction>roleMappingMatrix.rows) &&\n                    hasRolesFor(rowRoles, <DataViewRoleForMappingWithReduction>roleMappingMatrix.columns)) {\n                    return true;\n                }\n            }\n        }\n\n        function hasRolesBind(roles: { [name: string]: boolean }, roleMapping: DataViewRoleBindMappingWithReduction): boolean {\n            if (roles && roleMapping && roleMapping.bind)\n                return roles[roleMapping.bind.to];\n        }\n\n        function hasRolesFor(roles: { [name: string]: boolean }, roleMapping: DataViewRoleForMappingWithReduction): boolean {\n            if (roles && roleMapping && roleMapping.for)\n                return roles[roleMapping.for.in];\n        }\n\n        function hasRolesGrouped(roles: { [name: string]: boolean }, roleMapping: DataViewGroupedRoleMapping): boolean {\n            if (roles && roleMapping && roleMapping.group)\n                return roles[roleMapping.group.by];\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    import IStringResourceProvider = jsCommon.IStringResourceProvider;\n\n    export function createDisplayNameGetter(displayNameKey: string): (IStringResourceProvider) => string {\n        return (resourceProvider: IStringResourceProvider) => resourceProvider.get(displayNameKey);\n    }\n\n    export function getDisplayName(displayNameGetter: data.DisplayNameGetter, resourceProvider: jsCommon.IStringResourceProvider): string {\n        if (typeof displayNameGetter === 'function')\n            return displayNameGetter(resourceProvider);\n\n        if (typeof displayNameGetter === 'string')\n            return displayNameGetter;\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    /** Represents a data reader. */\n    export interface IDataReader {\n        /** Executes a query, with a promise of completion.  The response object should be compatible with the transform implementation. */\n        execute?(options: DataReaderExecutionOptions): RejectablePromise2<DataReaderData, IClientError>;\n\n        /** Transforms the given data into a DataView.  When this function is not specified, the data is put on a property on the DataView. */\n        transform?(obj: DataReaderData): DataReaderTransformResult;\n\n        /** Stops all future communication and reject and pending communication  */\n        stopCommunication?(): void;\n\n        /** Resumes communication which enables future requests */\n        resumeCommunication?(): void;\n\n        /** Clear cache */\n        clearCache?(dataSource: DataReaderDataSource): void;\n\n        /** rewriteCacheEntries */\n        rewriteCacheEntries?(dataSource: DataReaderDataSource, rewriter: DataReaderCacheRewriter): void;\n\n        /** Sets the result into the local cache */\n        setLocalCacheResult?(options: DataReaderExecutionOptions, dataAsObject: DataReaderData): void;\n    }\n\n    /** Represents a query generator. */\n    export interface IQueryGenerator {\n        /** Query generation function to convert a (prototype) SemanticQuery to a runnable query command. */\n        execute(options: QueryGeneratorOptions): QueryGeneratorResult;\n    }\n\n    export interface IFederatedConceptualSchemaReader {\n        /** Executes a request for conceptual schema with a promise of completion. */\n        execute(options: FederatedConceptualSchemaReaderOptions): IPromise<FederatedConceptualSchemaResponse>;\n\n        /** Transforms the given data into a FederatedConceptualSchema. */\n        transform(obj: FederatedConceptualSchemaResponse): SchemaReaderTransformResult;\n    }\n\n    /** Represents a custom data reader plugin, to be registered in the powerbi.data.plugins object. */\n    export interface IDataReaderPlugin {\n        /** The name of this plugin. */\n        name: string;\n        \n        /** Factory method for the IDataReader. */\n        reader(hostServices: IDataReaderHostServices): IDataReader;\n\n        /** Factory method for the IQueryGenerator. */\n        queryGenerator?(): IQueryGenerator;\n\n        /** Factory method for the IFederatedConceptualSchemaReader. */\n        schemaReader?(hostServices: IDataReaderHostServices): IFederatedConceptualSchemaReader;\n    }\n\n    export interface QueryGeneratorOptions {\n        query: SemanticQuery;\n        mappings: CompiledDataViewMapping[];\n        additionalProjections?: AdditionalQueryProjection[];\n        highlightFilter?: SemanticFilter;\n        restartToken?: RestartToken;\n        dataWindow?: QueryGeneratorDataWindow;\n    }\n\n    export interface AdditionalQueryProjection {\n        queryName: string;\n        selector: Selector;\n        aggregates?: ProjectionAggregates;\n    }\n\n    export interface ProjectionAggregates {\n        min?: boolean;\n        max?: boolean;\n        percentiles?: ProjectionPercentileAggregate[];\n    }\n\n    export interface ProjectionPercentileAggregate {\n        exclusive?: boolean;\n        k: number;\n    }\n\n    export interface QueryGeneratorResult {\n        command: DataReaderQueryCommand;\n        splits?: DataViewSplitTransform[];\n\n        /**\n         * If the query generator needs to rewrite the input query, this property will contain information about the important changes.\n         *\n         * Any rewrite done by query generator should be internal to the particular query generator, but in some rare cases this information\n         * is needed in order for other components to correctly consume the query result.\n         */\n        queryRewrites?: QueryRewriteRecordContainer[];\n    }\n\n    /**\n     * In each instance of QueryRewriteRecordContainer, exactly one of the optional properties will be populated with change record.\n     */\n    export interface QueryRewriteRecordContainer {\n        selectExprAdded?: QueryRewriteSelectExprAddedRecord;\n        projectionQueryRefChanged?: QueryRewriteProjectionQueryRefChangedRecord;\n    }\n\n    /** Indicates a new SQExpr got added at a particular index. */\n    export interface QueryRewriteSelectExprAddedRecord {\n        selectIndex: number;\n        namedSQExpr: NamedSQExpr;\n    }\n\n    /** Indicates a queryRef in the query projection for a particular role got changed. */\n    export interface QueryRewriteProjectionQueryRefChangedRecord {\n        /** The role for which a queryRef in the query projection got changed. */\n        role: string;\n\n        /** The original queryRef. */\n        oldQueryRef: string;\n\n        /** The new, internal queryRef. */\n        newInternalQueryRef: string;\n    }\n    \n    export interface DataReaderTransformResult {\n        dataView?: DataView;\n        restartToken?: RestartToken;\n        error?: IClientError;\n        warning?: IClientWarning;\n\n        /** A value of true in this property indicates that the DataReaderData object from which this result is generated should not get persisted as contract cache nor server cache. */\n        disallowPersisting?: boolean;\n    }\n\n    export interface QueryGeneratorDataWindow {\n        // This interface is intentionally empty, as plugins define their own data structure.\n    }\n\n    export interface RestartToken {\n        // This interface is intentionally empty, as plugins define their own data structure.\n    }\n\n    export interface DataReaderQueryCommand {\n        // This interface is intentionally empty, as plugins define their own data structure.\n    }\n\n    /** Represents a query command defined by an IDataReader. */\n    export interface DataReaderCommand {\n        // This interface is intentionally empty, as plugins define their own data structure.\n    }\n\n    /** Represents a data source defined by an IDataReader. */\n    export interface DataReaderDataSource {\n        // This interface is intentionally empty, as plugins define their own data structure.\n    }\n\n    /** Represents arbitrary data defined by an IDataReader. */\n    export interface DataReaderData {\n        // This interface is intentionally empty, as plugins define their own data structure.\n    }\n\n    /** Represents cacheRewriter that will rewrite the cache of reader as defined by an IDataReader. */\n    export interface DataReaderCacheRewriter {\n        // This interface is intentionally empty, as plugins define their own data structure.\n    }\n\n    export interface DataReaderExecutionOptions {\n        dataSource?: DataReaderDataSource;\n        command: DataReaderCommand;\n        allowCache?: boolean;\n        allowClientSideFilters?: boolean;\n        cacheResponseOnServer?: boolean;\n        ignoreViewportForCache?: boolean;\n    }\n\n    export interface FederatedConceptualSchemaReaderOptions {\n        dataSources: ConceptualSchemaReaderDataSource[];\n    }\n\n    export interface ConceptualSchemaReaderDataSource {\n        id: number;\n\n        /** Specifies the name used in Semantic Queries to reference this DataSource. */\n        name: string;\n\n        /** Specifies the type of IDataReaderPlugin. */\n        type?: string;\n    }\n\n    export interface FederatedConceptualSchemaResponse {\n        data: FederatedConceptualSchemaData;\n    }\n\n    export interface FederatedConceptualSchemaData {\n        // This interface is intentionally empty, as plugins define their own data structure.\n    }\n\n    export interface SchemaReaderTransformResult {\n        schema: FederatedConceptualSchema;\n        error?: SchemaReaderError;\n    }\n\n    // Defect 5858607, consider removing serviceError and only have IClientError to be more consistent with IDataProxy.\n    export interface SchemaReaderError {\n        requestId?: string;\n        serviceError?: ServiceError;\n        clientError: IClientError;\n    }\n\n    export interface IDataReaderHostServices {\n        promiseFactory(): IPromiseFactory;\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi {\n\n    /** Enumeration of DateTimeUnits */\n    export enum DateTimeUnit {\n        Year,\n        Month,\n        Week,\n        Day,\n        Hour,\n        Minute,\n        Second,\n        Millisecond,\n    }\n\n    export interface IFormattingService {\n        /** \n         * Formats the value using provided format expression and culture\n         * @param value - value to be formatted and converted to string.\n         * @param format - format to be applied. If undefined or empty then generic format is used.        \n         */\n        formatValue(value: any, format?: string): string;\n\n        /** \n         * Replaces the indexed format tokens (for example {0:c2}) in the format string with the localized formatted arguments.\n         * @param formatWithIndexedTokens - format string with a set of indexed format tokens.\n         * @param args - array of values which should replace the tokens in the format string.\n         * @param culture - localization culture. If undefined then the current culture is used.\n         */\n        format(formatWithIndexedTokens: string, args: any[], culture?: string): string;\n\n        /** Gets a value indicating whether the specified format a standard numeric format specifier. */\n        isStandardNumberFormat(format: string): boolean;\n\n        /** Performs a custom format with a value override.  Typically used for custom formats showing scaled values. */\n        formatNumberWithCustomOverride(value: number, format: string, nonScientificOverrideFormat: string): string;\n\n        /** Gets the format string to use for dates in particular units. */\n        dateFormatString(unit: DateTimeUnit): string;\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    /** Represents common expression patterns for 'field' expressions such as columns, column aggregates, measures, etc. */\n    export interface FieldExprPattern {\n        column?: FieldExprColumnPattern;\n        columnAggr?: FieldExprColumnAggrPattern;\n        columnHierarchyLevelVariation?: FieldExprColumnHierarchyLevelVariationPattern;\n        entity?: FieldExprEntityPattern;\n        entityAggr?: FieldExprEntityAggrPattern;\n        hierarchy?: FieldExprHierarchyPattern;\n        hierarchyLevel?: FieldExprHierarchyLevelPattern;\n        hierarchyLevelAggr?: FieldExprHierarchyLevelAggrPattern;\n        measure?: FieldExprMeasurePattern;\n        percentile?: FieldExprPercentilePattern;\n        percentOfGrandTotal?: FieldExprPercentOfGrandTotalPattern;\n        selectRef?: FieldExprSelectRefPattern;\n    }\n\n    /** By design there is no default, no-op visitor. Components concerned with patterns need to be aware of all patterns as they are added. */\n    export interface IFieldExprPatternVisitor<T> {\n        visitColumn(column: FieldExprColumnPattern): T;\n        visitColumnAggr(columnAggr: FieldExprColumnAggrPattern): T;\n        visitColumnHierarchyLevelVariation(columnHierarchyLevelVariation: FieldExprColumnHierarchyLevelVariationPattern): T;\n        visitEntity(entity: FieldExprEntityPattern): T;\n        visitEntityAggr(entityAggr: FieldExprEntityAggrPattern): T;\n        visitHierarchy(hierarchy: FieldExprHierarchyPattern): T;\n        visitHierarchyLevel(hierarchyLevel: FieldExprHierarchyLevelPattern): T;\n        visitHierarchyLevelAggr(hierarchyLevelAggr: FieldExprHierarchyLevelAggrPattern): T;\n        visitMeasure(measure: FieldExprMeasurePattern): T;\n        visitPercentile(percentile: FieldExprPercentilePattern): T;\n        visitPercentOfGrandTotal(percentOfGrandTotal: FieldExprPercentOfGrandTotalPattern): T;\n        visitSelectRef(selectRef: FieldExprSelectRefPattern): T;\n    }\n\n    export interface FieldExprEntityPattern {\n        schema: string;\n        entity: string;\n        entityVar?: string;\n    }\n\n    export interface FieldExprEntityItemPattern extends FieldExprEntityPattern {\n    }\n\n    export interface FieldExprEntityPropertyPattern extends FieldExprEntityItemPattern {\n        name: string;\n    }\n\n    export type FieldExprColumnPattern = FieldExprEntityPropertyPattern;\n    export type FieldExprMeasurePattern = FieldExprEntityPropertyPattern;\n    export type FieldExprHierarchyPattern = FieldExprEntityPropertyPattern;\n\n    export type FieldExprPropertyPattern = FieldExprColumnPattern | FieldExprMeasurePattern | FieldExprHierarchyPattern;\n\n    export interface FieldExprEntityAggrPattern extends FieldExprEntityPattern {\n        aggregate: QueryAggregateFunction;\n    }\n\n    export interface FieldExprColumnAggrPattern extends FieldExprColumnPattern {\n        aggregate: QueryAggregateFunction;\n    }\n\n    export interface FieldExprHierarchyLevelPattern extends FieldExprEntityItemPattern {\n        name: string;\n        level: string;\n    }\n\n    export interface FieldExprHierarchyLevelAggrPattern extends FieldExprHierarchyLevelPattern {\n        aggregate: QueryAggregateFunction;\n    }\n\n    export interface FieldExprColumnHierarchyLevelVariationPattern {\n        source: FieldExprColumnPattern;\n        level: FieldExprHierarchyLevelPattern;\n        variationName: string;\n    }\n\n    export interface FieldExprPercentilePattern {\n        arg: FieldExprPattern;\n        k: number;\n        exclusive: boolean;\n    }\n\n    export interface FieldExprPercentOfGrandTotalPattern {\n        baseExpr: FieldExprPattern;\n    }\n\n    export interface FieldExprSelectRefPattern {\n        expressionName: string;\n    }\n\n    export module SQExprBuilder {\n        export function fieldExpr(fieldExpr: FieldExprPattern): SQExpr {\n            let sqExpr = FieldExprPattern.visit<SQExpr>(fieldExpr, FieldExprToSQExprVisitor.instance);\n            debug.assertValue(sqExpr, 'Failed to convert FieldExprPattern into SQExpr');\n            return sqExpr;\n        }\n\n        export function fromColumnAggr(columnAggr: FieldExprColumnAggrPattern): SQAggregationExpr {\n            return aggregate(fromColumn(columnAggr), columnAggr.aggregate);\n        }\n\n        export function fromColumn(column: FieldExprColumnPattern): SQColumnRefExpr {\n            return columnRef(fromEntity(column), column.name);\n        }\n\n        export function fromEntity(entityPattern: FieldExprEntityPattern): SQEntityExpr {\n            return entity(entityPattern.schema, entityPattern.entity, entityPattern.entityVar);\n        }\n\n        export function fromEntityAggr(entityAggr: FieldExprEntityAggrPattern): SQAggregationExpr {\n            return aggregate(fromEntity(entityAggr), entityAggr.aggregate);\n        }\n\n        export function fromHierarchyLevelAggr(hierarchyLevelAggr: FieldExprHierarchyLevelAggrPattern): SQAggregationExpr {\n            return aggregate(fromHierarchyLevel(hierarchyLevelAggr), hierarchyLevelAggr.aggregate);\n        }\n\n        export function fromHierarchyLevel(hierarchyLevelPattern: FieldExprHierarchyLevelPattern): SQHierarchyLevelExpr {\n            return hierarchyLevel(fromHierarchy(hierarchyLevelPattern), hierarchyLevelPattern.level);\n        }\n\n        export function fromHierarchy(hierarchyPattern: FieldExprHierarchyPattern): SQHierarchyExpr {\n            return hierarchy(fromEntity(hierarchyPattern), hierarchyPattern.name);\n        }\n\n        class FieldExprToSQExprVisitor implements IFieldExprPatternVisitor<SQExpr> {\n            public static instance: FieldExprToSQExprVisitor = new FieldExprToSQExprVisitor();\n\n            public visitColumn(column: FieldExprColumnPattern): SQColumnRefExpr {\n                return fromColumn(column);\n            }\n\n            public visitColumnAggr(columnAggr: FieldExprColumnAggrPattern): SQAggregationExpr {\n                return fromColumnAggr(columnAggr);\n            }\n\n            public visitColumnHierarchyLevelVariation(columnHierarchyLevelVariationPattern: FieldExprColumnHierarchyLevelVariationPattern): SQPropertyVariationSourceExpr {\n                return propertyVariationSource(\n                    this.visitEntity(columnHierarchyLevelVariationPattern.source),\n                    columnHierarchyLevelVariationPattern.source.name,\n                    columnHierarchyLevelVariationPattern.level.name);\n            }\n\n            public visitEntity(entityPattern: FieldExprEntityPattern): SQEntityExpr {\n                return fromEntity(entityPattern);\n            }\n\n            public visitEntityAggr(entityAggr: FieldExprEntityAggrPattern): SQAggregationExpr {\n                return fromEntityAggr(entityAggr);\n            }\n\n            public visitHierarchy(hierarchyPattern: FieldExprHierarchyPattern): SQHierarchyExpr {\n                return fromHierarchy(hierarchyPattern);\n            }\n\n            public visitHierarchyLevel(level: FieldExprHierarchyLevelPattern): SQHierarchyLevelExpr {\n                return fromHierarchyLevel(level);\n            }\n\n            public visitHierarchyLevelAggr(hierarchyLevelAggr: FieldExprHierarchyLevelAggrPattern): SQAggregationExpr {\n                return fromHierarchyLevelAggr(hierarchyLevelAggr);\n            }\n\n            public visitMeasure(measure: FieldExprMeasurePattern): SQMeasureRefExpr {\n                return measureRef(this.visitEntity(measure), measure.name);\n            }\n\n            public visitPercentile(percentile: FieldExprPercentilePattern): SQPercentileExpr {\n                let arg = SQExprBuilder.fieldExpr(percentile.arg);\n                return SQExprBuilder.percentile(arg, percentile.k, percentile.exclusive);\n            }\n\n            public visitPercentOfGrandTotal(percentOfGrandTotal: FieldExprPercentOfGrandTotalPattern): SQArithmeticExpr {\n                let baseSQExpr = SQExprBuilder.fieldExpr(percentOfGrandTotal.baseExpr);\n                return arithmetic(\n                    baseSQExpr,\n                    SQExprBuilder.scopedEval(baseSQExpr, []),\n                    ArithmeticOperatorKind.Divide);\n            }\n\n            public visitSelectRef(selectRef: FieldExprSelectRefPattern): SQSelectRefExpr {\n                return SQExprBuilder.selectRef(selectRef.expressionName);\n            }\n        }\n    }\n\n    export module SQExprConverter {\n        export function asFieldPattern(sqExpr: SQExpr): FieldExprPattern {\n            return sqExpr.accept(FieldExprPatternBuilder.instance);\n        }\n    }\n\n    interface FieldExprSourceVariationPattern {\n        column: FieldExprColumnPattern;\n        variationName: string;\n    }\n\n    interface SourceExprPattern {\n        entity?: FieldExprEntityPattern;\n\n        // TODO: Change FieldExprHierarchyPattern to FieldExprHierarchyLevelPattern\n        hierarchy?: FieldExprHierarchyPattern;\n        variation?: FieldExprSourceVariationPattern;\n    }\n\n    interface HierarchySourceExprPattern {\n        hierarchy: FieldExprHierarchyPattern;\n        variation?: FieldExprSourceVariationPattern;\n    }\n\n    class FieldExprPatternBuilder extends DefaultSQExprVisitor<FieldExprPattern> {\n        public static instance: FieldExprPatternBuilder = new FieldExprPatternBuilder();\n\n        public visitColumnRef(expr: SQColumnRefExpr): FieldExprPattern {\n            let sourceRef = expr.source.accept(SourceExprPatternBuilder.instance);\n            if (!sourceRef)\n                return;\n\n            if (sourceRef.entity) {\n                let columnRef = <FieldExprColumnPattern>sourceRef.entity;\n                columnRef.name = expr.ref;\n\n                return { column: columnRef };\n            }\n        }\n\n        public visitMeasureRef(expr: SQMeasureRefExpr): FieldExprPattern {\n            let sourceRef = expr.source.accept(SourceExprPatternBuilder.instance);\n            if (!sourceRef)\n                return;\n\n            if (sourceRef.entity) {\n                let measureRef = <FieldExprMeasurePattern>sourceRef.entity;\n                measureRef.name = expr.ref;\n\n                return { measure: measureRef };\n            }\n        }\n\n        public visitEntity(expr: SQEntityExpr): FieldExprPattern {\n            let entityRef: FieldExprEntityPattern = {\n                schema: expr.schema,\n                entity: expr.entity\n            };\n            if (expr.variable)\n                entityRef.entityVar = expr.variable;\n\n            return { entity: entityRef };\n        }\n\n        public visitAggr(expr: SQAggregationExpr): FieldExprPattern {\n            let fieldPattern: FieldExprPattern = expr.arg.accept(this);\n            if (fieldPattern && fieldPattern.column) {\n                let argAggr = <FieldExprColumnAggrPattern>fieldPattern.column;\n                argAggr.aggregate = expr.func;\n                return { columnAggr: argAggr };\n            } else if (fieldPattern && fieldPattern.columnAggr) {\n                let argAggr = <FieldExprColumnAggrPattern>fieldPattern.columnAggr;\n                argAggr.aggregate = expr.func;\n                return { columnAggr: argAggr };\n            } else if (fieldPattern && fieldPattern.hierarchyLevel) {\n                let argAggr = <FieldExprHierarchyLevelAggrPattern>fieldPattern.hierarchyLevel;\n                argAggr.aggregate = expr.func;\n                return { hierarchyLevelAggr: argAggr };\n            }\n\n            let sourcePattern = expr.arg.accept(SourceExprPatternBuilder.instance);\n            if (sourcePattern && sourcePattern.entity) {\n                let argAggr = <FieldExprEntityAggrPattern>sourcePattern.entity;\n                argAggr.aggregate = expr.func;\n\n                return { entityAggr: argAggr };\n            }\n        }\n\n        public visitPercentile(expr: SQPercentileExpr): FieldExprPattern {\n            return {\n                percentile: {\n                    arg: expr.arg.accept(this),\n                    k: expr.k,\n                    exclusive: expr.exclusive,\n                }\n            };\n        }\n\n        public visitHierarchy(expr: SQHierarchyExpr): FieldExprPattern {\n            let sourcePattern = expr.arg.accept(SourceExprPatternBuilder.instance);\n\n            if (sourcePattern && sourcePattern.entity) {\n                let hierarchyRef = <FieldExprHierarchyPattern>(sourcePattern.entity);\n                hierarchyRef.name = expr.hierarchy;\n                return { hierarchy: hierarchyRef };\n            }\n        }\n\n        public visitHierarchyLevel(expr: SQHierarchyLevelExpr): FieldExprPattern {\n            let hierarchySourceExprPattern: HierarchySourceExprPattern = expr.arg.accept(HierarchyExprPatternBuiler.instance);\n            if (!hierarchySourceExprPattern)\n                return;\n\n            let hierarchyLevel: FieldExprHierarchyLevelPattern;\n            if (hierarchySourceExprPattern.hierarchy) {\n                hierarchyLevel = {\n                    entity: hierarchySourceExprPattern.hierarchy.entity,\n                    schema: hierarchySourceExprPattern.hierarchy.schema,\n                    name: hierarchySourceExprPattern.hierarchy.name,\n                    level: expr.level,\n                };\n            }\n\n            if (hierarchySourceExprPattern.variation) {\n                return {\n                    columnHierarchyLevelVariation: {\n                        source: {\n                            entity: hierarchySourceExprPattern.variation.column.entity,\n                            schema: hierarchySourceExprPattern.variation.column.schema,\n                            name: hierarchySourceExprPattern.variation.column.name,\n                        },\n                        level: hierarchyLevel,\n                        variationName: hierarchySourceExprPattern.variation.variationName,\n                    }\n                };\n            }\n\n            return { hierarchyLevel: hierarchyLevel };\n        }\n\n        public visitArithmetic(expr: SQArithmeticExpr): FieldExprPattern {\n            let percentOfGrandTotalPattern: FieldExprPattern = {\n                percentOfGrandTotal: {\n                    baseExpr: expr.left.accept(this)\n                }\n            };\n\n            if (SQExpr.equals(expr, SQExprBuilder.fieldExpr(percentOfGrandTotalPattern))) {\n                return percentOfGrandTotalPattern;\n            }\n        }\n\n        public visitSelectRef(expr: SQSelectRefExpr): FieldExprPattern {\n            return {\n                selectRef: {\n                    expressionName: expr.expressionName,\n                }\n            };\n        }\n    }\n\n    class SourceExprPatternBuilder extends DefaultSQExprVisitor<SourceExprPattern> {\n        public static instance: SourceExprPatternBuilder = new SourceExprPatternBuilder();\n\n        public visitEntity(expr: SQEntityExpr): SourceExprPattern {\n            let entityRef: FieldExprEntityPattern = {\n                schema: expr.schema,\n                entity: expr.entity\n            };\n            if (expr.variable)\n                entityRef.entityVar = expr.variable;\n\n            return { entity: entityRef };\n        }\n\n        public visitPropertyVariationSource(expr: SQPropertyVariationSourceExpr): SourceExprPattern {\n            let entityExpr = <SQEntityExpr>expr.arg;\n\n            if (entityExpr instanceof SQEntityExpr) {\n                let propertyVariationSource: FieldExprColumnPattern = {\n                    schema: entityExpr.schema,\n                    entity: entityExpr.entity,\n                    name: expr.property,\n                };\n\n                if (entityExpr.variable)\n                    propertyVariationSource.entityVar = entityExpr.variable;\n\n                return {\n                    variation: {\n                        column: propertyVariationSource,\n                        variationName: expr.name,\n                    }\n                };\n            }\n        }\n    }\n\n    class HierarchyExprPatternBuiler extends DefaultSQExprVisitor<HierarchySourceExprPattern> {\n        public static instance: HierarchyExprPatternBuiler = new HierarchyExprPatternBuiler();\n\n        public visitHierarchy(expr: SQHierarchyExpr): HierarchySourceExprPattern {\n            let exprPattern = expr.arg.accept(SourceExprPatternBuilder.instance);\n            let hierarchyRef: FieldExprHierarchyPattern;\n            let variationRef: FieldExprSourceVariationPattern;\n\n            if (exprPattern.variation) {\n                hierarchyRef = {\n                    name: expr.hierarchy,\n                    schema: exprPattern.variation.column.schema,\n                    entity: exprPattern.variation.column.entity,\n                };\n                variationRef = exprPattern.variation;\n            }\n            else\n                hierarchyRef = {\n                    name: expr.hierarchy,\n                    schema: exprPattern.entity.schema,\n                    entity: exprPattern.entity.entity,\n                };\n\n            return {\n                hierarchy: hierarchyRef,\n                variation: variationRef\n            };\n        }\n    }\n\n    export module FieldExprPattern {\n\n        export function visit<T>(expr: SQExpr | FieldExprPattern, visitor: IFieldExprPatternVisitor<T>): T {\n            debug.assertValue(expr, 'expr');\n            debug.assertValue(visitor, 'visitor');\n\n            let fieldExprPattern = expr instanceof SQExpr ? SQExprConverter.asFieldPattern(expr) : expr;\n            debug.assertValue(fieldExprPattern, 'expected sqExpr to conform to a fieldExprPattern');\n\n            if (fieldExprPattern.column)\n                return visitColumn(fieldExprPattern.column, visitor);\n            if (fieldExprPattern.columnAggr)\n                return visitColumnAggr(fieldExprPattern.columnAggr, visitor);\n            if (fieldExprPattern.columnHierarchyLevelVariation)\n                return visitColumnHierarchyLevelVariation(fieldExprPattern.columnHierarchyLevelVariation, visitor);\n            if (fieldExprPattern.entity)\n                return visitEntity(fieldExprPattern.entity, visitor);\n            if (fieldExprPattern.entityAggr)\n                return visitEntityAggr(fieldExprPattern.entityAggr, visitor);\n            if (fieldExprPattern.hierarchy)\n                return visitHierarchy(fieldExprPattern.hierarchy, visitor);\n            if (fieldExprPattern.hierarchyLevel)\n                return visitHierarchyLevel(fieldExprPattern.hierarchyLevel, visitor);\n            if (fieldExprPattern.hierarchyLevelAggr)\n                return visitHierarchyLevelAggr(fieldExprPattern.hierarchyLevelAggr, visitor);\n            if (fieldExprPattern.measure)\n                return visitMeasure(fieldExprPattern.measure, visitor);\n            if (fieldExprPattern.percentile)\n                return visitPercentile(fieldExprPattern.percentile, visitor);\n            if (fieldExprPattern.percentOfGrandTotal)\n                return visitPercentOfGrandTotal(fieldExprPattern.percentOfGrandTotal, visitor);\n            if (fieldExprPattern.selectRef)\n                return visitSelectRef(fieldExprPattern.selectRef, visitor);\n\n            debug.assertFail('failed to visit a fieldExprPattern.');\n            return;\n        }\n\n        function visitColumn<T>(column: FieldExprColumnPattern, visitor: IFieldExprPatternVisitor<T>): T {\n            debug.assertValue(column, 'column');\n            debug.assertValue(visitor, 'visitor');\n\n            return visitor.visitColumn(column);\n        }\n\n        function visitColumnAggr<T>(columnAggr: FieldExprColumnAggrPattern, visitor: IFieldExprPatternVisitor<T>): T {\n            debug.assertValue(columnAggr, 'columnAggr');\n            debug.assertValue(visitor, 'visitor');\n\n            return visitor.visitColumnAggr(columnAggr);\n        }\n\n        function visitColumnHierarchyLevelVariation<T>(\n            columnHierarchyLevelVariation: FieldExprColumnHierarchyLevelVariationPattern,\n            visitor: IFieldExprPatternVisitor<T>): T {\n\n            debug.assertValue(columnHierarchyLevelVariation, 'columnHierarchyLevelVariation');\n            debug.assertValue(visitor, 'visitor');\n\n            return visitor.visitColumnHierarchyLevelVariation(columnHierarchyLevelVariation);\n        }\n\n        function visitEntity<T>(entity: FieldExprEntityPattern, visitor: IFieldExprPatternVisitor<T>): T {\n            debug.assertValue(entity, 'entity');\n            debug.assertValue(visitor, 'visitor');\n\n            return visitor.visitEntity(entity);\n        }\n\n        function visitEntityAggr<T>(entityAggr: FieldExprEntityAggrPattern, visitor: IFieldExprPatternVisitor<T>): T {\n            debug.assertValue(entityAggr, 'entityAggr');\n            debug.assertValue(visitor, 'visitor');\n\n            return visitor.visitEntityAggr(entityAggr);\n        }\n\n        function visitHierarchy<T>(hierarchy: FieldExprHierarchyPattern, visitor: IFieldExprPatternVisitor<T>): T {\n            debug.assertValue(hierarchy, 'hierarchy');\n            debug.assertValue(visitor, 'visitor');\n\n            return visitor.visitHierarchy(hierarchy);\n        }\n\n        function visitHierarchyLevel<T>(hierarchyLevel: FieldExprHierarchyLevelPattern, visitor: IFieldExprPatternVisitor<T>): T {\n            debug.assertValue(hierarchyLevel, 'hierarchyLevel');\n            debug.assertValue(visitor, 'visitor');\n\n            return visitor.visitHierarchyLevel(hierarchyLevel);\n        }\n\n        function visitHierarchyLevelAggr<T>(hierarchyLevelAggr: FieldExprHierarchyLevelAggrPattern, visitor: IFieldExprPatternVisitor<T>): T {\n            debug.assertValue(hierarchyLevelAggr, 'hierarchyLevelAggr');\n            debug.assertValue(visitor, 'visitor');\n\n            return visitor.visitHierarchyLevelAggr(hierarchyLevelAggr);\n        }\n\n        function visitMeasure<T>(measure: FieldExprMeasurePattern, visitor: IFieldExprPatternVisitor<T>): T {\n            debug.assertValue(measure, 'measure');\n            debug.assertValue(visitor, 'visitor');\n\n            return visitor.visitMeasure(measure);\n        }\n\n        function visitSelectRef<T>(selectRef: FieldExprSelectRefPattern, visitor: IFieldExprPatternVisitor<T>): T {\n            debug.assertValue(selectRef, 'selectRef');\n            debug.assertValue(visitor, 'visitor');\n\n            return visitor.visitSelectRef(selectRef);\n        }\n\n        function visitPercentile<T>(percentile: FieldExprPercentilePattern, visitor: IFieldExprPatternVisitor<T>): T {\n            debug.assertValue(percentile, 'percentile');\n            debug.assertValue(visitor, 'visitor');\n\n            return visitor.visitPercentile(percentile);\n        }\n\n        function visitPercentOfGrandTotal<T>(percentOfGrandTotal: FieldExprPercentOfGrandTotalPattern, visitor: IFieldExprPatternVisitor<T>): T {\n            debug.assertValue(percentOfGrandTotal, 'percentOfGrandTotal');\n            debug.assertValue(visitor, 'visitor');\n\n            return visitor.visitPercentOfGrandTotal(percentOfGrandTotal);\n        }\n\n        export function toColumnRefSQExpr(columnPattern: FieldExprColumnPattern): SQColumnRefExpr {\n            return SQExprBuilder.columnRef(\n                SQExprBuilder.entity(columnPattern.schema, columnPattern.entity, columnPattern.entityVar),\n                columnPattern.name);\n        }\n\n        export function getAggregate(fieldExpr: FieldExprPattern): QueryAggregateFunction {\n            debug.assertValue(fieldExpr, 'fieldExpr');\n\n            return visit(fieldExpr, FieldExprPatternAggregateVisitor.instance);\n        }\n\n        export function isAggregation(fieldExpr: FieldExprPattern): boolean {\n            debug.assertValue(fieldExpr, 'fieldExpr');\n\n            return visit(fieldExpr, FieldExprPatternIsAggregationVisitor.instance);\n        }\n\n        export function hasFieldExprName(fieldExpr: FieldExprPattern): boolean {\n            return (fieldExpr.column ||\n                fieldExpr.columnAggr ||\n                fieldExpr.measure) !== undefined;\n        }\n\n        export function getPropertyName(fieldExpr: FieldExprPattern): string {\n            return FieldExprPattern.visit(fieldExpr, FieldExprPropertyNameVisitor.instance);\n        }\n\n        export function getHierarchyName(fieldExpr: FieldExprPattern): string {\n            let hierarchy = fieldExpr.hierarchy;\n            if (hierarchy)\n                return hierarchy.name;\n        }\n\n        export function getColumnRef(fieldExpr: FieldExprPattern): FieldExprPropertyPattern {\n            if (fieldExpr.columnHierarchyLevelVariation)\n                return fieldExpr.columnHierarchyLevelVariation.source;\n\n            return fieldExpr.column || fieldExpr.measure || fieldExpr.columnAggr;\n        }\n\n        export function getFieldExprName(fieldExpr: FieldExprPattern): string {\n            let name = getPropertyName(fieldExpr);\n\n            if (name)\n                return name;\n\n            // In case it is an entity\n            return toFieldExprEntityPattern(fieldExpr).entity;\n        }\n        \n        export function getSchema(fieldExpr: FieldExprPattern): string {\n            debug.assertValue(fieldExpr, 'fieldExpr');\n            \n            let item = FieldExprPattern.toFieldExprEntityItemPattern(fieldExpr);\n            debug.assertAnyValue(item, 'expected fieldExpr to be an entity item');\n            \n            return item.schema;\n        }\n\n        export function toFieldExprEntityPattern(fieldExpr: FieldExprPattern): FieldExprEntityPattern {\n            return FieldExprPattern.visit(fieldExpr, FieldExprToEntityExprPatternBuilder.instance);\n        }\n\n        export function toFieldExprEntityItemPattern(fieldExpr: FieldExprPattern): FieldExprEntityPattern {\n            return FieldExprPattern.visit(fieldExpr, FieldExprToEntityExprPatternBuilder.instance);\n        }\n\n        class FieldExprPatternAggregateVisitor implements IFieldExprPatternVisitor<QueryAggregateFunction> {\n            public static instance: FieldExprPatternAggregateVisitor = new FieldExprPatternAggregateVisitor();\n\n            public visitColumn(column: FieldExprColumnPattern): QueryAggregateFunction {\n                return;\n            }\n\n            public visitColumnAggr(columnAggr: FieldExprColumnAggrPattern): QueryAggregateFunction {\n                return columnAggr.aggregate;\n            }\n\n            public visitColumnHierarchyLevelVariation(columnHierarchyLevelVariation: FieldExprColumnHierarchyLevelVariationPattern): QueryAggregateFunction {\n                return;\n            }\n\n            public visitEntity(entity: FieldExprEntityPattern): QueryAggregateFunction {\n                return;\n            }\n\n            public visitEntityAggr(entityAggr: FieldExprEntityAggrPattern): QueryAggregateFunction {\n                return entityAggr.aggregate;\n            }\n\n            public visitHierarchy(hierarchy: FieldExprHierarchyPattern): QueryAggregateFunction {\n                return;\n            }\n\n            public visitHierarchyLevel(hierarchyLevel: FieldExprHierarchyLevelPattern): QueryAggregateFunction {\n                return;\n            }\n\n            public visitHierarchyLevelAggr(hierarchyLevelAggr: FieldExprHierarchyLevelAggrPattern): QueryAggregateFunction {\n                return hierarchyLevelAggr.aggregate;\n            }\n\n            public visitMeasure(measure: FieldExprMeasurePattern): QueryAggregateFunction {\n                return;\n            }\n\n            public visitSelectRef(selectRef: FieldExprSelectRefPattern): QueryAggregateFunction {\n                return;\n            }\n\n            public visitPercentile(percentile: FieldExprPercentilePattern): QueryAggregateFunction {\n                // NOTE: Percentile behaves like an aggregate (i.e., can be performed over numeric columns like a SUM), but\n                // this function can't really convey that because percentile (intentionally) isn't in QueryAggregateFunction enum.\n                // This should be revisited when we have UI support for the Percentile aggregate.\n                return;\n            }\n\n            public visitPercentOfGrandTotal(percentOfGrandTotal: FieldExprPercentOfGrandTotalPattern): QueryAggregateFunction {\n                return SQExprInfo.getAggregate(SQExprBuilder.fieldExpr(percentOfGrandTotal.baseExpr));\n            }\n        }\n\n        class FieldExprPatternIsAggregationVisitor implements IFieldExprPatternVisitor<boolean> {\n            public static instance: FieldExprPatternIsAggregationVisitor = new FieldExprPatternIsAggregationVisitor();\n\n            public visitColumn(column: FieldExprColumnPattern): boolean {\n                return false;\n            }\n\n            public visitColumnAggr(columnAggr: FieldExprColumnAggrPattern): boolean {\n                return true;\n            }\n\n            public visitColumnHierarchyLevelVariation(columnHierarchyLevelVariation: FieldExprColumnHierarchyLevelVariationPattern): boolean {\n                return false;\n            }\n\n            public visitEntity(entity: FieldExprEntityPattern): boolean {\n                return false;\n            }\n\n            public visitEntityAggr(entityAggr: FieldExprEntityAggrPattern): boolean {\n                return true;\n            }\n\n            public visitHierarchy(hierarchy: FieldExprHierarchyPattern): boolean {\n                return false;\n            }\n\n            public visitHierarchyLevel(hierarchyLevel: FieldExprHierarchyLevelPattern): boolean {\n                return false;\n            }\n\n            public visitHierarchyLevelAggr(hierarchyLevelAggr: FieldExprHierarchyLevelAggrPattern): boolean {\n                return true;\n            }\n\n            public visitMeasure(measure: FieldExprMeasurePattern): boolean {\n                return true;\n            }\n\n            public visitSelectRef(selectRef: FieldExprSelectRefPattern): boolean {\n                return false;\n            }\n\n            public visitPercentile(percentile: FieldExprPercentilePattern): boolean {\n                return true;\n            }\n\n            public visitPercentOfGrandTotal(percentOfGrandTotal: FieldExprPercentOfGrandTotalPattern): boolean {\n                return true;\n            }\n        }\n\n        class FieldExprToEntityExprPatternBuilder implements IFieldExprPatternVisitor<FieldExprEntityItemPattern> {\n            public static instance: FieldExprToEntityExprPatternBuilder = new FieldExprToEntityExprPatternBuilder();\n\n            public visitColumn(column: FieldExprColumnPattern): FieldExprEntityItemPattern {\n                return FieldExprToEntityExprPatternBuilder.toEntityItemExprPattern(column);\n            }\n\n            public visitColumnAggr(columnAggr: FieldExprColumnAggrPattern): FieldExprEntityItemPattern {\n                return FieldExprToEntityExprPatternBuilder.toEntityItemExprPattern(columnAggr);\n            }\n\n            public visitColumnHierarchyLevelVariation(columnHierarchyLevelVariation: FieldExprColumnHierarchyLevelVariationPattern): FieldExprEntityItemPattern {\n                return FieldExprToEntityExprPatternBuilder.toEntityItemExprPattern(columnHierarchyLevelVariation.source);\n            }\n\n            public visitEntity(entity: FieldExprEntityPattern): FieldExprEntityItemPattern {\n                return FieldExprToEntityExprPatternBuilder.toEntityItemExprPattern(entity);\n            }\n\n            public visitEntityAggr(entityAggr: FieldExprEntityAggrPattern): FieldExprEntityItemPattern {\n                return FieldExprToEntityExprPatternBuilder.toEntityItemExprPattern(entityAggr);\n            }\n\n            public visitHierarchy(hierarchy: FieldExprHierarchyPattern): FieldExprEntityItemPattern {\n                return FieldExprToEntityExprPatternBuilder.toEntityItemExprPattern(hierarchy);\n            }\n\n            public visitHierarchyLevel(hierarchyLevel: FieldExprHierarchyLevelPattern): FieldExprEntityItemPattern {\n                return FieldExprToEntityExprPatternBuilder.toEntityItemExprPattern(hierarchyLevel);\n            }\n\n            public visitHierarchyLevelAggr(hierarchyLevelAggr: FieldExprHierarchyLevelAggrPattern): FieldExprEntityItemPattern {\n                return FieldExprToEntityExprPatternBuilder.toEntityItemExprPattern(hierarchyLevelAggr);\n            }\n\n            public visitMeasure(measure: FieldExprMeasurePattern): FieldExprEntityItemPattern {\n                return FieldExprToEntityExprPatternBuilder.toEntityItemExprPattern(measure);\n            }\n\n            public visitSelectRef(selectRef: FieldExprSelectRefPattern): FieldExprEntityItemPattern {\n                return;\n            }\n\n            public visitPercentile(percentile: FieldExprPercentilePattern): FieldExprEntityItemPattern {\n                return FieldExprPattern.visit(percentile.arg, this);\n            }\n\n            public visitPercentOfGrandTotal(percentOfGrandTotal: FieldExprPercentOfGrandTotalPattern): FieldExprEntityItemPattern {\n                return FieldExprPattern.visit(percentOfGrandTotal.baseExpr, this);\n            }\n\n            private static toEntityItemExprPattern(exprPattern: FieldExprEntityItemPattern): FieldExprEntityItemPattern {\n                debug.assertValue(exprPattern, 'exprPattern');\n\n                let pattern: FieldExprEntityItemPattern = { schema: exprPattern.schema, entity: exprPattern.entity };\n\n                if (exprPattern.entityVar) {\n                    pattern.entityVar = exprPattern.entityVar;\n                }\n\n                return pattern;\n            }\n        }\n        \n        class FieldExprPropertyNameVisitor implements IFieldExprPatternVisitor<string> {\n            public static instance: FieldExprPropertyNameVisitor = new FieldExprPropertyNameVisitor();\n\n            public visitColumn(column: FieldExprColumnPattern): string {\n                return column.name;\n            }\n\n            public visitColumnAggr(columnAggr: FieldExprColumnAggrPattern): string {\n                return columnAggr.name;\n            }\n\n            public visitColumnHierarchyLevelVariation(columnHierarchyLevelVariation: FieldExprColumnHierarchyLevelVariationPattern): string {\n                return;\n            }\n\n            public visitEntity(entity: FieldExprEntityPattern): string {\n                return;\n            }\n\n            public visitEntityAggr(entityAggr: FieldExprEntityAggrPattern): string {\n                return;\n            }\n\n            public visitHierarchy(hierarchy: FieldExprHierarchyPattern): string {\n                return;\n            }\n\n            public visitHierarchyLevel(hierarchyLevel: FieldExprHierarchyLevelPattern): string {\n                return;\n            }\n\n            public visitHierarchyLevelAggr(hierarchyLevelAggr: FieldExprHierarchyLevelAggrPattern): string {\n                return;\n            }\n\n            public visitMeasure(measure: FieldExprMeasurePattern): string {\n                return measure.name;\n            }\n\n            public visitSelectRef(selectRef: FieldExprSelectRefPattern): string {\n                return;\n            }\n\n            public visitPercentile(percentile: FieldExprPercentilePattern): string {\n                return FieldExprPattern.visit(percentile.arg, this);\n            }\n\n            public visitPercentOfGrandTotal(percentOfGrandTotal: FieldExprPercentOfGrandTotalPattern): string {\n                return FieldExprPattern.visit(percentOfGrandTotal.baseExpr, this);\n            }\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi {\n    export module DataViewAnalysis {\n        import ArrayExtensions = jsCommon.ArrayExtensions;\n        import QueryProjectionsByRole = powerbi.data.QueryProjectionsByRole;\n        import DataViewObjectDescriptors = powerbi.data.DataViewObjectDescriptors;\n        import DataViewObjectDefinitions = powerbi.data.DataViewObjectDefinitions;\n\n        export interface ValidateAndReshapeResult {\n            dataView?: DataView;\n            isValid: boolean;\n        }\n\n        export interface RoleKindByQueryRef {\n            [queryRef: string]: VisualDataRoleKind;\n        }\n\n        export interface DataViewMappingResult {\n            supportedMappings: DataViewMapping[];\n\n            /** A set of mapping errors if there are no supported mappings */\n            mappingErrors: DataViewMappingMatchError[];\n        }\n\n        export enum DataViewMappingMatchErrorCode {\n            conditionRangeTooLarge,\n            conditionRangeTooSmall,\n            conditionKindExpectedMeasure,\n            conditionKindExpectedGrouping,\n            conditionKindExpectedGroupingOrMeasure,\n        }\n\n        export interface DataViewMappingMatchError {\n            code: DataViewMappingMatchErrorCode;\n            roleName: string;\n            mappingIndex?: number;\n            conditionIndex?: number;\n        }\n\n        /** Reshapes the data view to match the provided schema if possible. If not, returns null */\n        export function validateAndReshape(dataView: DataView, dataViewMappings: DataViewMapping[]): ValidateAndReshapeResult {\n            if (!dataViewMappings || dataViewMappings.length === 0)\n                return { dataView: dataView, isValid: true };\n\n            if (dataView) {\n                for (let dataViewMapping of dataViewMappings) {\n                    // Keep the original when possible.\n                    if (supports(dataView, dataViewMapping))\n                        return { dataView: dataView, isValid: true };\n\n                    if (dataViewMapping.categorical && dataView.categorical)\n                        return reshapeCategorical(dataView, dataViewMapping);\n\n                    if (dataViewMapping.tree && dataView.tree)\n                        return reshapeTree(dataView, dataViewMapping.tree);\n\n                    if (dataViewMapping.single && dataView.single)\n                        return reshapeSingle(dataView, dataViewMapping.single);\n\n                    if (dataViewMapping.table && dataView.table)\n                        return reshapeTable(dataView, dataViewMapping.table);\n                }\n            }\n            else if (ScriptResultUtil.findScriptResult(dataViewMappings)) {\n                // Currently, PBI Service treats R Script Visuals as static images.\n                // This causes validation to fail, since in PBI service no DataView is generated, but there are DataViewMappings,\n                // to support the PBI Desktop scenario.\n                // This code will be removed once PBI Service fully supports R Script Visuals.\n                // VSTS: 6217994 - [R Viz] Remove temporary DataViewAnalysis validation workaround of static R Script Visual mappings\n                return { dataView: dataView, isValid: true };\n            }\n\n            return { isValid: false };\n        }\n\n        function reshapeCategorical(dataView: DataView, dataViewMapping: DataViewMapping): ValidateAndReshapeResult {\n            debug.assertValue(dataViewMapping, 'dataViewMapping');\n\n            //The functionality that used to compare categorical.values.length to schema.values doesn't apply any more, we don't want to use the same logic for re-shaping.\n            let categoryRoleMapping = dataViewMapping.categorical;\n            let categorical = dataView.categorical;\n            if (!categorical)\n                return { isValid: false };\n\n            let rowCount;\n            if (categoryRoleMapping.rowCount) {\n                rowCount = categoryRoleMapping.rowCount.supported;\n                if (rowCount && rowCount.max) {\n                    let updated: DataViewCategorical;\n                    let categories = categorical.categories;\n                    let maxRowCount = rowCount.max;\n                    let originalLength = undefined;\n                    if (categories) {\n                        for (let i = 0, len = categories.length; i < len; i++) {\n                            let category = categories[i];\n                            originalLength = category.values.length;\n                            if (maxRowCount !== undefined && originalLength > maxRowCount) {\n\n                                // Row count too large: Trim it to fit.\n                                let updatedCategories = ArrayExtensions.range(category.values, 0, maxRowCount - 1);\n\n                                updated = updated || { categories: [] };\n                                updated.categories.push({\n                                    source: category.source,\n                                    values: updatedCategories\n                                });\n                            }\n                        }\n                    }\n\n                    if (categorical.values && categorical.values.length > 0 && maxRowCount) {\n                        if (!originalLength)\n                            originalLength = categorical.values[0].values.length;\n\n                        if (maxRowCount !== undefined && originalLength > maxRowCount) {\n                            updated = updated || {};\n                            updated.values = data.DataViewTransform.createValueColumns();\n\n                            for (let i = 0, len = categorical.values.length; i < len; i++) {\n                                let column = categorical.values[i],\n                                    updatedColumn: DataViewValueColumn = {\n                                        source: column.source,\n                                        values: ArrayExtensions.range(column.values, 0, maxRowCount - 1)\n                                    };\n\n                                if (column.min !== undefined)\n                                    updatedColumn.min = column.min;\n                                if (column.max !== undefined)\n                                    updatedColumn.max = column.max;\n                                if (column.subtotal !== undefined)\n                                    updatedColumn.subtotal = column.subtotal;\n\n                                updated.values.push(updatedColumn);\n                            }\n                        }\n                    }\n\n                    if (updated) {\n                        dataView = {\n                            metadata: dataView.metadata,\n                            categorical: updated,\n                        };\n                    }\n                }\n            }\n\n            if (supportsCategorical(dataView, dataViewMapping))\n                return { dataView: dataView, isValid: true };\n\n            return null;\n        }\n\n        function reshapeSingle(dataView: DataView, singleRoleMapping: DataViewSingleMapping): ValidateAndReshapeResult {\n            debug.assertValue(dataView, 'dataView');\n            debug.assertValue(singleRoleMapping, 'singleRoleMapping');\n\n            if (dataView.single)\n                return { dataView: dataView, isValid: true };\n\n            return { isValid: false };\n        }\n\n        function reshapeTree(dataView: DataView, treeRoleMapping: DataViewTreeMapping): ValidateAndReshapeResult {\n            debug.assertValue(dataView, 'dataView');\n            debug.assertValue(treeRoleMapping, 'treeRoleMapping');\n\n            // TODO: Need to implement the reshaping of Tree\n            let metadata = dataView.metadata;\n            if (validateRange(countGroups(metadata.columns), treeRoleMapping.depth) == null /*&& conforms(countMeasures(metadata.columns), treeRoleMapping.aggregates)*/)\n                return { dataView: dataView, isValid: true };\n\n            return { isValid: false };\n        }\n\n        function reshapeTable(dataView: DataView, tableRoleMapping: DataViewTableMapping): ValidateAndReshapeResult {\n            debug.assertValue(dataView, 'dataView');\n            debug.assertValue(tableRoleMapping, 'tableRoleMapping');\n\n            if (dataView.table)\n                return { dataView: dataView, isValid: true };\n\n            return { isValid: false };\n        }\n\n        export function countGroups(columns: DataViewMetadataColumn[]): number {\n            let count = 0;\n\n            for (let i = 0, len = columns.length; i < len; i++) {\n                if (!columns[i].isMeasure)\n                    ++count;\n            }\n\n            return count;\n        }\n\n        export function countMeasures(columns: DataViewMetadataColumn[]): number {\n            let count = 0;\n\n            for (let i = 0, len = columns.length; i < len; i++) {\n                if (columns[i].isMeasure)\n                    ++count;\n            }\n\n            return count;\n        }\n\n        /** Indicates whether the dataView conforms to the specified schema. */\n        export function supports(dataView: DataView, roleMapping: DataViewMapping, usePreferredDataViewSchema?: boolean): boolean {\n            if (!roleMapping || !dataView)\n                return false;\n\n            if (roleMapping.scriptResult && !supportsScriptResult(dataView.scriptResult, roleMapping.scriptResult))\n                return false;\n\n            if (roleMapping.categorical && !supportsCategorical(dataView, roleMapping.categorical, usePreferredDataViewSchema))\n                return false;\n\n            if (roleMapping.tree && !supportsTree(dataView, roleMapping.tree))\n                return false;\n\n            if (roleMapping.single && !supportsSingle(dataView.single, roleMapping.single))\n                return false;\n\n            if (roleMapping.table && !supportsTable(dataView.table, roleMapping.table, usePreferredDataViewSchema))\n                return false;\n\n            return true;\n        }\n\n        function supportsCategorical(dataView: DataView, categoryRoleMapping: DataViewCategoricalMapping, usePreferredDataViewSchema?: boolean): boolean {\n            debug.assertValue(categoryRoleMapping, 'categoryRoleMapping');\n\n            let dataViewCategorical = dataView.categorical;\n            if (!dataViewCategorical)\n                return false;\n\n            // TODO: Disabling this implementation isn't right.\n            //if (!conforms(countMeasures(dataView.metadata.columns), categoryRoleMapping.values.roles.length))\n            //    return false;\n\n            if (categoryRoleMapping.rowCount) {\n                let rowCount = categoryRoleMapping.rowCount.supported;\n                if (usePreferredDataViewSchema && categoryRoleMapping.rowCount.preferred)\n                    rowCount = categoryRoleMapping.rowCount.preferred;\n\n                if (rowCount) {\n                    let len: number = 0;\n                    if (dataViewCategorical.values && dataViewCategorical.values.length)\n                        len = dataViewCategorical.values[0].values.length;\n                    else if (dataViewCategorical.categories && dataViewCategorical.categories.length)\n                        len = dataViewCategorical.categories[0].values.length;\n\n                    if (validateRange(len, rowCount) != null)\n                        return false;\n                }\n            }\n\n            return true;\n        }\n\n        function supportsSingle(dataViewSingle: DataViewSingle, singleRoleMapping: DataViewSingleMapping): boolean {\n            debug.assertValue(singleRoleMapping, 'singleRoleMapping');\n\n            if (!dataViewSingle)\n                return false;\n\n            return true;\n        }\n\n        function supportsTree(dataView: DataView, treeRoleMapping: DataViewTreeMapping): boolean {\n            debug.assertValue(treeRoleMapping, 'treeRoleMapping');\n\n            let metadata = dataView.metadata;\n            return validateRange(countGroups(metadata.columns), treeRoleMapping.depth) == null;\n        }\n\n        function supportsTable(dataViewTable: DataViewTable, tableRoleMapping: DataViewTableMapping, usePreferredDataViewSchema?: boolean): boolean {\n            debug.assertValue(tableRoleMapping, 'tableRoleMapping');\n\n            if (!dataViewTable)\n                return false;\n\n            if (tableRoleMapping.rowCount) {\n                let rowCount = tableRoleMapping.rowCount.supported;\n                if (usePreferredDataViewSchema && tableRoleMapping.rowCount.preferred)\n                    rowCount = tableRoleMapping.rowCount.preferred;\n\n                if (rowCount) {\n                    let len: number = 0;\n                    if (dataViewTable.rows && dataViewTable.rows.length)\n                        len = dataViewTable.rows.length;\n\n                    if (validateRange(len, rowCount) != null)\n                        return false;\n                }\n            }\n\n            return true;\n        }\n\n        function supportsScriptResult(dataView: DataViewScriptResultData, scriptResultRoleMapping: DataViewScriptResultMapping): boolean {\n            debug.assertValue(scriptResultRoleMapping, 'scriptResultRoleMapping');\n\n            if (!dataView)\n                return false;\n\n            if (!dataView.imageBase64)\n                return false;\n\n            return true;\n        }\n\n        /** \n         * Determines whether the value conforms to the range in the role condition, returning undefined\n         * if so or an appropriate error code if not.\n         */\n        export function validateRange(value: number, roleCondition: RoleCondition, ignoreMin?: boolean): DataViewMappingMatchErrorCode {\n            debug.assertValue(value, 'value');\n\n            if (!roleCondition)\n                return;\n\n            if (!ignoreMin && roleCondition.min !== undefined && roleCondition.min > value)\n                return DataViewMappingMatchErrorCode.conditionRangeTooSmall;\n\n            if (roleCondition.max !== undefined && roleCondition.max < value)\n                return DataViewMappingMatchErrorCode.conditionRangeTooLarge;\n        }\n\n        /** \n         * Determines whether the value conforms to the kind in the role condition, returning undefined\n         * if so or an appropriate error code if not.\n         */\n        function validateKind(roleCondition: RoleCondition, roleName: string, projections: QueryProjectionsByRole, roleKindByQueryRef: RoleKindByQueryRef): DataViewMappingMatchErrorCode {\n            if (!roleCondition || roleCondition.kind === undefined) {\n                return;\n            }\n            let expectedKind = roleCondition.kind;\n            let roleCollection = projections[roleName];\n            if (roleCollection) {\n                let roleProjections = roleCollection.all();\n                for (let roleProjection of roleProjections) {\n                    if (roleKindByQueryRef[roleProjection.queryRef] !== expectedKind) {\n                        switch (expectedKind) {\n                            case VisualDataRoleKind.Measure:\n                                return DataViewMappingMatchErrorCode.conditionKindExpectedMeasure;\n                            case VisualDataRoleKind.Grouping:\n                                return DataViewMappingMatchErrorCode.conditionKindExpectedGrouping;\n                            case VisualDataRoleKind.GroupingOrMeasure:\n                                return DataViewMappingMatchErrorCode.conditionKindExpectedGroupingOrMeasure;\n                        }\n                    }\n                }\n            }\n        }\n\n        /** Determines the appropriate DataViewMappings for the projections. */\n        export function chooseDataViewMappings(\n            projections: QueryProjectionsByRole,\n            mappings: DataViewMapping[],\n            roleKindByQueryRef: RoleKindByQueryRef,\n            objectDescriptors?: DataViewObjectDescriptors,\n            objectDefinitions?: DataViewObjectDefinitions): DataViewMappingResult {\n            debug.assertValue(projections, 'projections');\n            debug.assertAnyValue(mappings, 'mappings');\n\n            let supportedMappings: DataViewMapping[] = [];\n            let errors: DataViewMappingMatchError[] = [];\n\n            if (!_.isEmpty(mappings)) {\n                for (let mappingIndex = 0, mappingCount = mappings.length; mappingIndex < mappingCount; mappingIndex++) {\n                    let mapping = mappings[mappingIndex],\n                        mappingConditions = mapping.conditions,\n                        requiredProperties = mapping.requiredProperties;\n                    let allPropertiesValid: boolean = areAllPropertiesValid(requiredProperties, objectDescriptors, objectDefinitions);\n                    let conditionsMet: DataViewMappingCondition[] = [];\n\n                    if (!_.isEmpty(mappingConditions)) {\n                        for (let conditionIndex = 0, conditionCount = mappingConditions.length; conditionIndex < conditionCount; conditionIndex++) {\n                            let condition = mappingConditions[conditionIndex];\n                            let currentConditionErrors = checkForConditionErrors(projections, condition, roleKindByQueryRef);\n                            if (!_.isEmpty(currentConditionErrors)) {\n                                for (let error of currentConditionErrors) {\n                                    error.mappingIndex = mappingIndex;\n                                    error.conditionIndex = conditionIndex;\n                                    errors.push(error);\n                                }\n                            }\n                            else\n                                conditionsMet.push(condition);\n                        }\n                    }\n                    else {\n                        conditionsMet.push({});\n                    }\n\n                    if (!_.isEmpty(conditionsMet) && allPropertiesValid) {\n                        let supportedMapping = _.cloneDeep(mapping);\n\n                        let updatedConditions = _.filter(conditionsMet, (condition) => Object.keys(condition).length > 0);\n                        if (!_.isEmpty(updatedConditions))\n                            supportedMapping.conditions = updatedConditions;\n                        supportedMappings.push(supportedMapping);\n                    }\n                }\n            }\n\n            return {\n                supportedMappings: ArrayExtensions.emptyToNull(supportedMappings),\n                mappingErrors: ArrayExtensions.emptyToNull(errors),\n            };\n        }\n\n        function checkForConditionErrors(projections: QueryProjectionsByRole, condition: DataViewMappingCondition, roleKindByQueryRef: RoleKindByQueryRef): DataViewMappingMatchError[] {\n            debug.assertValue(projections, 'projections');\n            debug.assertValue(condition, 'condition');\n\n            let conditionRoles = Object.keys(condition);\n            let errors: DataViewMappingMatchError[] = [];\n\n            for (let i = 0, len = conditionRoles.length; i < len; i++) {\n                let roleName: string = conditionRoles[i],\n                    isDrillable = projections[roleName] && !_.isEmpty(projections[roleName].activeProjectionRefs),\n                    roleCondition = condition[roleName];\n\n                let roleCount = getPropertyCount(roleName, projections, isDrillable);\n                let rangeError = validateRange(roleCount, roleCondition);\n                if (rangeError != null) {\n                    errors.push({\n                        code: rangeError,\n                        roleName: roleName,\n                    });\n                }\n                let kindError = validateKind(roleCondition, roleName, projections, roleKindByQueryRef);\n                if (kindError != null) {\n                    errors.push({\n                        code: kindError,\n                        roleName: roleName,\n                    });\n                }\n            }\n\n            return errors;\n        }\n\n        function areAllPropertiesValid(requiredProperties: DataViewObjectPropertyIdentifier[], objectDescriptors: DataViewObjectDescriptors, objectDefinitions?: DataViewObjectDefinitions): boolean {\n            if (_.isEmpty(requiredProperties))\n                return true;\n\n            if (!objectDescriptors || !objectDefinitions)\n                return false;\n\n            let staticEvalContext: data.IEvalContext = data.createStaticEvalContext();\n\n            return _.every(requiredProperties, (requiredProperty) => {\n                let objectDescriptorValue = null;\n                let objectDescriptorProperty = objectDescriptors[requiredProperty.objectName];\n                if (objectDescriptorProperty)\n                    objectDescriptorValue = objectDescriptorProperty.properties[requiredProperty.propertyName];\n                let objectDefinitionValue = DataViewObjectDefinitions.getValue(objectDefinitions, requiredProperty, null);\n\n                if (!objectDescriptorValue || !objectDefinitionValue)\n                    return false;\n\n                return data.DataViewObjectEvaluator.evaluateProperty(staticEvalContext, objectDescriptorValue, objectDefinitionValue);\n            });\n        }\n\n        export function getPropertyCount(roleName: string, projections: QueryProjectionsByRole, useActiveIfAvailable?: boolean): number {\n            debug.assertValue(roleName, 'roleName');\n            debug.assertValue(projections, 'projections');\n\n            let projectionsForRole = projections[roleName];\n            if (projectionsForRole) {\n                if (useActiveIfAvailable)\n                    return 1;\n                return projectionsForRole.all().length;\n            }\n\n            return 0;\n        }\n\n        export function hasSameCategoryIdentity(dataView1: DataView, dataView2: DataView): boolean {\n            if (dataView1\n                && dataView2\n                && dataView1.categorical\n                && dataView2.categorical) {\n                let dv1Categories = dataView1.categorical.categories;\n                let dv2Categories = dataView2.categorical.categories;\n                if (dv1Categories\n                    && dv2Categories\n                    && dv1Categories.length === dv2Categories.length) {\n                    for (let i = 0, len = dv1Categories.length; i < len; i++) {\n                        let dv1Identity = dv1Categories[i].identity;\n                        let dv2Identity = dv2Categories[i].identity;\n\n                        let dv1Length = getLengthOptional(dv1Identity);\n                        if (dv1Length !== getLengthOptional(dv2Identity))\n                            return false;\n\n                        for (let j = 0; j < dv1Length; j++) {\n                            if (!DataViewScopeIdentity.equals(dv1Identity[j], dv2Identity[j]))\n                                return false;\n                        }\n                    }\n\n                    return true;\n                }\n            }\n\n            return false;\n        }\n\n        function getLengthOptional(identity: DataViewScopeIdentity[]): number {\n            if (identity)\n                return identity.length;\n\n            return 0;\n        }\n\n        export function areMetadataColumnsEquivalent(column1: DataViewMetadataColumn, column2: DataViewMetadataColumn): boolean {\n            if (!column1 && !column2)\n                return true;\n\n            if (!column1 || !column2)\n                return false;\n\n            if (column1.displayName !== column2.displayName)\n                return false;\n\n            if (column1.queryName !== column2.queryName)\n                return false;\n\n            if (column1.isMeasure !== column2.isMeasure)\n                return false;\n\n            if (column1.type !== column2.type)\n                return false;\n\n            if (column1.sort !== column2.sort)\n                return false;\n\n            return true;\n        }\n\n        /* Returns true if the metadata columns at the same positions in the array are equivalent. */\n        export function isMetadataEquivalent(metadata1: DataViewMetadata, metadata2: DataViewMetadata): boolean {\n            if (!metadata1 && !metadata2)\n                return true;\n\n            if (!metadata1 || !metadata2)\n                return false;\n\n            let previousColumnsLength = metadata1.columns.length;\n            let newColumnsLength = metadata2.columns.length;\n\n            if (previousColumnsLength !== newColumnsLength)\n                return false;\n\n            for (let i: number = 0; i < newColumnsLength; i++) {\n                if (!DataViewAnalysis.areMetadataColumnsEquivalent(metadata1.columns[i], metadata2.columns[i]))\n                    return false;\n            }\n\n            return true;\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    import ArrayExtensions = jsCommon.ArrayExtensions;\n    import Lazy = jsCommon.Lazy;\n\n    export module DataViewRoleWildcard {\n        export function fromRoles(roles: string[]): DataViewRoleWildcard {\n            return new DataViewRoleWildcardImpl(roles);\n        }\n\n        export function equals(firstRoleWildcard: DataViewRoleWildcard, secondRoleWildcard: DataViewRoleWildcard): boolean {\n            return firstRoleWildcard.key &&\n                secondRoleWildcard.key &&\n                firstRoleWildcard.key === secondRoleWildcard.key &&\n                ArrayExtensions.sequenceEqual<string>(\n                    firstRoleWildcard.roles,\n                    secondRoleWildcard.roles,\n                    (role1: string, role2: string) => role1 === role2);\n        }\n\n        class DataViewRoleWildcardImpl implements DataViewRoleWildcard {\n            private _roles: string[];\n            private _key: Lazy<string>;\n\n            public constructor(roles: string[]) {\n                debug.assertNonEmpty(roles, 'roles');\n\n                this._roles = roles;\n                this._key = new Lazy<string>(() => JSON.stringify(this.roles));\n            }\n\n            public get roles(): string[] {\n                return this._roles;\n            }\n\n            public get key(): string {\n                return this._key.getValue();\n            }\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi {\n\n    export module DataViewScopeIdentity {\n        /** Compares the two DataViewScopeIdentity values for equality. */\n        export function equals(x: DataViewScopeIdentity, y: DataViewScopeIdentity, ignoreCase?: boolean): boolean {\n            // Normalize falsy to null\n            x = x || null;\n            y = y || null;\n\n            if (x === y)\n                return true;\n\n            if (!x !== !y)\n                return false;\n\n            debug.assertValue(x, 'x');\n            debug.assertValue(y, 'y');\n\n            return data.SQExpr.equals(<data.SQExpr>x.expr, <data.SQExpr>y.expr, ignoreCase);\n        }\n\n        export function filterFromIdentity(identities: DataViewScopeIdentity[], isNot?: boolean): data.SemanticFilter {\n            if (_.isEmpty(identities))\n                return;\n            \n            let exprs: data.SQExpr[] = [];\n            for (let identity of identities) {\n                exprs.push(<data.SQExpr>identity.expr);\n            }\n\n            return filterFromExprs(exprs, isNot);\n        }\n\n        export function filterFromExprs(orExprs: data.SQExpr[], isNot?: boolean): data.SemanticFilter {\n            if (_.isEmpty(orExprs))\n                return;\n\n            let resultExpr: data.SQExpr;\n            for (let orExpr of orExprs) {\n                let inExpr = data.ScopeIdentityExtractor.getInExpr(orExpr);\n                if (resultExpr)\n                    resultExpr = data.SQExprBuilder.or(resultExpr, inExpr);\n                else\n                    resultExpr = inExpr || orExpr;\n            }\n            \n            if (resultExpr) {\n                if (isNot)\n                    resultExpr = powerbi.data.SQExprBuilder.not(resultExpr);\n            }\n\n            return powerbi.data.SemanticFilter.fromSQExpr(resultExpr);\n        }\n    }\n\n    export module data {\n        import Lazy = jsCommon.Lazy;\n\n        export function createDataViewScopeIdentity(expr: SQExpr): DataViewScopeIdentity {\n            return new DataViewScopeIdentityImpl(expr);\n        }\n\n        class DataViewScopeIdentityImpl implements DataViewScopeIdentity {\n            private _expr: SQExpr;\n            private _key: Lazy<string>;\n\n            public constructor(expr: SQExpr) {\n                debug.assertValue(expr, 'expr');\n\n                this._expr = expr;\n                this._key = new Lazy(() => SQExprShortSerializer.serialize(expr));\n            }\n\n            public get expr(): SQExpr {\n                return this._expr;\n            }\n\n            public get key(): string {\n                return this._key.getValue();\n            }\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    import Lazy = jsCommon.Lazy;\n\n    export module DataViewScopeWildcard {\n        export function matches(wildcard: DataViewScopeWildcard, instance: DataViewScopeIdentity): boolean {\n            let instanceExprs = ScopeIdentityExtractor.getKeys(<SQExpr>instance.expr);\n            if (!instanceExprs)\n                return false;\n\n            return SQExprUtils.sequenceEqual(<SQExpr[]>wildcard.exprs, instanceExprs);\n        }\n\n        export function equals(firstScopeWildcard: DataViewScopeWildcard, secondScopeWildcard: DataViewScopeWildcard): boolean {\n            return firstScopeWildcard.key === secondScopeWildcard.key &&\n                SQExprUtils.sequenceEqual(<SQExpr[]>firstScopeWildcard.exprs, <SQExpr[]>secondScopeWildcard.exprs);\n        }\n\n        export function fromExprs(exprs: SQExpr[]): DataViewScopeWildcard {\n            return new DataViewScopeWildcardImpl(exprs);\n        }\n\n        class DataViewScopeWildcardImpl implements DataViewScopeWildcard {\n            private _exprs: SQExpr[];\n            private _key: Lazy<string>;\n\n            public constructor(exprs: SQExpr[]) {\n                debug.assertValue(exprs, 'exprs');\n\n                this._exprs = exprs;\n                this._key = new Lazy(() => SQExprShortSerializer.serializeArray(exprs));\n            }\n\n            public get exprs(): SQExpr[] {\n                return this._exprs;\n            }\n\n            public get key(): string {\n                return this._key.getValue();\n            }\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    export interface IColorAllocatorCache {\n        get(key: SQFillRuleExpr): IColorAllocator;\n        register(key: SQFillRuleExpr, colorAllocator: IColorAllocator): this;\n    }\n\n    export function createColorAllocatorCache(): IColorAllocatorCache {\n        return new ColorAllocatorProvider();\n    }\n\n    interface ColorAllocatorCacheEntry {\n        key: SQFillRuleExpr;\n        allocator: IColorAllocator;\n    }\n\n    class ColorAllocatorProvider implements IColorAllocatorCache {\n        private cache: ColorAllocatorCacheEntry[];\n\n        constructor() {\n            this.cache = [];\n        }\n\n        public get(key: SQFillRuleExpr): IColorAllocator {\n            debug.assertValue(key, 'key');\n\n            for (let entry of this.cache) {\n                if (entry.key === key)\n                    return entry.allocator;\n            }\n        }\n\n        public register(key: SQFillRuleExpr, colorAllocator: IColorAllocator): this {\n            debug.assertValue(key, 'key');\n            debug.assertValue(colorAllocator, 'colorAllocator');\n            debug.assert(this.get(key) == null, 'Trying to re-register for same key expr.');\n\n            this.cache.push({\n                key: key,\n                allocator: colorAllocator,\n            });\n\n            return this;\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    /** Responsible for providing specific values to be used by expression and rule evaluation. */\n    export interface IEvalContext {\n        getColorAllocator(expr: SQFillRuleExpr): IColorAllocator;\n        getExprValue(expr: SQExpr): PrimitiveValue;\n        getRoleValue(roleName: string): PrimitiveValue;\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    import RoleKindByQueryRef = DataViewAnalysis.RoleKindByQueryRef;\n\n    export interface DataViewRegressionRunOptions {\n        dataViewMappings: DataViewMapping[];\n        visualDataViews: DataView[];\n        dataRoles: VisualDataRole[];\n        objectDescriptors: DataViewObjectDescriptors;\n        objectDefinitions: DataViewObjectDefinitions;\n        colorAllocatorFactory: IColorAllocatorFactory;\n        transformSelects: DataViewSelectTransform[];\n        metadata: DataViewMetadata;\n        projectionActiveItems: DataViewProjectionActiveItems;\n    }\n\n    export module DataViewRegression {\n        // TODO VSTS 6842046: Currently we are using a constant queryName since we don't have a way to generate\n        // unique ones. There is a bug filed to do this by lawong, so this part will be fixed with that bug.\n        const regressionXQueryName: string = 'RegressionX';\n        const regressionSeriesQueryName: string = 'RegressionSeries';\n        export const regressionYQueryName: string = 'RegressionY';\n\n        export function run(options: DataViewRegressionRunOptions): DataView[] {\n            debug.assertValue(options, 'options');\n\n            let dataViewMappings: DataViewMapping[] = options.dataViewMappings;\n            let visualDataViews: DataView[] = options.visualDataViews;\n            let dataRoles: VisualDataRole[] = options.dataRoles;\n            let objectDescriptors: DataViewObjectDescriptors = options.objectDescriptors;\n            let objectDefinitions: DataViewObjectDefinitions = options.objectDefinitions;\n            let colorAllocatorFactory: IColorAllocatorFactory = options.colorAllocatorFactory;\n            let transformSelects: DataViewSelectTransform[] = options.transformSelects;\n            let projectionActiveItems = options.projectionActiveItems;\n            let metadata: DataViewMetadata = options.metadata;\n\n            if (!_.isEmpty(visualDataViews) && transformSelects && metadata) {\n                // compute linear regression line if applicable\n                let roleKindByQueryRef: RoleKindByQueryRef = DataViewSelectTransform.createRoleKindFromMetadata(transformSelects, metadata);\n                let projections: QueryProjectionsByRole = DataViewSelectTransform.projectionsFromSelects(transformSelects, projectionActiveItems);\n                if (!roleKindByQueryRef || !projections || _.isEmpty(dataViewMappings) || !objectDescriptors || !objectDefinitions)\n                    return visualDataViews;\n\n                let applicableDataViewMappings: DataViewMapping[] = DataViewAnalysis.chooseDataViewMappings(projections, dataViewMappings, roleKindByQueryRef, objectDescriptors, objectDefinitions).supportedMappings;\n\n                if (applicableDataViewMappings) {\n                    let regressionDataViewMapping: DataViewMapping = _.find(applicableDataViewMappings, (dataViewMapping) => {\n                        return dataViewMapping.usage && dataViewMapping.usage.regression;\n                    });\n\n                    if (regressionDataViewMapping) {\n                        let regressionDataViews: DataView[] = [];\n                        for (let visualDataView of visualDataViews) {\n                            let regressionDataView: DataView = this.linearRegressionTransform(visualDataView, dataRoles, regressionDataViewMapping, objectDescriptors, objectDefinitions, colorAllocatorFactory);\n\n                            if (regressionDataView)\n                                regressionDataViews.push(regressionDataView);\n                        }\n\n                        if (!_.isEmpty(regressionDataViews))\n                            visualDataViews.push(...regressionDataViews);\n                    }\n                }\n            }\n\n            return visualDataViews;\n        }\n\n        /**\n         * This function will compute the linear regression algorithm on the sourceDataView and create a new dataView.\n         * It works on scalar axis only.\n         * The algorithm is as follows\n         *\n         * 1. Find the cartesian X and Y roles and the columns that correspond to those roles\n         * 2. Get the data points, (X, Y) pairs, for each series, combining if needed.\n         * 3. Compute the X and Y points for regression line using Y = Slope * X + Intercept\n         * If highlights values are present, repeat steps 2 & 3 using highlight values.\n         * 4. Create the new dataView using the points computed above\n         */\n        export function linearRegressionTransform(\n            sourceDataView: DataView,\n            dataRoles: VisualDataRole[],\n            regressionDataViewMapping: DataViewMapping,\n            objectDescriptors: DataViewObjectDescriptors,\n            objectDefinitions: DataViewObjectDefinitions,\n            colorAllocatorFactory: IColorAllocatorFactory): DataView {\n            debug.assertValue(sourceDataView, 'sourceDataView');\n            debug.assertValue(sourceDataView.categorical, 'sourceDataView.categorical');\n            debug.assertValue(dataRoles, 'dataRoles');\n            debug.assertValue(objectDescriptors, 'objectDescriptors');\n            debug.assertValue(objectDefinitions, 'objectDefinitions');\n            debug.assertValue(colorAllocatorFactory, 'colorAllocatorFactory');\n\n            if (!sourceDataView.categorical)\n                return;\n\n            // Step 1\n            let xColumns: DataViewCategoricalColumn[] = getColumnsForCartesianRoleKind(CartesianRoleKind.X, sourceDataView.categorical, dataRoles);\n            let yColumns: DataViewCategoricalColumn[] = getColumnsForCartesianRoleKind(CartesianRoleKind.Y, sourceDataView.categorical, dataRoles);\n\n            if (_.isEmpty(xColumns) || _.isEmpty(yColumns))\n                return;\n\n            let xColumnSource = xColumns[0].source;\n            let yColumnSource = yColumns[0].source;\n\n            let combineSeries = true;\n            if (regressionDataViewMapping.usage && regressionDataViewMapping.usage.regression && sourceDataView.metadata.objects) {\n                let regressionUsage = regressionDataViewMapping.usage.regression;\n\n                let combineSeriesPropertyId = regressionUsage['combineSeries'];\n                if (combineSeriesPropertyId) {\n                    combineSeries = DataViewObjects.getValue<boolean>(sourceDataView.metadata.objects, combineSeriesPropertyId, true);\n                }\n            }\n\n            // Step 2\n            let dataPointsBySeries = getDataPointsBySeries(xColumns, yColumns, combineSeries, /* preferHighlights */ false);\n            let lineDefSet = calculateLineDefinitions(dataPointsBySeries);\n            if (!lineDefSet)\n                return;\n\n            let xMin = lineDefSet.xMin;\n            let xMax = lineDefSet.xMax;\n\n            let shouldComputeHightlights = hasHighlightValues(yColumns) || hasHighlightValues(xColumns);\n            let highlightsLineDefSet: LineDefinitionSet;\n            if (shouldComputeHightlights) {\n                let highlightDataPointsBySeries = getDataPointsBySeries(xColumns, yColumns, combineSeries, /* preferHighlights */ true);\n                highlightsLineDefSet = calculateLineDefinitions(highlightDataPointsBySeries);\n                if (highlightsLineDefSet) {\n                    xMin = _.min([xMin, highlightsLineDefSet.xMin]);\n                    xMax = _.max([xMax, highlightsLineDefSet.xMax]);\n                }\n                else {\n                    shouldComputeHightlights = false;\n                }\n            }\n\n            // Step 3\n            let valuesByTrend: number[][] = [];\n            for (let trend of lineDefSet.lineDefs) {\n                valuesByTrend.push(computeLineYValues(trend, +xMin, +xMax));\n            }\n\n            let highlightsByTrend: number[][];\n            if (shouldComputeHightlights) {\n                highlightsByTrend = [];\n                for (let trend of highlightsLineDefSet.lineDefs) {\n                    highlightsByTrend.push(computeLineYValues(trend, +xMin, +xMax));\n                }\n            }\n\n            // Step 4\n            let groupValues: PrimitiveValue[];\n            if (combineSeries) {\n                groupValues = ['combinedRegressionSeries'];\n            }\n            else {\n                // If we are producing a trend line per series we need to maintain the group identities so that we can map between the\n                // trend line and the original series (to match the color for example).\n                if (sourceDataView.categorical.values.source) {\n                    // Source data view has dynamic series.\n                    let groups = sourceDataView.categorical.values.grouped();\n                    groupValues = _.map(groups, (group) => group.name);\n                }\n                else {\n                    // Source data view has static or no series.\n                    groupValues = _.map(yColumns, (column) => column.source.queryName);\n                }\n            }\n\n            // Step 5\n            let regressionDataView: DataView = createRegressionDataView(\n                xColumnSource,\n                yColumnSource,\n                groupValues,\n                [xMin, xMax],\n                valuesByTrend,\n                highlightsByTrend,\n                sourceDataView,\n                regressionDataViewMapping,\n                objectDescriptors,\n                objectDefinitions,\n                colorAllocatorFactory);\n\n            return regressionDataView;\n        }\n\n        function calculateLineDefinitions(dataPointsBySeries: DataPointSet[]): LineDefinitionSet {\n            let xMin: PrimitiveValue;\n            let xMax: PrimitiveValue;\n            let lineDefs: LineDefinition[] = [];\n            for (let dataPointSet of dataPointsBySeries) {\n                let unsortedXValues: PrimitiveValue[] = dataPointSet.xValues;\n                let unsortedYValues: PrimitiveValue[] = dataPointSet.yValues;\n\n                if (_.isEmpty(unsortedXValues) || _.isEmpty(unsortedYValues))\n                    return;\n\n                // get the data type for each column; we will have null type when dataPoints have different type or if a value is null\n                let xDataType: string = getDataType(unsortedXValues);\n                if (!xDataType)\n                    return;\n                let yDataType: string = getDataType(unsortedYValues);\n                if (!yDataType)\n                    return;\n\n                let sortedDataPointSet: DataPointSet = sortValues(unsortedXValues, unsortedYValues);\n                let minCategoryValue: PrimitiveValue = sortedDataPointSet.xValues[0];\n                let maxCategoryValue: PrimitiveValue = sortedDataPointSet.xValues[sortedDataPointSet.xValues.length - 1];\n\n                let lineDef: LineDefinition = computeRegressionLine(sortedDataPointSet.xValues, sortedDataPointSet.yValues);\n\n                xMin = _.min([xMin, minCategoryValue]);\n                xMax = _.max([xMax, maxCategoryValue]);\n\n                lineDefs.push(lineDef);\n            }\n\n            return {\n                lineDefs: lineDefs,\n                xMin: xMin,\n                xMax: xMax,\n            };\n        }\n\n        function getColumnsForCartesianRoleKind(roleKind: CartesianRoleKind, categorical: DataViewCategorical, roles: VisualDataRole[]): DataViewCategoricalColumn[] {\n            debug.assertValue(roleKind, 'roleKind');\n            debug.assertValue(categorical, 'categorical');\n\n            let columns = getColumnsWithRoleKind(roleKind, categorical.values, roles);\n            if (!_.isEmpty(columns))\n                return columns;\n\n            let categories = categorical.categories;\n            if (_.isEmpty(categories))\n                return;\n\n            debug.assert(categories.length === 1, 'composite category columns not supported');\n            let categoryColumn = categories[0];\n            columns = getColumnsWithRoleKind(roleKind, [categoryColumn], roles);\n            if (!_.isEmpty(columns))\n                return columns;\n        }\n\n        function getColumnsWithRoleKind(roleKind: CartesianRoleKind, columns: DataViewCategoricalColumn[], roles: VisualDataRole[]): DataViewCategoricalColumn[] {\n            if (_.isEmpty(columns))\n                return;\n\n            return _.filter(columns, (column) => {\n                for (let roleName in column.source.roles) {\n                    if (!column.source.roles[roleName])\n                        continue;\n\n                    let role = _.find(roles, (role) => role.name === roleName);\n                    if (role && role.cartesianKind === roleKind)\n                        return true;\n                }\n\n                return false;\n            });\n        }\n\n        function getDataType(values: PrimitiveValue[]): string {\n            let firstNonNull: PrimitiveValue = _.find(values, (value) => value != null);\n            if (firstNonNull == null)\n                return;\n\n            let dataType: string = typeof firstNonNull;\n\n            if (_.some(values, (value) => value != null && typeof value !== dataType))\n                return;\n\n            return dataType;\n        }\n\n        function sortValues(unsortedXValues: PrimitiveValue[], unsortedYValues: PrimitiveValue[]): DataPointSet {\n            debug.assertValue(unsortedXValues, 'unsortedXValues');\n            debug.assertValue(unsortedYValues, 'unsortedYValues');\n\n            let zippedValues = _.zip(unsortedXValues, unsortedYValues);\n            let [xValues, yValues] = _.chain(zippedValues)\n                .filter((valuePair) => valuePair[0] != null && valuePair[1] != null)\n                .sortBy((valuePair) => valuePair[0])\n                .unzip()\n                .value();\n\n            return {\n                xValues: xValues,\n                yValues: yValues\n            };\n        }\n\n        /**\n         * Computes a line definition using linear regression.\n         *   xBar: average of X values, yBar: average of Y values\n         *   ssXX: sum of squares of X values = Sum(xi - xBar)^2\n         *   ssXY: sum of squares of X and Y values  = Sum((xi - xBar)(yi - yBar)\n         *   Slope: ssXY / ssXX\n         *   Intercept: yBar - xBar * slope\n         */\n        function computeRegressionLine(xValues: number[], yValues: number[]): LineDefinition {\n            debug.assertValue(xValues, 'xValues');\n            debug.assertValue(yValues, 'yValues');\n\n            let xBar = _.sum(xValues) / xValues.length;\n            let yBar = _.sum(yValues) / yValues.length;\n\n            let ssXX = _.chain(xValues)\n                .map((x) => {\n                    return (x - xBar) ** 2;\n                })\n                .sum();\n\n            let ssXY = _.chain(xValues)\n                .map((x, i) => {\n                    return (x - xBar) * (yValues[i] - yBar);\n                })\n                .sum();\n\n            let slope = ssXY / ssXX;\n            let intercept = yBar - (xBar * slope);\n\n            return {\n                slope: slope,\n                intercept: intercept\n            };\n        }\n\n        function computeLineYValues(lineDef: LineDefinition, x1: number, x2: number): number[] {\n            return [x1 * lineDef.slope + lineDef.intercept, x2 * lineDef.slope + lineDef.intercept];\n        }\n\n        function getValuesFromColumn(column: DataViewCategoricalColumn, preferHighlights: boolean): PrimitiveValue[] {\n            if (preferHighlights) {\n                // Attempt to use highlight values. When X is categorical, we may not have highlight values so we should fall back to the non-highlight values.\n                let valueColumn = <DataViewValueColumn>column;\n                if (valueColumn.highlights) {\n                    return valueColumn.highlights;\n                }\n            }\n\n            return column.values;\n        }\n\n        function getDataPointsBySeries(xColumns: DataViewCategoricalColumn[], yColumns: DataViewCategoricalColumn[], combineSeries: boolean, preferHighlights: boolean): DataPointSet[] {\n            let dataPointsBySeries: DataPointSet[] = [];\n            let xValueArray: PrimitiveValue[][] = _.map(xColumns, (column) => getValuesFromColumn(column, preferHighlights));\n            let seriesYValues: PrimitiveValue[][] = _.map(yColumns, (column) => getValuesFromColumn(column, preferHighlights));\n\n            let multipleXValueColumns: boolean = xColumns.length > 1;\n            for (let i = 0; i < seriesYValues.length; i++) {\n                let xValues = multipleXValueColumns ? xValueArray[i] : xValueArray[0];\n                let yValues = seriesYValues[i];\n\n                if (combineSeries && dataPointsBySeries.length > 0) {\n                    dataPointsBySeries[0].xValues = dataPointsBySeries[0].xValues.concat(xValues);\n                    dataPointsBySeries[0].yValues = dataPointsBySeries[0].yValues.concat(yValues);\n                }\n                else {\n                    dataPointsBySeries.push({\n                        xValues: xValues,\n                        yValues: yValues,\n                    });\n                }\n            }\n\n            return dataPointsBySeries;\n        }\n\n        function createRegressionDataView(\n            xColumnSource: DataViewMetadataColumn,\n            yColumnSource: DataViewMetadataColumn,\n            groupValues: PrimitiveValue[],\n            categories: PrimitiveValue[],\n            values: PrimitiveValue[][],\n            highlights: PrimitiveValue[][],\n            sourceDataView: DataView,\n            regressionDataViewMapping: DataViewMapping,\n            objectDescriptors: DataViewObjectDescriptors,\n            objectDefinitions: DataViewObjectDefinitions,\n            colorAllocatorFactory: IColorAllocatorFactory): DataView {\n            debug.assertValue(xColumnSource, 'xColumnSource');\n            debug.assertValue(yColumnSource, 'yColumnSource');\n            debug.assertValue(categories, 'categories');\n            debug.assertValue(values, 'values');\n            debug.assertValue(sourceDataView, 'sourceDataView');\n            debug.assertValue(objectDescriptors, 'objectDescriptors');\n            debug.assertValue(objectDefinitions, 'objectDefinitions');\n            debug.assertValue(colorAllocatorFactory, 'colorAllocatorFactory');\n            debug.assertAnyValue(highlights, 'highlights');\n            debug.assert(!highlights || highlights.length === values.length, 'highlights should have the same length as values');\n\n            let xRole: string = (<DataViewRoleForMapping>regressionDataViewMapping.categorical.categories).for.in;\n            let grouped = (<DataViewGroupedRoleMapping>regressionDataViewMapping.categorical.values).group;\n            let yRole: string;\n            let seriesRole: string;\n            if (grouped && !_.isEmpty(grouped.select)) {\n                yRole = (<DataViewRoleForMapping>grouped.select[0]).for ?\n                    (<DataViewRoleForMapping>grouped.select[0]).for.in :\n                    (<DataViewRoleBindMapping>grouped.select[0]).bind.to;\n                seriesRole = grouped.by;\n            }\n            if (!yRole || !seriesRole)\n                return;\n\n            let categoricalRoles: { [name: string]: boolean } = {[xRole]: true};\n            let valueRoles: { [name: string]: boolean } = {[yRole]: true};\n            let seriesRoles: { [name: string]: boolean } = {[seriesRole]: true};\n\n            let valuesBySeries: DataViewBuilderSeriesData[][] = [];\n            for (let index in values) {\n                let seriesData: DataViewBuilderSeriesData = {\n                    values: values[index],\n                };\n\n                if (highlights)\n                    seriesData.highlights = highlights[index];\n\n                valuesBySeries.push([seriesData]);\n            }\n\n            let regressionDataView: DataView = createCategoricalDataViewBuilder()\n                .withCategory({\n                    source: {\n                        displayName: xColumnSource.displayName,\n                        queryName: regressionXQueryName,\n                        type: xColumnSource.type,\n                        isMeasure: false,\n                        roles: categoricalRoles\n                    },\n                    values: categories,\n                    identityFrom: {\n                        fields: [SQExprBuilder.columnRef(SQExprBuilder.entity('s', 'RegressionEntity'), 'RegressionCategories')],\n                    },\n                })\n                .withGroupedValues({\n                    groupColumn: {\n                        source: {\n                            displayName: yColumnSource.displayName + 'Regression',\n                            queryName: regressionSeriesQueryName,\n                            type: yColumnSource.type,\n                            isMeasure: yColumnSource.isMeasure,\n                            roles: seriesRoles\n                        },\n                        values: groupValues,\n                        identityFrom: {\n                            fields: [SQExprBuilder.columnRef(SQExprBuilder.entity('s', 'RegressionEntity'), 'RegressionSeries')],\n                        }\n                    },\n                    valueColumns: [{\n                        source: {\n                            displayName: yColumnSource.displayName,\n                            queryName: regressionYQueryName,\n                            type: yColumnSource.type,\n                            isMeasure: yColumnSource.isMeasure,\n                            roles: valueRoles\n                        },\n                    }],\n                    data: valuesBySeries\n                })\n                .build();\n            DataViewTransform.transformObjects(regressionDataView, data.StandardDataViewKinds.Categorical, objectDescriptors, objectDefinitions, [], colorAllocatorFactory);\n            return regressionDataView;\n        }\n\n        function hasHighlightValues(columns: DataViewCategoricalColumn[]): boolean {\n            return _.any(columns, (column) => {\n                let valueColumn = <DataViewValueColumn>column;\n                return valueColumn.highlights != null;\n            });\n        }\n    }\n\n    interface DataPointSet {\n        xValues: any[];\n        yValues: any[];\n    }\n\n    interface LineDefinition {\n        slope: number;\n        intercept: number;\n    }\n\n    interface LineDefinitionSet {\n        lineDefs: LineDefinition[];\n        xMin: PrimitiveValue;\n        xMax: PrimitiveValue;\n    }\n}\n","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    import RoleKindByQueryRef = DataViewAnalysis.RoleKindByQueryRef;\n\n    export interface DataViewSelectTransform {\n        displayName?: string;\n        queryName?: string;\n        format?: string;\n        type?: ValueType;\n        roles?: { [roleName: string]: boolean };\n        kpi?: DataViewKpiColumnMetadata;\n        sort?: SortDirection;\n        expr?: SQExpr;\n        discourageAggregationAcrossGroups?: boolean;\n\n        /** Describes the default value applied to a column, if any. */\n        defaultValue?: DefaultValueDefinition;\n    }\n\n    export module DataViewSelectTransform {\n        /** Convert selection info to projections */\n        export function projectionsFromSelects(selects: DataViewSelectTransform[], projectionActiveItems: DataViewProjectionActiveItems): QueryProjectionsByRole {\n            debug.assertAnyValue(selects, \"selects\");\n            debug.assertAnyValue(projectionActiveItems, \"projectionActiveItems\");\n\n            let projections: QueryProjectionsByRole = {};\n            for (let select of selects) {\n                if (!select)\n                    continue;\n\n                let roles = select.roles;\n                if (!roles)\n                    continue;\n\n                for (let roleName in roles) {\n                    if (roles[roleName]) {\n                        let qp = projections[roleName];\n                        if (!qp)\n                            qp = projections[roleName] = new QueryProjectionCollection([]);\n                        qp.all().push({ queryRef: select.queryName });\n\n                        if (projectionActiveItems && projectionActiveItems[roleName])\n                            qp.activeProjectionRefs = _.map(projectionActiveItems[roleName], (activeItem: DataViewProjectionActiveItemInfo) => activeItem.queryRef);\n                    }\n                }\n            }\n\n            return projections;\n        }\n\n        /** Use selections and metadata to fashion query role kinds */\n        export function createRoleKindFromMetadata(selects: DataViewSelectTransform[], metadata: DataViewMetadata): RoleKindByQueryRef {\n            let roleKindByQueryRef: DataViewAnalysis.RoleKindByQueryRef = {};\n            for (let column of metadata.columns) {\n                if ((!column.index && column.index !== 0) || column.index < 0 || column.index >= selects.length)\n                    continue;\n\n                let select = selects[column.index];\n                if (select) {\n                    let queryRef = select.queryName;\n                    if (queryRef && roleKindByQueryRef[queryRef] === undefined) {\n                        roleKindByQueryRef[queryRef] = column.isMeasure ? VisualDataRoleKind.Measure : VisualDataRoleKind.Grouping;\n                    }\n                }\n            }\n            return roleKindByQueryRef;\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    export interface ICategoricalEvalContext extends IEvalContext {\n        setCurrentRowIndex(index: number): void;\n    }\n\n    export function createCategoricalEvalContext(colorAllocatorProvider: IColorAllocatorCache, dataViewCategorical: DataViewCategorical): ICategoricalEvalContext {\n        return new CategoricalEvalContext(colorAllocatorProvider, dataViewCategorical);\n    }\n\n    class CategoricalEvalContext implements ICategoricalEvalContext {\n        private colorAllocatorProvider: IColorAllocatorCache;\n        private dataView: DataViewCategorical;\n        private columnsByRole: { [name: string]: DataViewCategoricalColumn };\n        private index: number;\n\n        constructor(colorAllocatorProvider: IColorAllocatorCache, dataView: DataViewCategorical) {\n            debug.assertValue(colorAllocatorProvider, 'colorAllocatorProvider');\n            debug.assertValue(dataView, 'dataView');\n\n            this.colorAllocatorProvider = colorAllocatorProvider;\n            this.dataView = dataView;\n            this.columnsByRole = {};\n        }\n\n        public getColorAllocator(expr: SQFillRuleExpr): IColorAllocator {\n            return this.colorAllocatorProvider.get(expr);\n        }\n\n        public getExprValue(expr: SQExpr): PrimitiveValue {\n            return;\n        }\n\n        public getRoleValue(roleName: string): PrimitiveValue {\n            let columnsByRole = this.columnsByRole;\n            let column = columnsByRole[roleName];\n            if (!column)\n                column = columnsByRole[roleName] = findRuleInputColumn(this.dataView, roleName);\n            \n            if (!column)\n                return;\n\n            let index = this.index;\n            if (index != null)\n                return column.values[this.index];\n        }\n\n        public setCurrentRowIndex(index: number): void {\n            debug.assertValue(index, 'index');\n\n            this.index = index;\n        }\n    }\n\n    function findRuleInputColumn(dataViewCategorical: DataViewCategorical, inputRole: string): DataViewCategoricalColumn {\n        debug.assertValue(dataViewCategorical, 'dataViewCategorical');\n\n        return findRuleInputInColumns(dataViewCategorical.values, inputRole) ||\n            findRuleInputInColumns(dataViewCategorical.categories, inputRole);\n    }\n\n    function findRuleInputInColumns(columns: DataViewCategoricalColumn[], inputRole: string): DataViewCategoricalColumn {\n        debug.assertAnyValue(columns, 'columns');\n\n        if (!columns)\n            return;\n\n        for (let column of columns) {\n            let roles = column.source.roles;\n            if (!roles || !roles[inputRole])\n                continue;\n\n            return column;\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    import SQExpr = powerbi.data.SQExpr;\n\n    export interface ITableEvalContext extends IEvalContext {\n        setCurrentRowIndex(index: number): void;\n    }\n\n    export function createTableEvalContext(colorAllocatorProvider: IColorAllocatorCache, dataViewTable: DataViewTable, selectTransforms: DataViewSelectTransform[]): ITableEvalContext {\n        return new TableEvalContext(colorAllocatorProvider, dataViewTable, selectTransforms);\n    }\n\n    class TableEvalContext implements ITableEvalContext {\n        private colorAllocatorProvider: IColorAllocatorCache;\n        private dataView: DataViewTable;\n        private rowIdx: number;\n        private selectTransforms: DataViewSelectTransform[];\n\n        constructor(colorAllocatorProvider: IColorAllocatorCache, dataView: DataViewTable, selectTransforms: DataViewSelectTransform[]) {\n            debug.assertValue(colorAllocatorProvider, 'colorAllocatorProvider');\n            debug.assertValue(dataView, 'dataView');\n            debug.assertValue(selectTransforms, 'selectTransforms');\n\n            this.colorAllocatorProvider = colorAllocatorProvider;\n            this.dataView = dataView;\n            this.selectTransforms = selectTransforms;\n        }\n\n        public getColorAllocator(expr: SQFillRuleExpr): IColorAllocator {\n            return this.colorAllocatorProvider.get(expr);\n        }\n\n        public getExprValue(expr: SQExpr): PrimitiveValue {\n            debug.assertValue(expr, 'expr');\n\n            let rowIdx = this.rowIdx;\n            if (rowIdx == null)\n                return;\n\n            return getExprValueFromTable(expr, this.selectTransforms, this.dataView, rowIdx);\n        }\n\n        public getRoleValue(roleName: string): PrimitiveValue {\n            return;\n        }\n\n        public setCurrentRowIndex(index: number): void {\n            debug.assertValue(index, 'index');\n\n            this.rowIdx = index;\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    export class RuleEvaluation {\n        // NOTE: even though this class has no behaviour, we still use a class to facilitate instanceof checks.\n\n        public evaluate(evalContext: IEvalContext): any {\n            debug.assertFail('Abstract method RuleEvaluation.evaluate not implemented.');\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    export class ColorRuleEvaluation extends RuleEvaluation {\n        private inputRole: string;\n        private allocator: IColorAllocator;\n\n        constructor(inputRole: string, allocator: IColorAllocator) {\n            debug.assertValue(inputRole, 'inputRole');\n            debug.assertValue(allocator, 'allocator');\n\n            super();\n            this.inputRole = inputRole;\n            this.allocator = allocator;\n        }\n\n        public evaluate(evalContext: IEvalContext): any {\n            debug.assertValue(evalContext, 'evalContext');\n\n            let value: any = evalContext.getRoleValue(this.inputRole);\n            if (value !== undefined)\n                return this.allocator.color(value);\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data.utils {\n    import inherit = Prototype.inherit;\n    import inheritSingle = Prototype.inheritSingle;\n    import ArrayExtensions = jsCommon.ArrayExtensions;\n\n    export module DataViewMatrixUtils {\n\n        /**\n         * Invokes the specified callback once per leaf nodes (including root-level leaves and descendent leaves) of the \n         * specified rootNodes, with an optional index parameter in the callback that is the 0-based index of the \n         * particular leaf node in the context of this forEachLeafNode(...) invocation.\n         *\n         * If rootNodes is null or undefined or empty, the specified callback will not get invoked.\n         *\n         * The treePath parameter in the callback is an ordered set of nodes that form the path from the specified \n         * rootNodes down to the leafNode argument itself.  If callback leafNode is one of the specified rootNodes,\n         * then treePath will be an array of length 1 containing that very node.\n         *\n         * IMPORTANT: The treePath array passed to the callback will be modified after the callback function returns!\n         * If your callback needs to retain a copy of the treePath, please clone the array before returning.\n         */\n        export function forEachLeafNode(\n            rootNodes: DataViewMatrixNode | DataViewMatrixNode[],\n            callback: (leafNode: DataViewMatrixNode, index?: number, treePath?: DataViewMatrixNode[]) => void): void {\n            debug.assertAnyValue(rootNodes, 'rootNodes');\n            debug.assertValue(callback, 'callback');\n\n            // Note: Don't do \"if (!_.isEmpty(rootNodes))\" for checking whether rootNodes is an empty array DataViewMatrixNode[],\n            // because rootNodes can also be an non-array DataViewMatrixNode, and an empty object can be a valid root node DataViewMatrixNode, \n            // for the fact that all the properties on DataViewMatrixNode are optional...\n            if (rootNodes) {\n                if (isNodeArray(rootNodes)) {\n                    let index = 0;\n                    for (let rootNode of rootNodes) {\n                        if (rootNode) {\n                            index = forEachLeafNodeRecursive(rootNode, index, [], callback);\n                        }\n                    }\n                }\n                else {\n                    forEachLeafNodeRecursive(rootNodes, 0, [], callback);\n                }\n            }\n        }\n\n        function isNodeArray(nodeOrNodeArray: DataViewMatrixNode | DataViewMatrixNode[]): nodeOrNodeArray is DataViewMatrixNode[] {\n            return ArrayExtensions.isArrayOrInheritedArray(nodeOrNodeArray);\n        }\n\n        /**\n         * Recursively traverses to each leaf node of the specified matrixNode and invokes callback with each of them.\n         * Returns the index for the next node after the last node that this function invokes callback with.\n         *\n         * @treePath an array that contains the path from the specified rootNodes in forEachLeafNode() down to the parent of the argument matrixNode (i.e. treePath does not contain the matrixNode argument yet).\n         */\n        function forEachLeafNodeRecursive(\n            matrixNode: DataViewMatrixNode,\n            nextIndex: number,\n            treePath: DataViewMatrixNode[],\n            callback: (leafNode: DataViewMatrixNode, index?: number, treePath?: DataViewMatrixNode[]) => void): number {\n            debug.assertValue(matrixNode, 'matrixNode');\n            debug.assertValue(treePath, 'treePath');\n            debug.assertValue(callback, 'callback');\n\n            // If treePath already contains matrixNode, then either one of the following errors has happened:\n            // 1. the caller code mistakenly added matrixNode to treePath, or\n            // 2. the callback modified treePath by adding a node to it, or\n            // 3. the matrix hierarchy contains a cyclical node reference.');\n            debug.assert(!_.contains(treePath, matrixNode),\n                'pre-condition: treePath must not already contain matrixNode');\n\n            treePath.push(matrixNode);\n\n            if (_.isEmpty(matrixNode.children)) { // if it is a leaf node\n                callback(matrixNode, nextIndex, treePath);\n                nextIndex++;\n            }\n            else {\n                let children = matrixNode.children;\n                for (let nextChild of children) {\n                    if (nextChild) {\n                        nextIndex = forEachLeafNodeRecursive(nextChild, nextIndex, treePath, callback);\n                    }\n                }\n            }\n\n            debug.assert(_.last(treePath) === matrixNode, 'pre-condition: the callback given to forEachLeafNode() is not supposed to modify the treePath argument array.');\n            treePath.pop();\n\n            return nextIndex;\n        }\n\n        /**\n         * Returned an object tree where each node and its children property are inherited from the specified node \n         * hierarchy, from the root down to the nodes at the specified deepestLevelToInherit, inclusively.\n         *\n         * The inherited nodes at level === deepestLevelToInherit will NOT get an inherited version of children array \n         * property, i.e. its children property is the same array object referenced in the input node's object tree.\n         *\n         * @param node The input node with the hierarchy object tree.\n         * @param deepestLevelToInherit The highest level for a node to get inherited. See DataViewMatrixNode.level property.\n         * @param useInheritSingle If true, then a node will get inherited in the returned object tree only if it is \n         * not already an inherited object. Same goes for the node's children property.  This is useful for creating \n         * \"visual DataView\" objects from \"query DataView\" objects, as object inheritance is the mechanism for \n         * \"visual DataView\" to override properties in \"query DataView\", and that \"query DataView\" never contains \n         * inherited objects.\n         */\n        export function inheritMatrixNodeHierarchy(\n            node: DataViewMatrixNode,\n            deepestLevelToInherit: number,\n            useInheritSingle: boolean): DataViewMatrixNode {\n            debug.assertValue(node, 'node');\n            debug.assert(deepestLevelToInherit >= 0, 'deepestLevelToInherit >= 0');\n            debug.assertValue(useInheritSingle, 'useInheritSingle');\n\n            let returnNode = node;\n\n            // Note: The level property of DataViewMatrix.rows.root and DataViewMatrix.columns.root are always undefined.\n            // Also, in a matrix with multiple column grouping fields and multiple value fields, the DataViewMatrixNode\n            // for the Grand Total column in the column hierarchy will have children nodes where level > (parent.level + 1):\n            //  {\n            //    \"level\": 0,\n            //    \"isSubtotal\": true,\n            //    \"children\": [\n            //      { \"level\": 2, \"isSubtotal\": true },\n            //      { \"level\": 2, \"levelSourceIndex\": 1, \"isSubtotal\": true }\n            //    ]\n            //  }\n            let isRootNode = _.isUndefined(node.level);\n            let shouldInheritCurrentNode = isRootNode || (node.level <= deepestLevelToInherit);\n            if (shouldInheritCurrentNode) {\n                let inheritFunc = useInheritSingle ? inheritSingle : inherit;\n                let inheritedNode: DataViewMatrixNode = inheritFunc(node);\n\n                let shouldInheritChildNodes = isRootNode || (node.level < deepestLevelToInherit);\n                if (shouldInheritChildNodes && !_.isEmpty(node.children)) {\n                    inheritedNode.children = inheritFunc(node.children); // first, make an inherited array\n                    for (let i = 0, ilen = inheritedNode.children.length; i < ilen; i++) {\n                        inheritedNode.children[i] =\n                            inheritMatrixNodeHierarchy(inheritedNode.children[i], deepestLevelToInherit, useInheritSingle);\n                    }\n                }\n\n                returnNode = inheritedNode;\n            }\n\n            return returnNode;\n        }\n\n        /**\n         * Returns true if the specified matrixOrHierarchy contains any composite grouping, i.e. a grouping on multiple columns.\n         * An example of composite grouping is one on [Year, Quarter, Month], where a particular group instance can have\n         * Year === 2016, Quarter === 'Qtr 1', Month === 1.\n         *\n         * Returns false if the specified matrixOrHierarchy does not contain any composite group, \n         * or if matrixOrHierarchy is null or undefined.\n         */\n        export function containsCompositeGroup(matrixOrHierarchy: DataViewMatrix | DataViewHierarchy): boolean {\n            debug.assertAnyValue(matrixOrHierarchy, 'matrixOrHierarchy');\n\n            let hasCompositeGroup = false;\n\n            if (matrixOrHierarchy) {\n                if (isMatrix(matrixOrHierarchy)) {\n                    hasCompositeGroup = containsCompositeGroup(matrixOrHierarchy.rows) ||\n                        containsCompositeGroup(matrixOrHierarchy.columns);\n                }\n                else {\n                    let hierarchyLevels = matrixOrHierarchy.levels;\n                    if (!_.isEmpty(hierarchyLevels)) {\n                        for (var level of hierarchyLevels) {\n                            // it takes at least 2 columns at the same hierarchy level to form a composite group...\n                            if (level.sources && (level.sources.length >= 2)) {\n\n                                debug.assert(_.all(level.sources, sourceColumn => sourceColumn.isMeasure === level.sources[0].isMeasure),\n                                    'pre-condition: in a valid DataViewMatrix, the source columns in each of its hierarchy levels must either be all non-measure columns (i.e. a grouping level) or all measure columns (i.e. a measure headers level)');\n\n                                // Measure headers are not group\n                                let isMeasureHeadersLevel = level.sources[0].isMeasure;\n                                if (!isMeasureHeadersLevel) {\n                                    hasCompositeGroup = true;\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n\n            return hasCompositeGroup;\n        }\n\n        function isMatrix(matrixOrHierarchy: DataViewMatrix | DataViewHierarchy): matrixOrHierarchy is DataViewMatrix {\n            return 'rows' in matrixOrHierarchy &&\n                'columns' in matrixOrHierarchy &&\n                'valueSources' in matrixOrHierarchy;\n        }\n    }\n} ","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data.utils {\n    export module DataViewMetadataColumnUtils {\n\n        export interface MetadataColumnAndProjectionIndex {\n            /**\n            * A metadata column taken from a source collection, e.g. DataViewHierarchyLevel.sources, DataViewMatrix.valueSources...\n            */\n            metadataColumn: DataViewMetadataColumn;\n\n            /**\n             * The index of this.metadataColumn in its sources collection.\n             *\n             * E.g.1 This can be the value of the property DataViewMatrixGroupValue.levelSourceIndex which is the index of this.metadataColumn in DataViewHierarchyLevel.sources.\n             * E.g.2 This can be the value of the property DataViewMatrixNodeValue.valueSourceIndex which refer to columns in DataViewMatrix.valueSources.\n             */\n            sourceIndex: number;\n\n            /**\n            * The index of this.metadataColumn in the projection ordering of a given role.\n            */\n            projectionOrderIndex: number;\n        }\n\n        /**\n         * Returns true iff the specified metadataColumn is assigned to the specified targetRole.\n         */\n        export function isForRole(metadataColumn: DataViewMetadataColumn, targetRole: string): boolean {\n            debug.assertValue(metadataColumn, 'metadataColumn');\n            debug.assertValue(targetRole, 'targetRole');\n\n            let roles = metadataColumn.roles;\n            return roles && roles[targetRole];\n        }\n\n        /**\n         * Joins each column in the specified columnSources with projection ordering index into a wrapper object.\n         *\n         * Note: In order for this function to reliably calculate the \"source index\" of a particular column, the \n         * specified columnSources must be a non-filtered array of column sources from the DataView, such as\n         * the DataViewHierarchyLevel.sources and DataViewMatrix.valueSources array properties.\n         *\n         * @param columnSources E.g. DataViewHierarchyLevel.sources, DataViewMatrix.valueSources...\n         * @param projection The projection ordering.  It must contain an ordering for the specified role.\n         * @param role The role for getting the relevant projection ordering, as well as for filtering out the irrevalent columns in columnSources.\n         */\n        export function joinMetadataColumnsAndProjectionOrder(\n            columnSources: DataViewMetadataColumn[],\n            projection: DataViewProjectionOrdering,\n            role: string): MetadataColumnAndProjectionIndex[] {\n            debug.assertAnyValue(columnSources, 'columnSources');\n            debug.assert(_.all(columnSources, column => _.isNumber(column.index)),\n                'pre-condition: Every value in columnSources must already have its Select Index property initialized.');\n            debug.assertNonEmpty(projection[role], 'projection[role]');\n            debug.assert(_.all(columnSources, column => !isForRole(column, role) || _.contains(projection[role], column.index)),\n                'pre-condition: The projection order for the specified role must contain the Select Index of every column with matching role in the specified columnSources.');\n\n            let jointResult: MetadataColumnAndProjectionIndex[] = [];\n\n            if (!_.isEmpty(columnSources)) {\n                let projectionOrderSelectIndices = projection[role];\n                let selectIndexToProjectionIndexMap: { [selectIndex: number]: number } = {};\n                for (let i = 0, ilen = projectionOrderSelectIndices.length; i < ilen; i++) {\n                    let selectIndex = projectionOrderSelectIndices[i];\n                    selectIndexToProjectionIndexMap[selectIndex] = i;\n                }\n\n                for (let j = 0, jlen = columnSources.length; j < jlen; j++) {\n                    var column = columnSources[j];\n                    if (isForRole(column, role)) {\n                        let jointColumnInfo: MetadataColumnAndProjectionIndex = {\n                            metadataColumn: column,\n                            sourceIndex: j,\n                            projectionOrderIndex: selectIndexToProjectionIndexMap[column.index]\n                        };\n\n                        jointResult.push(jointColumnInfo);\n                    }\n                }\n            }\n\n            return jointResult;\n        }\n    }\n} ","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    import ArrayNamedItems = jsCommon.ArrayNamedItems;\n\n    export class ConceptualSchema {\n        public entities: ArrayNamedItems<ConceptualEntity>;\n        public capabilities: ConceptualCapabilities;\n\n        /** Indicates whether the user can edit this ConceptualSchema.  This is used to enable/disable model authoring UX. */\n        public canEdit: boolean;\n\n        public findProperty(entityName: string, propertyName: string): ConceptualProperty {\n            let entity = this.entities.withName(entityName);\n            if (!entity || _.isEmpty(entity.properties))\n                return;\n\n            return entity.properties.withName(propertyName);\n        }\n\n        public findHierarchy(entityName: string, name: string): ConceptualHierarchy {\n            let entity = this.entities.withName(entityName);\n            if (!entity || _.isEmpty(entity.hierarchies))\n                return;\n\n            return entity.hierarchies.withName(name);\n        }\n\n        public findHierarchyByVariation(\n            variationEntityName: string,\n            variationColumnName: string,\n            variationName: string,\n            hierarchyName: string): ConceptualHierarchy {\n\n            let variationEntity = this.entities.withName(variationEntityName);\n            if (!variationEntity || _.isEmpty(variationEntity.properties))\n                return;\n\n            let variationProperty = variationEntity.properties.withName(variationColumnName);\n            if (!variationProperty)\n                return;\n\n            let variationColumn = variationProperty.column;\n            if (!variationColumn || _.isEmpty(variationColumn.variations))\n                return;\n\n            let variation = variationColumn.variations.withName(variationName);\n            if (variation) {\n                let targetEntity = variation.navigationProperty ? variation.navigationProperty.targetEntity : variationEntity;\n                if (!targetEntity || _.isEmpty(targetEntity.hierarchies))\n                    return;\n\n                return targetEntity.hierarchies.withName(hierarchyName);\n            }\n        }\n\n        /**\n        * Returns the first property of the entity whose kpi is tied to kpiProperty\n        */\n        public findPropertyWithKpi(entityName: string, kpiProperty: ConceptualProperty): ConceptualProperty {\n            debug.assertValue(kpiProperty, 'kpiProperty');\n\n            let entity = this.entities.withName(entityName);\n            if (!entity || _.isEmpty(entity.properties))\n                return;\n\n            for (let prop of entity.properties) {\n                if (prop &&\n                    prop.measure &&\n                    prop.measure.kpi &&\n                    (prop.measure.kpi.status === kpiProperty || prop.measure.kpi.goal === kpiProperty))\n                    return prop;\n            }\n\n            return;\n        }\n    }\n\n    export interface ConceptualCapabilities {\n        discourageQueryAggregateUsage: boolean;\n        normalizedFiveStateKpiRange: boolean;\n        supportsMedian: boolean;\n        supportsPercentile: boolean;\n        supportsScopedEval: boolean;\n    }\n\n    export interface ConceptualPropertyItemContainer {\n        properties: ArrayNamedItems<ConceptualProperty>;\n        hierarchies?: ArrayNamedItems<ConceptualHierarchy>;\n        displayFolders?: ArrayNamedItems<ConceptualDisplayFolder>;\n    }\n\n    export interface ConceptualPropertyItem {\n        name: string;\n        displayName: string;\n        hidden?: boolean;\n    }\n\n    export interface ConceptualEntity extends ConceptualPropertyItemContainer {\n        name: string;\n        displayName: string;\n        visibility?: ConceptualVisibility;\n        calculated?: boolean;\n        queryable?: ConceptualQueryableState;\n        navigationProperties?: ArrayNamedItems<ConceptualNavigationProperty>;\n    }\n\n    export interface ConceptualDisplayFolder extends ConceptualPropertyItem, ConceptualPropertyItemContainer {\n    }\n\n    export interface ConceptualProperty extends ConceptualPropertyItem {\n        type: ValueType;\n        kind: ConceptualPropertyKind;\n        format?: string;\n        column?: ConceptualColumn;\n        queryable?: ConceptualQueryableState;\n        measure?: ConceptualMeasure;\n        kpiValue?: ConceptualProperty;\n    }\n\n    export interface ConceptualHierarchy extends ConceptualPropertyItem {\n        levels: ArrayNamedItems<ConceptualHierarchyLevel>;\n    }\n\n    export interface ConceptualHierarchyLevel extends ConceptualPropertyItem {\n        column: ConceptualProperty;\n    }\n\n    export interface ConceptualNavigationProperty {\n        name: string;\n        isActive: boolean;\n        sourceColumn?: ConceptualColumn;\n        targetEntity: ConceptualEntity;\n        sourceMultiplicity: ConceptualMultiplicity;\n        targetMultiplicity: ConceptualMultiplicity;\n    }\n\n    export interface ConceptualVariationSource {\n        name: string;\n        isDefault: boolean;\n        navigationProperty?: ConceptualNavigationProperty;\n        defaultHierarchy?: ConceptualHierarchy;\n        defaultProperty?: ConceptualProperty;\n    }\n\n    export interface ConceptualColumn {\n        defaultAggregate?: ConceptualDefaultAggregate;\n        keys?: ArrayNamedItems<ConceptualProperty>;\n        idOnEntityKey?: boolean;\n        calculated?: boolean;\n        defaultValue?: SQConstantExpr;\n        variations?: ArrayNamedItems<ConceptualVariationSource>;\n        aggregateBehavior?: ConceptualAggregateBehavior;\n    }\n\n    export interface ConceptualMeasure {\n        kpi?: ConceptualPropertyKpi;\n    }\n\n    export interface ConceptualPropertyKpi {\n        statusMetadata: DataViewKpiColumnMetadata;\n        trendMetadata?: DataViewKpiColumnMetadata;\n        status?: ConceptualProperty;\n        goal?: ConceptualProperty;\n        trend?: ConceptualProperty;\n    }\n\n    export const enum ConceptualVisibility {\n        Visible = 0,\n        Hidden = 1,\n        ShowAsVariationsOnly = 2,\n        IsPrivate = 4,\n    }\n\n    export const enum ConceptualQueryableState {\n        Queryable = 0,\n        Error = 1,\n    }\n\n    export const enum ConceptualMultiplicity {\n        ZeroOrOne = 0,\n        One = 1,\n        Many = 2,\n    }\n\n    export const enum ConceptualPropertyKind {\n        Column,\n        Measure,\n        Kpi,\n    }\n\n    export const enum ConceptualDefaultAggregate {\n        Default,\n        None,\n        Sum,\n        Count,\n        Min,\n        Max,\n        Average,\n        DistinctCount,\n    }\n\n    // TODO: Remove this (replaced by ValueType)\n    export enum ConceptualDataCategory {\n        None,\n        Address,\n        City,\n        Company,\n        Continent,\n        Country,\n        County,\n        Date,\n        Image,\n        ImageUrl,\n        Latitude,\n        Longitude,\n        Organization,\n        Place,\n        PostalCode,\n        Product,\n        StateOrProvince,\n        WebUrl,\n    }\n\n    export const enum ConceptualAggregateBehavior {\n        Default,\n        DiscourageAcrossGroups,\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi {\n    import ArrayNamedItems = jsCommon.ArrayNamedItems;\n    import StringExtensions = jsCommon.StringExtensions;\n    import FederatedConceptualSchema = powerbi.data.FederatedConceptualSchema;\n    import FieldExprColumnPattern = powerbi.data.FieldExprColumnPattern;\n    import FieldExprColumnAggrPattern = powerbi.data.FieldExprColumnAggrPattern;\n    import FieldExprColumnHierarchyLevelVariationPattern = powerbi.data.FieldExprColumnHierarchyLevelVariationPattern;\n    import FieldExprEntityPattern = powerbi.data.FieldExprEntityPattern;\n    import FieldExprEntityAggrPattern = powerbi.data.FieldExprEntityAggrPattern;\n    import FieldExprHierarchyPattern = powerbi.data.FieldExprHierarchyPattern;\n    import FieldExprHierarchyLevelPattern = powerbi.data.FieldExprHierarchyLevelPattern;\n    import FieldExprHierarchyLevelAggrPattern = powerbi.data.FieldExprHierarchyLevelAggrPattern;\n    import FieldExprMeasurePattern = powerbi.data.FieldExprMeasurePattern;\n    import FieldExprPattern = powerbi.data.FieldExprPattern;\n    import FieldExprPercentilePattern = powerbi.data.FieldExprPercentilePattern;\n    import FieldExprSelectRefPattern = powerbi.data.FieldExprSelectRefPattern;\n    import FieldExprPercentOfGrandTotalPattern = powerbi.data.FieldExprPercentOfGrandTotalPattern;\n    import IFieldExprPatternVisitor = powerbi.data.IFieldExprPatternVisitor;\n    import QueryProjectionsByRole = data.QueryProjectionsByRole;\n\n    export interface ScriptResult {\n        source: string;\n        provider: string;\n    }\n\n    export module ScriptResultUtil {\n\n        export function findScriptResult(dataViewMappings: DataViewMapping[] | data.CompiledDataViewMapping[]): DataViewScriptResultMapping | data.CompiledDataViewScriptResultMapping {\n            if (dataViewMappings && dataViewMappings.length === 1) {\n                return dataViewMappings[0].scriptResult;\n            }\n\n            return undefined;\n        }\n\n        export function extractScriptResult(dataViewMappings: data.CompiledDataViewMapping[]): ScriptResult {\n            let scriptResult = findScriptResult(dataViewMappings);\n            if (scriptResult) {\n                let objects = dataViewMappings[0].metadata.objects;\n                let source: string = DataViewObjects.getValue<string>(objects, scriptResult.script.source);\n                let provider: string = DataViewObjects.getValue<string>(objects, scriptResult.script.provider);\n                return {\n                    source: source,\n                    provider: provider\n                };\n            }\n\n            return undefined;\n        }\n\n        export function extractScriptResultFromVisualConfig(dataViewMappings: DataViewMapping[], objects: powerbi.data.DataViewObjectDefinitions): ScriptResult {\n            let scriptResult = findScriptResult(dataViewMappings);\n            if (scriptResult && objects) {\n                let scriptSource = <data.SQConstantExpr>data.DataViewObjectDefinitions.getValue(objects, scriptResult.script.source, null);\n                let provider = <data.SQConstantExpr>data.DataViewObjectDefinitions.getValue(objects, scriptResult.script.provider, null);\n                return {\n                    source: scriptSource ? scriptSource.value : null,\n                    provider: provider ? provider.value : null\n                };\n            }\n\n            return undefined;\n        }\n\n        export function getScriptInput(projections: QueryProjectionsByRole, selects: ArrayNamedItems<data.NamedSQExpr>, schema: FederatedConceptualSchema): data.ScriptInput {\n            let scriptInput: data.ScriptInput = {\n                VariableName: \"dataset\",\n                Columns: []\n            };\n\n            // Go over all the projections, and create an input column according to the order\n            // of the projections (including duplicate expressions)\n            if (projections && selects && !_.isEmpty(selects)) {\n                let scriptInputColumnNames: string[] = [];\n                let scriptInputColumns: data.ScriptInputColumn[] = [];\n                for (let role in projections) {\n                    for (let projection of projections[role].all()) {\n                        let select = selects.withName(projection.queryRef);\n                        if (select) {\n                            let scriptInputColumn = <data.ScriptInputColumn>{\n                                QueryName: select.name,\n                                Name: FieldExprPattern.visit(select.expr, new ScriptInputColumnNameVisitor(schema))\n                            };\n\n                            scriptInputColumns.push(scriptInputColumn);\n                            scriptInputColumnNames.push(scriptInputColumn.Name);\n                        }\n                    }\n                }\n\n                // Make sure the names of the columns are unique\n                scriptInputColumnNames = StringExtensions.ensureUniqueNames(scriptInputColumnNames);\n\n                // Update the names of the columns\n                for (let i = 0; i < scriptInputColumnNames.length; i++) {\n                    let scriptInputColumn = scriptInputColumns[i];\n                    scriptInputColumn.Name = scriptInputColumnNames[i];\n                }\n\n                scriptInput.Columns = scriptInputColumns;\n            }\n\n            return scriptInput;\n        }\n\n        class ScriptInputColumnNameVisitor implements IFieldExprPatternVisitor<string>\n        {\n            private federatedSchema: FederatedConceptualSchema;\n\n            constructor(federatedSchema: FederatedConceptualSchema) {\n                this.federatedSchema = federatedSchema;\n            }\n\n            public visitColumn(column: FieldExprColumnPattern): string {\n                return ScriptInputColumnNameVisitor.getNameForProperty(column, this.federatedSchema);\n            }\n\n            public visitColumnAggr(columnAggr: FieldExprColumnAggrPattern): string {\n                return ScriptInputColumnNameVisitor.getNameForProperty(columnAggr, this.federatedSchema);\n            }\n\n            public visitColumnHierarchyLevelVariation(columnHierarchyLevelVariation: FieldExprColumnHierarchyLevelVariationPattern): string {\n                return ScriptInputColumnNameVisitor.getVariationLevelName(columnHierarchyLevelVariation, this.federatedSchema);\n            }\n\n            public visitEntity(entity: FieldExprEntityPattern): string {\n                return entity.entity;\n            }\n\n            public visitEntityAggr(entityAggr: FieldExprEntityAggrPattern): string {\n                return entityAggr.entity;\n            }\n\n            public visitHierarchy(hierarchy: FieldExprHierarchyPattern): string {\n                return ScriptInputColumnNameVisitor.getNameForHierarchy(hierarchy, this.federatedSchema);\n            }\n\n            public visitHierarchyLevel(hierarchyLevel: FieldExprHierarchyLevelPattern): string {\n                /*Hierarchy levels are not supported yet*/\n                return;\n            }\n\n            public visitHierarchyLevelAggr(hierarchyLevelAggr: FieldExprHierarchyLevelAggrPattern): string {\n                return ScriptInputColumnNameVisitor.getNameForProperty(hierarchyLevelAggr, this.federatedSchema);\n            }\n\n            public visitMeasure(measure: FieldExprMeasurePattern): string {\n                return ScriptInputColumnNameVisitor.getNameForProperty(measure, this.federatedSchema);\n            }\n\n            public visitSelectRef(selectRef: FieldExprSelectRefPattern): string {\n                return FieldExprPattern.visit(selectRef, this);\n            }\n\n            public visitPercentile(percentile: FieldExprPercentilePattern): string {\n                return FieldExprPattern.visit(percentile.arg, this);\n            }\n\n            public visitPercentOfGrandTotal(percentOfGrandTotal: FieldExprPercentOfGrandTotalPattern): string {\n                return FieldExprPattern.visit(percentOfGrandTotal.baseExpr, this);\n            }\n\n            private static getNameForHierarchy(pattern: FieldExprHierarchyPattern, federatedScheam: FederatedConceptualSchema): string {\n                debug.assertValue(pattern, 'pattern');\n\n                let schema = federatedScheam.schema(pattern.schema),\n                    hierarchy = schema.findHierarchy(pattern.entity, pattern.name);\n\n                if (hierarchy)\n                    return hierarchy.name;\n            }\n\n            private static getNameForProperty(pattern: data.FieldExprPropertyPattern, federatedSchema: FederatedConceptualSchema): string {\n                debug.assertValue(pattern, 'pattern');\n\n                let schema = federatedSchema.schema(pattern.schema),\n                    property = schema.findProperty(pattern.entity, pattern.name);\n\n                if (property)\n                    return property.name;\n            }\n\n            private static getVariationLevelName(pattern: FieldExprColumnHierarchyLevelVariationPattern, federatedSchema: FederatedConceptualSchema): string {\n                debug.assertValue(pattern, 'pattern');\n\n                let source = pattern.source;\n                let prop = federatedSchema.schema(source.schema).findProperty(source.entity, source.name);\n                if (!prop)\n                    return;\n\n                let variations = prop.column.variations;\n                for (let variation of variations)\n                    if (variation.name === pattern.variationName)\n                        for (let level of variation.defaultHierarchy.levels)\n                            if (level.name === pattern.level.level)\n                                return level.column.name;\n            }\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data.segmentation {\n\n    export interface DataViewTableSegment extends DataViewTable {\n        /**\n         * Index of the last item that had a merge flag in the underlying data.\n         * We assume merge flags are not random but adjacent to each other.\n         */\n        lastMergeIndex?: number;\n    }\n\n    export interface DataViewTreeSegmentNode extends DataViewTreeNode {\n        /** Indicates whether the node is a duplicate of a node from a previous segment. */\n        isMerge?: boolean;\n    }\n\n    export interface DataViewCategoricalSegment extends DataViewCategorical {\n        /**\n         * Index of the last item that had a merge flag in the underlying data.\n         * We assume merge flags are not random but adjacent to each other.\n         */\n        lastMergeIndex?: number;\n    }\n\n    export interface DataViewMatrixSegmentNode extends DataViewMatrixNode {\n        /**\n         * Index of the last item that had a merge flag in the underlying data.\n         * We assume merge flags are not random but adjacent to each other.\n         */\n        isMerge?: boolean;\n    }\n\n    export module DataViewMerger {\n\n        export function mergeDataViews(source: DataView, segment: DataView): void {\n\n            if (!DataViewAnalysis.isMetadataEquivalent(source.metadata, segment.metadata)) {\n                debug.assertFail(\"Cannot merge data views with different metadata columns\");\n            }\n\n            // The last segment is complete. We mark the source as complete.\n            if (!segment.metadata.segment)\n                delete source.metadata.segment;\n\n            if (source.table && segment.table)\n                mergeTables(source.table, <DataViewTableSegment>segment.table);\n\n            if (source.categorical && segment.categorical)\n                mergeCategorical(source.categorical, <DataViewCategoricalSegment>segment.categorical);\n\n            // Tree cannot support subtotals hence we can get into situations\n            // where a node has no children in one segment and more than 1 child\n            // in another segment.\n            if (source.tree && segment.tree)\n                mergeTreeNodes(source.tree.root, segment.tree.root, true /*allowDifferentStructure*/);\n\n            if (source.matrix && segment.matrix)\n                mergeTreeNodes(source.matrix.rows.root, segment.matrix.rows.root, false /*allowDifferentStructure*/);\n        }\n\n        /** Note: Public for testability */\n        export function mergeTables(source: DataViewTable, segment: DataViewTableSegment): void {\n            debug.assertValue(source, 'source');\n            debug.assertValue(segment, 'segment');\n\n            if (_.isEmpty(segment.rows))\n                return;\n\n            let mergeIndex = segment.lastMergeIndex + 1;\n            merge(source.rows, segment.rows, mergeIndex);\n\n            debug.assert(!source.identity === !segment.identity, 'The existence of identity in the new segment is different than the source');\n            if (segment.identity)\n                merge(source.identity, segment.identity, mergeIndex);\n        }\n\n        /**\n         * Merge categories values and identities\n         *\n         * Note: Public for testability\n         */\n        export function mergeCategorical(source: DataViewCategorical, segment: DataViewCategoricalSegment): void {\n            debug.assertValue(source, 'source');\n            debug.assertValue(segment, 'segment');\n\n            // Merge categories values and identities\n            if (source.categories && segment.categories) {\n                let segmentCategoriesLength = segment.categories.length;\n                debug.assert(source.categories.length === segmentCategoriesLength, \"Source and segment categories have different lengths.\");\n\n                for (let categoryIndex: number = 0; categoryIndex < segmentCategoriesLength; categoryIndex++) {\n                    let segmentCategory = segment.categories[categoryIndex];\n                    let sourceCategory = source.categories[categoryIndex];\n\n                    debug.assert(DataViewAnalysis.areMetadataColumnsEquivalent(sourceCategory.source, segmentCategory.source), \"Source and segment category have different sources.\");\n                    debug.assert(_.isUndefined(sourceCategory.values) ? _.isUndefined(sourceCategory.identity) : true, 'Source category is missing values but has identities.');\n\n                    let mergeIndex = segment.lastMergeIndex + 1;\n                    if (segmentCategory.values) {\n                        merge(sourceCategory.values, segmentCategory.values, mergeIndex);\n                    }\n\n                    if (segmentCategory.identity) {\n                        merge(sourceCategory.identity, segmentCategory.identity, mergeIndex);\n                    }\n                }\n            }\n\n            // Merge values for each value column\n            if (source.values && segment.values) {\n                let segmentValuesLength = segment.values.length;\n                debug.assert(source.values.length === segmentValuesLength, \"Source and segment values have different lengths.\");\n\n                for (let valueIndex: number = 0; valueIndex < segmentValuesLength; valueIndex++) {\n                    let segmentValue = segment.values[valueIndex];\n                    let sourceValue = source.values[valueIndex];\n\n                    debug.assert(DataViewAnalysis.areMetadataColumnsEquivalent(sourceValue.source, segmentValue.source), \"Source and segment value have different sources.\");\n\n                    if (!sourceValue.values && segmentValue.values) {\n                        sourceValue.values = [];\n                    }\n\n                    let mergeIndex = segment.lastMergeIndex + 1;\n                    if (segmentValue.values) {\n                        merge(sourceValue.values, segmentValue.values, mergeIndex);\n                    }\n\n                    if (segmentValue.highlights) {\n                        merge(sourceValue.highlights, segmentValue.highlights, mergeIndex);\n                    }\n                }\n            }\n        }\n\n        /**\n         * Merges the segment array starting at the specified index into the source array\n         * and returns the segment slice that wasn't merged.\n         * The segment array is spliced up to specified index in the process.\n         */\n        function merge(source: any[], segment: any[], index?: number): any[] {\n            if (index >= segment.length)\n                return segment;\n\n            let result: any[] = [];\n            if (index !== undefined)\n                result = segment.splice(0, index);\n\n            Array.prototype.push.apply(source, segment);\n\n            return result;\n        }\n\n        /** Note: Public for testability */\n        export function mergeTreeNodes(sourceRoot: DataViewTreeNode, segmentRoot: DataViewTreeNode, allowDifferentStructure: boolean): void {\n            debug.assertValue(sourceRoot, 'sourceRoot');\n            debug.assertValue(segmentRoot, 'segmentRoot');\n\n            if (!segmentRoot.children || segmentRoot.children.length === 0)\n                return;\n\n            if (allowDifferentStructure && (!sourceRoot.children || sourceRoot.children.length === 0)) {\n                sourceRoot.children = segmentRoot.children;\n                return;\n            }\n\n            debug.assert(sourceRoot.children && sourceRoot.children.length >= 0,\n                \"Source tree has different structure than segment.\");\n\n            let firstAppendIndex = findFirstAppendIndex(segmentRoot.children);\n            let lastSourceChild = sourceRoot.children[sourceRoot.children.length - 1];\n            let mergedChildren = merge(sourceRoot.children, segmentRoot.children, firstAppendIndex);\n\n            if (mergedChildren.length > 0)\n                mergeTreeNodes(lastSourceChild, mergedChildren[mergedChildren.length - 1], allowDifferentStructure);\n        }\n\n        function findFirstAppendIndex(children: DataViewTreeNode[]): number {\n            if (children.length === 0)\n                return 0;\n\n            let i: number = 0;\n            for (; i < children.length; i++) {\n                let childSegment: DataViewTreeSegmentNode = <DataViewTreeSegmentNode>children[i];\n                if (!childSegment.isMerge)\n                    break;\n            }\n\n            return i;\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    import ArrayExtensions = jsCommon.ArrayExtensions;\n\n    /** Rewrites an expression tree, including all descendant nodes. */\n    export class SQExprRewriter implements ISQExprVisitor<SQExpr>, IFillRuleDefinitionVisitor<LinearGradient2Definition, LinearGradient3Definition> {\n        public visitColumnRef(expr: SQColumnRefExpr): SQExpr {\n            let origArg = expr.source,\n                rewrittenArg = origArg.accept(this);\n\n            if (origArg === rewrittenArg)\n                return expr;\n\n            return new SQColumnRefExpr(rewrittenArg, expr.ref);\n        }\n\n        public visitMeasureRef(expr: SQMeasureRefExpr): SQExpr {\n            let origArg = expr.source,\n                rewrittenArg = origArg.accept(this);\n\n            if (origArg === rewrittenArg)\n                return expr;\n\n            return new SQMeasureRefExpr(rewrittenArg, expr.ref);\n        }\n\n        public visitAggr(expr: SQAggregationExpr): SQExpr {\n            let origArg = expr.arg,\n                rewrittenArg = origArg.accept(this);\n\n            if (origArg === rewrittenArg)\n                return expr;\n\n            return new SQAggregationExpr(rewrittenArg, expr.func);\n        }\n\n        public visitSelectRef(expr: SQSelectRefExpr): SQExpr {\n            return expr;\n        }\n\n        public visitPercentile(expr: SQPercentileExpr): SQExpr {\n            let origArg = expr.arg,\n                rewrittenArg = origArg.accept(this);\n\n            if (origArg === rewrittenArg)\n                return expr;\n\n            return new SQPercentileExpr(rewrittenArg, expr.k, expr.exclusive);\n        }\n\n        public visitHierarchy(expr: SQHierarchyExpr): SQExpr {\n            let origArg = expr.arg,\n                rewrittenArg = origArg.accept(this);\n\n            if (origArg === rewrittenArg)\n                return expr;\n\n            return new SQHierarchyExpr(rewrittenArg, expr.hierarchy);\n        }\n\n        public visitHierarchyLevel(expr: SQHierarchyLevelExpr): SQExpr {\n            let origArg = expr.arg,\n                rewrittenArg = origArg.accept(this);\n\n            if (origArg === rewrittenArg)\n                return expr;\n\n            return new SQHierarchyLevelExpr(rewrittenArg, expr.level);\n        }\n\n        public visitPropertyVariationSource(expr: SQPropertyVariationSourceExpr): SQExpr {\n            let origArg = expr.arg,\n                rewrittenArg = origArg.accept(this);\n\n            if (origArg === rewrittenArg)\n                return expr;\n\n            return new SQPropertyVariationSourceExpr(rewrittenArg, expr.name, expr.property);\n        }\n\n        public visitEntity(expr: SQEntityExpr): SQExpr {\n            return expr;\n        }\n\n        public visitAnd(orig: SQAndExpr): SQExpr {\n            let origLeft = orig.left,\n                rewrittenLeft = origLeft.accept(this),\n                origRight = orig.right,\n                rewrittenRight = origRight.accept(this);\n\n            if (origLeft === rewrittenLeft && origRight === rewrittenRight)\n                return orig;\n\n            return new SQAndExpr(rewrittenLeft, rewrittenRight);\n        }\n\n        public visitBetween(orig: SQBetweenExpr): SQExpr {\n            let origArg = orig.arg,\n                rewrittenArg = origArg.accept(this),\n                origLower = orig.lower,\n                rewrittenLower = origLower.accept(this),\n                origUpper = orig.upper,\n                rewrittenUpper = origUpper.accept(this);\n\n            if (origArg === rewrittenArg && origLower === rewrittenLower && origUpper === rewrittenUpper)\n                return orig;\n\n            return new SQBetweenExpr(rewrittenArg, rewrittenLower, rewrittenUpper);\n        }\n\n        public visitIn(orig: SQInExpr): SQExpr {\n            let origArgs = orig.args,\n                rewrittenArgs = this.rewriteAll(origArgs),\n                origValues: SQExpr[][] = orig.values,\n                rewrittenValues: SQExpr[][];\n\n            for (let i = 0, len = origValues.length; i < len; i++) {\n                let origValueTuple = origValues[i],\n                    rewrittenValueTuple = this.rewriteAll(origValueTuple);\n\n                if (origValueTuple !== rewrittenValueTuple && !rewrittenValues)\n                    rewrittenValues = ArrayExtensions.take(origValues, i);\n\n                if (rewrittenValues)\n                    rewrittenValues.push(rewrittenValueTuple);\n            }\n\n            if (origArgs === rewrittenArgs && !rewrittenValues)\n                return orig;\n\n            return new SQInExpr(rewrittenArgs, rewrittenValues || origValues);\n        }\n\n        private rewriteAll(origExprs: SQExpr[]): SQExpr[] {\n            debug.assertValue(origExprs, 'origExprs');\n\n            let rewrittenResult: SQExpr[];\n            for (let i = 0, len = origExprs.length; i < len; i++) {\n                let origExpr = origExprs[i],\n                    rewrittenExpr = origExpr.accept(this);\n\n                if (origExpr !== rewrittenExpr && !rewrittenResult)\n                    rewrittenResult = ArrayExtensions.take(origExprs, i);\n\n                if (rewrittenResult)\n                    rewrittenResult.push(rewrittenExpr);\n            }\n\n            return rewrittenResult || origExprs;\n        }\n\n        public visitOr(orig: SQOrExpr): SQExpr {\n            let origLeft = orig.left,\n                rewrittenLeft = origLeft.accept(this),\n                origRight = orig.right,\n                rewrittenRight = origRight.accept(this);\n\n            if (origLeft === rewrittenLeft && origRight === rewrittenRight)\n                return orig;\n\n            return new SQOrExpr(rewrittenLeft, rewrittenRight);\n        }\n\n        public visitCompare(orig: SQCompareExpr): SQExpr {\n            let origLeft = orig.left,\n                rewrittenLeft = origLeft.accept(this),\n                origRight = orig.right,\n                rewrittenRight = origRight.accept(this);\n\n            if (origLeft === rewrittenLeft && origRight === rewrittenRight)\n                return orig;\n\n            return new SQCompareExpr(orig.comparison, rewrittenLeft, rewrittenRight);\n        }\n\n        public visitContains(orig: SQContainsExpr): SQExpr {\n            let origLeft = orig.left,\n                rewrittenLeft = origLeft.accept(this),\n                origRight = orig.right,\n                rewrittenRight = origRight.accept(this);\n\n            if (origLeft === rewrittenLeft && origRight === rewrittenRight)\n                return orig;\n\n            return new SQContainsExpr(rewrittenLeft, rewrittenRight);\n        }\n\n        public visitExists(orig: SQExistsExpr): SQExpr {\n            let origArg = orig.arg,\n                rewrittenArg = origArg.accept(this);\n\n            if (origArg === rewrittenArg)\n                return orig;\n\n            return new SQExistsExpr(rewrittenArg);\n        }\n\n        public visitNot(orig: SQNotExpr): SQExpr {\n            let origArg = orig.arg,\n                rewrittenArg = origArg.accept(this);\n\n            if (origArg === rewrittenArg)\n                return orig;\n\n            return new SQNotExpr(rewrittenArg);\n        }\n\n        public visitStartsWith(orig: SQStartsWithExpr): SQExpr {\n            let origLeft = orig.left,\n                rewrittenLeft = origLeft.accept(this),\n                origRight = orig.right,\n                rewrittenRight = origRight.accept(this);\n\n            if (origLeft === rewrittenLeft && origRight === rewrittenRight)\n                return orig;\n\n            return new SQStartsWithExpr(rewrittenLeft, rewrittenRight);\n        }\n\n        public visitConstant(expr: SQConstantExpr): SQExpr {\n            return expr;\n        }\n\n        public visitDateSpan(orig: SQDateSpanExpr): SQExpr {\n            let origArg = orig.arg,\n                rewrittenArg = origArg.accept(this);\n\n            if (origArg === rewrittenArg)\n                return orig;\n\n            return new SQDateSpanExpr(orig.unit, rewrittenArg);\n        }\n\n        public visitDateAdd(orig: SQDateAddExpr): SQExpr {\n            let origArg = orig.arg,\n                rewrittenArg = origArg.accept(this);\n\n            if (origArg === rewrittenArg)\n                return orig;\n\n            return new SQDateAddExpr(orig.unit, orig.amount, rewrittenArg);\n        }\n\n        public visitNow(orig: SQNowExpr): SQExpr {\n            return orig;\n        }\n\n        public visitDefaultValue(orig: SQDefaultValueExpr): SQExpr {\n            return orig;\n        }\n\n        public visitAnyValue(orig: SQAnyValueExpr): SQExpr {\n            return orig;\n        }\n\n        public visitArithmetic(orig: SQArithmeticExpr): SQExpr {\n            let origLeft = orig.left,\n                rewrittenLeft = origLeft.accept(this),\n                origRight = orig.right,\n                rewrittenRight = origRight.accept(this);\n\n            if (origLeft === rewrittenLeft && origRight === rewrittenRight)\n                return orig;\n\n            return new SQArithmeticExpr(rewrittenLeft, rewrittenRight, orig.operator);\n        }\n\n        public visitScopedEval(orig: SQScopedEvalExpr): SQExpr {\n            let origExpression = orig.expression,\n                rewrittenExpression = origExpression.accept(this),\n                origScope = orig.scope,\n                rewrittenScope = this.rewriteAll(origScope);\n\n            if (origExpression === rewrittenExpression && origScope === rewrittenScope)\n                return orig;\n\n            return new SQScopedEvalExpr(rewrittenExpression, rewrittenScope);\n        }\n        \n        public visitWithRef(orig: SQWithRefExpr): SQExpr {\n            return orig;\n        }\n\n        public visitFillRule(orig: SQFillRuleExpr): SQExpr {\n            let origInput = orig.input,\n                rewrittenInput = origInput.accept(this);\n\n            let origRule = orig.rule;\n\n            let origGradient2 = origRule.linearGradient2,\n                rewrittenGradient2 = origGradient2;\n            if (origGradient2) {\n                rewrittenGradient2 = this.visitLinearGradient2(origGradient2);\n            }\n\n            let origGradient3 = origRule.linearGradient3,\n                rewrittenGradient3 = origGradient3;\n            if (origGradient3) {\n                rewrittenGradient3 = this.visitLinearGradient3(origGradient3);\n            }\n\n            if (origInput !== rewrittenInput ||\n                origGradient2 !== rewrittenGradient2 ||\n                origGradient3 !== rewrittenGradient3) {\n                let rewrittenRule: FillRuleDefinition = {};\n                if (rewrittenGradient2)\n                    rewrittenRule.linearGradient2 = rewrittenGradient2;\n                if (rewrittenGradient3)\n                    rewrittenRule.linearGradient3 = rewrittenGradient3;\n\n                return new SQFillRuleExpr(rewrittenInput, rewrittenRule);\n            }\n\n            return orig;\n        }\n\n        public visitLinearGradient2(origGradient2: LinearGradient2Definition): LinearGradient2Definition {\n            debug.assertValue(origGradient2, 'origGradient2');\n\n            let origMin = origGradient2.min,\n                rewrittenMin = this.visitFillRuleStop(origMin),\n                origMax = origGradient2.max,\n                rewrittenMax = this.visitFillRuleStop(origMax);\n\n            if (origMin !== rewrittenMin || origMax !== rewrittenMax) {\n                return {\n                    min: rewrittenMin,\n                    max: rewrittenMax,\n                };\n            }\n\n            return origGradient2;\n        }\n\n        public visitLinearGradient3(origGradient3: LinearGradient3Definition): LinearGradient3Definition {\n            debug.assertValue(origGradient3, 'origGradient3');\n\n            let origMin = origGradient3.min,\n                rewrittenMin = this.visitFillRuleStop(origMin),\n                origMid = origGradient3.mid,\n                rewrittenMid = this.visitFillRuleStop(origMid),\n                origMax = origGradient3.max,\n                rewrittenMax = this.visitFillRuleStop(origMax);\n\n            if (origMin !== rewrittenMin || origMid !== rewrittenMid || origMax !== rewrittenMax) {\n                return {\n                    min: rewrittenMin,\n                    mid: rewrittenMid,\n                    max: rewrittenMax,\n                };\n            }\n\n            return origGradient3;\n        }\n\n        private visitFillRuleStop(stop: RuleColorStopDefinition): RuleColorStopDefinition {\n            debug.assertValue(stop, 'stop');\n\n            let origColor = stop.color,\n                rewrittenColor = stop.color.accept(this);\n\n            let origValue = stop.value,\n                rewrittenValue = origValue;\n            if (origValue)\n                rewrittenValue = origValue.accept(this);\n\n            if (origColor !== rewrittenColor || origValue !== rewrittenValue) {\n                let rewrittenStop: RuleColorStopDefinition = {\n                    color: rewrittenColor\n                };\n\n                if (rewrittenValue)\n                    rewrittenStop.value = rewrittenValue;\n\n                return rewrittenStop;\n            }\n\n            return stop;\n        }\n\n        public visitResourcePackageItem(orig: SQResourcePackageItemExpr): SQExpr {\n            return orig;\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    /** Responsible for writing equality comparisons against a field to an SQInExpr. */\n    export module EqualsToInRewriter {\n        export function run(expr: SQExpr): SQExpr {\n            debug.assertValue(expr, 'expr');\n\n            return expr.accept(new Rewriter());\n        }\n\n        class Rewriter extends SQExprRewriter {\n            private current: InBuilder;\n\n            constructor() {\n                super();\n            }\n\n            public visitCompare(expr: SQCompareExpr): SQExpr {\n                if (expr.comparison !== QueryComparisonKind.Equal)\n                    return this.visitUnsupported(expr);\n                if (!this.isSupported(expr.left) || !this.isSupported(expr.right))\n                    return this.visitUnsupported(expr);\n\n                let leftIsComparand = this.isComparand(expr.left);\n                let rightIsComparand = this.isComparand(expr.right);\n                if (leftIsComparand === rightIsComparand)\n                    return this.visitUnsupported(expr);\n\n                let operand: SQExpr = leftIsComparand\n                    ? expr.left\n                    : expr.right;\n                let value: SQExpr = leftIsComparand\n                    ? expr.right\n                    : expr.left;\n\n                let current = this.current;\n                if (!current) {\n                    return SQExprBuilder.inExpr([operand], [[value]]);\n                }\n\n                current.add(operand, value);\n\n                return expr;\n            }\n\n            public visitOr(expr: SQOrExpr): SQExpr {\n                if (!this.isSupported(expr.left) || !this.isSupported(expr.right))\n                    return this.visitUnsupported(expr);\n\n                let current: InBuilder;\n                if (!this.current) {\n                    current = this.current = new InBuilder();\n                }\n\n                expr.left.accept(this);\n                expr.right.accept(this);\n\n                if (current) {\n                    this.current = null;\n                    return current.complete() || expr;\n                }\n\n                return expr;\n            }\n\n            public visitAnd(expr: SQAndExpr): SQExpr {\n                if (!this.isSupported(expr.left) || !this.isSupported(expr.right))\n                    return this.visitUnsupported(expr);\n\n                let current = this.current;\n                if (current) {\n                    // NOTE: Composite keys are not supported by this algorithm.\n                    current.cancel();\n                    return expr;\n                }\n\n                return super.visitAnd(expr);\n            }\n\n            private visitUnsupported(expr: SQExpr): SQExpr {\n                let current = this.current;\n                if (current)\n                    current.cancel();\n\n                return expr;\n            }\n\n            private isSupported(expr: SQExpr): boolean {\n                debug.assertValue(expr, 'expr');\n\n                return expr instanceof SQCompareExpr\n                    || expr instanceof SQColumnRefExpr\n                    || expr instanceof SQConstantExpr\n                    || expr instanceof SQHierarchyLevelExpr\n                    || expr instanceof SQOrExpr\n                    || expr instanceof SQAndExpr;\n            }\n\n            private isComparand(expr: SQExpr): boolean {\n                return expr instanceof SQColumnRefExpr\n                    || expr instanceof SQHierarchyLevelExpr;\n            }\n        }\n\n        class InBuilder {\n            private operand: SQExpr;\n            private values: SQExpr[];\n            private cancelled: boolean;\n\n            public add(operand: SQExpr, value: SQExpr): void {\n                debug.assertValue(operand, 'operand');\n                debug.assertValue(value, 'value');\n\n                if (this.cancelled)\n                    return;\n\n                if (this.operand && !SQExpr.equals(operand, this.operand)) {\n                    this.cancel();\n                    return;\n                }\n\n                this.operand = operand;\n\n                let values = this.values;\n                if (!values)\n                    values = this.values = [];\n\n                values.push(value);\n            }\n\n            public cancel(): void {\n                this.cancelled = true;\n            }\n\n            public complete(): SQInExpr {\n                if (this.cancelled || !this.operand)\n                    return;\n\n                return SQExprBuilder.inExpr([this.operand], _.map(this.values, v => [v]));\n            }\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n\n    export interface FilterValueScopeIdsContainer {\n            isNot: boolean;\n            scopeIds: DataViewScopeIdentity[];\n        }\n\n    export module SQExprConverter {\n        export function asScopeIdsContainer(filter: SemanticFilter, fieldSQExprs: SQExpr[]): FilterValueScopeIdsContainer {\n            debug.assertValue(filter, 'filter');\n            debug.assertValue(fieldSQExprs, 'fieldSQExprs');\n            debug.assert(fieldSQExprs.length > 0, 'There should be at least 1 field expression.');\n\n            let filterItems = filter.conditions();\n            debug.assert(filterItems.length === 1, 'There should be exactly 1 filter expression.');\n            let filterItem = filterItems[0];\n            if (filterItem) {\n                let visitor = new FilterScopeIdsCollectorVisitor(fieldSQExprs);\n                if (filterItem.accept(visitor))\n                    return visitor.getResult();\n            }\n        }\n\n        /** Gets a comparand value from the given DataViewScopeIdentity. */\n        export function getFirstComparandValue(identity: DataViewScopeIdentity): any {\n            debug.assertValue(identity, 'identity');\n\n            let comparandExpr = (<SQExpr>identity.expr).accept(new FindComparandVisitor());\n            if (comparandExpr)\n                return comparandExpr.value;\n        }\n    }\n\n    /** Collect filter values from simple semantic filter that is similar to 'is any of' or 'is not any of', getResult() returns a collection of scopeIds.**/\n    class FilterScopeIdsCollectorVisitor extends DefaultSQExprVisitor<boolean>{\n        private isRoot: boolean;\n        private isNot: boolean;\n        private keyExprsCount: number;\n        private valueExprs: SQExpr[];\n        private fieldExprs: SQExpr[];\n\n        constructor(fieldSQExprs:SQExpr[]) {\n            super();\n            this.isRoot = true;\n            this.isNot = false;\n            this.keyExprsCount = null;\n            this.valueExprs = [];\n\n            // Need to drop the entitylet before create the scopeIdentity. The ScopeIdentity created on the client is used to\n            // compare the ScopeIdentity came from the server. But server doesn't have the entity variable concept, so we will\n            // need to drop it in order to use JsonComparer.\n            this.fieldExprs = [];\n            for (let field of fieldSQExprs) {\n                this.fieldExprs.push(SQExprBuilder.removeEntityVariables(field));\n            }\n        }\n\n        public getResult(): FilterValueScopeIdsContainer {\n            debug.assert(this.fieldExprs.length > 0, 'fieldExprs has at least one fieldExpr');            \n\n            let valueExprs = this.valueExprs,\n                scopeIds: DataViewScopeIdentity[] = [];\n            let valueCount: number = this.keyExprsCount || 1;\n\n            for (let startIndex = 0, endIndex = valueCount, len = valueExprs.length; startIndex < len && endIndex <= len;) {\n                let values = valueExprs.slice(startIndex, endIndex);\n                let scopeId = FilterScopeIdsCollectorVisitor.getScopeIdentity(this.fieldExprs, values);\n\n                if (!jsCommon.ArrayExtensions.isInArray(scopeIds, scopeId, DataViewScopeIdentity.equals))\n                    scopeIds.push(scopeId);\n\n                startIndex += valueCount;\n                endIndex += valueCount;\n            }\n\n            return {\n                isNot: this.isNot,\n                scopeIds: scopeIds,\n            };\n        }\n\n        private static getScopeIdentity(fieldExprs: SQExpr[], valueExprs: SQExpr[]): DataViewScopeIdentity {\n            debug.assert(valueExprs.length > 0, 'valueExprs has at least one valueExpr');\n            debug.assert(valueExprs.length === fieldExprs.length, 'fieldExpr and valueExpr count should match');\n\n            let compoundSQExpr: SQExpr;\n            for (let i = 0, len = fieldExprs.length; i < len; i++) {\n                let equalsExpr = SQExprBuilder.equal(fieldExprs[i], valueExprs[i]);\n                if (!compoundSQExpr)\n                    compoundSQExpr = equalsExpr;\n                else\n                    compoundSQExpr = SQExprBuilder.and(compoundSQExpr, equalsExpr);\n            }\n\n            return createDataViewScopeIdentity(compoundSQExpr);\n        }\n\n        public visitOr(expr: SQOrExpr): boolean {\n            if (this.keyExprsCount !== null)\n                return this.unsupportedSQExpr();\n\n            this.isRoot = false;\n            return expr.left.accept(this) && expr.right.accept(this);\n        }\n\n        public visitNot(expr: SQNotExpr): boolean {\n            if (!this.isRoot)\n                return this.unsupportedSQExpr();\n\n            this.isNot = true;\n            return expr.arg.accept(this);\n        }\n\n        public visitConstant(expr: SQConstantExpr): boolean {\n            if (this.isRoot && expr.type.primitiveType === PrimitiveType.Null)\n                return this.unsupportedSQExpr();\n\n            this.valueExprs.push(expr);            \n            return true;\n        }\n\n        public visitCompare(expr: SQCompareExpr): boolean {\n            if (this.keyExprsCount !== null)\n                return this.unsupportedSQExpr();\n\n            this.isRoot = false;\n\n            if (expr.comparison !== QueryComparisonKind.Equal)\n                return this.unsupportedSQExpr();\n\n            return expr.left.accept(this) && expr.right.accept(this);\n        }\n\n        public visitIn(expr: SQInExpr): boolean {\n            this.keyExprsCount = 0;\n            let result: boolean;\n            this.isRoot = false;\n            for (let arg of expr.args) {\n                result = arg.accept(this);\n                if (!result)\n                    return this.unsupportedSQExpr();\n\n                this.keyExprsCount++;\n            }\n\n            if (this.keyExprsCount !== this.fieldExprs.length)\n                return this.unsupportedSQExpr();\n\n            let values = expr.values;\n            for (let valueTuple of values) {\n                let jlen = valueTuple.length;\n                debug.assert(jlen === this.keyExprsCount, \"keys count and values count should match\");\n\n                for (let value of valueTuple) {\n                    result = value.accept(this);\n                    if (!result)\n                        return this.unsupportedSQExpr();\n                }\n            }\n\n            return result;\n        }\n\n        public visitColumnRef(expr: SQColumnRefExpr): boolean {\n            if (this.isRoot)\n                return this.unsupportedSQExpr();\n\n            let fixedExpr = SQExprBuilder.removeEntityVariables(expr);\n            if (this.keyExprsCount !== null)\n                return SQExpr.equals(this.fieldExprs[this.keyExprsCount], fixedExpr);\n\n            return SQExpr.equals(this.fieldExprs[0], fixedExpr);\n        }\n\n        public visitDefaultValue(expr: SQDefaultValueExpr): boolean {\n            if (this.isRoot || this.keyExprsCount !== null)\n                return this.unsupportedSQExpr();\n\n            this.valueExprs.push(expr);\n            return true;\n        }\n\n        public visitAnyValue(expr: SQAnyValueExpr): boolean {\n            if (this.isRoot || this.keyExprsCount !== null)\n                return this.unsupportedSQExpr();\n\n            this.valueExprs.push(expr);\n            return true;\n        }\n\n        public visitDefault(expr: SQExpr): boolean {\n            return this.unsupportedSQExpr();\n        }\n\n        private unsupportedSQExpr(): boolean {\n            return false;\n        }\n    }\n\n    class FindComparandVisitor extends DefaultSQExprVisitor<SQConstantExpr> {\n        public visitAnd(expr: SQAndExpr): SQConstantExpr {\n            return expr.left.accept(this) || expr.right.accept(this);\n        }\n\n        public visitCompare(expr: SQCompareExpr): SQConstantExpr {\n            if (expr.comparison === QueryComparisonKind.Equal) {\n                if (expr.right instanceof SQConstantExpr)\n                    return <SQConstantExpr>expr.right;\n                if (expr.left instanceof SQConstantExpr)\n                    return <SQConstantExpr>expr.left;\n            }\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    import ArrayExtensions = jsCommon.ArrayExtensions;\n\n    /** Recognizes DataViewScopeIdentity expression trees to extract comparison keys. */\n    export module ScopeIdentityExtractor {\n        export function getKeys(expr: SQExpr): SQExpr[] {\n            let extractor = new ScopeIdExtractorImpl();\n            expr.accept(extractor);\n\n            if (extractor.malformed)\n                return null;\n\n            return ArrayExtensions.emptyToNull(extractor.keys);\n        }\n\n        export function getInExpr(expr: SQExpr): SQInExpr{\n            let extractor = new ScopeIdExtractorImpl();\n            expr.accept(extractor);\n\n            if (extractor.malformed)\n                return;\n            \n            let keys = ArrayExtensions.emptyToNull(extractor.keys);\n            let keyValues = ArrayExtensions.emptyToNull(extractor.values);\n\n            if (keys && keyValues)\n                return data.SQExprBuilder.inExpr(keys, [keyValues]);\n        }\n\n        /**\n         * Recognizes expressions of the form:\n         * 1) Equals(ColRef, Constant)\n         * 2) And(Equals(ColRef1, Constant1), Equals(ColRef2, Constant2))\n         * or And(And(Equals(ColRef1, Constant1), Equals(ColRef2, Constant2)), Equals(ColRef3, Constant3)) etc..\n         */\n        class ScopeIdExtractorImpl extends DefaultSQExprVisitor<void> {\n            public keys: SQExpr[] = [];\n            public values: SQConstantExpr[] = [];\n            public malformed: boolean;\n\n            public visitAnd(expr: SQAndExpr): void {\n                expr.left.accept(this);\n                expr.right.accept(this);\n            }\n\n            public visitCompare(expr: SQCompareExpr): void {\n                if (expr.comparison !== QueryComparisonKind.Equal) {\n                    this.visitDefault(expr);\n                    return;\n                }\n                debug.assert(expr.left instanceof SQExpr && expr.right instanceof SQConstantExpr, 'invalid compare expr operands');\n                expr.left.accept(this);\n                expr.right.accept(this);\n            }\n\n            public visitColumnRef(expr: SQColumnRefExpr): void {\n                this.keys.push(expr);\n            }\n\n            public visitHierarchyLevel(expr: SQHierarchyLevelExpr): void {\n                this.keys.push(expr);\n            }\n\n            public visitConstant(expr: SQConstantExpr): void {\n                this.values.push(expr);\n            }\n\n            public visitArithmetic(expr: SQArithmeticExpr): void {\n                this.keys.push(expr);\n            }\n\n            public visitDefault(expr: SQExpr): void {\n                this.malformed = true;\n            }\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    export module PrimitiveValueEncoding {\n        const SingleQuoteRegex = /'/g;\n\n        export function decimal(value: number): string {\n            debug.assertValue(value, 'value');\n\n            return value + 'M';\n        }\n\n        export function double(value: number): string {\n            debug.assertValue(value, 'value');\n\n            return value + 'D';\n        }\n\n        export function integer(value: number): string {\n            debug.assertValue(value, 'value');\n\n            return value + 'L';\n        }\n\n        export function dateTime(value: Date): string {\n            debug.assertValue(value, 'value');\n\n            // Currently, server doesn't support timezone. All date time data on the server don't have time zone information.\n            // So, when we construct a dateTime object on the client, we will need to ignor user's time zone and force it to be UTC time.\n            // When we subtract the timeZone offset, the date time object will remain the same value as you entered but dropped the local timeZone.\n            let date = new Date(value.getTime() - (value.getTimezoneOffset() * 60000));\n            let dateTimeString = date.toISOString();\n\n            // If it ends with Z, we want to get rid of it, because with trailing Z, it will assume the dateTime is UTC, but we don't want any timeZone information, so\n            // we will drop it.\n            // Also, we need to add Prefix and Suffix to match the dsr value format for dateTime object.\n            if (jsCommon.StringExtensions.endsWith(dateTimeString, 'Z'))\n                dateTimeString = dateTimeString.substr(0, dateTimeString.length - 1);\n            return \"datetime'\" + dateTimeString + \"'\";\n        }\n\n        export function text(value: string): string {\n            debug.assertValue(value, 'value');\n\n            return \"'\" + value.replace(SingleQuoteRegex, \"''\") + \"'\";\n        }\n\n        export function nullEncoding(): string {\n            return 'null';\n        }\n\n        export function boolean(value: boolean): string {\n            return value ? 'true' : 'false';\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    import Agg = powerbi.data.QueryAggregateFunction;\n\n    export interface ISQAggregationOperations {\n        /** Returns an array of supported aggregates for a given expr and role type. */\n        getSupportedAggregates(\n            expr: SQExpr,\n            schema: FederatedConceptualSchema,\n            targetTypes: ValueTypeDescriptor[]): QueryAggregateFunction[];\n\n        isSupportedAggregate(\n            expr: SQExpr,\n            schema: FederatedConceptualSchema,\n            aggregate: QueryAggregateFunction,\n            targetTypes: ValueTypeDescriptor[]): boolean;\n\n        createExprWithAggregate(\n            expr: SQExpr,\n            schema: FederatedConceptualSchema,\n            aggregateNonNumericFields: boolean,\n            targetTypes: ValueTypeDescriptor[],\n            preferredAggregate?: QueryAggregateFunction): SQExpr;\n    }\n\n    export function createSQAggregationOperations(datetimeMinMaxSupported: boolean): ISQAggregationOperations {\n        return new SQAggregationOperations(datetimeMinMaxSupported);\n    }\n\n    class SQAggregationOperations implements ISQAggregationOperations {\n        constructor(private datetimeMinMaxSupported: boolean) {\n        }\n\n        public getSupportedAggregates(\n            expr: SQExpr,\n            schema: FederatedConceptualSchema,\n            targetTypes: ValueTypeDescriptor[]): QueryAggregateFunction[] {\n\n            debug.assertValue(expr, 'expr');\n            debug.assertValue(schema, 'schema');\n            debug.assertAnyValue(targetTypes, 'targetTypes');\n\n            let metadata = getMetadataForUnderlyingType(expr, schema);\n\n            // don't use expr.validate as validate will be using this function and we end up in a recursive loop\n            if (!metadata)\n                return [];\n\n            let valueType = metadata.type,\n                fieldKind = metadata.kind,\n                isPropertyIdentity = metadata.idOnEntityKey;\n\n            if (!valueType)\n                return [];\n\n            // Cannot aggregate on model measures\n            if (fieldKind === FieldKind.Measure)\n                return [];\n\n            if (valueType.numeric || valueType.integer) {\n                let aggregates = [Agg.Sum, Agg.Avg, Agg.Min, Agg.Max, Agg.Count, Agg.CountNonNull, Agg.StandardDeviation, Agg.Variance];\n                let fieldExpr = SQExprConverter.asFieldPattern(expr);\n                let fieldExprItem = FieldExprPattern.toFieldExprEntityItemPattern(fieldExpr);\n\n                let currentSchema = schema.schema(fieldExprItem.schema);\n                if (currentSchema.capabilities.supportsMedian)\n                    aggregates.push(Agg.Median);\n\n                return aggregates;\n            }\n\n            let aggregates: QueryAggregateFunction[] = [];\n\n            // Min/Max of DateTime\n            if (this.datetimeMinMaxSupported &&\n                valueType.dateTime &&\n                (_.isEmpty(targetTypes) || ValueType.isCompatibleTo(valueType, targetTypes))) {\n                aggregates.push(Agg.Min);\n                aggregates.push(Agg.Max);\n            }\n\n            // The supported aggregation types for an identity field are restricted to 'Count Non-Null' (e.g. for the field well aggregation options)\n            // but a valid semantic query can return a less-restricted aggregation option which we should honor. (e.g. this results from Q&A)\n            let distinctCountAggExists = SQExprInfo.getAggregate(expr) === Agg.Count;\n            if (!(isPropertyIdentity && !distinctCountAggExists))\n                aggregates.push(Agg.Count);\n\n            aggregates.push(Agg.CountNonNull);\n\n            return aggregates;\n        }\n\n        public isSupportedAggregate(\n            expr: SQExpr,\n            schema: FederatedConceptualSchema,\n            aggregate: QueryAggregateFunction,\n            targetTypes: ValueTypeDescriptor[]): boolean {\n\n            debug.assertValue(expr, 'expr');\n            debug.assertValue(schema, 'schema');\n\n            let supportedAggregates = this.getSupportedAggregates(expr, schema, targetTypes);\n            return _.contains(supportedAggregates, aggregate);\n        }\n\n        public createExprWithAggregate(\n            expr: SQExpr,\n            schema: FederatedConceptualSchema,\n            aggregateNonNumericFields: boolean,\n            targetTypes: ValueTypeDescriptor[],\n            preferredAggregate?: QueryAggregateFunction): SQExpr {\n\n            debug.assertValue(expr, 'expr');\n            debug.assertValue(schema, 'schema');\n\n            let aggregate: QueryAggregateFunction;\n            if (preferredAggregate != null && this.isSupportedAggregate(expr, schema, preferredAggregate, targetTypes)) {\n                aggregate = preferredAggregate;\n            }\n            else {\n                aggregate = expr.getDefaultAggregate(schema, aggregateNonNumericFields);\n            }\n            if (aggregate !== undefined)\n                expr = SQExprBuilder.aggregate(expr, aggregate);\n\n            return expr;\n        }\n    }\n\n    function getMetadataForUnderlyingType(expr: SQExpr, schema: FederatedConceptualSchema): SQExprMetadata {\n        // Unwrap the aggregate (if the expr has one), and look at the underlying type.\n        let metadata = SQExprBuilder.removeAggregate(expr).getMetadata(schema);\n\n        if (!metadata)\n            metadata = expr.getMetadata(schema);\n\n        return metadata;\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n\n    export module SQHierarchyExprUtils {\n        export function getConceptualHierarchyLevelFromExpr(\n            conceptualSchema: FederatedConceptualSchema,\n            fieldExpr: FieldExprPattern): ConceptualHierarchyLevel {\n            let fieldExprItem = FieldExprPattern.toFieldExprEntityItemPattern(fieldExpr);\n            let hierarchyLevel = fieldExpr.hierarchyLevel || fieldExpr.hierarchyLevelAggr;\n            if (hierarchyLevel)\n                return SQHierarchyExprUtils.getConceptualHierarchyLevel(\n                    conceptualSchema,\n                    fieldExprItem.schema,\n                    fieldExprItem.entity,\n                    hierarchyLevel.name,\n                    hierarchyLevel.level);\n        }\n\n        export function getConceptualHierarchyLevel(\n            conceptualSchema: FederatedConceptualSchema,\n            schemaName: string,\n            entity: string,\n            hierarchy: string,\n            hierarchyLevel: string): ConceptualHierarchyLevel {\n\n            let schema = conceptualSchema.schema(schemaName);\n            let conceptualHierarchy = schema.findHierarchy(entity, hierarchy);\n            if (conceptualHierarchy) {\n                return conceptualHierarchy.levels.withName(hierarchyLevel);\n            }\n        }\n\n        export function getConceptualHierarchy(sqExpr: SQExpr, federatedSchema: FederatedConceptualSchema): ConceptualHierarchy {\n            if (sqExpr instanceof SQHierarchyExpr) {\n                let hierarchy = <SQHierarchyExpr>sqExpr;\n\n                if (sqExpr.arg instanceof SQEntityExpr) {\n                    let entityExpr = <SQEntityExpr>sqExpr.arg;\n                    return federatedSchema\n                        .schema(entityExpr.schema)\n                        .findHierarchy(entityExpr.entity, hierarchy.hierarchy);\n                } else if (sqExpr.arg instanceof SQPropertyVariationSourceExpr) {\n                    let variationExpr = <SQPropertyVariationSourceExpr>sqExpr.arg;\n                    let sourceEntityExpr = <SQEntityExpr>variationExpr.arg;\n                    return federatedSchema\n                        .schema(sourceEntityExpr.schema)\n                        .findHierarchyByVariation(sourceEntityExpr.entity, variationExpr.property, variationExpr.name, hierarchy.hierarchy);\n                }\n            }\n        }\n\n        export function expandExpr(schema: FederatedConceptualSchema, expr: SQExpr, suppressHierarchyLevelExpansion?: boolean): SQExpr | SQExpr[] {\n            return SQExprHierarchyToHierarchyLevelConverter.convert(expr, schema) ||\n                SQExprVariationConverter.expand(expr, schema) ||\n                // If we are calling expandExpr from suppressHierarchyLevelExpansion, we should not expand the hierarchylevels\n                (!suppressHierarchyLevelExpansion && SQExprHierarchyLevelConverter.expand(expr, schema)) ||\n                expr;\n        }\n\n        export function isHierarchyOrVariation(schema: FederatedConceptualSchema, expr: SQExpr): boolean {\n            if (expr instanceof SQHierarchyExpr || expr instanceof SQHierarchyLevelExpr)\n                return true;\n\n            let conceptualProperty = expr.getConceptualProperty(schema);\n            if (conceptualProperty) {\n                let column = conceptualProperty.column;\n                if (column && column.variations && column.variations.length > 0)\n                    return true;\n            }\n\n            return false;\n        }\n\n        // Return column reference expression for hierarchy level expression.\n        export function getSourceVariationExpr(hierarchyLevelExpr: data.SQHierarchyLevelExpr): SQColumnRefExpr {\n            let fieldExprPattern: data.FieldExprPattern = data.SQExprConverter.asFieldPattern(hierarchyLevelExpr);\n            if (fieldExprPattern.columnHierarchyLevelVariation) {\n                let entity: data.SQExpr = SQExprBuilder.entity(fieldExprPattern.columnHierarchyLevelVariation.source.schema, fieldExprPattern.columnHierarchyLevelVariation.source.entity);\n\n                return SQExprBuilder.columnRef(entity, fieldExprPattern.columnHierarchyLevelVariation.source.name);\n            }\n        }\n\n        // Return hierarchy expression for hierarchy level expression.\n        export function getSourceHierarchy(hierarchyLevelExpr: data.SQHierarchyLevelExpr): SQHierarchyExpr {\n            let fieldExprPattern: data.FieldExprPattern = data.SQExprConverter.asFieldPattern(hierarchyLevelExpr);\n            let hierarchyLevel = fieldExprPattern.hierarchyLevel;\n            if (hierarchyLevel) {\n                let entity: data.SQExpr = SQExprBuilder.entity(hierarchyLevel.schema, hierarchyLevel.entity, hierarchyLevel.entityVar);\n                return SQExprBuilder.hierarchy(entity, hierarchyLevel.name);\n            }\n        }\n\n        export function getHierarchySourceAsVariationSource(hierarchyLevelExpr: SQHierarchyLevelExpr): SQPropertyVariationSourceExpr {\n\n            // Make sure the hierarchy level source is a hierarchy\n            if (!(hierarchyLevelExpr.arg instanceof SQHierarchyExpr))\n                return;\n                        \n            // Check if the hierarchy source if a variation\n            let hierarchyRef = <SQHierarchyExpr>hierarchyLevelExpr.arg;\n            if (hierarchyRef.arg instanceof SQPropertyVariationSourceExpr)\n                return <SQPropertyVariationSourceExpr>hierarchyRef.arg;\n        }\n\n        /**\n        * Returns true if firstExpr and secondExpr are levels in the same hierarchy and firstExpr is before secondExpr in allLevels.\n        */\n        export function areHierarchyLevelsOrdered(allLevels: SQHierarchyLevelExpr[], firstExpr: SQExpr, secondExpr: SQExpr): boolean {\n\n            // Validate that both items hierarchy levels\n            if (!(firstExpr instanceof SQHierarchyLevelExpr) || !(secondExpr instanceof SQHierarchyLevelExpr))\n                return false;\n\n            let firstLevel = <SQHierarchyLevelExpr>firstExpr;\n            let secondLevel = <SQHierarchyLevelExpr>secondExpr;\n\n            // Validate that both items belong to the same hierarchy\n            if (!SQExpr.equals(firstLevel.arg, secondLevel.arg))\n                return false;\n\n            // Determine the order\n            let firstIndex = SQExprUtils.indexOfExpr(allLevels, firstLevel);\n            let secondIndex = SQExprUtils.indexOfExpr(allLevels, secondLevel);\n\n            return firstIndex !== -1 && secondIndex !== -1 && firstIndex < secondIndex;\n        }\n\n        /**\n         * Given an ordered set of levels and an ordered subset of those levels, returns the index where\n         * expr should be inserted into the subset to maintain the correct order.\n         */\n        export function getInsertionIndex(allLevels: SQHierarchyLevelExpr[], orderedSubsetOfLevels: SQHierarchyLevelExpr[], expr: SQHierarchyLevelExpr): number {\n\n            let insertIndex = 0;\n\n            // Loop through the supplied levels until the insertion would no longer be in the correct order\n            while (insertIndex < orderedSubsetOfLevels.length &&\n                areHierarchyLevelsOrdered(allLevels, orderedSubsetOfLevels[insertIndex], expr)) {\n                insertIndex++;\n            }\n\n            return insertIndex;\n        }\n    }\n\n    export module SQExprHierarchyToHierarchyLevelConverter {\n        export function convert(sqExpr: SQExpr, federatedSchema: FederatedConceptualSchema): SQExpr[] {\n            debug.assertValue(sqExpr, 'sqExpr');\n            debug.assertValue(federatedSchema, 'federatedSchema');\n\n            if (sqExpr instanceof SQHierarchyExpr) {\n                let hierarchyExpr = <SQHierarchyExpr>sqExpr;\n\n                let conceptualHierarchy = SQHierarchyExprUtils.getConceptualHierarchy(hierarchyExpr, federatedSchema);\n                if (conceptualHierarchy)\n                    return _.map(conceptualHierarchy.levels, hierarchyLevel => SQExprBuilder.hierarchyLevel(sqExpr, hierarchyLevel.name));\n            }\n        }\n    }\n\n    module SQExprHierarchyLevelConverter {\n        export function expand(expr: SQExpr, schema: FederatedConceptualSchema): SQExpr[] {\n            debug.assertValue(expr, 'sqExpr');\n            debug.assertValue(schema, 'federatedSchema');\n            let exprs: SQExpr[] = [];\n\n            if (expr instanceof SQHierarchyLevelExpr) {\n                let fieldExpr = SQExprConverter.asFieldPattern(expr);\n                if (fieldExpr.hierarchyLevel) {\n                    let fieldExprItem = FieldExprPattern.toFieldExprEntityItemPattern(fieldExpr);\n                    let hierarchy = schema\n                        .schema(fieldExprItem.schema)\n                        .findHierarchy(fieldExprItem.entity, fieldExpr.hierarchyLevel.name);\n\n                    if (hierarchy) {\n                        let hierarchyLevels = hierarchy.levels;\n                        for (let hierarchyLevel of hierarchyLevels) {\n                            if (hierarchyLevel.name === fieldExpr.hierarchyLevel.level) {\n                                exprs.push(expr);\n                                break;\n                            }\n                            else\n                                exprs.push(\n                                    SQExprBuilder.hierarchyLevel(\n                                        SQExprBuilder.hierarchy(\n                                            SQExprBuilder.entity(fieldExprItem.schema, fieldExprItem.entity, fieldExprItem.entityVar),\n                                            hierarchy.name),\n                                        hierarchyLevel.name)\n                                );\n                        }\n                    }\n                }\n            }\n\n            if (!_.isEmpty(exprs))\n                return exprs;\n        }\n    }\n\n    module SQExprVariationConverter {\n        export function expand(expr: SQExpr, schema: FederatedConceptualSchema): SQExpr[] {\n            debug.assertValue(expr, 'sqExpr');\n            debug.assertValue(schema, 'federatedSchema');\n\n            let exprs: SQExpr[];\n            let conceptualProperty = expr.getConceptualProperty(schema);\n\n            if (conceptualProperty) {\n                let column = conceptualProperty.column;\n                if (column && column.variations && column.variations.length > 0) {\n                    let variations = column.variations;\n\n                    // for SU11, we support only one variation\n                    debug.assert(variations.length === 1, \"variations.length\");\n                    let variation = variations[0];\n\n                    let fieldExpr = SQExprConverter.asFieldPattern(expr);\n                    let fieldExprItem = FieldExprPattern.toFieldExprEntityItemPattern(fieldExpr);\n\n                    exprs = [];\n                    if (variation.defaultHierarchy) {\n                        let hierarchyExpr = SQExprBuilder.hierarchy(\n                            SQExprBuilder.propertyVariationSource(\n                                SQExprBuilder.entity(fieldExprItem.schema, fieldExprItem.entity, fieldExprItem.entityVar),\n                                variation.name, conceptualProperty.name),\n                            variation.defaultHierarchy.name);\n\n                        for (let level of variation.defaultHierarchy.levels)\n                            exprs.push(SQExprBuilder.hierarchyLevel(hierarchyExpr, level.name));\n                    }\n                }\n            }\n\n            return exprs;\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    // A group can consist of either a single expression, or a collection of hierarchy expressions\n    export interface SQExprGroup {\n        expr: SQExpr;\n        children: SQHierarchyLevelExpr[];\n\n        /** Index of expression in the query. */\n        selectQueryIndex: number;\n    };\n\n    export module SQExprGroupUtils {\n        /** Group all projections. Eacch group can consist of either a single property, or a collection of hierarchy items. */\n        export function groupExprs(schema: FederatedConceptualSchema, exprs: SQExpr[]): SQExprGroup[] {\n            let groups: SQExprGroup[] = [];\n            for (let i = 0, len = exprs.length; i < len; i++) {\n                let expr = exprs[i];\n                debug.assertValue(expr, \"Expression not found\");\n\n                if (!(expr instanceof SQHierarchyLevelExpr)) {\n                    groups.push({ expr: expr, children: null, selectQueryIndex: i });\n                }\n                else {\n                    addChildToGroup(schema, groups, expr, i);\n                }\n            }\n\n            return groups;\n        }\n\n        function addChildToGroup(\n            schema: FederatedConceptualSchema,\n            groups: SQExprGroup[],\n            expr: SQHierarchyLevelExpr,\n            selectQueryIndex: number): void {\n\n            // shouldAddExpressionToNewGroup is used to control whether we should add the passed expr to \n            // a new Group or to the last Group\n            let shouldAddExpressionToNewGroup = true;\n            let exprSource = SQHierarchyExprUtils.getSourceVariationExpr(expr) || SQHierarchyExprUtils.getSourceHierarchy(expr);\n            let lastGroup = _.last(groups);\n\n            // The relevant group is always the last added. If it has the same source hierarchy,\n            // and is properly ordered within that hierarchy, we will need to add to this group.\n            if (lastGroup && lastGroup.children && SQExpr.equals(lastGroup.expr, exprSource)) {\n                let expandedExpr = SQHierarchyExprUtils.expandExpr(schema, expr.arg);\n                if (expandedExpr instanceof Array) {\n                    let allHierarchyLevels = <SQHierarchyLevelExpr[]>expandedExpr;\n                    shouldAddExpressionToNewGroup = !SQHierarchyExprUtils.areHierarchyLevelsOrdered(allHierarchyLevels, _.last(lastGroup.children), expr);\n                }\n            }\n\n            if (shouldAddExpressionToNewGroup)\n                // Use the Sourcevariation as the expression for the group.\n                groups.push({ expr: exprSource, children: [expr], selectQueryIndex: selectQueryIndex });\n            else {\n                debug.assertValue(lastGroup, 'There should be a group to add the variation to');\n                debug.assertValue(lastGroup.children, 'The group should have children to add the variation to');\n                lastGroup.children.push(expr);\n            }\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    import StringExtensions = jsCommon.StringExtensions;\n\n    /** Represents an immutable expression within a SemanticQuery. */\n    export abstract class SQExpr implements ISQExpr {\n        private _kind: SQExprKind;\n\n        constructor(kind: SQExprKind) {\n            debug.assertValue(kind, 'kind');\n\n            this._kind = kind;\n        }\n\n        public static equals(x: SQExpr, y: SQExpr, ignoreCase?: boolean): boolean {\n            return SQExprEqualityVisitor.run(x, y, ignoreCase);\n        }\n\n        public validate(schema: FederatedConceptualSchema, aggrUtils: ISQAggregationOperations, errors?: SQExprValidationError[]): SQExprValidationError[] {\n            let validator = new SQExprValidationVisitor(schema, aggrUtils, errors);\n            this.accept(validator);\n            return validator.errors;\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            debug.assertFail('abstract method');\n            return;\n        }\n\n        public get kind(): SQExprKind {\n            return this._kind;\n        }\n        \n        public static isArithmetic(expr: SQExpr): expr is SQArithmeticExpr {\n            debug.assertValue(expr, 'expr');\n            \n            return expr.kind === SQExprKind.Arithmetic;\n        }\n\n        public static isColumn(expr: SQExpr): expr is SQColumnRefExpr {\n            debug.assertValue(expr, 'expr');\n\n            return expr.kind === SQExprKind.ColumnRef;\n        }\n\n        public static isConstant(expr: SQExpr): expr is SQConstantExpr {\n            debug.assertValue(expr, 'expr');\n\n            return expr.kind === SQExprKind.Constant;\n        }\n\n        public static isEntity(expr: SQExpr): expr is SQEntityExpr {\n            debug.assertValue(expr, 'expr');\n\n            return expr.kind === SQExprKind.Entity;\n        }\n\n        public static isHierarchy(expr: SQExpr): expr is SQHierarchyExpr {\n            debug.assertValue(expr, 'expr');\n\n            return expr.kind === SQExprKind.Hierarchy;\n        }\n\n        public static isHierarchyLevel(expr: SQExpr): expr is SQHierarchyLevelExpr {\n            debug.assertValue(expr, 'expr');\n\n            return expr.kind === SQExprKind.HierarchyLevel;\n        }\n\n        public static isAggregation(expr: SQExpr): expr is SQAggregationExpr {\n            debug.assertValue(expr, 'expr');\n\n            return expr.kind === SQExprKind.Aggregation;\n        }\n\n        public static isMeasure(expr: SQExpr): expr is SQMeasureRefExpr {\n            debug.assertValue(expr, 'expr');\n\n            return expr.kind === SQExprKind.MeasureRef;\n        }\n\n        public static isSelectRef(expr: SQExpr): expr is SQSelectRefExpr {\n            debug.assertValue(expr, 'expr');\n\n            return expr.kind === SQExprKind.SelectRef;\n        }\n        \n        public static isScopedEval(expr: SQExpr): expr is SQScopedEvalExpr {\n            debug.assertValue(expr, 'expr');\n            \n            return expr.kind === SQExprKind.ScopedEval;\n        }\n        \n        public static isWithRef(expr: SQExpr): expr is SQWithRefExpr {\n            debug.assertValue(expr, 'expr');\n            \n            return expr.kind === SQExprKind.WithRef;\n        }\n\n        public static isResourcePackageItem(expr: SQExpr): expr is SQResourcePackageItemExpr {\n            debug.assertValue(expr, 'expr');\n\n            return expr.kind === SQExprKind.ResourcePackageItem;\n        }\n\n        public getMetadata(federatedSchema: FederatedConceptualSchema): SQExprMetadata {\n            debug.assertValue(federatedSchema, 'federatedSchema');\n\n            let field = SQExprConverter.asFieldPattern(this);\n            if (!field)\n                return;\n\n            if (field.column || field.columnAggr || field.measure)\n                return this.getMetadataForProperty(field, federatedSchema);\n\n            if (field.hierarchyLevel || field.hierarchyLevelAggr)\n                return this.getMetadataForHierarchyLevel(field, federatedSchema);\n\n            if (field.columnHierarchyLevelVariation)\n                return this.getMetadataForVariation(field, federatedSchema);\n\n            if (field.percentOfGrandTotal)\n                return this.getMetadataForPercentOfGrandTotal();\n\n            return SQExpr.getMetadataForEntity(field, federatedSchema);\n        }\n\n        public getDefaultAggregate(federatedSchema: FederatedConceptualSchema, forceAggregation: boolean = false): QueryAggregateFunction {\n            debug.assertValue(federatedSchema, 'federatedSchema');\n\n            let property = this.getConceptualProperty(federatedSchema) || this.getHierarchyLevelConceptualProperty(federatedSchema);\n            if (!property)\n                return;\n\n            let aggregate: QueryAggregateFunction;\n\n            if (property && property.kind === ConceptualPropertyKind.Column) {\n                let propertyDefaultAggregate = property.column ? property.column.defaultAggregate : null;\n\n                if ((property.type.integer || property.type.numeric) &&\n                    propertyDefaultAggregate !== ConceptualDefaultAggregate.None) {\n                    aggregate = defaultAggregateToQueryAggregateFunction(propertyDefaultAggregate);\n                    if (aggregate === undefined)\n                        aggregate = defaultAggregateForDataType(property.type);\n                }\n\n                // If we haven't found an appropriate aggregate, and want to force aggregation anyway, \n                // aggregate on CountNonNull.\n                if (aggregate === undefined && forceAggregation) {\n                    aggregate = QueryAggregateFunction.CountNonNull;\n                }\n            }\n\n            return aggregate;\n        }\n\n        /** Return the SQExpr[] of group on columns if it has group on keys otherwise return the SQExpr of the column.*/\n        public getKeyColumns(schema: FederatedConceptualSchema): SQExpr[] {\n            let columnRefExpr = SQExprColumnRefInfoVisitor.getColumnRefSQExpr(schema, this);\n            if (!columnRefExpr)\n                return;\n\n            let keySQExprs: SQExpr[] = [];\n            let keys = this.getPropertyKeys(schema);\n            if (keys && keys.length > 0) {\n                for (let i = 0, len = keys.length; i < len; i++) {\n                    keySQExprs.push(SQExprBuilder.columnRef(columnRefExpr.source, keys[i].name));\n                }\n            }\n            else\n                keySQExprs.push(columnRefExpr);\n\n            return keySQExprs;\n        }\n\n        /** Returns a value indicating whether the expression would group on keys other than itself.*/\n        public hasGroupOnKeys(schema: FederatedConceptualSchema): boolean {\n            let columnRefExpr = SQExprColumnRefInfoVisitor.getColumnRefSQExpr(schema, this);\n            if (!columnRefExpr)\n                return;\n            let keys = this.getPropertyKeys(schema);\n\n            if (!keys || keys.length < 1)\n                return false;\n\n            if (keys.length > 1)\n                return true;\n\n            let keySqExpr = SQExprBuilder.columnRef(columnRefExpr.source, keys[0].name);\n            return !SQExpr.equals(keySqExpr, this);\n        }\n\n        private getPropertyKeys(schema: FederatedConceptualSchema): jsCommon.ArrayNamedItems<ConceptualProperty> {\n            let property = this.getConceptualProperty(schema) || this.getHierarchyLevelConceptualProperty(schema);\n            if (!property)\n                return;\n\n            return property.column ? property.column.keys : undefined;\n        }\n\n        public getConceptualProperty(federatedSchema: FederatedConceptualSchema): ConceptualProperty {\n            let field = SQExprConverter.asFieldPattern(this);\n            if (!field)\n                return;\n\n            let fieldExprItem = FieldExprPattern.toFieldExprEntityItemPattern(field);\n            let propertyName = FieldExprPattern.getPropertyName(field);\n\n            if (propertyName)\n                return federatedSchema\n                    .schema(fieldExprItem.schema)\n                    .findProperty(fieldExprItem.entity, propertyName);\n        }\n\n        public getTargetEntityForVariation(federatedSchema: FederatedConceptualSchema, variationName: string): string {\n            let property = this.getConceptualProperty(federatedSchema);\n            if (property && property.column && !_.isEmpty(property.column.variations)) {\n                let variations = property.column.variations;\n                for (let variation of variations)\n                    if (variation.name === variationName)\n                        return variation.navigationProperty.targetEntity.name;\n            }\n        }\n\n        public getTargetEntity(federatedSchema: FederatedConceptualSchema): SQEntityExpr {\n            return SQEntityExprInfoVisitor.getEntityExpr(federatedSchema, this);\n        }\n\n        private getHierarchyLevelConceptualProperty(federatedSchema: FederatedConceptualSchema): ConceptualProperty {\n            let field = SQExprConverter.asFieldPattern(this);\n            if (!field)\n                return;\n\n            let fieldExprHierachyLevel = field.hierarchyLevel || field.hierarchyLevelAggr;\n            if (fieldExprHierachyLevel) {\n                let fieldExprEntity = FieldExprPattern.toFieldExprEntityItemPattern(field);\n\n                let hierarchy = federatedSchema\n                    .schema(fieldExprEntity.schema)\n                    .findHierarchy(fieldExprEntity.entity, fieldExprHierachyLevel.name);\n\n                if (hierarchy) {\n                    let hierarchyLevel = hierarchy.levels.withName(fieldExprHierachyLevel.level);\n                    if (hierarchyLevel)\n                        return hierarchyLevel.column;\n                }\n            }\n        }\n\n        private getMetadataForVariation(field: data.FieldExprPattern, federatedSchema: FederatedConceptualSchema): SQExprMetadata {\n            debug.assertValue(field, 'field');\n            debug.assertValue(federatedSchema, 'federatedSchema');\n\n            let columnHierarchyLevelVariation = field.columnHierarchyLevelVariation;\n            let fieldExprItem = FieldExprPattern.toFieldExprEntityItemPattern(field);\n            let sourceProperty = federatedSchema\n                .schema(fieldExprItem.schema)\n                .findProperty(fieldExprItem.entity, columnHierarchyLevelVariation.source.name);\n\n            if (sourceProperty && sourceProperty.column && sourceProperty.column.variations) {\n                for (let variation of sourceProperty.column.variations) {\n                    if (variation.defaultHierarchy && variation.defaultHierarchy.levels) {\n                        for (let level of variation.defaultHierarchy.levels) {\n                            if (level.name === columnHierarchyLevelVariation.level.level) {\n                                let property = level.column;\n                                return {\n                                    kind: (property.kind === ConceptualPropertyKind.Measure) ? FieldKind.Measure : FieldKind.Column,\n                                    type: property.type,\n                                    format: property.format,\n                                    idOnEntityKey: property.column ? property.column.idOnEntityKey : false,\n                                    defaultAggregate: property.column ? property.column.defaultAggregate : null\n                                };\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        private getMetadataForHierarchyLevel(field: FieldExprPattern, federatedSchema: FederatedConceptualSchema): SQExprMetadata {\n            debug.assertValue(field, 'field');\n            debug.assertValue(federatedSchema, 'federatedSchema');\n\n            let property = this.getHierarchyLevelConceptualProperty(federatedSchema);\n            if (!property)\n                return;\n\n            return this.getPropertyMetadata(field, property);\n        }\n\n        private getMetadataForPercentOfGrandTotal(): SQExprMetadata {\n            return {\n                kind: FieldKind.Measure,\n                format: '#,##0.00%',\n                type: ValueType.fromExtendedType(ExtendedType.Double)\n            };\n        }\n\n        private getPropertyMetadata(field: FieldExprPattern, property: ConceptualProperty): SQExprMetadata {\n            let format = property.format;\n            let type = property.type;\n            let columnAggregate = field.columnAggr || field.hierarchyLevelAggr;\n\n            if (columnAggregate) {\n                switch (columnAggregate.aggregate) {\n                    case QueryAggregateFunction.Count:\n                    case QueryAggregateFunction.CountNonNull:\n                        type = ValueType.fromExtendedType(ExtendedType.Integer);\n                        format = undefined;\n                        break;\n                    case QueryAggregateFunction.Avg:\n                        if (type.integer)\n                            type = ValueType.fromExtendedType(ExtendedType.Double);\n                        break;\n                }\n            }\n\n            return {\n                kind: (property.kind === ConceptualPropertyKind.Measure || (columnAggregate && columnAggregate.aggregate !== undefined)) ? FieldKind.Measure : FieldKind.Column,\n                type: type,\n                format: format,\n                idOnEntityKey: property.column ? property.column.idOnEntityKey : false,\n                aggregate: columnAggregate ? columnAggregate.aggregate : undefined,\n                defaultAggregate: property.column ? property.column.defaultAggregate : null\n            };\n        }\n\n        private getMetadataForProperty(field: FieldExprPattern, federatedSchema: FederatedConceptualSchema): SQExprMetadata {\n            debug.assertValue(field, 'field');\n            debug.assertValue(federatedSchema, 'federatedSchema');\n\n            let property = this.getConceptualProperty(federatedSchema);\n            if (!property)\n                return;\n\n            return this.getPropertyMetadata(field, property);\n        }\n\n        private static getMetadataForEntity(field: FieldExprPattern, federatedSchema: FederatedConceptualSchema): SQExprMetadata {\n            debug.assertValue(field, 'field');\n            debug.assertValue(federatedSchema, 'federatedSchema');\n\n            let fieldExprItem = FieldExprPattern.toFieldExprEntityItemPattern(field);\n            let entity = federatedSchema\n                .schema(fieldExprItem.schema)\n                .entities\n                .withName(fieldExprItem.entity);\n\n            if (!entity)\n                return;\n\n            // We only support count and countnonnull for entity.\n            if (field.entityAggr) {\n                switch (field.entityAggr.aggregate) {\n                    case QueryAggregateFunction.Count:\n                    case QueryAggregateFunction.CountNonNull:\n                        return {\n                            kind: FieldKind.Measure,\n                            type: ValueType.fromExtendedType(ExtendedType.Integer),\n                            format: undefined,\n                            idOnEntityKey: false,\n                            aggregate: field.entityAggr.aggregate\n                        };\n                }\n            }\n        }\n    }\n\n    export const enum SQExprKind {\n        Entity,\n        ColumnRef,\n        MeasureRef,\n        Aggregation,\n        PropertyVariationSource,\n        Hierarchy,\n        HierarchyLevel,\n        And,\n        Between,\n        In,\n        Or,\n        Contains,\n        Compare,\n        StartsWith,\n        Exists,\n        Not,\n        Constant,\n        DateSpan,\n        DateAdd,\n        Now,\n        AnyValue,\n        DefaultValue,\n        Arithmetic,\n        FillRule,\n        ResourcePackageItem,\n        ScopedEval,\n        WithRef,\n        Percentile,\n        SelectRef,\n    }\n\n    export interface SQExprMetadata {\n        kind: FieldKind;\n        type: ValueType;\n        format?: string;\n        idOnEntityKey?: boolean;\n        aggregate?: QueryAggregateFunction;\n        defaultAggregate?: ConceptualDefaultAggregate;\n    }\n\n    export const enum FieldKind {\n        /** Indicates the field references a column, which evaluates to a distinct set of values (e.g., Year, Name, SalesQuantity, etc.). */\n        Column,\n\n        /** Indicates the field references a measure, which evaluates to a single value (e.g., SalesYTD, Sum(Sales), etc.). */\n        Measure,\n    }\n\n    /** Note: Exported for testability */\n    export function defaultAggregateForDataType(type: ValueType): QueryAggregateFunction {\n        if (type.integer || type.numeric)\n            return QueryAggregateFunction.Sum;\n\n        return QueryAggregateFunction.Count;\n    }\n\n    /** Note: Exported for testability */\n    export function defaultAggregateToQueryAggregateFunction(aggregate: ConceptualDefaultAggregate): QueryAggregateFunction {\n        switch (aggregate) {\n            case ConceptualDefaultAggregate.Average:\n                return QueryAggregateFunction.Avg;\n            case ConceptualDefaultAggregate.Count:\n                return QueryAggregateFunction.CountNonNull;\n            case ConceptualDefaultAggregate.DistinctCount:\n                return QueryAggregateFunction.Count;\n            case ConceptualDefaultAggregate.Max:\n                return QueryAggregateFunction.Max;\n            case ConceptualDefaultAggregate.Min:\n                return QueryAggregateFunction.Min;\n            case ConceptualDefaultAggregate.Sum:\n                return QueryAggregateFunction.Sum;\n            default:\n                return;\n        }\n    }\n\n    export class SQEntityExpr extends SQExpr {\n        public schema: string;\n        public entity: string;\n        public variable: string;\n\n        constructor(schema: string, entity: string, variable?: string) {\n            debug.assertValue(entity, 'entity');\n\n            super(SQExprKind.Entity);\n            this.schema = schema;\n            this.entity = entity;\n            if (variable)\n                this.variable = variable;\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitEntity(this, arg);\n        }\n    }\n\n    export class SQArithmeticExpr extends SQExpr {\n        public left: SQExpr;\n        public right: SQExpr;\n        public operator: ArithmeticOperatorKind;\n\n        constructor(left: SQExpr, right: SQExpr, operator: ArithmeticOperatorKind) {\n            debug.assertValue(left, 'left');\n            debug.assertValue(right, 'right');\n            debug.assertValue(operator, 'operator');\n\n            super(SQExprKind.Arithmetic);\n            this.left = left;\n            this.right = right;\n            this.operator = operator;\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitArithmetic(this, arg);\n        }\n    }\n\n    export class SQScopedEvalExpr extends SQExpr {\n        public expression: SQExpr;\n        public scope: SQExpr[];\n\n        constructor(expression: SQExpr, scope: SQExpr[]) {\n            debug.assertValue(expression, 'expression');\n            debug.assertValue(scope, 'scope');\n\n            super(SQExprKind.ScopedEval);\n            this.expression = expression;\n            this.scope = scope;\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitScopedEval(this, arg);\n        }\n\n        public getMetadata(federatedSchema: FederatedConceptualSchema): SQExprMetadata {\n            return this.expression.getMetadata(federatedSchema);\n        }\n    }\n    \n    export class SQWithRefExpr extends SQExpr {\n        public expressionName: string;\n\n        constructor(expressionName: string) {\n            debug.assertValue(expressionName, 'expressionName');\n\n            super(SQExprKind.WithRef);\n            this.expressionName = expressionName;\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitWithRef(this, arg);\n        }\n    }\n\n    export abstract class SQPropRefExpr extends SQExpr {\n        public ref: string;\n        public source: SQExpr;\n\n        constructor(kind: SQExprKind, source: SQExpr, ref: string) {\n            debug.assertValue(kind, 'kind');\n            debug.assertValue(source, 'source');\n            debug.assertValue(ref, 'ref');\n\n            super(kind);\n            this.source = source;\n            this.ref = ref;\n        }\n    }\n\n    export class SQColumnRefExpr extends SQPropRefExpr {\n        constructor(source: SQExpr, ref: string) {\n            super(SQExprKind.ColumnRef, source, ref);\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitColumnRef(this, arg);\n        }\n    }\n\n    export class SQMeasureRefExpr extends SQPropRefExpr {\n        constructor(source: SQExpr, ref: string) {\n            super(SQExprKind.MeasureRef, source, ref);\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitMeasureRef(this, arg);\n        }\n    }\n\n    export class SQAggregationExpr extends SQExpr {\n        public arg: SQExpr;\n        public func: QueryAggregateFunction;\n\n        constructor(arg: SQExpr, func: QueryAggregateFunction) {\n            debug.assertValue(arg, 'arg');\n            debug.assertValue(func, 'func');\n\n            super(SQExprKind.Aggregation);\n            this.arg = arg;\n            this.func = func;\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitAggr(this, arg);\n        }\n    }\n\n    export class SQPercentileExpr extends SQExpr {\n        public arg: SQExpr;\n        public k: number;\n        public exclusive: boolean;\n\n        constructor(arg: SQExpr, k: number, exclusive: boolean) {\n            debug.assertValue(arg, 'arg');\n            debug.assertValue(k, 'k');\n            debug.assert(0 <= k && k <= 1, '0 <= k && k <= 1');\n            debug.assertValue(exclusive, 'exclusive');\n\n            super(SQExprKind.Percentile);\n            this.arg = arg;\n            this.k = k;\n            this.exclusive = exclusive;\n        }\n\n        public getMetadata(federatedSchema: FederatedConceptualSchema): SQExprMetadata {\n            debug.assertValue(federatedSchema, 'federatedSchema');\n\n            let argMetadata = this.arg.getMetadata(federatedSchema);\n            if (argMetadata) {\n                return {\n                    kind: FieldKind.Measure,\n                    type: argMetadata.type,\n                };\n            }\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitPercentile(this, arg);\n        }\n    }\n\n    export class SQPropertyVariationSourceExpr extends SQExpr {\n        public arg: SQExpr;\n        public name: string;\n        public property: string;\n\n        constructor(arg: SQExpr, name: string, property: string) {\n            debug.assertValue(arg, 'arg');\n            debug.assertValue(name, 'name');\n            debug.assertValue(property, 'property');\n\n            super(SQExprKind.PropertyVariationSource);\n            this.arg = arg;\n            this.name = name;\n            this.property = property;\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitPropertyVariationSource(this, arg);\n        }\n    }\n\n    export class SQHierarchyExpr extends SQExpr {\n        public arg: SQExpr;\n        public hierarchy: string;\n\n        constructor(arg: SQExpr, hierarchy: string) {\n            debug.assertValue(arg, 'arg');\n            debug.assertValue(hierarchy, 'hierarchy');\n\n            super(SQExprKind.Hierarchy);\n            this.arg = arg;\n            this.hierarchy = hierarchy;\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitHierarchy(this, arg);\n        }\n    }\n\n    export class SQHierarchyLevelExpr extends SQExpr {\n        public arg: SQExpr;\n        public level: string;\n\n        constructor(arg: SQExpr, level: string) {\n            debug.assertValue(arg, 'arg');\n            debug.assertValue(level, 'level');\n\n            super(SQExprKind.HierarchyLevel);\n            this.arg = arg;\n            this.level = level;\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitHierarchyLevel(this, arg);\n        }\n    }\n\n    export class SQSelectRefExpr extends SQExpr {\n        public expressionName: string;\n\n        constructor(expressionName: string) {\n            debug.assertValue(expressionName, 'arg');\n\n            super(SQExprKind.SelectRef);\n            this.expressionName = expressionName;\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitSelectRef(this, arg);\n        }\n    }\n\n    export class SQAndExpr extends SQExpr {\n        left: SQExpr;\n        right: SQExpr;\n\n        constructor(left: SQExpr, right: SQExpr) {\n            debug.assertValue(left, 'left');\n            debug.assertValue(right, 'right');\n\n            super(SQExprKind.And);\n            this.left = left;\n            this.right = right;\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitAnd(this, arg);\n        }\n    }\n\n    export class SQBetweenExpr extends SQExpr {\n        arg: SQExpr;\n        lower: SQExpr;\n        upper: SQExpr;\n\n        constructor(arg: SQExpr, lower: SQExpr, upper: SQExpr) {\n            debug.assertValue(arg, 'arg');\n            debug.assertValue(lower, 'lower');\n            debug.assertValue(upper, 'upper');\n\n            super(SQExprKind.Between);\n            this.arg = arg;\n            this.lower = lower;\n            this.upper = upper;\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitBetween(this, arg);\n        }\n    }\n\n    export class SQInExpr extends SQExpr {\n        args: SQExpr[];\n        values: SQExpr[][];\n\n        constructor(args: SQExpr[], values: SQExpr[][]) {\n            debug.assertValue(args, 'args');\n            debug.assertValue(values, 'values');\n\n            super(SQExprKind.In);\n            this.args = args;\n            this.values = values;\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitIn(this, arg);\n        }\n    }\n\n    export class SQOrExpr extends SQExpr {\n        left: SQExpr;\n        right: SQExpr;\n\n        constructor(left: SQExpr, right: SQExpr) {\n            debug.assertValue(left, 'left');\n            debug.assertValue(right, 'right');\n\n            super(SQExprKind.Or);\n            this.left = left;\n            this.right = right;\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitOr(this, arg);\n        }\n    }\n\n    export class SQCompareExpr extends SQExpr {\n        comparison: QueryComparisonKind;\n        left: SQExpr;\n        right: SQExpr;\n\n        constructor(comparison: QueryComparisonKind, left: SQExpr, right: SQExpr) {\n            debug.assertValue(comparison, 'kind');\n            debug.assertValue(left, 'left');\n            debug.assertValue(right, 'right');\n\n            super(SQExprKind.Compare);\n            this.comparison = comparison;\n            this.left = left;\n            this.right = right;\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitCompare(this, arg);\n        }\n    }\n\n    export class SQContainsExpr extends SQExpr {\n        left: SQExpr;\n        right: SQExpr;\n\n        constructor(left: SQExpr, right: SQExpr) {\n            debug.assertValue(left, 'left');\n            debug.assertValue(right, 'right');\n\n            super(SQExprKind.Contains);\n            this.left = left;\n            this.right = right;\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitContains(this, arg);\n        }\n    }\n\n    export class SQStartsWithExpr extends SQExpr {\n        left: SQExpr;\n        right: SQExpr;\n\n        constructor(left: SQExpr, right: SQExpr) {\n            debug.assertValue(left, 'left');\n            debug.assertValue(right, 'right');\n\n            super(SQExprKind.StartsWith);\n            this.left = left;\n            this.right = right;\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitStartsWith(this, arg);\n        }\n    }\n\n    export class SQExistsExpr extends SQExpr {\n        arg: SQExpr;\n\n        constructor(arg: SQExpr) {\n            debug.assertValue(arg, 'arg');\n\n            super(SQExprKind.Exists);\n            this.arg = arg;\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitExists(this, arg);\n        }\n    }\n\n    export class SQNotExpr extends SQExpr {\n        arg: SQExpr;\n\n        constructor(arg: SQExpr) {\n            debug.assertValue(arg, 'arg');\n\n            super(SQExprKind.Not);\n            this.arg = arg;\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitNot(this, arg);\n        }\n    }\n\n    export class SQConstantExpr extends SQExpr implements ISQConstantExpr {\n        public type: ValueType;\n\n        /** The native JavaScript representation of the value. */\n        public value: any;\n\n        /** The string encoded, lossless representation of the value. */\n        public valueEncoded: string;\n\n        constructor(type: ValueType, value: any, valueEncoded: string) {\n            debug.assertValue(type, 'type');\n\n            super(SQExprKind.Constant);\n            this.type = type;\n            this.value = value;\n            this.valueEncoded = valueEncoded;\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitConstant(this, arg);\n        }\n\n        public getMetadata(federatedSchema: FederatedConceptualSchema): SQExprMetadata {\n            debug.assertValue(federatedSchema, 'federatedSchema');\n\n            return {\n                // Returning Measure as the kind for a SQConstantExpr is slightly ambiguous allowing the return object to conform to SQEXprMetadata.\n                // A getType or similiar function in the future would be more appropriate. \n                kind: FieldKind.Measure,\n                type: this.type,\n            };\n        }\n    }\n\n    export class SQDateSpanExpr extends SQExpr {\n        public unit: TimeUnit;\n        public arg: SQExpr;\n\n        constructor(unit: TimeUnit, arg: SQExpr) {\n            debug.assertValue(unit, 'unit');\n            debug.assertValue(arg, 'arg');\n\n            super(SQExprKind.DateSpan);\n            this.unit = unit;\n            this.arg = arg;\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitDateSpan(this, arg);\n        }\n    }\n\n    export class SQDateAddExpr extends SQExpr {\n        public unit: TimeUnit;\n        public amount: number;\n        public arg: SQExpr;\n\n        constructor(unit: TimeUnit, amount: number, arg: SQExpr) {\n            debug.assertValue(unit, 'unit');\n            debug.assertValue(amount, 'amount');\n            debug.assertValue(arg, 'arg');\n\n            super(SQExprKind.DateAdd);\n            this.unit = unit;\n            this.arg = arg;\n            this.amount = amount;\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitDateAdd(this, arg);\n        }\n    }\n\n    export class SQNowExpr extends SQExpr {\n        constructor() {\n            super(SQExprKind.Now);\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitNow(this, arg);\n        }\n    }\n\n    export class SQDefaultValueExpr extends SQExpr {\n        constructor() {\n            super(SQExprKind.DefaultValue);\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitDefaultValue(this, arg);\n        }\n    }\n\n    export class SQAnyValueExpr extends SQExpr {\n        constructor() {\n            super(SQExprKind.AnyValue);\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitAnyValue(this, arg);\n        }\n    }\n\n    export class SQFillRuleExpr extends SQExpr {\n        public input: SQExpr;\n        public rule: FillRuleDefinition;\n\n        constructor(\n            input: SQExpr,\n            fillRule: FillRuleDefinition) {\n            debug.assertValue(input, 'input');\n            debug.assertValue(fillRule, 'fillRule');\n\n            super(SQExprKind.FillRule);\n            this.input = input;\n            this.rule = fillRule;\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitFillRule(this, arg);\n        }\n    }\n\n    export class SQResourcePackageItemExpr extends SQExpr {\n        public packageName: string;\n        public packageType: number;\n        public itemName: string;\n\n        constructor(packageName: string, packageType: number, itemName: string) {\n            debug.assertValue(packageName, 'packageName');\n            debug.assertValue(itemName, 'itemName');\n\n            super(SQExprKind.ResourcePackageItem);\n            this.packageName = packageName;\n            this.packageType = packageType;\n            this.itemName = itemName;\n        }\n\n        public accept<T, TArg>(visitor: ISQExprVisitorWithArg<T, TArg>, arg?: TArg): T {\n            return visitor.visitResourcePackageItem(this, arg);\n        }\n    }\n\n    /** Provides utilities for creating & manipulating expressions. */\n    export module SQExprBuilder {\n        export function entity(schema: string, entity: string, variable?: string): SQEntityExpr {\n            return new SQEntityExpr(schema, entity, variable);\n        }\n\n        export function columnRef(source: SQExpr, prop: string): SQColumnRefExpr {\n            return new SQColumnRefExpr(source, prop);\n        }\n\n        export function measureRef(source: SQExpr, prop: string): SQMeasureRefExpr {\n            return new SQMeasureRefExpr(source, prop);\n        }\n\n        export function aggregate(source: SQExpr, aggregate: QueryAggregateFunction): SQAggregationExpr {\n            return new SQAggregationExpr(source, aggregate);\n        }\n\n        export function selectRef(expressionName: string): SQSelectRefExpr {\n            return new SQSelectRefExpr(expressionName);\n        }\n\n        export function percentile(source: SQExpr, k: number, exclusive: boolean): SQPercentileExpr {\n            return new SQPercentileExpr(source, k, exclusive);\n        }\n\n        export function arithmetic(left: SQExpr, right: SQExpr, operator: ArithmeticOperatorKind): SQArithmeticExpr {\n            return new SQArithmeticExpr(left, right, operator);\n        }\n\n        export function scopedEval(expression: SQExpr, scope: SQExpr[]): SQScopedEvalExpr {\n            return new SQScopedEvalExpr(expression, scope);\n        }\n        \n        export function withRef(expressionName: string): SQWithRefExpr {\n            return new SQWithRefExpr(expressionName);\n        }\n\n        export function hierarchy(source: SQExpr, hierarchy: string): SQHierarchyExpr {\n            return new SQHierarchyExpr(source, hierarchy);\n        }\n\n        export function propertyVariationSource(source: SQExpr, name: string, property: string): SQPropertyVariationSourceExpr {\n            return new SQPropertyVariationSourceExpr(source, name, property);\n        }\n\n        export function hierarchyLevel(source: SQExpr, level: string): SQHierarchyLevelExpr {\n            return new SQHierarchyLevelExpr(source, level);\n        }\n\n        export function and(left: SQExpr, right: SQExpr): SQExpr {\n            if (!left)\n                return right;\n            if (!right)\n                return left;\n\n            return new SQAndExpr(left, right);\n        }\n\n        export function between(arg: SQExpr, lower: SQExpr, upper: SQExpr): SQBetweenExpr {\n            return new SQBetweenExpr(arg, lower, upper);\n        }\n\n        export function inExpr(args: SQExpr[], values: SQExpr[][]): SQInExpr {\n            return new SQInExpr(args, values);\n        }\n\n        export function or(left: SQExpr, right: SQExpr): SQExpr {\n            if (!left)\n                return right;\n            if (!right)\n                return left;\n            if (left instanceof SQInExpr && right instanceof SQInExpr) {\n                let inExpr = tryUseInExprs(<SQInExpr>left, <SQInExpr>right);\n                if (inExpr)\n                    return inExpr;\n            }\n\n            return new SQOrExpr(left, right);\n        }\n\n        function tryUseInExprs(left: SQInExpr, right: SQInExpr): SQInExpr {\n            if (!left.args || !right.args)\n                return;\n\n            let leftArgLen = left.args.length;\n            let rightArgLen = right.args.length;\n            if (leftArgLen !== rightArgLen)\n                return;\n\n            for (let i = 0; i < leftArgLen; ++i) {\n                if (!SQExpr.equals(left.args[i], right.args[i]))\n                    return;\n            }\n\n            let combinedValues = left.values.concat(right.values);\n            return SQExprBuilder.inExpr(left.args, combinedValues);\n        }\n\n        export function compare(kind: QueryComparisonKind, left: SQExpr, right: SQExpr): SQCompareExpr {\n            return new SQCompareExpr(kind, left, right);\n        }\n\n        export function contains(left: SQExpr, right: SQExpr): SQContainsExpr {\n            return new SQContainsExpr(left, right);\n        }\n\n        export function exists(arg: SQExpr): SQExistsExpr {\n            return new SQExistsExpr(arg);\n        }\n\n        export function equal(left: SQExpr, right: SQExpr): SQCompareExpr {\n            return compare(QueryComparisonKind.Equal, left, right);\n        }\n\n        export function not(arg: SQExpr): SQNotExpr {\n            return new SQNotExpr(arg);\n        }\n\n        export function startsWith(left: SQExpr, right: SQExpr): SQStartsWithExpr {\n            return new SQStartsWithExpr(left, right);\n        }\n\n        export function nullConstant(): SQConstantExpr {\n            return new SQConstantExpr(\n                ValueType.fromExtendedType(ExtendedType.Null),\n                null,\n                PrimitiveValueEncoding.nullEncoding());\n        }\n\n        export function now(): SQNowExpr {\n            return new SQNowExpr();\n        }\n\n        export function defaultValue(): SQDefaultValueExpr {\n            return new SQDefaultValueExpr();\n        }\n\n        export function anyValue(): SQAnyValueExpr {\n            return new SQAnyValueExpr();\n        }\n\n        export function boolean(value: boolean): SQConstantExpr {\n            return new SQConstantExpr(\n                ValueType.fromExtendedType(ExtendedType.Boolean),\n                value,\n                PrimitiveValueEncoding.boolean(value));\n        }\n\n        export function dateAdd(unit: TimeUnit, amount: number, arg: SQExpr): SQDateAddExpr {\n            return new SQDateAddExpr(unit, amount, arg);\n        }\n\n        export function dateTime(value: Date, valueEncoded?: string): SQConstantExpr {\n            if (valueEncoded === undefined)\n                valueEncoded = PrimitiveValueEncoding.dateTime(value);\n\n            return new SQConstantExpr(ValueType.fromExtendedType(ExtendedType.DateTime), value, valueEncoded);\n        }\n\n        export function dateSpan(unit: TimeUnit, arg: SQExpr): SQDateSpanExpr {\n            return new SQDateSpanExpr(unit, arg);\n        }\n\n        export function decimal(value: number, valueEncoded?: string): SQConstantExpr {\n            if (valueEncoded === undefined)\n                valueEncoded = PrimitiveValueEncoding.decimal(value);\n\n            return new SQConstantExpr(ValueType.fromExtendedType(ExtendedType.Decimal), value, valueEncoded);\n        }\n\n        export function double(value: number, valueEncoded?: string): SQConstantExpr {\n            if (valueEncoded === undefined)\n                valueEncoded = PrimitiveValueEncoding.double(value);\n\n            return new SQConstantExpr(ValueType.fromExtendedType(ExtendedType.Double), value, valueEncoded);\n        }\n\n        export function integer(value: number, valueEncoded?: string): SQConstantExpr {\n            if (valueEncoded === undefined)\n                valueEncoded = PrimitiveValueEncoding.integer(value);\n\n            return new SQConstantExpr(ValueType.fromExtendedType(ExtendedType.Integer), value, valueEncoded);\n        }\n\n        export function text(value: string, valueEncoded?: string): SQConstantExpr {\n            debug.assert(!valueEncoded || valueEncoded === PrimitiveValueEncoding.text(value), 'Incorrect encoded value specified.');\n\n            return new SQConstantExpr(\n                ValueType.fromExtendedType(ExtendedType.Text),\n                value,\n                valueEncoded || PrimitiveValueEncoding.text(value));\n        }\n\n        /** Returns an SQExpr that evaluates to the constant value. */\n        export function typedConstant(value: PrimitiveValue, type: ValueTypeDescriptor): SQConstantExpr {\n            if (value == null)\n                return nullConstant();\n\n            if (_.isBoolean(value)) {\n                return boolean(<boolean>value);\n            }\n\n            if (_.isString(value)) {\n                return text(<string>value);\n            }\n\n            if (_.isNumber(value)) {\n                if (type.integer && Double.isInteger(<number>value))\n                    return integer(<number>value);\n\n                return double(<number>value);\n            }\n\n            if (value instanceof Date) {\n                return dateTime(value);\n            }\n        }\n\n        export function setAggregate(expr: SQExpr, aggregate: QueryAggregateFunction): SQExpr {\n            return FieldExprChangeAggregateRewriter.rewrite(expr, aggregate);\n        }\n\n        export function removeAggregate(expr: SQExpr): SQExpr {\n            return FieldExprRemoveAggregateRewriter.rewrite(expr);\n        }\n\n        export function setPercentOfGrandTotal(expr: SQExpr): SQExpr {\n            return SQExprSetPercentOfGrandTotalRewriter.rewrite(expr);\n        }\n\n        export function removePercentOfGrandTotal(expr: SQExpr): SQExpr {\n            return SQExprRemovePercentOfGrandTotalRewriter.rewrite(expr);\n        }\n\n        export function removeEntityVariables(expr: SQExpr): SQExpr {\n            return SQExprRemoveEntityVariablesRewriter.rewrite(expr);\n        }\n\n        export function fillRule(expr: SQExpr, rule: FillRuleDefinition): SQFillRuleExpr {\n            debug.assertValue(expr, 'expr');\n            debug.assertValue(rule, 'rule');\n\n            return new SQFillRuleExpr(expr, rule);\n        }\n\n        export function resourcePackageItem(packageName: string, packageType: number, itemName: string): SQResourcePackageItemExpr {\n            return new SQResourcePackageItemExpr(packageName, packageType, itemName);\n        }\n    }\n\n    /** Provides utilities for obtaining information about expressions. */\n    export module SQExprInfo {\n        export function getAggregate(expr: SQExpr): QueryAggregateFunction {\n            return SQExprAggregateInfoVisitor.getAggregate(expr);\n        }\n    }\n\n    class SQExprEqualityVisitor implements ISQExprVisitorWithArg<boolean, SQExpr>, IFillRuleDefinitionVisitor<boolean, boolean> {\n        private static instance: SQExprEqualityVisitor = new SQExprEqualityVisitor(/* ignoreCase */ false);\n        private static ignoreCaseInstance: SQExprEqualityVisitor = new SQExprEqualityVisitor(true);\n        private ignoreCase: boolean;\n\n        public static run(x: SQExpr, y: SQExpr, ignoreCase?: boolean): boolean {\n            // Normalize falsy to null\n            x = x || null;\n            y = y || null;\n\n            if (x === y)\n                return true;\n\n            if (!x !== !y)\n                return false;\n\n            debug.assertValue(x, 'x');\n            debug.assertValue(y, 'y');\n            if (ignoreCase)\n                return x.accept(SQExprEqualityVisitor.ignoreCaseInstance, y);\n\n            return x.accept(SQExprEqualityVisitor.instance, y);\n        }\n\n        constructor(ignoreCase: boolean) {\n            this.ignoreCase = ignoreCase;\n        }\n\n        public visitColumnRef(expr: SQColumnRefExpr, comparand: SQColumnRefExpr): boolean {\n            return comparand instanceof SQColumnRefExpr &&\n                expr.ref === (<SQColumnRefExpr>comparand).ref &&\n                this.equals(expr.source, (<SQColumnRefExpr>comparand).source);\n        }\n\n        public visitMeasureRef(expr: SQMeasureRefExpr, comparand: SQMeasureRefExpr): boolean {\n            return comparand instanceof SQMeasureRefExpr &&\n                expr.ref === (<SQMeasureRefExpr>comparand).ref &&\n                this.equals(expr.source, (<SQMeasureRefExpr>comparand).source);\n        }\n\n        public visitAggr(expr: SQAggregationExpr, comparand: SQExpr): boolean {\n            return comparand instanceof SQAggregationExpr &&\n                expr.func === (<SQAggregationExpr>comparand).func &&\n                this.equals(expr.arg, (<SQAggregationExpr>comparand).arg);\n        }\n\n        public visitPercentile(expr: SQPercentileExpr, comparand: SQExpr): boolean {\n            return comparand instanceof SQPercentileExpr &&\n                expr.exclusive === comparand.exclusive &&\n                expr.k === comparand.k &&\n                this.equals(expr.arg, comparand.arg);\n        }\n\n        public visitHierarchy(expr: SQHierarchyExpr, comparand: SQHierarchyExpr): boolean {\n            return comparand instanceof SQHierarchyExpr &&\n                expr.hierarchy === comparand.hierarchy &&\n                this.equals(expr.arg, comparand.arg);\n        }\n\n        public visitHierarchyLevel(expr: SQHierarchyLevelExpr, comparand: SQHierarchyLevelExpr): boolean {\n            return comparand instanceof SQHierarchyLevelExpr &&\n                expr.level === comparand.level &&\n                this.equals(expr.arg, comparand.arg);\n        }\n\n        public visitPropertyVariationSource(expr: SQPropertyVariationSourceExpr, comparand: SQPropertyVariationSourceExpr): boolean {\n            return comparand instanceof SQPropertyVariationSourceExpr &&\n                expr.name === comparand.name &&\n                expr.property === comparand.property &&\n                this.equals(expr.arg, comparand.arg);\n        }\n\n        public visitSelectRef(expr: SQSelectRefExpr, comparand: SQSelectRefExpr): boolean {\n            return comparand instanceof SQSelectRefExpr &&\n                expr.expressionName === comparand.expressionName;\n        }\n\n        public visitBetween(expr: SQBetweenExpr, comparand: SQExpr): boolean {\n            return comparand instanceof SQBetweenExpr &&\n                this.equals(expr.arg, (<SQBetweenExpr>comparand).arg) &&\n                this.equals(expr.lower, (<SQBetweenExpr>comparand).lower) &&\n                this.equals(expr.upper, (<SQBetweenExpr>comparand).upper);\n        }\n\n        public visitIn(expr: SQInExpr, comparand: SQExpr): boolean {\n            if (!(comparand instanceof SQInExpr) || !this.equalsAll(expr.args, (<SQInExpr>comparand).args))\n                return false;\n\n            let values = expr.values,\n                compareValues = (<SQInExpr>comparand).values;\n            if (values.length !== compareValues.length)\n                return false;\n\n            for (let i = 0, len = values.length; i < len; i++) {\n                if (!this.equalsAll(values[i], compareValues[i]))\n                    return false;\n            }\n\n            return true;\n        }\n\n        public visitEntity(expr: SQEntityExpr, comparand: SQExpr): boolean {\n            return comparand instanceof SQEntityExpr &&\n                expr.schema === (<SQEntityExpr>comparand).schema &&\n                expr.entity === (<SQEntityExpr>comparand).entity &&\n                this.optionalEqual(expr.variable, (<SQEntityExpr>comparand).variable);\n        }\n\n        public visitAnd(expr: SQAndExpr, comparand: SQExpr): boolean {\n            return comparand instanceof SQAndExpr &&\n                this.equals(expr.left, (<SQAndExpr>comparand).left) &&\n                this.equals(expr.right, (<SQAndExpr>comparand).right);\n        }\n\n        public visitOr(expr: SQOrExpr, comparand: SQExpr): boolean {\n            return comparand instanceof SQOrExpr &&\n                this.equals(expr.left, (<SQOrExpr>comparand).left) &&\n                this.equals(expr.right, (<SQOrExpr>comparand).right);\n        }\n\n        public visitCompare(expr: SQCompareExpr, comparand: SQExpr): boolean {\n            return comparand instanceof SQCompareExpr &&\n                expr.comparison === (<SQCompareExpr>comparand).comparison &&\n                this.equals(expr.left, (<SQCompareExpr>comparand).left) &&\n                this.equals(expr.right, (<SQCompareExpr>comparand).right);\n        }\n\n        public visitContains(expr: SQContainsExpr, comparand: SQExpr): boolean {\n            return comparand instanceof SQContainsExpr &&\n                this.equals(expr.left, (<SQContainsExpr>comparand).left) &&\n                this.equals(expr.right, (<SQContainsExpr>comparand).right);\n        }\n\n        public visitDateSpan(expr: SQDateSpanExpr, comparand: SQExpr): boolean {\n            return comparand instanceof SQDateSpanExpr &&\n                expr.unit === (<SQDateSpanExpr>comparand).unit &&\n                this.equals(expr.arg, (<SQDateSpanExpr>comparand).arg);\n        }\n\n        public visitDateAdd(expr: SQDateAddExpr, comparand: SQExpr): boolean {\n            return comparand instanceof SQDateAddExpr &&\n                expr.unit === (<SQDateAddExpr>comparand).unit &&\n                expr.amount === (<SQDateAddExpr>comparand).amount &&\n                this.equals(expr.arg, (<SQDateAddExpr>comparand).arg);\n        }\n\n        public visitExists(expr: SQExistsExpr, comparand: SQExpr): boolean {\n            return comparand instanceof SQExistsExpr &&\n                this.equals(expr.arg, (<SQExistsExpr>comparand).arg);\n        }\n\n        public visitNot(expr: SQNotExpr, comparand: SQExpr): boolean {\n            return comparand instanceof SQNotExpr &&\n                this.equals(expr.arg, (<SQNotExpr>comparand).arg);\n        }\n\n        public visitNow(expr: SQNowExpr, comparand: SQExpr): boolean {\n            return comparand instanceof SQNowExpr;\n        }\n\n        public visitDefaultValue(expr: SQDefaultValueExpr, comparand: SQExpr): boolean {\n            return comparand instanceof SQDefaultValueExpr;\n        }\n\n        public visitAnyValue(expr: SQAnyValueExpr, comparand: SQExpr): boolean {\n            return comparand instanceof SQAnyValueExpr;\n        }\n\n        public visitResourcePackageItem(expr: SQResourcePackageItemExpr, comparand: SQExpr): boolean {\n            return comparand instanceof SQResourcePackageItemExpr &&\n                expr.packageName === comparand.packageName &&\n                expr.packageType === comparand.packageType &&\n                expr.itemName === comparand.itemName;\n        }\n\n        public visitStartsWith(expr: SQStartsWithExpr, comparand: SQExpr): boolean {\n            return comparand instanceof SQStartsWithExpr &&\n                this.equals(expr.left, (<SQStartsWithExpr>comparand).left) &&\n                this.equals(expr.right, (<SQStartsWithExpr>comparand).right);\n        }\n\n        public visitConstant(expr: SQConstantExpr, comparand: SQExpr): boolean {\n            if (comparand instanceof SQConstantExpr && expr.type === (<SQConstantExpr>comparand).type)\n                return expr.type.text && this.ignoreCase ?\n                    StringExtensions.equalIgnoreCase(expr.valueEncoded, (<SQConstantExpr>comparand).valueEncoded) :\n                    expr.valueEncoded === (<SQConstantExpr>comparand).valueEncoded;\n\n            return false;\n        }\n\n        public visitFillRule(expr: SQFillRuleExpr, comparand: SQExpr): boolean {\n            if (comparand instanceof SQFillRuleExpr && this.equals(expr.input, comparand.input)) {\n                let leftRule = expr.rule,\n                    rightRule = comparand.rule;\n\n                if (leftRule === rightRule)\n                    return true;\n\n                let leftLinearGradient2 = leftRule.linearGradient2,\n                    rightLinearGradient2 = rightRule.linearGradient2;\n                if (leftLinearGradient2 && rightLinearGradient2) {\n                    return this.visitLinearGradient2(leftLinearGradient2, rightLinearGradient2);\n                }\n\n                let leftLinearGradient3 = leftRule.linearGradient3,\n                    rightLinearGradient3 = rightRule.linearGradient3;\n                if (leftLinearGradient3 && rightLinearGradient3) {\n                    return this.visitLinearGradient3(leftLinearGradient3, rightLinearGradient3);\n                }\n            }\n\n            return false;\n        }\n\n        public visitLinearGradient2(left2: LinearGradient2Definition, right2: LinearGradient2Definition): boolean {\n            debug.assertValue(left2, 'left2');\n            debug.assertValue(right2, 'right2');\n\n            return this.equalsFillRuleStop(left2.min, right2.min) &&\n                this.equalsFillRuleStop(left2.max, right2.max);\n        }\n\n        public visitLinearGradient3(left3: LinearGradient3Definition, right3: LinearGradient3Definition): boolean {\n            debug.assertValue(left3, 'left3');\n            debug.assertValue(right3, 'right3');\n\n            return this.equalsFillRuleStop(left3.min, right3.min) &&\n                this.equalsFillRuleStop(left3.mid, right3.mid) &&\n                this.equalsFillRuleStop(left3.max, right3.max);\n        }\n\n        private equalsFillRuleStop(stop1: RuleColorStopDefinition, stop2: RuleColorStopDefinition): boolean {\n            debug.assertValue(stop1, 'stop1');\n            debug.assertValue(stop2, 'stop2');\n\n            if (!this.equals(stop1.color, stop2.color))\n                return false;\n\n            if (!stop1.value)\n                return stop1.value === stop2.value;\n\n            return this.equals(stop1.value, stop2.value);\n        }\n\n        public visitArithmetic(expr: SQArithmeticExpr, comparand: SQExpr): boolean {\n            return comparand instanceof SQArithmeticExpr &&\n                expr.operator === (<SQArithmeticExpr>comparand).operator &&\n                this.equals(expr.left, (<SQArithmeticExpr>comparand).left) &&\n                this.equals(expr.right, (<SQArithmeticExpr>comparand).right);\n        }\n\n        public visitScopedEval(expr: SQScopedEvalExpr, comparand: SQExpr): boolean {\n            return comparand instanceof SQScopedEvalExpr &&\n                this.equals(expr.expression, comparand.expression) &&\n                this.equalsAll(expr.scope, comparand.scope);\n        }\n        \n        public visitWithRef(expr: SQWithRefExpr, comparand: SQExpr): boolean {\n            return  comparand instanceof SQWithRefExpr &&\n                expr.expressionName === comparand.expressionName;\n        }\n\n        private optionalEqual(x: string, y: string) {\n            // Only check equality if both values are specified.\n            if (x && y)\n                return x === y;\n\n            return true;\n        }\n\n        private equals(x: SQExpr, y: SQExpr): boolean {\n            return x.accept(this, y);\n        }\n\n        private equalsAll(x: SQExpr[], y: SQExpr[]): boolean {\n            let len = x.length;\n            if (len !== y.length)\n                return false;\n\n            for (let i = 0; i < len; i++) {\n                if (!this.equals(x[i], y[i]))\n                    return false;\n            }\n\n            return true;\n        }\n    }\n\n    /** Rewrites a root-level expression. */\n    class SQExprRootRewriter extends DefaultSQExprVisitor<SQExpr> {\n        public visitDefault(expr: SQExpr): SQExpr {\n            return expr;\n        }\n    }\n\n    export const enum SQExprValidationError {\n        invalidAggregateFunction,\n        invalidSchemaReference,\n        invalidEntityReference,\n        invalidColumnReference,\n        invalidMeasureReference,\n        invalidHierarchyReference,\n        invalidHierarchyLevelReference,\n        invalidLeftOperandType,\n        invalidRightOperandType,\n        invalidValueType,\n        invalidPercentileArgument,\n        invalidScopeArgument,\n    }\n\n    export class SQExprValidationVisitor extends SQExprRewriter {\n        public errors: SQExprValidationError[];\n        private schema: FederatedConceptualSchema;\n        private aggrUtils: ISQAggregationOperations;\n\n        constructor(schema: FederatedConceptualSchema, aggrUtils: ISQAggregationOperations, errors?: SQExprValidationError[]) {\n            debug.assertValue(schema, 'schema');\n            debug.assertValue(aggrUtils, 'aggrUtils');\n\n            super();\n            this.schema = schema;\n            this.aggrUtils = aggrUtils;\n            if (errors)\n                this.errors = errors;\n        }\n\n        public visitIn(expr: SQInExpr): SQExpr {\n            let inExpr = <SQInExpr>super.visitIn(expr);\n            let args = inExpr.args;\n            let values = inExpr.values;\n            for (let valueTuple of values) {\n                debug.assert(valueTuple.length === args.length, 'args and value tuple are not the same length');\n                for (let i = 0, len = valueTuple.length; i < len; ++i)\n                    this.validateCompatibleType(args[i], valueTuple[i]);\n            }\n\n            return inExpr;\n        }\n\n        public visitCompare(expr: SQCompareExpr): SQExpr {\n            let compareExpr = <SQCompareExpr>super.visitCompare(expr);\n            this.validateCompatibleType(compareExpr.left, compareExpr.right);\n\n            return compareExpr;\n        }\n\n        public visitColumnRef(expr: SQColumnRefExpr): SQExpr {\n            let fieldExpr = SQExprConverter.asFieldPattern(expr);\n            if (fieldExpr) {\n                let fieldExprItem = FieldExprPattern.toFieldExprEntityItemPattern(fieldExpr);\n                let entity = this.validateEntity(fieldExprItem.schema, fieldExprItem.entity);\n                if (entity) {\n                    let prop = entity.properties.withName(fieldExpr.column.name);\n                    if (!prop ||\n                        prop.kind !== ConceptualPropertyKind.Column ||\n                        !this.isQueryable(fieldExpr))\n                        this.register(SQExprValidationError.invalidColumnReference);\n                }\n            }\n            return expr;\n        }\n\n        public visitMeasureRef(expr: SQMeasureRefExpr): SQExpr {\n            let fieldExpr = SQExprConverter.asFieldPattern(expr);\n            if (fieldExpr) {\n                let fieldExprItem = FieldExprPattern.toFieldExprEntityItemPattern(fieldExpr);\n                let entity = this.validateEntity(fieldExprItem.schema, fieldExprItem.entity);\n                if (entity) {\n                    let prop = entity.properties.withName(fieldExpr.measure.name);\n                    if (!prop ||\n                        prop.kind !== ConceptualPropertyKind.Measure ||\n                        !this.isQueryable(fieldExpr))\n                        this.register(SQExprValidationError.invalidMeasureReference);\n                }\n            }\n            return expr;\n        }\n\n        public visitAggr(expr: SQAggregationExpr): SQExpr {\n            let aggregateExpr = <SQAggregationExpr>super.visitAggr(expr);\n\n            let columnRefExpr = SQExprColumnRefInfoVisitor.getColumnRefSQExpr(this.schema, aggregateExpr.arg);\n            if (columnRefExpr) {\n                if (!this.aggrUtils.isSupportedAggregate(expr, this.schema, expr.func, /*targetTypes*/null))\n                    this.register(SQExprValidationError.invalidAggregateFunction);\n            }\n\n            return aggregateExpr;\n        }\n\n        public visitHierarchy(expr: SQHierarchyExpr): SQExpr {\n            let fieldExpr = SQExprConverter.asFieldPattern(expr);\n            if (fieldExpr) {\n                let fieldExprItem: FieldExprHierarchyPattern = <FieldExprHierarchyPattern>fieldExpr.hierarchy;\n                if (fieldExprItem) {\n                    this.validateHierarchy(fieldExprItem.schema, fieldExprItem.entity, fieldExprItem.name);\n                } else {\n                    this.register(SQExprValidationError.invalidHierarchyReference);\n                }\n            }\n            return expr;\n        }\n\n        public visitHierarchyLevel(expr: SQHierarchyLevelExpr): SQExpr {\n            let fieldExpr = SQExprConverter.asFieldPattern(expr);\n            if (fieldExpr) {\n                let hierarchyLevelFieldExprItem: FieldExprHierarchyLevelPattern = <FieldExprHierarchyLevelPattern>fieldExpr.hierarchyLevel;\n                if (hierarchyLevelFieldExprItem) {\n                    this.validateHierarchyLevel(hierarchyLevelFieldExprItem.schema, hierarchyLevelFieldExprItem.entity, hierarchyLevelFieldExprItem.name, hierarchyLevelFieldExprItem.level);\n                } else if (!fieldExpr.columnHierarchyLevelVariation) {\n                    this.register(SQExprValidationError.invalidHierarchyLevelReference);\n                }\n            }\n            return expr;\n        }\n\n        public visitPercentile(expr: SQPercentileExpr): SQExpr {\n            expr.arg.accept(this);\n\n            if (_.isEmpty(this.errors)) {\n                let argMetadata = expr.arg.getMetadata(this.schema);\n                if (!argMetadata ||\n                    argMetadata.kind !== FieldKind.Column ||\n                    !(argMetadata.type && (argMetadata.type.integer || argMetadata.type.numeric))) {\n                    this.register(SQExprValidationError.invalidPercentileArgument);\n                }\n            }\n\n            return expr;\n        }\n\n        public visitEntity(expr: SQEntityExpr): SQExpr {\n            this.validateEntity(expr.schema, expr.entity);\n            return expr;\n        }\n\n        public visitContains(expr: SQContainsExpr): SQExpr {\n            this.validateOperandsAndTypeForStartOrContains(expr.left, expr.right);\n            return expr;\n        }\n\n        public visitStartsWith(expr: SQContainsExpr): SQExpr {\n            this.validateOperandsAndTypeForStartOrContains(expr.left, expr.right);\n            return expr;\n        }\n\n        public visitArithmetic(expr: SQArithmeticExpr): SQExpr {\n            this.validateArithmeticTypes(expr.left, expr.right);\n            return expr;\n        }\n\n        public visitScopedEval(expr: SQScopedEvalExpr): SQExpr {\n            for (let scopeRef of expr.scope) {\n                if (!(SQExpr.isWithRef(scopeRef) || SQExpr.isColumn(scopeRef))) {\n                    this.register(SQExprValidationError.invalidScopeArgument);\n                }\n            }\n            return expr;\n        }\n        \n        public visitWithRef(expr: SQWithRefExpr): SQExpr {\n            return expr;\n        }\n\n        private validateOperandsAndTypeForStartOrContains(left: SQExpr, right: SQExpr): void {\n            if (left instanceof SQColumnRefExpr) {\n                this.visitColumnRef(<SQColumnRefExpr>left);\n            } else if (left instanceof SQHierarchyLevelExpr) {\n                this.visitHierarchyLevel(<SQHierarchyLevelExpr>left);\n            } else {\n                this.register(SQExprValidationError.invalidLeftOperandType);\n            }\n\n            if (!(right instanceof SQConstantExpr) || !(<SQConstantExpr>right).type.text)\n                this.register(SQExprValidationError.invalidRightOperandType);\n            else\n                this.validateCompatibleType(left, right);\n        }\n\n        private validateArithmeticTypes(left: SQExpr, right: SQExpr): void {\n            if (!SQExprUtils.supportsArithmetic(left, this.schema))\n                this.register(SQExprValidationError.invalidLeftOperandType);\n            if (!SQExprUtils.supportsArithmetic(right, this.schema))\n                this.register(SQExprValidationError.invalidRightOperandType);\n        }\n\n        private validateCompatibleType(left: SQExpr, right: SQExpr): void {\n            let leftMetadata = left.getMetadata(this.schema),\n                leftType = leftMetadata && leftMetadata.type,\n                rightMetadata = right.getMetadata(this.schema),\n                rightType = rightMetadata && rightMetadata.type;\n\n            if (leftType && rightType && !leftType.isCompatibleFrom(rightType))\n                this.register(SQExprValidationError.invalidValueType);\n        }\n\n        private validateEntity(schemaName: string, entityName: string): ConceptualEntity {\n            let schema = this.schema.schema(schemaName);\n            if (schema) {\n                let entity = schema.entities.withName(entityName);\n                if (entity)\n                    return entity;\n\n                this.register(SQExprValidationError.invalidEntityReference);\n            }\n            else {\n                this.register(SQExprValidationError.invalidSchemaReference);\n            }\n        }\n\n        private validateHierarchy(schemaName: string, entityName: string, hierarchyName: string): ConceptualHierarchy {\n            let entity = this.validateEntity(schemaName, entityName);\n            if (entity) {\n                let hierarchy = entity.hierarchies.withName(hierarchyName);\n                if (hierarchy)\n                    return hierarchy;\n\n                this.register(SQExprValidationError.invalidHierarchyReference);\n            }\n        }\n\n        private validateHierarchyLevel(schemaName: string, entityName: string, hierarchyName: string, levelName: string): ConceptualHierarchyLevel {\n            let hierarchy = this.validateHierarchy(schemaName, entityName, hierarchyName);\n            if (hierarchy) {\n                let hierarchyLevel = hierarchy.levels.withName(levelName);\n                if (hierarchyLevel)\n                    return hierarchyLevel;\n\n                this.register(SQExprValidationError.invalidHierarchyLevelReference);\n            }\n        }\n\n        private register(error: SQExprValidationError) {\n            if (!this.errors)\n                this.errors = [];\n            this.errors.push(error);\n        }\n\n        private isQueryable(fieldExpr: FieldExprPattern): boolean {\n            let fieldExprItem = FieldExprPattern.toFieldExprEntityItemPattern(fieldExpr);\n            if (fieldExpr.hierarchyLevel || fieldExpr.hierarchyLevelAggr) {\n                let hierarchyLevelConceptualProperty = SQHierarchyExprUtils.getConceptualHierarchyLevelFromExpr(this.schema, fieldExpr);\n                return hierarchyLevelConceptualProperty && hierarchyLevelConceptualProperty.column.queryable !== ConceptualQueryableState.Error;\n            }\n\n            return this.schema.schema(fieldExprItem.schema).findProperty(fieldExprItem.entity, FieldExprPattern.getPropertyName(fieldExpr)).queryable !== ConceptualQueryableState.Error;\n        }\n    }\n\n    /** Returns an expression's aggregate function, or undefined if it doesn't have one. */\n    class SQExprAggregateInfoVisitor extends DefaultSQExprVisitor<QueryAggregateFunction> {\n        public visitAggr(expr: SQAggregationExpr): QueryAggregateFunction {\n            return expr.func;\n        }\n\n        public visitDefault(expr: SQExpr): QueryAggregateFunction {\n            return;\n        }\n\n        public static getAggregate(expr: SQExpr): QueryAggregateFunction {\n            let visitor = new SQExprAggregateInfoVisitor();\n            return expr.accept(visitor);\n        }\n    }\n\n    /** Returns a SQExprColumnRef expression or undefined.*/\n    class SQExprColumnRefInfoVisitor extends DefaultSQExprVisitor<SQColumnRefExpr> {\n        private schema: FederatedConceptualSchema;\n\n        constructor(schema: FederatedConceptualSchema) {\n            super();\n            this.schema = schema;\n        }\n\n        public visitColumnRef(expr: SQColumnRefExpr): SQColumnRefExpr {\n            return expr;\n        }\n\n        public visitHierarchyLevel(expr: SQHierarchyLevelExpr): SQColumnRefExpr {\n            let ref: string = expr.level;\n            let hierarchy = <SQHierarchyExpr>(expr.arg);\n            let sourceExpr: SQColumnRefExpr = hierarchy.accept(this);\n\n            if (hierarchy && hierarchy.arg instanceof SQPropertyVariationSourceExpr) {\n                let propertyVariationSource = <SQPropertyVariationSourceExpr>hierarchy.arg;\n                let targetEntity = sourceExpr.getTargetEntityForVariation(this.schema, propertyVariationSource.name);\n\n                if (sourceExpr && targetEntity) {\n                    let schemaName = (<SQEntityExpr>(sourceExpr.source)).schema;\n                    let targetEntityExpr = SQExprBuilder.entity(schemaName, targetEntity);\n                    let schemaHierarchy = this.schema.schema(schemaName).findHierarchy(targetEntity, hierarchy.hierarchy);\n\n                    if (schemaHierarchy) {\n                        for (let level of schemaHierarchy.levels)\n                            if (level.name === ref)\n                                return new SQColumnRefExpr(targetEntityExpr, level.column.name);\n                    }\n                }\n            }\n            else {\n                let entityExpr = <SQEntityExpr>(hierarchy.arg);\n                let hierarchyLevelRef = SQHierarchyExprUtils.getConceptualHierarchyLevel(this.schema,\n                    entityExpr.schema,\n                    entityExpr.entity,\n                    hierarchy.hierarchy,\n                    expr.level);\n\n                if (hierarchyLevelRef)\n                    return new SQColumnRefExpr(hierarchy.arg, hierarchyLevelRef.column.name);\n            }\n        }\n\n        public visitHierarchy(expr: SQHierarchyExpr): SQColumnRefExpr {\n            return expr.arg.accept(this);\n        }\n\n        public visitPropertyVariationSource(expr: SQPropertyVariationSourceExpr): SQColumnRefExpr {\n            let propertyName = expr.property;\n            return new SQColumnRefExpr(expr.arg, propertyName);\n        }\n\n        public visitAggr(expr: SQAggregationExpr): SQColumnRefExpr {\n            return expr.arg.accept(this);\n        }\n\n        public visitDefault(expr: SQExpr): SQColumnRefExpr {\n            return;\n        }\n\n        public static getColumnRefSQExpr(schema: FederatedConceptualSchema, expr: SQExpr): SQColumnRefExpr {\n            let visitor = new SQExprColumnRefInfoVisitor(schema);\n            return expr.accept(visitor);\n        }\n    }\n\n    /** Returns a SQEntityExpr expression or undefined.*/\n    class SQEntityExprInfoVisitor extends DefaultSQExprVisitor<SQEntityExpr> {\n        private schema: FederatedConceptualSchema;\n\n        constructor(schema: FederatedConceptualSchema) {\n            super();\n            this.schema = schema;\n        }\n\n        public visitEntity(expr: SQEntityExpr): SQEntityExpr {\n            return expr;\n        }\n\n        public visitColumnRef(expr: SQColumnRefExpr): SQEntityExpr {\n            return SQEntityExprInfoVisitor.getEntity(expr);\n        }\n\n        public visitHierarchyLevel(expr: SQHierarchyLevelExpr): SQEntityExpr {\n            let columnRef = SQEntityExprInfoVisitor.getColumnRefSQExpr(this.schema, expr);\n            return SQEntityExprInfoVisitor.getEntity(columnRef);\n        }\n\n        public visitHierarchy(expr: SQHierarchyExpr): SQEntityExpr {\n            return expr.arg.accept(this);\n        }\n\n        public visitPropertyVariationSource(expr: SQPropertyVariationSourceExpr): SQEntityExpr {\n            let columnRef = SQEntityExprInfoVisitor.getColumnRefSQExpr(this.schema, expr);\n            return SQEntityExprInfoVisitor.getEntity(columnRef);\n        }\n\n        public visitAggr(expr: SQAggregationExpr): SQEntityExpr {\n            let columnRef = SQEntityExprInfoVisitor.getColumnRefSQExpr(this.schema, expr);\n            return SQEntityExprInfoVisitor.getEntity(columnRef);\n        }\n\n        public visitMeasureRef(expr: SQMeasureRefExpr): SQEntityExpr {\n            return expr.source.accept(this);\n        }\n\n        public static getColumnRefSQExpr(schema: FederatedConceptualSchema, expr: SQExpr): SQColumnRefExpr {\n            let visitor = new SQExprColumnRefInfoVisitor(schema);\n            return expr.accept(visitor);\n        }\n\n        public static getEntity(columnRef: SQColumnRefExpr): SQEntityExpr {\n            let field = SQExprConverter.asFieldPattern(columnRef);\n            let column = field.column;\n            return SQExprBuilder.entity(column.schema, column.entity, column.entityVar);\n        }\n\n        public static getEntityExpr(schema: FederatedConceptualSchema, expr: SQExpr): SQEntityExpr {\n            let visitor = new SQEntityExprInfoVisitor(schema);\n            return expr.accept(visitor);\n        }\n    }\n\n    class SQExprChangeAggregateRewriter extends SQExprRootRewriter {\n        private func: QueryAggregateFunction;\n\n        constructor(func: QueryAggregateFunction) {\n            debug.assertValue(func, 'func');\n\n            super();\n            this.func = func;\n        }\n\n        public visitAggr(expr: SQAggregationExpr): SQExpr {\n            if (expr.func === this.func)\n                return expr;\n\n            return new SQAggregationExpr(expr.arg, this.func);\n        }\n\n        public visitColumnRef(expr: SQColumnRefExpr): SQExpr {\n            return new SQAggregationExpr(expr, this.func);\n        }\n\n        public static rewrite(expr: SQExpr, func: QueryAggregateFunction): SQExpr {\n            debug.assertValue(expr, 'expr');\n            debug.assertValue(func, 'func');\n\n            let rewriter = new SQExprChangeAggregateRewriter(func);\n            return expr.accept(rewriter);\n        }\n    }\n\n    class FieldExprChangeAggregateRewriter implements IFieldExprPatternVisitor<SQExpr> {\n        private sqExpr: SQExpr;\n        private aggregate: QueryAggregateFunction;\n\n        constructor(sqExpr: SQExpr, aggregate: QueryAggregateFunction) {\n            this.sqExpr = sqExpr;\n            this.aggregate = aggregate;\n        }\n\n        public static rewrite(sqExpr: SQExpr, aggregate: QueryAggregateFunction): SQExpr {\n            return FieldExprPattern.visit(sqExpr, new FieldExprChangeAggregateRewriter(sqExpr, aggregate));\n        }\n\n        public visitPercentOfGrandTotal(pattern: FieldExprPercentOfGrandTotalPattern): SQExpr {\n            pattern.baseExpr = SQExprConverter.asFieldPattern(\n                SQExprChangeAggregateRewriter.rewrite(\n                    SQExprBuilder.fieldExpr(pattern.baseExpr),\n                    this.aggregate));\n            return SQExprBuilder.fieldExpr({ percentOfGrandTotal: pattern });\n        }\n\n        public visitColumn(column: FieldExprColumnPattern): SQExpr {\n            return this.defaultRewrite();\n        }\n\n        public visitColumnAggr(columnAggr: FieldExprColumnAggrPattern): SQExpr {\n            return this.defaultRewrite();\n        }\n\n        public visitColumnHierarchyLevelVariation(columnHierarchyLevelVariation: FieldExprColumnHierarchyLevelVariationPattern): SQExpr {\n            return this.defaultRewrite();\n        }\n\n        public visitSelectRef(selectRef: FieldExprSelectRefPattern): SQExpr {\n            return this.defaultRewrite();\n        }\n\n        public visitEntity(entity: FieldExprEntityPattern): SQExpr {\n            return this.defaultRewrite();\n        }\n\n        public visitEntityAggr(entityAggr: FieldExprEntityAggrPattern): SQExpr {\n            return this.defaultRewrite();\n        }\n\n        public visitHierarchy(hierarchy: FieldExprHierarchyPattern): SQExpr {\n            return this.defaultRewrite();\n        }\n\n        public visitHierarchyLevel(hierarchyLevel: FieldExprHierarchyLevelPattern): SQExpr {\n            return this.defaultRewrite();\n        }\n\n        public visitHierarchyLevelAggr(hierarchyLevelAggr: FieldExprHierarchyLevelAggrPattern): SQExpr {\n            return this.defaultRewrite();\n        }\n\n        public visitMeasure(measure: FieldExprMeasurePattern): SQExpr {\n            return this.defaultRewrite();\n        }\n\n        public visitPercentile(percentile: FieldExprPercentilePattern): SQExpr {\n            return this.defaultRewrite();\n        }\n\n        private defaultRewrite(): SQExpr {\n            return SQExprChangeAggregateRewriter.rewrite(this.sqExpr, this.aggregate);\n        }\n    }\n\n    class FieldExprRemoveAggregateRewriter implements IFieldExprPatternVisitor<SQExpr> {\n\n        constructor(private sqExpr: SQExpr) {\n        }\n\n        public static rewrite(sqExpr: SQExpr): SQExpr {\n            return FieldExprPattern.visit(sqExpr, new FieldExprRemoveAggregateRewriter(sqExpr));\n        }\n\n        public visitPercentOfGrandTotal(pattern: FieldExprPercentOfGrandTotalPattern): SQExpr {\n            return FieldExprRemoveAggregateRewriter.rewrite(SQExprBuilder.fieldExpr(pattern.baseExpr));\n        }\n\n        public visitColumn(column: FieldExprColumnPattern): SQExpr {\n            return this.defaultRewrite();\n        }\n\n        public visitColumnAggr(columnAggr: FieldExprColumnAggrPattern): SQExpr {\n            return this.defaultRewrite();\n        }\n\n        public visitColumnHierarchyLevelVariation(columnHierarchyLevelVariation: FieldExprColumnHierarchyLevelVariationPattern): SQExpr {\n            return this.defaultRewrite();\n        }\n\n        public visitSelectRef(selectRef: FieldExprSelectRefPattern): SQExpr {\n            return this.defaultRewrite();\n        }\n\n        public visitEntity(entity: FieldExprEntityPattern): SQExpr {\n            return this.defaultRewrite();\n        }\n\n        public visitEntityAggr(entityAggr: FieldExprEntityAggrPattern): SQExpr {\n            return this.defaultRewrite();\n        }\n\n        public visitHierarchy(hierarchy: FieldExprHierarchyPattern): SQExpr {\n            return this.defaultRewrite();\n        }\n\n        public visitHierarchyLevel(hierarchyLevel: FieldExprHierarchyLevelPattern): SQExpr {\n            return this.defaultRewrite();\n        }\n\n        public visitHierarchyLevelAggr(hierarchyLevelAggr: FieldExprHierarchyLevelAggrPattern): SQExpr {\n            return this.defaultRewrite();\n        }\n\n        public visitMeasure(measure: FieldExprMeasurePattern): SQExpr {\n            return this.defaultRewrite();\n        }\n\n        public visitPercentile(percentile: FieldExprPercentilePattern): SQExpr {\n            return this.defaultRewrite();\n        }\n\n        private defaultRewrite(): SQExpr {\n            return SQExprRemoveAggregateRewriter.rewrite(this.sqExpr);\n        }\n    }\n\n    class SQExprRemoveAggregateRewriter extends SQExprRootRewriter {\n        private static instance: SQExprRemoveAggregateRewriter = new SQExprRemoveAggregateRewriter();\n\n        public visitAggr(expr: SQAggregationExpr): SQExpr {\n            return expr.arg;\n        }\n\n        public static rewrite(expr: SQExpr): SQExpr {\n            debug.assertValue(expr, 'expr');\n\n            return expr.accept(SQExprRemoveAggregateRewriter.instance);\n        }\n    }\n\n    class SQExprRemoveEntityVariablesRewriter extends SQExprRewriter {\n        private static instance: SQExprRemoveEntityVariablesRewriter = new SQExprRemoveEntityVariablesRewriter();\n\n        public visitEntity(expr: SQEntityExpr): SQExpr {\n            if (expr.variable)\n                return SQExprBuilder.entity(expr.schema, expr.entity);\n\n            return expr;\n        }\n\n        public static rewrite(expr: SQExpr): SQExpr {\n            debug.assertValue(expr, 'expr');\n\n            return expr.accept(SQExprRemoveEntityVariablesRewriter.instance);\n        }\n    }\n\n    class SQExprRemovePercentOfGrandTotalRewriter extends SQExprRootRewriter {\n        private static instance: SQExprRemovePercentOfGrandTotalRewriter = new SQExprRemovePercentOfGrandTotalRewriter();\n\n        public static rewrite(expr: SQExpr): SQExpr {\n            debug.assertValue(expr, 'expr');\n            return expr.accept(SQExprRemovePercentOfGrandTotalRewriter.instance);\n        }\n\n        public visitDefault(expr: SQExpr): SQExpr {\n            let fieldExpr = SQExprConverter.asFieldPattern(expr);\n            if (fieldExpr && fieldExpr.percentOfGrandTotal)\n                expr = SQExprBuilder.fieldExpr(fieldExpr.percentOfGrandTotal.baseExpr);\n\n            return expr;\n        }\n    }\n\n    class SQExprSetPercentOfGrandTotalRewriter extends SQExprRootRewriter {\n        private static instance: SQExprSetPercentOfGrandTotalRewriter = new SQExprSetPercentOfGrandTotalRewriter();\n\n        public static rewrite(expr: SQExpr): SQExpr {\n            debug.assertValue(expr, 'expr');\n            return expr.accept(SQExprSetPercentOfGrandTotalRewriter.instance);\n        }\n\n        public visitDefault(expr: SQExpr): SQExpr {\n            let fieldExpr = SQExprConverter.asFieldPattern(expr);\n            if (fieldExpr && !fieldExpr.percentOfGrandTotal)\n                expr = SQExprBuilder.fieldExpr({ percentOfGrandTotal: { baseExpr: SQExprConverter.asFieldPattern(expr) } });\n\n            return expr;\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    import ArrayExtensions = jsCommon.ArrayExtensions;\n    import ArrayNamedItems = jsCommon.ArrayNamedItems;\n    import ConceptualEntity = powerbi.data.ConceptualEntity;\n    import ConceptualMultiplicity = powerbi.data.ConceptualMultiplicity;\n    import SQEntityExpr = powerbi.data.SQEntityExpr;\n    import StringExtensions = jsCommon.StringExtensions;\n\n    export module SQExprUtils {\n        export function supportsArithmetic(expr: SQExpr, schema: FederatedConceptualSchema): boolean {\n            let metadata = expr.getMetadata(schema),\n                type = metadata && metadata.type;\n\n            if (!metadata || !type) {\n                return false;\n            }\n            \n            return type.numeric || type.dateTime || type.duration;\n        }\n\n        export function indexOfExpr(items: SQExpr[], searchElement: SQExpr): number {\n            debug.assertValue(items, 'items');\n            debug.assertValue(searchElement, 'searchElement');\n\n            for (let i = 0, len = items.length; i < len; i++) {\n                if (SQExpr.equals(items[i], searchElement))\n                    return i;\n            }\n            return -1;\n        }\n        \n        export function indexOfNamedExpr(items: NamedSQExpr[], searchElement: SQExpr): number {\n            debug.assertValue(items, 'items');\n            debug.assertValue(searchElement, 'searchElement');\n\n            for (let i = 0, len = items.length; i < len; i++) {\n                let item = items[i];\n                if (item && SQExpr.equals(item.expr, searchElement))\n                    return i;\n            }\n            return -1;\n        }\n\n        export function sequenceEqual(x: SQExpr[], y: SQExpr[]): boolean {\n            debug.assertValue(x, 'x');\n            debug.assertValue(y, 'y');\n\n            let len = x.length;\n            if (len !== y.length)\n                return false;\n\n            for (let i = 0; i < len; i++) {\n                if (!SQExpr.equals(x[i], y[i]))\n                    return false;\n            }\n\n            return true;\n        }\n        \n        export function uniqueName(namedItems: NamedSQExpr[], expr: SQExpr, exprDefaultName?: string): string {\n            debug.assertValue(namedItems, 'namedItems');\n\n            // Determine all names\n            let names: { [name: string]: boolean } = {};\n            for (let i = 0, len = namedItems.length; i < len; i++)\n                names[namedItems[i].name] = true;\n\n            return StringExtensions.findUniqueName(names, exprDefaultName || defaultName(expr));\n        }\n\n        /** Generates a default expression name  */\n        export function defaultName(expr: SQExpr, fallback: string = 'select'): string {\n            if (!expr)\n                return fallback;\n\n            return expr.accept(SQExprDefaultNameGenerator.instance, fallback);\n        }\n\n        /** Gets a value indicating whether the expr is a model measure or an aggregate. */\n        export function isMeasure(expr: SQExpr): boolean {\n            debug.assertValue(expr, 'expr');\n\n            return expr.accept(IsMeasureVisitor.instance);\n        }\n\n        /** Gets a value indicating whether the expr is an AnyValue or equals comparison to AnyValue*/\n        export function isAnyValue(expr: SQExpr): boolean {\n            debug.assertValue(expr, 'expr');\n\n            return expr.accept(IsAnyValueVisitor.instance);\n        }\n\n        /** Gets a value indicating whether the expr is a DefaultValue or equals comparison to DefaultValue*/\n        export function isDefaultValue(expr: SQExpr): boolean {\n            debug.assertValue(expr, 'expr');\n\n            return expr.accept(IsDefaultValueVisitor.instance);\n        }\n\n        export function discourageAggregation(expr: SQExpr, schema: FederatedConceptualSchema): boolean {\n            let capabilities = getSchemaCapabilities(expr, schema);\n            return capabilities && capabilities.discourageQueryAggregateUsage;\n        }\n\n        export function getAggregateBehavior(expr: SQExpr, schema: FederatedConceptualSchema): ConceptualAggregateBehavior {\n            debug.assertValue(expr, 'expr');\n            debug.assertValue(schema, 'schema');\n\n            let column = getConceptualColumn(expr, schema);\n            if (column)\n                return column.aggregateBehavior;\n        }\n\n        export function getSchemaCapabilities(expr: SQExpr, schema: FederatedConceptualSchema): ConceptualCapabilities {\n            debug.assertValue(expr, 'expr');\n            debug.assertValue(schema, 'schema');\n\n            let field = SQExprConverter.asFieldPattern(expr);\n            if (!field)\n                return;\n\n            let fieldExprItem = FieldExprPattern.toFieldExprEntityItemPattern(field);\n            let conceptualSchema = schema.schema(fieldExprItem.schema);\n            if (conceptualSchema)\n                return conceptualSchema.capabilities;\n        }\n\n        export function getKpiMetadata(expr: SQExpr, schema: FederatedConceptualSchema): DataViewKpiColumnMetadata {\n            let kpiStatusProperty = getKpiStatusProperty(expr, schema);\n            if (kpiStatusProperty)\n                return kpiStatusProperty.kpiValue.measure.kpi.statusMetadata;\n\n            let kpiTrendProperty = getKpiTrendProperty(expr, schema);\n            if (kpiTrendProperty)\n                return kpiTrendProperty.kpiValue.measure.kpi.trendMetadata;\n        }\n\n        export function getConceptualEntity(entityExpr: SQEntityExpr, schema: FederatedConceptualSchema): ConceptualEntity {\n            debug.assertValue(entityExpr, 'entityExpr');\n\n            let conceptualEntity = schema\n                .schema(entityExpr.schema)\n                .entities\n                .withName(entityExpr.entity);\n            return conceptualEntity;\n        }\n\n        function getKpiStatusProperty(expr: SQExpr, schema: FederatedConceptualSchema): ConceptualProperty {\n            let property = expr.getConceptualProperty(schema);\n            if (!property)\n                return;\n\n            let kpiValue = property.kpiValue;\n            if (kpiValue && kpiValue.measure.kpi.status === property)\n                return property;\n        }\n\n        function getKpiTrendProperty(expr: SQExpr, schema: FederatedConceptualSchema): ConceptualProperty {\n            let property = expr.getConceptualProperty(schema);\n            if (!property)\n                return;\n\n            let kpiValue = property.kpiValue;\n            if (kpiValue && kpiValue.measure.kpi.trend === property)\n                return property;\n        }\n\n        export function getDefaultValue(fieldSQExpr: SQExpr, schema: FederatedConceptualSchema): SQConstantExpr {\n            let column = getConceptualColumn(fieldSQExpr, schema);\n            if (column)\n                return column.defaultValue;\n        }\n\n        function getConceptualColumn(fieldSQExpr: SQExpr, schema: FederatedConceptualSchema): ConceptualColumn {\n            if (!fieldSQExpr || !schema)\n                return;\n\n            let sqField = SQExprConverter.asFieldPattern(fieldSQExpr);\n            if (!sqField)\n                return;\n\n            let column: FieldExprPropertyPattern = sqField.column;\n\n            if (column) {\n                if (schema.schema(column.schema) && sqField.column.name) {\n                    let property = schema.schema(column.schema).findProperty(column.entity, sqField.column.name);\n\n                    if (property)\n                        return property.column;\n                }\n            }\n            else {\n                let hierarchyLevelField: FieldExprHierarchyLevelPattern = sqField.hierarchyLevel;\n                if (hierarchyLevelField) {\n                    let fieldExprItem = FieldExprPattern.toFieldExprEntityItemPattern(sqField);\n                    let schemaName = fieldExprItem.schema;\n                    if (schema.schema(schemaName)) {\n                        let hierarchy = schema.schema(schemaName)\n                            .findHierarchy(fieldExprItem.entity, hierarchyLevelField.name);\n\n                        if (hierarchy) {\n                            let hierarchyLevel: ConceptualHierarchyLevel = hierarchy.levels.withName(hierarchyLevelField.level);\n                            if (hierarchyLevel && hierarchyLevel.column)\n                                return hierarchyLevel.column.column;\n                        }\n                    }\n                }\n            }\n        }\n\n        export function getDefaultValues(fieldSQExprs: SQExpr[], schema: FederatedConceptualSchema): SQConstantExpr[] {\n            if (_.isEmpty(fieldSQExprs) || !schema)\n                return;\n            let result: SQConstantExpr[] = [];\n            for (let sqExpr of fieldSQExprs) {\n                let defaultValue = getDefaultValue(sqExpr, schema);\n                if (defaultValue)\n                    result.push(defaultValue);\n            }\n            return result;\n        }\n\n        /** Return compare or and expression for key value pairs. */\n        export function getDataViewScopeIdentityComparisonExpr(fieldsExpr: SQExpr[], values: SQConstantExpr[]): SQExpr {\n            debug.assert(fieldsExpr.length === values.length, \"fileds and values need to be the same size\");\n\n            let compareExprs: SQCompareExpr[] = [];\n            for (let i = 0; i < fieldsExpr.length; i++) {\n                compareExprs.push(SQExprBuilder.compare(QueryComparisonKind.Equal, fieldsExpr[i], values[i]));\n            }\n\n            if (_.isEmpty(compareExprs))\n                return;\n\n            let resultExpr: SQExpr;\n            for (let compareExpr of compareExprs) {\n                resultExpr = SQExprBuilder.and(resultExpr, compareExpr);\n            }\n\n            return resultExpr;\n        }\n\n        export function getActiveTablesNames(queryDefn: data.SemanticQuery): string[] {\n            let tables: string[] = [];\n            if (queryDefn) {\n                let selectedItems = queryDefn.from();\n                if (selectedItems !== undefined) {\n                    for (let key of selectedItems.keys()) {\n                        let entityObj = selectedItems.entity(key);\n                        if (tables.indexOf(entityObj.entity) < 0)\n                            tables.push(entityObj.entity);\n                    }\n                }\n            }\n            return tables;\n        }\n\n        export function isRelatedToMany(\n            schema: FederatedConceptualSchema,\n            sourceExpr: SQEntityExpr,\n            targetExpr: SQEntityExpr): boolean {\n\n            return isRelated(schema, sourceExpr, targetExpr, ConceptualMultiplicity.ZeroOrOne, ConceptualMultiplicity.Many) ||\n                isRelated(schema, targetExpr, sourceExpr, ConceptualMultiplicity.Many, ConceptualMultiplicity.ZeroOrOne);\n        }\n\n        export function isRelatedToOne(\n            schema: FederatedConceptualSchema,\n            sourceExpr: SQEntityExpr,\n            targetExpr: SQEntityExpr): boolean {\n\n            return isRelated(schema, sourceExpr, targetExpr, ConceptualMultiplicity.Many, ConceptualMultiplicity.ZeroOrOne) ||\n                isRelated(schema, targetExpr, sourceExpr, ConceptualMultiplicity.ZeroOrOne, ConceptualMultiplicity.Many);\n        }\n\n        function isRelated(\n            schema: FederatedConceptualSchema,\n            sourceExpr: SQEntityExpr,\n            targetExpr: SQEntityExpr,\n            sourceMultiplicity: ConceptualMultiplicity,\n            targetMultiplicity: ConceptualMultiplicity): boolean {\n\n            let source = SQExprUtils.getConceptualEntity(sourceExpr, schema);\n            debug.assertValue(source, \"could not resolve conceptual entity form sourceExpr.\");\n\n            if (_.isEmpty(source.navigationProperties))\n                return false;\n\n            let target = SQExprUtils.getConceptualEntity(targetExpr, schema);\n            debug.assertValue(target, \"could not resolve conceptual entity form targetExpr.\");\n\n            let queue: ConceptualEntity[] = [];\n            queue.push(source);\n\n            // walk the relationship path from source.\n            while (!_.isEmpty(queue)) {\n                let current = queue.shift();\n\n                let navProperties = current.navigationProperties;\n                if (_.isEmpty(navProperties))\n                    continue;\n\n                for (let navProperty of navProperties) {\n                    if (!navProperty.isActive)\n                        continue;\n\n                    if (navProperty.targetMultiplicity === targetMultiplicity && navProperty.sourceMultiplicity === sourceMultiplicity) {\n                        if (navProperty.targetEntity === target)\n                            return true;\n                        queue.push(navProperty.targetEntity);\n                    }\n                }\n            }\n\n            return false;\n        }\n\n        export function isRelatedOneToOne(\n            schema: FederatedConceptualSchema,\n            sourceExpr: SQEntityExpr,\n            targetExpr: SQEntityExpr): boolean {\n\n            let source = SQExprUtils.getConceptualEntity(sourceExpr, schema);\n            debug.assertValue(source, \"could not resolve conceptual entity form sourceExpr.\");\n            let target = SQExprUtils.getConceptualEntity(targetExpr, schema);\n            debug.assertValue(target, \"could not resolve conceptual entity form targetExpr.\");\n\n            let sourceNavigations = source.navigationProperties;\n            let targetNavigations = target.navigationProperties;\n\n            if (_.isEmpty(sourceNavigations) && _.isEmpty(targetNavigations))\n                return false;\n\n            return hasOneToOneNavigation(sourceNavigations, target) || hasOneToOneNavigation(targetNavigations, source);\n        }\n\n        function hasOneToOneNavigation(navigationProperties: ArrayNamedItems<ConceptualNavigationProperty>, targetEntity: ConceptualEntity): boolean {\n            if (_.isEmpty(navigationProperties))\n                return false;\n\n            for (let navigationProperty of navigationProperties) {\n                if (!navigationProperty.isActive)\n                    continue;\n\n                if (navigationProperty.targetEntity !== targetEntity)\n                    continue;\n\n                if (navigationProperty.sourceMultiplicity === ConceptualMultiplicity.ZeroOrOne &&\n                    navigationProperty.targetMultiplicity === ConceptualMultiplicity.ZeroOrOne) {\n                    return true;\n                }\n            }\n\n            return false;\n        }\n\n        /** Performs a union of the 2 arrays with SQExpr.equals as comparator to skip duplicate items,\n            and returns a new array. When available, we should use _.unionWith from lodash. */\n        export function concatUnique(leftExprs: SQExpr[], rightExprs: SQExpr[]): SQExpr[] {\n            debug.assertValue(leftExprs, 'leftExprs');\n            debug.assertValue(rightExprs, 'rightExprs');\n\n            let concatExprs = ArrayExtensions.copy(leftExprs);\n            for (let expr of rightExprs) {\n                if (indexOfExpr(concatExprs, expr) === -1) {\n                    concatExprs.push(expr);\n                }\n            }\n\n            return concatExprs;\n        }\n\n        class SQExprDefaultNameGenerator extends DefaultSQExprVisitorWithArg<string, string> {\n            public static instance: SQExprDefaultNameGenerator = new SQExprDefaultNameGenerator();\n\n            public visitEntity(expr: SQEntityExpr): string {\n                return expr.entity;\n            }\n\n            public visitColumnRef(expr: SQColumnRefExpr): string {\n                return expr.source.accept(this) + '.' + expr.ref;\n            }\n\n            public visitMeasureRef(expr: SQMeasureRefExpr, fallback: string): string {\n                return expr.source.accept(this) + '.' + expr.ref;\n            }\n\n            public visitAggr(expr: SQAggregationExpr, fallback: string): string {\n                return QueryAggregateFunction[expr.func] + '(' + expr.arg.accept(this) + ')';\n            }\n\n            public visitPercentile(expr: SQPercentileExpr, fallback: string): string {\n                let func = expr.exclusive\n                    ? 'Percentile.Exc('\n                    : 'Percentile.Inc(';\n\n                return func + expr.arg.accept(this) + ', ' + expr.k + ')';\n            }\n\n            public visitArithmetic(expr: SQArithmeticExpr, fallback: string): string {\n                return powerbi.data.getArithmeticOperatorName(expr.operator) + '(' + expr.left.accept(this) + ', ' + expr.right.accept(this) + ')';\n            }\n\n            public visitConstant(expr: SQConstantExpr): string {\n                return 'const';\n            }\n\n            public visitDefault(expr: SQExpr, fallback: string): string {\n                return fallback || 'expr';\n            }\n        }\n\n        class IsMeasureVisitor extends DefaultSQExprVisitor<boolean> {\n            public static instance: IsMeasureVisitor = new IsMeasureVisitor();\n\n            public visitMeasureRef(expr: SQMeasureRefExpr): boolean {\n                return true;\n            }\n\n            public visitAggr(expr: SQAggregationExpr): boolean {\n                return true;\n            }\n\n            public visitArithmetic(expr: SQArithmeticExpr): boolean {\n                return true;\n            }\n\n            public visitDefault(expr: SQExpr): boolean {\n                return false;\n            }\n        }\n\n        class IsDefaultValueVisitor extends DefaultSQExprVisitor<boolean> {\n            public static instance: IsDefaultValueVisitor = new IsDefaultValueVisitor();\n\n            public visitCompare(expr: SQCompareExpr): boolean {\n                if (expr.comparison !== QueryComparisonKind.Equal)\n                    return false;\n\n                return expr.right.accept(this);\n            }\n\n            public visitAnd(expr: SQAndExpr): boolean {\n                return expr.left.accept(this) && expr.right.accept(this);\n            }\n\n            public visitDefaultValue(expr: SQDefaultValueExpr): boolean {\n                return true;\n            }\n\n            public visitDefault(expr: SQExpr): boolean {\n                return false;\n            }\n        }\n\n        class IsAnyValueVisitor extends DefaultSQExprVisitor<boolean> {\n            public static instance: IsAnyValueVisitor = new IsAnyValueVisitor();\n\n            public visitCompare(expr: SQCompareExpr): boolean {\n                if (expr.comparison !== QueryComparisonKind.Equal)\n                    return false;\n\n                return expr.right.accept(this);\n            }\n\n            public visitAnd(expr: SQAndExpr): boolean {\n                return expr.left.accept(this) && expr.right.accept(this);\n            }\n\n            public visitAnyValue(expr: SQAnyValueExpr): boolean {\n                return true;\n            }\n\n            public visitDefault(expr: SQExpr): boolean {\n                return false;\n            }\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n\n    export class SemanticQueryRewriter {\n        private exprRewriter: ISQExprVisitor<SQExpr>;\n\n        constructor(exprRewriter: ISQExprVisitor<SQExpr>) {\n            this.exprRewriter = exprRewriter;\n        }\n\n        public rewriteFrom(fromValue: SQFrom): SQFrom {\n            let fromContents: { [name: string]: SQFromEntitySource } = {};\n            let originalFrom = fromValue,\n                originalFromKeys = originalFrom.keys();\n            for (let i = 0, len = originalFromKeys.length; i < len; i++) {\n                let keyName = originalFromKeys[i],\n                    originalEntityRef = originalFrom.entity(keyName),\n                    originalEntityExpr = SQExprBuilder.entity(originalEntityRef.schema, originalEntityRef.entity, keyName),\n                    updatedEntityExpr = <SQEntityExpr>originalEntityExpr.accept(this.exprRewriter);\n                \n                fromContents[keyName] = {\n                    schema: updatedEntityExpr.schema,\n                    entity: updatedEntityExpr.entity,\n                };\n            }\n            return new SQFrom(fromContents);\n        }\n\n        public rewriteSelect(selectItems: NamedSQExpr[], from: SQFrom): NamedSQExpr[]{\n            debug.assertValue(selectItems, 'selectItems');\n            debug.assertValue(from, 'from');\n\n            return this.rewriteNamedSQExpressions(selectItems, from);\n        }\n\n        public rewriteGroupBy(groupByitems: NamedSQExpr[], from: SQFrom): NamedSQExpr[] {\n            debug.assertAnyValue(groupByitems, 'groupByitems');\n            debug.assertValue(from, 'from');\n\n            if (_.isEmpty(groupByitems))\n                return;\n\n            return this.rewriteNamedSQExpressions(groupByitems, from);\n        }\n\n        private rewriteNamedSQExpressions(expressions: NamedSQExpr[], from: SQFrom): NamedSQExpr[] {\n            debug.assertValue(expressions, 'expressions');\n\n            return _.map(expressions, item => {\n                return {\n                    name: item.name,\n                    expr: SQExprRewriterWithSourceRenames.rewrite(item.expr.accept(this.exprRewriter), from)\n                };\n            });\n        }\n\n        public rewriteOrderBy(orderByItems: SQSortDefinition[], from: SQFrom): SQSortDefinition[]{\n            debug.assertAnyValue(orderByItems, 'orderByItems');\n            debug.assertValue(from, 'from');\n\n            if (_.isEmpty(orderByItems))\n                return;\n\n            let orderBy: SQSortDefinition[] = [];\n            for (let i = 0, len = orderByItems.length; i < len; i++) {\n                let item = orderByItems[i],\n                    updatedExpr = SQExprRewriterWithSourceRenames.rewrite(item.expr.accept(this.exprRewriter), from);\n                orderBy.push({\n                        direction: item.direction,\n                        expr: updatedExpr,\n                    });\n            }\n\n            return orderBy;\n        }\n\n        public rewriteWhere(whereItems: SQFilter[], from: SQFrom): SQFilter[]{\n            debug.assertAnyValue(whereItems, 'whereItems');\n            debug.assertValue(from, 'from');\n\n            if (_.isEmpty(whereItems))\n                return;\n\n            let where: SQFilter[] = [];\n            for (let i = 0, len = whereItems.length; i < len; i++) {\n                let originalWhere = whereItems[i];\n\n                let updatedWhere: SQFilter = {\n                    condition: SQExprRewriterWithSourceRenames.rewrite(originalWhere.condition.accept(this.exprRewriter), from),\n                };\n\n                if (originalWhere.target)\n                    updatedWhere.target = _.map(originalWhere.target, e => SQExprRewriterWithSourceRenames.rewrite(e.accept(this.exprRewriter), from));\n\n                where.push(updatedWhere);\n            }\n\n            return where;\n        }\n    }\n} ","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    import ArrayExtensions = jsCommon.ArrayExtensions;\n    import ArrayNamedItems = jsCommon.ArrayNamedItems;\n\n    export interface NamedSQExpr {\n        name: string;\n        expr: SQExpr;\n    }\n\n    export interface SQFilter {\n        target?: SQExpr[];\n        condition: SQExpr;\n    }\n\n    /** Represents an entity reference in SemanticQuery from. */\n    export interface SQFromEntitySource {\n        entity: string;\n        schema: string;\n    }\n\n    /** Represents a sort over an expression. */\n    export interface SQSortDefinition {\n        expr: SQExpr;\n        direction: SortDirection;\n    }\n\n    export interface QueryFromEnsureEntityResult {\n        name: string;\n        new?: boolean;\n    }\n\n    export interface SQSourceRenames {\n        [from: string]: string;\n    }\n\n    /**\n     * Represents a semantic query that is:\n     * 1) Round-trippable with a JSON QueryDefinition.\n     * 2) Immutable\n     * 3) Long-lived and does not have strong references to a conceptual model (only names).\n     */\n    export class SemanticQuery {\n        private static empty: SemanticQuery;\n        private fromValue: SQFrom;\n        private whereItems: SQFilter[];\n        private orderByItems: SQSortDefinition[];\n        private selectItems: NamedSQExpr[];\n        private groupByItems: NamedSQExpr[];\n\n        constructor(from: SQFrom, where: SQFilter[], orderBy: SQSortDefinition[], select: NamedSQExpr[], groupBy: NamedSQExpr[]) {\n            debug.assertValue(from, 'from');\n            debug.assertValue(select, 'select');\n\n            this.fromValue = from;\n            this.whereItems = where;\n            this.orderByItems = orderBy;\n            this.selectItems = select;\n            this.groupByItems = groupBy;\n        }\n\n        public static create(): SemanticQuery {\n            if (!SemanticQuery.empty)\n                SemanticQuery.empty = new SemanticQuery(new SQFrom(), null, null, [], null);\n\n            return SemanticQuery.empty;\n        }\n\n        private static createWithTrimmedFrom(\n            from: SQFrom,\n            where: SQFilter[],\n            orderBy: SQSortDefinition[],\n            select: NamedSQExpr[],\n            groupBy: NamedSQExpr[]): SemanticQuery {\n\n            let unreferencedKeyFinder = new UnreferencedKeyFinder(from.keys());\n\n            // Where\n            if (where) {\n                for (let i = 0, len = where.length; i < len; i++) {\n                    let filter = where[i];\n\n                    filter.condition.accept(unreferencedKeyFinder);\n\n                    let filterTarget = filter.target;\n                    if (filterTarget) {\n                        for (let j = 0, jlen = filterTarget.length; j < jlen; j++)\n                            if (filterTarget[j])\n                                filterTarget[j].accept(unreferencedKeyFinder);\n                    }\n                }\n            }\n\n            // OrderBy\n            if (orderBy) {\n                for (let i = 0, len = orderBy.length; i < len; i++)\n                    orderBy[i].expr.accept(unreferencedKeyFinder);\n            }\n\n            // Select\n            for (let i = 0, len = select.length; i < len; i++)\n                select[i].expr.accept(unreferencedKeyFinder);\n\n            // GroupBy\n            if (groupBy) {\n                for (let i = 0, len = groupBy.length; i < len; i++)\n                    groupBy[i].expr.accept(unreferencedKeyFinder);\n            }\n\n            let unreferencedKeys = unreferencedKeyFinder.result();\n            for (let i = 0, len = unreferencedKeys.length; i < len; i++)\n                from.remove(unreferencedKeys[i]);\n\n            return new SemanticQuery(from, where, orderBy, select, groupBy);\n        }\n\n        public from(): SQFrom {\n            return this.fromValue.clone();\n        }\n\n        /** Returns a query equivalent to this, with the specified selected items. */\n        select(values: NamedSQExpr[]): SemanticQuery;\n        /** Gets the items being selected in this query. */\n        select(): ArrayNamedItems<NamedSQExpr>;\n        public select(values?: NamedSQExpr[]): any {\n            if (_.isEmpty(arguments))\n                return this.getSelect();\n\n            return this.setSelect(values);\n        }\n\n        private getSelect(): ArrayNamedItems<NamedSQExpr> {\n            return SemanticQuery.createNamedExpressionArray(this.selectItems);\n        }\n\n        private static createNamedExpressionArray(items: NamedSQExpr[]): ArrayNamedItems<NamedSQExpr> {\n            return ArrayExtensions.extendWithName<NamedSQExpr>(_.map(items, s => {\n                return {\n                    name: s.name,\n                    expr: s.expr,\n                };\n            }));\n        }\n\n        private setSelect(values: NamedSQExpr[]): SemanticQuery {\n            let from = this.fromValue.clone();\n            let selectItems = SemanticQuery.rewriteExpressionsWithSourceRenames(values, from);\n            return SemanticQuery.createWithTrimmedFrom(from, this.whereItems, this.orderByItems, selectItems, this.groupByItems);\n        }\n\n        private static rewriteExpressionsWithSourceRenames(values: NamedSQExpr[], from: SQFrom): NamedSQExpr[] {\n            let items: NamedSQExpr[] = [];\n\n            for (let i = 0, len = values.length; i < len; i++) {\n                let value = values[i];\n                items.push({\n                    name: value.name,\n                    expr: SQExprRewriterWithSourceRenames.rewrite(value.expr, from)\n                });\n            }\n\n            return items;\n        } \n\n        /** Removes the given expression from the select. */\n        public removeSelect(expr: SQExpr): SemanticQuery {\n            debug.assertValue(expr, 'expr');\n\n            let originalItems = this.selectItems,\n                selectItems: NamedSQExpr[] = [];\n            for (let i = 0, len = originalItems.length; i < len; i++) {\n                let originalExpr = originalItems[i];\n                if (SQExpr.equals(originalExpr.expr, expr))\n                    continue;\n\n                selectItems.push(originalExpr);\n            }\n\n            return SemanticQuery.createWithTrimmedFrom(this.fromValue.clone(), this.whereItems, this.orderByItems, selectItems, this.groupByItems);\n        }\n\n        /** Removes the given expression from order by. */\n        public removeOrderBy(expr: SQExpr): SemanticQuery {\n            let sorts = this.orderBy();\n            for (let i = sorts.length - 1; i >= 0; i--) {\n                if (SQExpr.equals(sorts[i].expr, expr))\n                    sorts.splice(i, 1);\n            }\n\n            return SemanticQuery.createWithTrimmedFrom(this.fromValue.clone(), this.whereItems, sorts, this.selectItems, this.groupByItems);\n        }\n\n        public selectNameOf(expr: SQExpr): string {\n            let index = SQExprUtils.indexOfNamedExpr(this.selectItems, expr);\n            if (index >= 0)\n                return this.selectItems[index].name;\n        }\n\n        public setSelectAt(index: number, expr: SQExpr): SemanticQuery {\n            debug.assertValue(expr, 'expr');\n\n            if (index >= this.selectItems.length)\n                return;\n\n            let select = this.select(),\n                from = this.fromValue.clone(),\n                originalName = select[index].name;\n            select[index] = {\n                name: originalName,\n                expr: SQExprRewriterWithSourceRenames.rewrite(expr, from)\n            };\n\n            return SemanticQuery.createWithTrimmedFrom(from, this.whereItems, this.orderByItems, select, this.groupByItems);\n        }\n\n        /** Adds a the expression to the select clause. */\n        public addSelect(expr: SQExpr, exprName?: string): SemanticQuery {\n            debug.assertValue(expr, 'expr');\n\n            let selectItems = this.select(),\n                from = this.fromValue.clone();\n            selectItems.push(this.createNamedExpr(selectItems, from, expr, exprName));\n\n            return SemanticQuery.createWithTrimmedFrom(from, this.whereItems, this.orderByItems, selectItems, this.groupByItems);\n        }\n\n        private createNamedExpr(currentNames: ArrayNamedItems<NamedSQExpr>, from: SQFrom, expr: SQExpr, exprName?: string): NamedSQExpr{\n            return {\n                name: SQExprUtils.uniqueName(currentNames, expr, exprName),\n                expr: SQExprRewriterWithSourceRenames.rewrite(expr, from)\n            };\n        } \n\n        /** Returns a query equivalent to this, with the specified groupBy items. */\n        groupBy(values: NamedSQExpr[]): SemanticQuery;\n        /** Gets the groupby items in this query. */\n        groupBy(): ArrayNamedItems<NamedSQExpr>;\n        public groupBy(values?: NamedSQExpr[]): any {\n            if (_.isEmpty(arguments))\n                return this.getGroupBy();\n\n            return this.setGroupBy(values);\n        }\n\n        private getGroupBy(): ArrayNamedItems<NamedSQExpr> {\n            return SemanticQuery.createNamedExpressionArray(this.groupByItems);\n        }\n\n        private setGroupBy(values: NamedSQExpr[]): SemanticQuery {\n            let from = this.fromValue.clone();\n            let groupByItems = SemanticQuery.rewriteExpressionsWithSourceRenames(values, from);\n            return SemanticQuery.createWithTrimmedFrom(from, this.whereItems, this.orderByItems, this.selectItems, groupByItems);\n        }\n\n        public addGroupBy(expr: SQExpr): SemanticQuery {\n            debug.assertValue(expr, 'expr');\n\n            let groupByItems = this.groupBy(),\n                from = this.fromValue.clone();\n            groupByItems.push(this.createNamedExpr(groupByItems, from, expr));\n\n            return SemanticQuery.createWithTrimmedFrom(from, this.whereItems, this.orderByItems, this.selectItems, groupByItems);\n        }\n\n        /** Gets or sets the sorting for this query. */\n        orderBy(values: SQSortDefinition[]): SemanticQuery;\n        orderBy(): SQSortDefinition[];\n\n        public orderBy(values?: SQSortDefinition[]): any {\n            if (_.isEmpty(arguments))\n                return this.getOrderBy();\n\n            return this.setOrderBy(values);\n        }\n\n        private getOrderBy(): SQSortDefinition[] {\n            let result: SQSortDefinition[] = [];\n\n            let orderBy = this.orderByItems;\n            if (orderBy) {\n                for (let i = 0, len = orderBy.length; i < len; i++) {\n                    let clause = orderBy[i];\n\n                    result.push({\n                        expr: clause.expr,\n                        direction: clause.direction,\n                    });\n                }\n            }\n\n            return result;\n        }\n\n        private setOrderBy(values: SQSortDefinition[]): SemanticQuery {\n            debug.assertValue(values, 'values');\n\n            let updatedOrderBy: SQSortDefinition[] = [],\n                from = this.fromValue.clone();\n            for (let i = 0, len = values.length; i < len; i++) {\n                let clause = values[i];\n                updatedOrderBy.push({\n                    expr: SQExprRewriterWithSourceRenames.rewrite(clause.expr, from),\n                    direction: clause.direction,\n                });\n            }\n\n            return SemanticQuery.createWithTrimmedFrom(from, this.whereItems, updatedOrderBy, this.selectItems, this.groupByItems);\n        }\n\n        /** Gets or sets the filters for this query. */\n        where(values: SQFilter[]): SemanticQuery;\n        where(): SQFilter[];\n\n        public where(values?: SQFilter[]): any {\n            if (_.isEmpty(arguments))\n                return this.getWhere();\n\n            return this.setWhere(values);\n        }\n\n        private getWhere(): SQFilter[] {\n            let result: SQFilter[] = [];\n\n            let whereItems = this.whereItems;\n            if (whereItems) {\n                for (let i = 0, len = whereItems.length; i < len; i++)\n                    result.push(whereItems[i]);\n            }\n\n            return result;\n        }\n\n        private setWhere(values: SQFilter[]): SemanticQuery {\n            debug.assertValue(values, 'values');\n\n            let updatedWhere: SQFilter[] = [],\n                from = this.fromValue.clone();\n            for (let i = 0, len = values.length; i < len; i++) {\n                let filter = values[i];\n                let updatedFilter: SQFilter = {\n                    condition: SQExprRewriterWithSourceRenames.rewrite(filter.condition, from),\n                };\n\n                let filterTarget = filter.target;\n                if (filterTarget) {\n                    updatedFilter.target = [];\n                    for (let j = 0, jlen = filterTarget.length; j < jlen; j++)\n                        if (filterTarget[j]) {\n                            let updatedTarget = SQExprRewriterWithSourceRenames.rewrite(filterTarget[j], from);\n                            updatedFilter.target.push(updatedTarget);\n                        }\n                }\n\n                updatedWhere.push(updatedFilter);\n            }\n\n            return SemanticQuery.createWithTrimmedFrom(from, updatedWhere, this.orderByItems, this.selectItems, this.groupByItems);\n        }\n\n        public addWhere(filter: SemanticFilter): SemanticQuery {\n            debug.assertValue(filter, 'filter');\n\n            let updatedWhere: SQFilter[] = this.where(),\n                incomingWhere: SQFilter[] = filter.where(),\n                from = this.fromValue.clone();\n\n            for (let i = 0, len = incomingWhere.length; i < len; i++) {\n                let clause = incomingWhere[i];\n\n                let updatedClause: SQFilter = {\n                    condition: SQExprRewriterWithSourceRenames.rewrite(clause.condition, from),\n                };\n\n                if (clause.target)\n                    updatedClause.target = _.map(clause.target, t => SQExprRewriterWithSourceRenames.rewrite(t, from));\n\n                updatedWhere.push(updatedClause);\n            }\n\n            return SemanticQuery.createWithTrimmedFrom(from, updatedWhere, this.orderByItems, this.selectItems, this.groupByItems);\n        }\n\n        public rewrite(exprRewriter: ISQExprVisitor<SQExpr>): SemanticQuery {\n            let rewriter = new SemanticQueryRewriter(exprRewriter);\n            let from = rewriter.rewriteFrom(this.fromValue);\n            let where = rewriter.rewriteWhere(this.whereItems, from);\n            let orderBy = rewriter.rewriteOrderBy(this.orderByItems, from);\n            let select = rewriter.rewriteSelect(this.selectItems, from);\n            let groupBy = rewriter.rewriteGroupBy(this.groupByItems, from);\n\n            return SemanticQuery.createWithTrimmedFrom(from, where, orderBy, select, groupBy);\n        }\n    }\n\n    /** Represents a semantic filter condition.  Round-trippable with a JSON FilterDefinition.  Instances of this class are immutable. */\n    export class SemanticFilter implements ISemanticFilter {\n        private fromValue: SQFrom;\n        private whereItems: SQFilter[];\n\n        constructor(from: SQFrom, where: SQFilter[]) {\n            debug.assertValue(from, 'from');\n            debug.assertValue(where, 'where');\n\n            this.fromValue = from;\n            this.whereItems = where;\n        }\n\n        public static fromSQExpr(contract: SQExpr): SemanticFilter {\n            debug.assertValue(contract, 'contract');\n\n            let from = new SQFrom();\n\n            let rewrittenContract = SQExprRewriterWithSourceRenames.rewrite(contract, from);\n            // DEVNOTE targets of some filters are visual specific and will get resolved only during query generation.\n            //         Thus not setting a target here.\n            let where: SQFilter[] = [{\n                condition: rewrittenContract\n            }];\n\n            return new SemanticFilter(from, where);\n        }\n\n        public static getDefaultValueFilter(fieldSQExprs: SQExpr | SQExpr[]): SemanticFilter {\n            return SemanticFilter.getDataViewScopeIdentityComparisonFilters(fieldSQExprs, SQExprBuilder.defaultValue());\n        }\n\n        public static getAnyValueFilter(fieldSQExprs: SQExpr | SQExpr[]): SemanticFilter {\n            return SemanticFilter.getDataViewScopeIdentityComparisonFilters(fieldSQExprs, SQExprBuilder.anyValue());\n        }\n\n        private static getDataViewScopeIdentityComparisonFilters(fieldSQExprs: SQExpr | SQExpr[], value: SQExpr): SemanticFilter {\n            debug.assertValue(fieldSQExprs, 'fieldSQExprs');\n            debug.assertValue(value, 'value');\n\n            if (fieldSQExprs instanceof Array) {\n                let values: SQConstantExpr[] = Array.apply(null, Array(fieldSQExprs.length)).map(() => { return value; });\n                return SemanticFilter.fromSQExpr(SQExprUtils.getDataViewScopeIdentityComparisonExpr(<SQExpr[]>fieldSQExprs, values));\n            }\n\n            return SemanticFilter.fromSQExpr(SQExprBuilder.equal(<SQExpr>fieldSQExprs, value));\n        }\n\n        public from(): SQFrom {\n            return this.fromValue.clone();\n        }\n\n        public conditions(): SQExpr[] {\n            let expressions: SQExpr[] = [];\n\n            let where = this.whereItems;\n            for (let i = 0, len = where.length; i < len; i++) {\n                let filter = where[i];\n                expressions.push(filter.condition);\n            }\n            return expressions;\n        }\n\n        public where(): SQFilter[] {\n            let result: SQFilter[] = [];\n\n            let whereItems = this.whereItems;\n            for (let i = 0, len = whereItems.length; i < len; i++)\n                result.push(whereItems[i]);\n\n            return result;\n        }\n\n        public rewrite(exprRewriter: ISQExprVisitor<SQExpr>): SemanticFilter {\n            let rewriter = new SemanticQueryRewriter(exprRewriter);\n            let from = rewriter.rewriteFrom(this.fromValue);\n            let where = rewriter.rewriteWhere(this.whereItems, from);\n\n            return new SemanticFilter(from, where);\n        }\n\n        public validate(schema: FederatedConceptualSchema, aggrUtils: ISQAggregationOperations, errors?: SQExprValidationError[]): SQExprValidationError[] {\n            let validator = new SQExprValidationVisitor(schema, aggrUtils, errors);\n            this.rewrite(validator);\n            return validator.errors;\n        }\n\n        /** Merges a list of SemanticFilters into one. */\n        public static merge(filters: SemanticFilter[]): SemanticFilter {\n            if (_.isEmpty(filters))\n                return null;\n\n            if (filters.length === 1)\n                return filters[0];\n\n            let firstFilter = filters[0];\n            let from = firstFilter.from(),\n                where: SQFilter[] = ArrayExtensions.take(firstFilter.whereItems, firstFilter.whereItems.length);\n\n            for (let i = 1, len = filters.length; i < len; i++)\n                SemanticFilter.applyFilter(filters[i], from, where);\n\n            return new SemanticFilter(from, where);\n        }\n\n        public static isDefaultFilter(filter: SemanticFilter): boolean {\n            if (!filter || filter.where().length !== 1)\n                return false;\n\n            return SQExprUtils.isDefaultValue(filter.where()[0].condition);\n        }\n\n        public static isAnyFilter(filter: SemanticFilter): boolean {\n            if (!filter || filter.where().length !== 1)\n                return false;\n\n            return SQExprUtils.isAnyValue(filter.where()[0].condition);\n        }\n\n        public static isSameFilter(leftFilter: SemanticFilter, rightFilter: SemanticFilter): boolean {\n            if (jsCommon.JsonComparer.equals<SemanticFilter>(leftFilter, rightFilter)) {\n                return !((SemanticFilter.isDefaultFilter(leftFilter) && SemanticFilter.isAnyFilter(rightFilter))\n                    || (SemanticFilter.isAnyFilter(leftFilter) && SemanticFilter.isDefaultFilter(rightFilter)));\n            }\n            return false;\n        }\n\n        private static applyFilter(filter: SemanticFilter, from: SQFrom, where: SQFilter[]): void {\n            debug.assertValue(filter, 'filter');\n            debug.assertValue(from, 'from');\n            debug.assertValue(where, 'where');\n\n            // Where\n            let filterWhereItems = filter.whereItems;\n            for (let i = 0; i < filterWhereItems.length; i++) {\n                let filterWhereItem = filterWhereItems[i];\n\n                let updatedWhereItem: SQFilter = {\n                    condition: SQExprRewriterWithSourceRenames.rewrite(filterWhereItem.condition, from),\n                };\n\n                if (filterWhereItem.target)\n                    updatedWhereItem.target = _.map(filterWhereItem.target, e => SQExprRewriterWithSourceRenames.rewrite(e, from));\n\n                where.push(updatedWhereItem);\n            }\n        }\n    }\n\n    /** Represents a SemanticQuery/SemanticFilter from clause. */\n    export class SQFrom {\n        private items: { [name: string]: SQFromEntitySource };\n\n        constructor(items?: { [name: string]: SQFromEntitySource }) {\n            this.items = items || {};\n        }\n\n        public keys(): string[] {\n            return Object.keys(this.items);\n        }\n\n        public entity(key: string): SQFromEntitySource {\n            return this.items[key];\n        }\n\n        public ensureEntity(entity: SQFromEntitySource, desiredVariableName?: string): QueryFromEnsureEntityResult {\n            debug.assertValue(entity, 'entity');\n\n            // 1) Reuse a reference to the entity among the already referenced\n            let keys = this.keys();\n            for (let i = 0, len = keys.length; i < len; i++) {\n                let key = keys[i],\n                    item = this.items[key];\n                if (item && entity.entity === item.entity && entity.schema === item.schema)\n                    return { name: key };\n            }\n\n            // 2) Add a reference to the entity\n            let candidateName = desiredVariableName || this.candidateName(entity.entity),\n                uniqueName: string = candidateName,\n                i = 2;\n            while (this.items[uniqueName]) {\n                uniqueName = candidateName + i++;\n            }\n\n            this.items[uniqueName] = entity;\n            return { name: uniqueName, new: true };\n        }\n\n        public remove(key: string): void {\n            delete this.items[key];\n        }\n\n        /** Converts the entity name into a short reference name.  Follows the Semantic Query convention of a short name. */\n        private candidateName(ref: string): string {\n            debug.assertValue(ref, 'ref');\n\n            let idx = ref.lastIndexOf('.');\n            if (idx >= 0 && (idx !== ref.length - 1))\n                ref = ref.substr(idx + 1);\n\n            return ref.substring(0, 1).toLowerCase();\n        }\n\n        public clone(): SQFrom {\n            // NOTE: consider deprecating this method and instead making QueryFrom be CopyOnWrite (currently we proactively clone).\n            let cloned = new SQFrom();\n\n            // NOTE: we use extend rather than prototypical inheritance on items because we use Object.keys.\n            $.extend(cloned.items, this.items);\n\n            return cloned;\n        }\n    }\n\n    export class SQExprRewriterWithSourceRenames extends SQExprRewriter {\n        private renames: SQSourceRenames;\n\n        constructor(renames: SQSourceRenames) {\n            debug.assertValue(renames, 'renames');\n\n            super();\n            this.renames = renames;\n        }\n\n        public visitEntity(expr: SQEntityExpr): SQExpr {\n            let updatedName = this.renames[expr.entity];\n\n            if (updatedName)\n                return new SQEntityExpr(expr.schema, expr.entity, updatedName);\n\n            return super.visitEntity(expr);\n        }\n\n        public rewriteFilter(filter: SQFilter): SQFilter {\n            debug.assertValue(filter, 'filter');\n\n            let updatedTargets = undefined;\n            if (filter.target)\n                updatedTargets = this.rewriteArray(filter.target);\n\n            let updatedCondition = filter.condition.accept(this);\n\n            if (filter.condition === updatedCondition && filter.target === updatedTargets)\n                return filter;\n\n            let updatedFilter: SQFilter = {\n                condition: updatedCondition,\n            };\n\n            if (updatedTargets)\n                updatedFilter.target = updatedTargets;\n\n            return updatedFilter;\n        }\n\n        public rewriteArray(exprs: SQExpr[]): SQExpr[] {\n            debug.assertValue(exprs, 'exprs');\n\n            let updatedExprs: SQExpr[];\n\n            for (let i = 0, len = exprs.length; i < len; i++) {\n                let expr = exprs[i],\n                    rewrittenExpr = expr.accept(this);\n\n                if (expr !== rewrittenExpr && !updatedExprs)\n                    updatedExprs = ArrayExtensions.take(exprs, i);\n\n                if (updatedExprs)\n                    updatedExprs.push(rewrittenExpr);\n            }\n\n            return updatedExprs || exprs;\n        }\n\n        public static rewrite(expr: SQExpr, from: SQFrom): SQExpr {\n            debug.assertValue(expr, 'expr');\n            debug.assertValue(from, 'from');\n\n            let renames = QuerySourceRenameDetector.run(expr, from);\n            let rewriter = new SQExprRewriterWithSourceRenames(renames);\n            return expr.accept(rewriter);\n        }\n    }\n\n    /** Responsible for updating a QueryFrom based on SQExpr references. */\n    class QuerySourceRenameDetector extends DefaultSQExprVisitorWithTraversal {\n        private from: SQFrom;\n        private renames: SQSourceRenames;\n\n        public static run(expr: SQExpr, from: SQFrom): SQSourceRenames {\n            let detector = new QuerySourceRenameDetector(from);\n            expr.accept(detector);\n\n            return detector.renames;\n        }\n\n        constructor(from: SQFrom) {\n            debug.assertValue(from, 'from');\n            super();\n\n            this.from = from;\n            this.renames = {};\n        }\n\n        public visitEntity(expr: SQEntityExpr): void {\n            // TODO: Renames must take the schema into account, not just entity set name.\n            let existingEntity = this.from.entity(expr.variable);\n            if (existingEntity && existingEntity.schema === expr.schema && existingEntity.entity === expr.entity)\n                return;\n\n            let actualEntity = this.from.ensureEntity(\n                {\n                    schema: expr.schema,\n                    entity: expr.entity,\n                },\n                expr.variable);\n\n            this.renames[expr.entity] = actualEntity.name;\n        }\n    }\n\n    /** Visitor for finding unreferenced sources. */\n    class UnreferencedKeyFinder extends DefaultSQExprVisitorWithTraversal {\n        private keys: string[];\n\n        constructor(keys: string[]) {\n            debug.assertValue(keys, 'keys');\n\n            super();\n            this.keys = keys;\n        }\n\n        public visitEntity(expr: SQEntityExpr): void {\n            let index = this.keys.indexOf(expr.variable);\n            if (index >= 0)\n                this.keys.splice(index, 1);\n        }\n\n        public result(): string[] {\n            return this.keys;\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    import DataViewTransform = powerbi.data.DataViewTransform;\n    import SQExprBuilder = powerbi.data.SQExprBuilder;\n\n    /** Utility for creating a DataView from columns of data. */\n    export interface IDataViewBuilderCategorical {\n        withCategory(options: DataViewBuilderCategoryColumnOptions): IDataViewBuilderCategorical;\n        withCategories(categories: DataViewCategoryColumn[]): IDataViewBuilderCategorical;\n        withValues(options: DataViewBuilderValuesOptions): IDataViewBuilderCategorical;\n        withGroupedValues(options: DataViewBuilderGroupedValuesOptions): IDataViewBuilderCategorical;\n\n        build(): DataView;\n    }\n\n    export interface DataViewBuilderColumnOptions {\n        source: DataViewMetadataColumn;\n    }\n\n    export interface DataViewBuilderCategoryColumnOptions extends DataViewBuilderColumnOptions {\n        values: PrimitiveValue[];\n        identityFrom: DataViewBuilderColumnIdentitySource;\n    }\n\n    export interface DataViewBuilderValuesOptions {\n        columns: DataViewBuilderValuesColumnOptions[];\n    }\n\n    export interface DataViewBuilderGroupedValuesOptions {\n        groupColumn: DataViewBuilderCategoryColumnOptions;\n        valueColumns: DataViewBuilderColumnOptions[];\n        data: DataViewBuilderSeriesData[][];\n    }\n\n    /** Indicates the source set of identities. */\n    export interface DataViewBuilderColumnIdentitySource {\n        fields: SQExpr[];\n        identities?: DataViewScopeIdentity[];\n    }\n\n    export interface DataViewBuilderValuesColumnOptions extends DataViewBuilderColumnOptions, DataViewBuilderSeriesData {\n    }\n\n    export interface DataViewBuilderSeriesData {\n        values: PrimitiveValue[];\n        highlights?: PrimitiveValue[];\n\n        /** Client-computed maximum value for a column. */\n        maxLocal?: any;\n\n        /** Client-computed maximum value for a column. */\n        minLocal?: any;\n    }\n\n    export function createCategoricalDataViewBuilder(): IDataViewBuilderCategorical {\n        return new CategoricalDataViewBuilder();\n    }\n\n    interface ColumnMetadata {\n        column: DataViewMetadataColumn;\n        identityFrom: DataViewBuilderColumnIdentitySource;\n        values: PrimitiveValue[];\n    }\n\n    class CategoricalDataViewBuilder implements IDataViewBuilderCategorical {\n        private categories: DataViewCategoryColumn[];\n        private staticMeasureColumns: DataViewMetadataColumn[];\n        private dynamicMeasureColumns: DataViewMetadataColumn[];\n        private dynamicSeriesMetadata: ColumnMetadata;\n        private columnIndex: number;\n        private staticSeriesValues: DataViewBuilderValuesColumnOptions[];\n        private dynamicSeriesValues: DataViewBuilderSeriesData[][];\n\n        constructor() {\n            this.categories = [];\n            this.staticMeasureColumns = [];\n            this.dynamicMeasureColumns = [];\n            this.columnIndex = 0;\n        }\n\n        public withCategory(options: DataViewBuilderCategoryColumnOptions): IDataViewBuilderCategorical {\n            let categoryValues = options.values,\n                identityFrom = options.identityFrom,\n                type = options.source.type;\n\n            let categoryColumn: DataViewCategoryColumn = {\n                source: options.source,\n                identityFields: options.identityFrom.fields,\n                identity: options.identityFrom.identities || [],\n                values: categoryValues,\n            };\n\n            if (!options.identityFrom.identities) {\n                for (let categoryIndex = 0, categoryLength = categoryValues.length; categoryIndex < categoryLength; categoryIndex++) {\n                    categoryColumn.identity.push(\n                        getScopeIdentity(identityFrom, categoryIndex, categoryValues[categoryIndex], type));\n                }\n            }\n\n            if (!this.categories)\n                this.categories = [];\n\n            this.categories.push(categoryColumn);\n\n            return this;\n        }\n\n        public withCategories(categories: DataViewCategoryColumn[]): IDataViewBuilderCategorical {\n            if (_.isEmpty(this.categories))\n                this.categories = categories;\n            else\n                Array.prototype.push.apply(this.categories, categories);\n\n            return this;\n        }\n\n        /**\n         * Adds static series columns.\n         *\n         * Note that it is illegal to have both dynamic series and static series in a visual DataViewCategorical.  It is only legal to have them both in \n         * a query DataViewCategorical, where DataViewTransform is expected to split them up into separate visual DataViewCategorical objects.\n         */\n        public withValues(options: DataViewBuilderValuesOptions): IDataViewBuilderCategorical {\n            debug.assertValue(options, 'options');\n\n            let columns = options.columns;\n            debug.assertValue(columns, 'columns');\n\n            for (let column of columns) {\n                this.staticMeasureColumns.push(column.source);\n            }\n\n            this.staticSeriesValues = columns;\n\n            return this;\n        }\n\n        /**\n         * Adds dynamic series columns.\n         *\n         * Note that it is illegal to have both dynamic series and static series in a visual DataViewCategorical.  It is only legal to have them both in \n         * a query DataViewCategorical, where DataViewTransform is expected to split them up into separate visual DataViewCategorical objects.\n         */\n        public withGroupedValues(options: DataViewBuilderGroupedValuesOptions): IDataViewBuilderCategorical {\n            debug.assertValue(options, 'options');\n\n            let groupColumn = options.groupColumn;\n            debug.assertValue(groupColumn, 'groupColumn');\n\n            this.dynamicSeriesMetadata = {\n                column: groupColumn.source,\n                identityFrom: groupColumn.identityFrom,\n                values: groupColumn.values,\n            };\n\n            let valueColumns = options.valueColumns;\n            for (let valueColumn of valueColumns) {\n                this.dynamicMeasureColumns.push(valueColumn.source);\n            }\n\n            this.dynamicSeriesValues = options.data;\n\n            return this;\n        }\n\n        private fillData(dataViewValues: DataViewValueColumns) {\n            let categoryColumn = _.first(this.categories);\n            let categoryLength = (categoryColumn && categoryColumn.values) ? categoryColumn.values.length : 0;\n\n            if (this.hasDynamicSeries()) {\n                for (let seriesIndex = 0; seriesIndex < this.dynamicSeriesMetadata.values.length; seriesIndex++) {\n                    let seriesMeasures = this.dynamicSeriesValues[seriesIndex];\n                    debug.assert(seriesMeasures.length === this.dynamicMeasureColumns.length, 'seriesMeasures.length === this.dynamicMeasureColumns.length');\n\n                    for (let measureIndex = 0, measuresLen = this.dynamicMeasureColumns.length; measureIndex < measuresLen; measureIndex++) {\n                        let groupIndex = seriesIndex * measuresLen + measureIndex;\n\n                        applySeriesData(dataViewValues[groupIndex], seriesMeasures[measureIndex], categoryLength);\n                    }\n                }\n            }\n\n            if (this.hasStaticSeries()) {\n                // Note: when the target categorical has both dynamic and static series, append static measures at the end of the values array.\n                let staticColumnsStartingIndex = this.hasDynamicSeries() ? (this.dynamicSeriesValues.length * this.dynamicMeasureColumns.length) : 0;\n\n                for (let measureIndex = 0, measuresLen = this.staticMeasureColumns.length; measureIndex < measuresLen; measureIndex++) {\n                    applySeriesData(dataViewValues[staticColumnsStartingIndex + measureIndex], this.staticSeriesValues[measureIndex], categoryLength);\n                }\n            }\n        }\n\n        /**\n         * Returns the DataView with metadata and DataViewCategorical.\n         * Returns undefined if the combination of parameters is illegal, such as having both dynamic series and static series when building a visual DataView.\n         */\n        public build(): DataView {\n            let metadataColumns: DataViewMetadataColumn[] = [];\n            let categorical: DataViewCategorical = {};\n\n            let categoryMetadata = this.categories;\n            let dynamicSeriesMetadata = this.dynamicSeriesMetadata;\n\n            // --- Build metadata columns and value groups ---\n            for (let columnMetadata of categoryMetadata) {\n                pushIfNotExists(metadataColumns, columnMetadata.source);\n            }\n\n            if (this.hasDynamicSeries()) {\n                // Dynamic series, or Dyanmic & Static series.\n                pushIfNotExists(metadataColumns, dynamicSeriesMetadata.column);\n\n                categorical.values = DataViewTransform.createValueColumns([], dynamicSeriesMetadata.identityFrom.fields, dynamicSeriesMetadata.column);\n\n                // For each series value we will make one column per measure\n                let seriesValues = dynamicSeriesMetadata.values;\n                for (let seriesIndex = 0; seriesIndex < seriesValues.length; seriesIndex++) {\n                    let seriesValue = seriesValues[seriesIndex];\n                    let seriesIdentity = getScopeIdentity(dynamicSeriesMetadata.identityFrom, seriesIndex, seriesValue, dynamicSeriesMetadata.column.type);\n\n                    for (let measure of this.dynamicMeasureColumns) {\n                        let column = _.clone(measure);\n                        column.groupName = <string>seriesValue;\n\n                        pushIfNotExists(metadataColumns, column);\n                        categorical.values.push({\n                            source: column,\n                            values: [],\n                            identity: seriesIdentity,\n                        });\n                    }\n                }\n\n                if (this.hasStaticSeries()) {\n                    // IMPORTANT: In the Dyanmic & Static series case, the groups array shall not include any static group. This is to match the behavior of production code that creates query DataView objects.\n                    // Get the current return value of grouped() before adding static measure columns, an use that as the return value of this categorical.\n                    // Otherwise, the default behavior of DataViewValueColumns.grouped() from DataViewTransform.createValueColumns() is to create series groups from all measure columns.\n                    let dynamicSeriesGroups = categorical.values.grouped();\n                    categorical.values.grouped = () => dynamicSeriesGroups;\n\n                    this.appendStaticMeasureColumns(metadataColumns, categorical.values);\n                }\n            }\n            else {\n                // Static series only / no series\n                categorical.values = DataViewTransform.createValueColumns();\n                this.appendStaticMeasureColumns(metadataColumns, categorical.values);\n            }\n\n            let categories = this.categories;\n            if (!_.isEmpty(categories))\n                categorical.categories = categories;\n\n            // --- Fill in data point values ---\n            this.fillData(categorical.values);\n\n            let dataView: DataView = {\n                metadata: {\n                    columns: metadataColumns,\n                },\n                categorical: categorical,\n            };\n\n            if (this.isLegalDataView(dataView)) {\n                return dataView;\n            }\n        }\n\n        private appendStaticMeasureColumns(metadataColumns: DataViewMetadataColumn[], valueColumns: DataViewValueColumns): void {\n            debug.assertValue(metadataColumns, 'metadataColumns');\n            debug.assertValue(valueColumns, 'valueColumns');\n\n            if (!_.isEmpty(this.staticMeasureColumns)) {\n                for (let column of this.staticMeasureColumns) {\n                    pushIfNotExists(metadataColumns, column);\n                    valueColumns.push({\n                        source: column,\n                        values: [],\n                    });\n                }\n            }\n        }\n\n        private isLegalDataView(dataView: DataView): boolean {\n            if (this.hasDynamicSeries() && this.hasStaticSeries() && CategoricalDataViewBuilder.isVisualDataView(dataView.metadata.columns)) {\n                // It is illegal to have both dynamic series and static series in a visual DataViewCategorical,\n                // because the DataViewValueColumns interface today cannot express that 100% (see its 'source' property and return value of its 'grouped()' function).\n                return false;\n            }\n\n            return true;\n        }\n\n        /**\n         * This function infers that if any metadata column has 'queryName', \n         * then the user of this builder is building a visual DataView (as opposed to query DataView).\n         *\n         * @param metadataColumns The complete collection of metadata columns in the categorical.\n         */\n        private static isVisualDataView(metadataColumns: DataViewMetadataColumn[]): boolean {\n            return !_.isEmpty(metadataColumns) &&\n                _.any(metadataColumns, (metadataColumn) => !!metadataColumn.queryName);\n        }\n\n        private hasDynamicSeries(): boolean {\n            return !!this.dynamicSeriesMetadata; // In Map visual scenarios, you can have dynamic series without measure columns\n        }\n\n        private hasStaticSeries(): boolean {\n            return !!this.staticSeriesValues;\n        }\n    }\n\n    function getScopeIdentity(\n        source: DataViewBuilderColumnIdentitySource,\n        index: number,\n        value: PrimitiveValue,\n        valueType: ValueTypeDescriptor): DataViewScopeIdentity {\n        let identities = source.identities;\n        if (identities) {\n            return identities[index];\n        }\n\n        debug.assert(source.fields && source.fields.length === 1, 'Inferring identity, expect exactly one field.');\n\n        return createDataViewScopeIdentity(\n            SQExprBuilder.equal(\n                source.fields[0],\n                SQExprBuilder.typedConstant(value, valueType)));\n    }\n\n    function pushIfNotExists(items: DataViewMetadataColumn[], itemToAdd: DataViewMetadataColumn): void {\n        if (_.contains(items, itemToAdd))\n            return;\n\n        items.push(itemToAdd);\n    }\n\n    function applySeriesData(target: DataViewValueColumn, source: DataViewBuilderSeriesData, categoryLength: number): void {\n        debug.assertValue(target, 'target');\n        debug.assertValue(source, 'source');\n        debug.assertValue(categoryLength, 'categoryLength');\n\n        let values = source.values;\n        debug.assert(categoryLength === values.length || categoryLength === 0, 'categoryLength === values.length || categoryLength === 0');\n\n        target.values = values;\n\n        let highlights = source.highlights;\n        if (highlights) {\n            debug.assert(categoryLength === highlights.length, 'categoryLength === highlights.length');\n\n            target.highlights = highlights;\n        }\n\n        let aggregates: DataViewColumnAggregates;\n        if (source.minLocal !== undefined) {\n            if (!aggregates)\n                aggregates = {};\n\n            aggregates.minLocal = source.minLocal;\n        }\n\n        if (source.maxLocal !== undefined) {\n            if (!aggregates)\n                aggregates = {};\n\n            aggregates.maxLocal = source.maxLocal;\n        }\n\n        if (aggregates) {\n            target.source.aggregates = aggregates;\n            _.extend(target, aggregates);\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    import SQExpr = powerbi.data.SQExpr;\n\n    export function createStaticEvalContext(colorAllocatorCache?: IColorAllocatorCache): IEvalContext;\n    export function createStaticEvalContext(colorAllocatorCache: IColorAllocatorCache, dataView: DataView, selectTransforms: DataViewSelectTransform[]): IEvalContext;\n    export function createStaticEvalContext(colorAllocatorCache: IColorAllocatorCache, dataView?: DataView, selectTransforms?: DataViewSelectTransform[]): IEvalContext {\n        return new StaticEvalContext(\n            colorAllocatorCache || createColorAllocatorCache(),\n            dataView || { metadata: { columns: [] } },\n            selectTransforms);\n    }\n\n    /**\n     * Represents an eval context over a potentially empty DataView.  Only static repetition data view objects\n     * are supported.\n     */\n    class StaticEvalContext implements IEvalContext {\n        private colorAllocatorCache: IColorAllocatorCache;\n        private dataView: DataView;\n        private selectTransforms: DataViewSelectTransform[];\n\n        constructor(colorAllocatorCache: IColorAllocatorCache, dataView: DataView, selectTransforms: DataViewSelectTransform[]) {\n            debug.assertValue(colorAllocatorCache, 'colorAllocatorCache');\n            debug.assertValue(dataView, 'dataView');\n            debug.assertAnyValue(selectTransforms, 'selectTransforms');\n\n            this.colorAllocatorCache = colorAllocatorCache;\n            this.dataView = dataView;\n            this.selectTransforms = selectTransforms;\n        }\n\n        public getColorAllocator(expr: SQFillRuleExpr): IColorAllocator {\n            return this.colorAllocatorCache.get(expr);\n        }\n\n        public getExprValue(expr: SQExpr): PrimitiveValue {\n            let dataView = this.dataView,\n                selectTransforms = this.selectTransforms;\n\n            if (!dataView || !selectTransforms)\n                return;\n\n            if (SQExpr.isAggregation(expr)) {\n                let columnAggregate = findAggregateValue(expr, selectTransforms, dataView.metadata.columns);\n                if (columnAggregate !== undefined) {\n                    return columnAggregate;\n                }\n            }\n\n            if (dataView.table)\n                return getExprValueFromTable(expr, selectTransforms, dataView.table, /*rowIdx*/ 0);\n        }\n\n        public getRoleValue(roleName: string): PrimitiveValue {\n            return;\n        }\n    }\n\n    export function getExprValueFromTable(expr: SQExpr, selectTransforms: DataViewSelectTransform[], table: DataViewTable, rowIdx: number): PrimitiveValue {\n        debug.assertValue(expr, 'expr');\n        debug.assertValue(selectTransforms, 'selectTransforms');\n        debug.assertValue(table, 'table');\n        debug.assertValue(rowIdx, 'rowIdx');\n\n        let rows = table.rows;\n        if (_.isEmpty(rows) || rows.length <= rowIdx)\n            return;\n\n        let cols = table.columns;\n\n        let selectIdx = findSelectIndex(expr, selectTransforms);\n        if (selectIdx < 0)\n            return;\n\n        for (let colIdx = 0, colLen = cols.length; colIdx < colLen; colIdx++) {\n            if (selectIdx !== cols[colIdx].index)\n                continue;\n\n            return rows[rowIdx][colIdx];\n        }\n    }\n\n    function findAggregateValue(expr: SQAggregationExpr, selectTransforms: DataViewSelectTransform[], columns: DataViewMetadataColumn[]): PrimitiveValue {\n        debug.assertValue(expr, 'expr');\n        debug.assertValue(selectTransforms, 'selectTransforms');\n        debug.assertValue(columns, 'columns');\n\n        let selectIdx = findSelectIndex(expr.arg, selectTransforms);\n        if (selectIdx < 0)\n            return;\n\n        for (let colIdx = 0, colLen = columns.length; colIdx < colLen; colIdx++) {\n            let column = columns[colIdx],\n                columnAggr = column.aggregates;\n\n            if (selectIdx !== column.index || !columnAggr)\n                continue;\n\n            let aggregateValue = findAggregates(columnAggr, expr.func);\n            if (aggregateValue !== undefined)\n                return aggregateValue;\n        }\n    }\n\n    function findSelectIndex(expr: SQExpr, selectTransforms: DataViewSelectTransform[]): number {\n        debug.assertValue(expr, 'expr');\n        debug.assertValue(selectTransforms, 'selectTransforms');\n\n        let queryName: string;\n        if (SQExpr.isSelectRef(expr))\n            queryName = expr.expressionName;\n\n        for (let selectIdx = 0, selectLen = selectTransforms.length; selectIdx < selectLen; selectIdx++) {\n            let selectTransform = selectTransforms[selectIdx];\n\n            if (!selectTransform || !selectTransform.queryName)\n                continue;\n\n            if (queryName) {\n                if (selectTransform.queryName === queryName)\n                    return selectIdx;\n            }\n            else {\n                if (SQExpr.equals(selectTransform.expr, expr))\n                    return selectIdx;\n            }\n        }\n\n        return -1;\n    }\n\n    function findAggregates(aggregates: DataViewColumnAggregates, func: QueryAggregateFunction): PrimitiveValue {\n        debug.assertValue(aggregates, 'aggregates');\n        debug.assertValue(func, 'func');\n\n        switch (func) {\n            case QueryAggregateFunction.Min:\n                return getOptional(aggregates.min, aggregates.minLocal);\n            case QueryAggregateFunction.Max:\n                return getOptional(aggregates.max, aggregates.maxLocal);\n        }\n    }\n\n    function getOptional(value1: PrimitiveValue, value2: PrimitiveValue): PrimitiveValue {\n        debug.assertAnyValue(value1, 'value1');\n        debug.assertAnyValue(value2, 'value2');\n\n        if (value1 !== undefined)\n            return value1;\n\n        return value2;\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    export function createMatrixEvalContext(colorAllocatorProvider: IColorAllocatorCache, dataViewMatrix: DataViewMatrix): IEvalContext {\n        // NOTE: Matrix context-sensitive evaluation is not yet implemented.\n        return createStaticEvalContext(colorAllocatorProvider);\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi {\n\n    import StringExtensions = jsCommon.StringExtensions;\n    import Formatting = jsCommon.Formatting;\n    import RegExpExtensions = jsCommon.RegExpExtensions;\n\n    /** Culture interfaces. These match the Globalize library interfaces intentionally. */\n    export interface Culture {\n        name: string;\n        calendar: Calendar;\n        calendars: CalendarDictionary;\n        numberFormat: NumberFormatInfo;\n    }\n\n    export interface Calendar {\n        patterns: any;\n        firstDay: number;\n    }\n\n    export interface CalendarDictionary {\n        [key: string]: Calendar;\n    }\n\n    export interface NumberFormatInfo {\n        decimals: number;\n        groupSizes: number[];\n        negativeInfinity: string;\n        positiveInfinity: string;\n    }\n\n    /**\n     *  Creating a dummy module to declare cultureInfo string, so we could do a strongly typed usage in Visuals\n     */\n    declare module powerbi.common {\n        let cultureInfo: string;\n    }\n\n    /** Formatting Encoder */\n    module FormattingEncoder {\n        export function preserveEscaped(format: string, specialChars: string): string {\n            // Unicode U+E000 - U+F8FF is a private area and so we can use the chars from the range to encode the escaped sequences\n            let length = specialChars.length;\n            for (let i = 0; i < length; i++) {\n                let oldText = \"\\\\\" + specialChars[i];\n                let newText = String.fromCharCode(0xE000 + i);\n                format = StringExtensions.replaceAll(format, oldText, newText);\n            }\n            return format;\n        }\n\n        export function restoreEscaped(format: string, specialChars: string): string {\n            // After formatting is complete we should restore the encoded escaped chars into the unescaped chars\n            let length = specialChars.length;\n            for (let i = 0; i < length; i++) {\n                let oldText = String.fromCharCode(0xE000 + i);\n                let newText = specialChars[i];\n                format = StringExtensions.replaceAll(format, oldText, newText);\n            }\n            return StringExtensions.replaceAll(format, \"\\\\\", \"\");\n        }\n\n        export function preserveLiterals(format: string, literals: string[]): string {\n            // Unicode U+E000 - U+F8FF is a private area and so we can use the chars from the range to encode the escaped sequences\n            format = StringExtensions.replaceAll(format, \"\\\"\", \"'\");\n            for (let i = 0; ; i++) {\n                let fromIndex = format.indexOf(\"'\");\n                if (fromIndex < 0) {\n                    break;\n                }\n                let toIndex = format.indexOf(\"'\", fromIndex + 1);\n                if (toIndex < 0) {\n                    break;\n                }\n                let literal = format.substring(fromIndex, toIndex + 1);\n                literals.push(literal.substring(1, toIndex - fromIndex));\n                let token = String.fromCharCode(0xE100 + i);\n                format = format.replace(literal, token);\n            }\n            return format;\n        }\n\n        export function restoreLiterals(format: string, literals: string[]): string {\n            let count = literals.length;\n            for (let i = 0; i < count; i++) {\n                let token = String.fromCharCode(0xE100 + i);\n                let literal = literals[i];\n                format = format.replace(token, literal);\n            }\n            return format;\n        }\n    }\n\n    const IndexedTokensRegex = /({{)|(}})|{(\\d+[^}]*)}/g;\n    const ZeroPlaceholder = '0';\n    const DigitPlaceholder = '#';\n    const ExponentialFormatChar = 'E';\n    const NumericPlaceholders = [ZeroPlaceholder, DigitPlaceholder];\n    const NumericPlaceholderRegex = new RegExp(NumericPlaceholders.join('|'), 'g');\n\n    /** Formatting Service */\n    class FormattingService implements IFormattingService {\n\n        _currentCultureSelector: string;\n        _currentCulture: Culture;\n        _dateTimeScaleFormatInfo: DateTimeScaleFormatInfo;\n\n        public formatValue(value: any, format?: string, culture?: string): string {\n            // Handle special cases\n            if (value === undefined || value === null) {\n                return '';\n            }\n            let gculture = this.getCulture(culture);\n\n            if (DateTimeFormat.canFormat(value)) {\n                // Dates\n                return DateTimeFormat.format(value, format, gculture);\n            } else if (NumberFormat.canFormat(value)) {\n                // Numbers\n                return NumberFormat.format(value, format, gculture);\n            } else {\n                // Other data types - return as string\n                return value.toString();\n            }\n        }\n\n        public format(formatWithIndexedTokens: string, args: any[], culture?: string): string {\n            if (!formatWithIndexedTokens) {\n                return \"\";\n            }\n            let result = formatWithIndexedTokens.replace(IndexedTokensRegex, (match: string, left: string, right: string, argToken: string) => {\n                if (left) {\n                    return \"{\";\n                } else if (right) {\n                    return \"}\";\n                } else {\n                    let parts = argToken.split(\":\");\n                    let argIndex = parseInt(parts[0], 10);\n                    let argFormat = parts[1];\n                    return this.formatValue(args[argIndex], argFormat, culture);\n                }\n            });\n\n            return result;\n        }\n\n        public isStandardNumberFormat(format: string): boolean {\n            return NumberFormat.isStandardFormat(format);\n        }\n\n        public formatNumberWithCustomOverride(value: number, format: string, nonScientificOverrideFormat: string, culture?: string): string {\n            let gculture = this.getCulture(culture);\n\n            return NumberFormat.formatWithCustomOverride(value, format, nonScientificOverrideFormat, gculture);\n        }\n\n        public dateFormatString(unit: DateTimeUnit): string {\n            if (!this._dateTimeScaleFormatInfo)\n                this.initialize();\n            return this._dateTimeScaleFormatInfo.getFormatString(unit);\n        }\n\n        /**\n         * Sets the current localization culture\n         * @param cultureSelector - name of a culture: \"en\", \"en-UK\", \"fr-FR\" etc. (See National Language Support (NLS) for full lists. Use \"default\" for invariant culture).\n         */\n        private setCurrentCulture(cultureSelector: string): void {\n            if (this._currentCultureSelector !== cultureSelector) {\n                this._currentCulture = this.getCulture(cultureSelector);\n                this._currentCultureSelector = cultureSelector;\n                this._dateTimeScaleFormatInfo = new DateTimeScaleFormatInfo(this._currentCulture);\n            }\n        }\n\n        /**\n         * Gets the culture assotiated with the specified cultureSelector (\"en\", \"en-US\", \"fr-FR\" etc).\n         * @param cultureSelector - name of a culture: \"en\", \"en-UK\", \"fr-FR\" etc. (See National Language Support (NLS) for full lists. Use \"default\" for invariant culture).\n         * Exposing this function for testability of unsupported cultures\n         */\n        public getCulture(cultureSelector?: string): Culture {\n            if (cultureSelector == null) {\n                if (this._currentCulture == null) {\n                    this.initialize();\n                }\n                return this._currentCulture;\n            } else {\n                let culture = Globalize.findClosestCulture(cultureSelector);\n                if (!culture)\n                    culture = Globalize.culture(\"en-US\");\n                return culture;\n            }\n        }\n\n        /** By default the Globalization module initializes to the culture/calendar provided in the language/culture URL params */\n        private initialize() {\n            let cultureName = this.getCurrentCulture();\n            this.setCurrentCulture(cultureName);\n            let calendarName = this.getUrlParam(\"calendar\");\n            if (calendarName) {\n                let culture = this._currentCulture;\n                let c = culture.calendars[calendarName];\n                if (c) {\n                    culture.calendar = c;\n                }\n            }\n        }\n\n        /**\n         *  Exposing this function for testability \n         */\n        public getCurrentCulture(): string {\n            let urlParam = this.getUrlParam(\"language\");\n\n            if (urlParam) {\n                return urlParam;\n            }\n\n            if (powerbi && powerbi.common && powerbi.common.cultureInfo) {\n                // Get cultureInfo set in powerbi\n                return powerbi.common.cultureInfo;\n            }\n\n            return window.navigator.userLanguage || window.navigator[\"language\"] || Globalize.culture().name;\n        }\n\n        /**\n         *  Exposing this function for testability\n         *  @param name: queryString name\n         */\n        public getUrlParam(name: string): string {\n            let param = window.location.search.match(RegExp(\"[?&]\" + name + \"=([^&]*)\"));\n            return param ? param[1] : undefined;\n        }\n    }\n\n    /**\n     * DateTimeFormat module contains the static methods for formatting the DateTimes.\n     * It extends the JQuery.Globalize functionality to support complete set of .NET\n     * formatting expressions for dates.\n     */\n    module DateTimeFormat {\n\n        let _currentCachedFormat: string;\n        let _currentCachedProcessedFormat: string;\n\n        /** Evaluates if the value can be formatted using the NumberFormat */\n        export function canFormat(value: any) {\n            let result = value instanceof Date;\n            return result;\n        }\n\n        /** Formats the date using provided format and culture */\n        export function format(value: Date, format: string, culture: Culture): string {\n            format = format || \"G\";\n            let isStandard = format.length === 1;\n            try {\n                if (isStandard) {\n                    return formatDateStandard(value, format, culture);\n                } else {\n                    return formatDateCustom(value, format, culture);\n                }\n            } catch (e) {\n                return formatDateStandard(value, \"G\", culture);\n            }\n        }\n\n        /** Formats the date using standard format expression */\n        function formatDateStandard(value: Date, format: string, culture: Culture) {\n            // In order to provide parity with .NET we have to support additional set of DateTime patterns.\n            let patterns = culture.calendar.patterns;\n            // Extend supported set of patterns\n            ensurePatterns(culture.calendar);\n            // Handle extended set of formats\n            let output = Formatting.findDateFormat(value, format, culture.name);\n            if (output.format.length === 1)\n                format = patterns[output.format];\n            else\n                format = output.format;\n            //need to revisit when globalization is enabled\n            culture = Globalize.culture(\"en-US\");\n            return Globalize.format(output.value, format, culture);\n        }\n\n        /** Formats the date using custom format expression */\n        function formatDateCustom(value: Date, format: string, culture: Culture): string {\n            let result: string;\n            let literals: string[] = [];\n            format = FormattingEncoder.preserveEscaped(format, \"\\\\dfFghHKmstyz:/%'\\\"\");\n            format = FormattingEncoder.preserveLiterals(format, literals);\n            format = StringExtensions.replaceAll(format, \"\\\"\", \"'\");\n            if (format.indexOf(\"F\") > -1) {\n                // F is not supported so we need to replace the F with f based on the milliseconds\n                // Replace all sequences of F longer than 3 with \"FFF\"\n                format = StringExtensions.replaceAll(format, \"FFFF\", \"FFF\");\n                // Based on milliseconds update the format to use fff\n                let milliseconds = value.getMilliseconds();\n                if (milliseconds % 10 >= 1) {\n                    format = StringExtensions.replaceAll(format, \"FFF\", \"fff\");\n                }\n                format = StringExtensions.replaceAll(format, \"FFF\", \"FF\");\n                if ((milliseconds % 100) / 10 >= 1) {\n                    format = StringExtensions.replaceAll(format, \"FF\", \"ff\");\n                }\n                format = StringExtensions.replaceAll(format, \"FF\", \"F\");\n                if ((milliseconds % 1000) / 100 >= 1) {\n                    format = StringExtensions.replaceAll(format, \"F\", \"f\");\n                }\n                format = StringExtensions.replaceAll(format, \"F\", \"\");\n                if (format === \"\" || format === \"%\")\n                    return \"\";\n            }\n            format = processCustomDateTimeFormat(format);\n            result = Globalize.format(value, format, culture);\n            result = localize(result, culture.calendar);\n            result = FormattingEncoder.restoreLiterals(result, literals);\n            result = FormattingEncoder.restoreEscaped(result, \"\\\\dfFghHKmstyz:/%'\\\"\");\n            return result;\n        }\n\n        /** Translates unsupported .NET custom format expressions to the custom expressions supported by JQuery.Globalize */\n        function processCustomDateTimeFormat(format: string): string {\n            if (format === _currentCachedFormat) {\n                return _currentCachedProcessedFormat;\n            }\n            _currentCachedFormat = format;\n            format = Formatting.fixDateTimeFormat(format);\n            _currentCachedProcessedFormat = format;\n            return format;\n        }\n\n        /** Localizes the time separator symbol */\n        function localize(value: string, dictionary: any): string {\n            let timeSeparator = dictionary[\":\"];\n            if (timeSeparator === \":\") {\n                return value;\n            }\n            let result = \"\";\n            let count = value.length;\n            for (let i = 0; i < count; i++) {\n                let char = value.charAt(i);\n                switch (char) {\n                    case \":\":\n                        result += timeSeparator;\n                        break;\n                    default:\n                        result += char;\n                        break;\n                }\n            }\n            return result;\n        }\n\n        function ensurePatterns(calendar: GlobalizeCalendar) {\n            let patterns = calendar.patterns;\n            if (patterns[\"g\"] === undefined) {\n                patterns[\"g\"] = patterns[\"f\"].replace(patterns[\"D\"], patterns[\"d\"]);  // Generic: Short date, short time\n                patterns[\"G\"] = patterns[\"F\"].replace(patterns[\"D\"], patterns[\"d\"]);  // Generic: Short date, long time\n            }\n        }\n\n    }\n\n    /**\n     * NumberFormat module contains the static methods for formatting the numbers.\n     * It extends the JQuery.Globalize functionality to support complete set of .NET\n     * formatting expressions for numeric types including custom formats.\n     */\n    export module NumberFormat {\n\n        const NonScientificFormatRegex = /^\\{.+\\}.*/;\n        const NumericalPlaceHolderRegex = /\\{.+\\}/;\n        const ScientificFormatRegex = /e[+-]*[0#]+/i;\n        const StandardFormatRegex = /^[a-z]\\d{0,2}$/i; // a letter + up to 2 digits for precision specifier\n        const TrailingZerosRegex = /0+$/;\n        const DecimalFormatRegex = /\\.([0#]*)/g;\n        const NumericFormatRegex = /[0#,\\.]+[0,#]*/g;\n        const LastNumericPlaceholderRegex = /(0|#)([^(0|#)]*)$/;\n        const DecimalFormatCharacter = '.';\n\n        export const NumberFormatComponentsDelimeter = ';';\n\n        export interface NumericFormatMetadata {\n            format: string;\n            hasEscapes: boolean;\n            hasQuotes: boolean;\n            hasE: boolean;\n            hasCommas: boolean;\n            hasDots: boolean;\n            hasPercent: boolean;\n            hasPermile: boolean;\n            precision: number;\n            scale: number;\n        }\n\n        export interface NumberFormatComponents {\n            hasNegative: boolean;\n            positive: string;\n            negative: string;\n            zero: string;\n        }\n\n        function getNonScientificFormatWithPrecision(baseFormat: string, numericFormat: string): string {\n            if (!numericFormat || baseFormat === undefined)\n                return baseFormat;\n\n            let newFormat = \"{0:\" + numericFormat + \"}\";\n\n            return baseFormat.replace(\"{0}\", newFormat);\n        }\n\n        export function getNumericFormat(value: number, baseFormat: string): string {\n            if (baseFormat == null)\n                return baseFormat;\n\n            if (hasFormatComponents(baseFormat)) {\n                let {positive, negative, zero} = NumberFormat.getComponents(baseFormat);\n\n                if (value > 0)\n                    return getNumericFormatFromComponent(value, positive);\n                else if (value === 0)\n                    return getNumericFormatFromComponent(value, zero);\n\n                return getNumericFormatFromComponent(value, negative);\n            }\n\n            return getNumericFormatFromComponent(value, baseFormat);\n        }\n\n        function getNumericFormatFromComponent(value: number, format: string): string {\n            let match = RegExpExtensions.run(NumericFormatRegex, format);\n            if (match)\n                return match[0];\n\n            return format;\n        }\n\n        export function addDecimalsToFormat(baseFormat: string, decimals: number, trailingZeros: boolean): string {\n            if (decimals == null)\n                return baseFormat;\n\n            // Default format string\n            if (baseFormat == null)\n                baseFormat = ZeroPlaceholder;\n\n            if (hasFormatComponents(baseFormat)) {\n                let {positive, negative, zero} = NumberFormat.getComponents(baseFormat);\n                let formats = [positive, negative, zero];\n                for (let i = 0; i < formats.length; i++) {\n                    // Update format in formats array\n                    formats[i] = addDecimalsToFormatComponent(formats[i], decimals, trailingZeros);\n                }\n\n                return formats.join(NumberFormat.NumberFormatComponentsDelimeter);\n            }\n\n            return addDecimalsToFormatComponent(baseFormat, decimals, trailingZeros);\n        }\n\n        function addDecimalsToFormatComponent(format: string, decimals: number, trailingZeros: boolean): string {\n            decimals = Math.abs(decimals);\n\n            if (decimals >= 0) {\n                let placeholder = trailingZeros ? ZeroPlaceholder : DigitPlaceholder;\n                let decimalPlaceholders = StringExtensions.repeat(placeholder, Math.abs(decimals));\n\n                let match = RegExpExtensions.run(DecimalFormatRegex, format);\n                if (match) {\n                    let beforeDecimal = format.substr(0, match.index);\n                    let formatDecimal = format.substr(match.index + 1, match[1].length);\n                    let afterDecimal = format.substr(match.index + match[0].length);\n\n                    if (trailingZeros)\n                        // Use explicit decimals argument as placeholders\n                        formatDecimal = decimalPlaceholders;\n                    else {\n                        let decimalChange = decimalPlaceholders.length - formatDecimal.length;\n                        if (decimalChange > 0)\n                            // Append decimalPlaceholders to existing decimal portion of format string\n                            formatDecimal = formatDecimal + decimalPlaceholders.slice(-decimalChange);\n                        else if (decimalChange < 0)\n                            // Remove decimals from formatDecimal\n                            formatDecimal = formatDecimal.slice(0, decimalChange);\n                    }\n\n                    if (formatDecimal.length > 0)\n                        formatDecimal = DecimalFormatCharacter + formatDecimal;\n\n                    return beforeDecimal + formatDecimal + afterDecimal;\n                }\n                else if (decimalPlaceholders.length > 0)\n                    // Replace last numeric placeholder with decimal portion\n                    return format.replace(LastNumericPlaceholderRegex, '$1' + DecimalFormatCharacter + decimalPlaceholders);\n            }\n\n            return format;\n        }\n\n        export function hasFormatComponents(format: string): boolean {\n            return format.indexOf(NumberFormat.NumberFormatComponentsDelimeter) !== -1;\n        }\n\n        export function getComponents(format: string): NumberFormatComponents {\n            let signFormat: NumberFormatComponents = {\n                hasNegative: false,\n                positive: format,\n                negative: format,\n                zero: format,\n            };\n\n            let signSpecificFormats = format.split(NumberFormatComponentsDelimeter);\n            let formatCount = signSpecificFormats.length;\n            debug.assert(!(formatCount > 3), 'format string should be of form positive[;negative;zero]');\n\n            if (formatCount > 1) {\n                signFormat.hasNegative = true;\n\n                signFormat.positive = signFormat.zero = signSpecificFormats[0];\n                signFormat.negative = signSpecificFormats[1];\n\n                if (formatCount > 2)\n                    signFormat.zero = signSpecificFormats[2];\n            }\n\n            return signFormat;\n        }\n\n        let _lastCustomFormatMeta: NumericFormatMetadata;\n\n        /** Evaluates if the value can be formatted using the NumberFormat */\n        export function canFormat(value: any) {\n            let result = typeof (value) === \"number\";\n            return result;\n        }\n\n        export function isStandardFormat(format: string): boolean {\n            debug.assertValue(format, 'format');\n            return StandardFormatRegex.test(format);\n        }\n\n        /** Formats the number using specified format expression and culture */\n        export function format(\n            value: number,\n            format: string,\n            culture: Culture): string {\n            format = format || \"G\";\n            try {\n                if (isStandardFormat(format))\n                    return formatNumberStandard(value, format, culture);\n\n                return formatNumberCustom(value, format, culture);\n            } catch (e) {\n                return Globalize.format(value, undefined, culture);\n            }\n        }\n\n        /** Performs a custom format with a value override.  Typically used for custom formats showing scaled values. */\n        export function formatWithCustomOverride(\n            value: number,\n            format: string,\n            nonScientificOverrideFormat: string,\n            culture: Culture): string {\n            debug.assertValue(value, 'value');\n            debug.assertValue(format, 'format');\n            debug.assertValue(nonScientificOverrideFormat, 'nonScientificOverrideFormat');\n            debug.assertValue(culture, 'culture');\n            debug.assert(!isStandardFormat(format), 'Standard format');\n\n            return formatNumberCustom(value, format, culture, nonScientificOverrideFormat);\n        }\n\n        /** Formats the number using standard format expression */\n        function formatNumberStandard(value: number, format: string, culture: Culture): string {\n            let result: string;\n            let precision = <number>(format.length > 1 ? parseInt(format.substr(1, format.length - 1), 10) : undefined);\n            let numberFormatInfo = culture.numberFormat;\n            let formatChar = format.charAt(0);\n            switch (formatChar) {\n                case \"e\":\n                case \"E\":\n                    if (precision === undefined) {\n                        precision = 6;\n                    }\n                    let mantissaDecimalDigits = StringExtensions.repeat(\"0\", precision);\n                    format = \"0.\" + mantissaDecimalDigits + formatChar + \"+000\";\n                    result = formatNumberCustom(value, format, culture);\n                    break;\n                case \"f\":\n                case \"F\":\n                    result = precision !== undefined ? value.toFixed(precision) : value.toFixed(numberFormatInfo.decimals);\n                    result = localize(result, numberFormatInfo);\n                    break;\n                case \"g\":\n                case \"G\":\n                    let abs = Math.abs(value);\n                    if (abs === 0 || (1E-4 <= abs && abs < 1E15)) {\n                        // For the range of 0.0001 to 1,000,000,000,000,000 - use the normal form\n                        result = precision !== undefined ? value.toPrecision(precision) : value.toString();\n                    } else {\n                        // Otherwise use exponential\n                        // Assert that value is a number and fall back on returning value if it is not\n                        debug.assert(typeof (value) === \"number\", \"value must be a number\");\n                        if (typeof (value) !== \"number\")\n                            return String(value);\n                        result = precision !== undefined ? value.toExponential(precision) : value.toExponential();\n                        result = result.replace(\"e\", \"E\");\n                    }\n                    result = localize(result, numberFormatInfo);\n                    break;\n                case \"r\":\n                case \"R\":\n                    result = value.toString();\n                    result = localize(result, numberFormatInfo);\n                    break;\n                case \"x\":\n                case \"X\":\n                    result = value.toString(16);\n                    if (formatChar === \"X\") {\n                        result = result.toUpperCase();\n                    }\n                    if (precision !== undefined) {\n                        let actualPrecision = result.length;\n                        let isNegative = value < 0;\n                        if (isNegative) {\n                            actualPrecision--;\n                        }\n                        let paddingZerosCount = precision - actualPrecision;\n                        let paddingZeros = undefined;\n                        if (paddingZerosCount > 0) {\n                            paddingZeros = StringExtensions.repeat(\"0\", paddingZerosCount);\n                        }\n                        if (isNegative) {\n                            result = \"-\" + paddingZeros + result.substr(1);\n                        } else {\n                            result = paddingZeros + result;\n                        }\n                    }\n                    result = localize(result, numberFormatInfo);\n                    break;\n                default:\n                    result = Globalize.format(value, format, culture);\n            }\n            return result;\n        }\n\n        /** Formats the number using custom format expression */\n        function formatNumberCustom(\n            value: number,\n            format: string,\n            culture: Culture,\n            nonScientificOverrideFormat?: string): string {\n            let result: string;\n            let numberFormatInfo = culture.numberFormat;\n            if (isFinite(value)) {\n                // Split format by positive[;negative;zero] pattern\n                let formatComponents = getComponents(format);\n\n                // Pick a format based on the sign of value\n                if (value > 0) {\n                    format = formatComponents.positive;\n                } else if (value === 0) {\n                    format = formatComponents.zero;\n                } else {\n                    format = formatComponents.negative;\n                }\n\n                // Normalize value if we have an explicit negative format\n                if (formatComponents.hasNegative)\n                    value = Math.abs(value);\n\n                // Get format metadata\n                let formatMeta = getCustomFormatMetadata(format, true /*calculatePrecision*/);\n\n                // Preserve literals and escaped chars\n                if (formatMeta.hasEscapes) {\n                    format = FormattingEncoder.preserveEscaped(format, \"\\\\0#.,%\");\n                }\n                let literals: string[] = [];\n                if (formatMeta.hasQuotes) {\n                    format = FormattingEncoder.preserveLiterals(format, literals);\n                }\n\n                // Scientific format\n                if (formatMeta.hasE && !nonScientificOverrideFormat) {\n                    let scientificMatch = RegExpExtensions.run(ScientificFormatRegex, format);\n                    if (scientificMatch) {\n                        // Case 2.1. Scientific custom format\n                        let formatM = format.substr(0, scientificMatch.index);\n                        let formatE = format.substr(scientificMatch.index + 2); // E(+|-)\n                        let precision = getCustomFormatPrecision(formatM, formatMeta);\n                        let scale = getCustomFormatScale(formatM, formatMeta);\n                        if (scale !== 1) {\n                            value = value * scale;\n                        }\n                        // Assert that value is a number and fall back on returning value if it is not\n                        debug.assert(typeof (value) === \"number\", \"value must be a number\");\n                        if (typeof (value) !== \"number\")\n                            return String(value);\n                        let s = value.toExponential(precision);\n                        let indexOfE = s.indexOf(\"e\");\n                        let mantissa = s.substr(0, indexOfE);\n                        let exp = s.substr(indexOfE + 1);\n                        let resultM = fuseNumberWithCustomFormat(mantissa, formatM, numberFormatInfo);\n                        let resultE = fuseNumberWithCustomFormat(exp, formatE, numberFormatInfo);\n                        if (resultE.charAt(0) === \"+\" && scientificMatch[0].charAt(1) !== \"+\") {\n                            resultE = resultE.substr(1);\n                        }\n                        let e = scientificMatch[0].charAt(0);\n                        result = resultM + e + resultE;\n                    }\n                }\n\n                // Non scientific format\n                if (result === undefined) {\n                    let valueFormatted: string;\n                    let isValueGlobalized: boolean = false;\n                    let precision = getCustomFormatPrecision(format, formatMeta);\n                    let scale = getCustomFormatScale(format, formatMeta);\n\n                    if (scale !== 1)\n                        value = value * scale;\n\n                    // Rounding\n                    value = parseFloat(toNonScientific(value, precision));\n\n                    if (nonScientificOverrideFormat) {\n                        // Get numeric format from format string\n                        let numericFormat = NumberFormat.getNumericFormat(value, format);\n\n                        // Add separators and decimalFormat to nonScientificFormat\n                        nonScientificOverrideFormat = getNonScientificFormatWithPrecision(nonScientificOverrideFormat, numericFormat);\n\n                        // Format the value\n                        valueFormatted = formattingService.format(nonScientificOverrideFormat, [value], culture.name);\n                        isValueGlobalized = true;\n                    }\n                    else\n                        valueFormatted = toNonScientific(value, precision);\n\n                    result = fuseNumberWithCustomFormat(valueFormatted, format, numberFormatInfo, nonScientificOverrideFormat, isValueGlobalized);\n                }\n                if (formatMeta.hasQuotes) {\n                    result = FormattingEncoder.restoreLiterals(result, literals);\n                }\n                if (formatMeta.hasEscapes) {\n                    result = FormattingEncoder.restoreEscaped(result, \"\\\\0#.,%\");\n                }\n\n                _lastCustomFormatMeta = formatMeta;\n            } else {\n                return Globalize.format(value, undefined);\n            }\n            return result;\n        }\n\n        /** Returns string with the fixed point respresentation of the number */\n        function toNonScientific(value: number, precision: number): string {\n            let result = \"\";\n            let precisionZeros = 0;\n            // Double precision numbers support actual 15-16 decimal digits of precision.\n            if (precision > 16) {\n                precisionZeros = precision - 16;\n                precision = 16;\n            }\n            let digitsBeforeDecimalPoint = Double.log10(Math.abs(value));\n            if (digitsBeforeDecimalPoint < 16) {\n                if (digitsBeforeDecimalPoint > 0) {\n                    let maxPrecision = 16 - digitsBeforeDecimalPoint;\n                    if (precision > maxPrecision) {\n                        precisionZeros += precision - maxPrecision;\n                        precision = maxPrecision;\n                    }\n                }\n                result = value.toFixed(precision);\n            } else if (digitsBeforeDecimalPoint === 16) {\n                result = value.toFixed(0);\n                precisionZeros += precision;\n                if (precisionZeros > 0) {\n                    result += \".\";\n                }\n            } else { // digitsBeforeDecimalPoint > 16\n                // Different browsers have different implementations of the toFixed().\n                // In IE it returns fixed format no matter what's the number. In FF and Chrome the method returns exponential format for numbers greater than 1E21.\n                // So we need to check for range and convert the to exponential with the max precision.\n                // Then we convert exponential string to fixed by removing the dot and padding with \"power\" zeros.\n                // Assert that value is a number and fall back on returning value if it is not\n                debug.assert(typeof (value) === \"number\", \"value must be a number\");\n                if (typeof (value) !== \"number\")\n                    return String(value);\n                result = value.toExponential(15);\n                let indexOfE = result.indexOf(\"e\");\n                if (indexOfE > 0) {\n                    let indexOfDot = result.indexOf(\".\");\n                    let mantissa = result.substr(0, indexOfE);\n                    let exp = result.substr(indexOfE + 1);\n                    let powerZeros = parseInt(exp, 10) - (mantissa.length - indexOfDot - 1);\n                    result = mantissa.replace(\".\", \"\") + StringExtensions.repeat(\"0\", powerZeros);\n                    if (precision > 0) {\n                        result = result + \".\" + StringExtensions.repeat(\"0\", precision);\n                    }\n                }\n            }\n            if (precisionZeros > 0) {\n                result = result + StringExtensions.repeat(\"0\", precisionZeros);\n            }\n            return result;\n        }\n\n        /**\n         * Returns the formatMetadata of the format\n         * When calculating precision and scale, if format string of\n         * positive[;negative;zero] => positive format will be used\n         * @param (required) format - format string\n         * @param (optional) calculatePrecision - calculate precision of positive format\n         * @param (optional) calculateScale - calculate scale of positive format\n         */\n        export function getCustomFormatMetadata(format: string, calculatePrecision?: boolean, calculateScale?: boolean): NumericFormatMetadata {\n            if (_lastCustomFormatMeta !== undefined && format === _lastCustomFormatMeta.format) {\n                return _lastCustomFormatMeta;\n            }\n\n            let result = {\n                format: format,\n                hasEscapes: false,\n                hasQuotes: false,\n                hasE: false,\n                hasCommas: false,\n                hasDots: false,\n                hasPercent: false,\n                hasPermile: false,\n                precision: undefined,\n                scale: undefined,\n            };\n\n            for (let i = 0, length = format.length; i < length; i++) {\n                let c = format.charAt(i);\n                switch (c) {\n                    case \"\\\\\":\n                        result.hasEscapes = true;\n                        break;\n                    case \"'\":\n                    case \"\\\"\":\n                        result.hasQuotes = true;\n                        break;\n                    case \"e\":\n                    case \"E\":\n                        result.hasE = true;\n                        break;\n                    case \",\":\n                        result.hasCommas = true;\n                        break;\n                    case \".\":\n                        result.hasDots = true;\n                        break;\n                    case \"%\":\n                        result.hasPercent = true;\n                        break;\n                    case \"\":\n                        result.hasPermile = true;\n                        break;\n                }\n            }\n\n            // Use positive format for calculating these values\n            let formatComponents = getComponents(format);\n\n            if (calculatePrecision)\n                result.precision = getCustomFormatPrecision(formatComponents.positive, result);\n            if (calculateScale)\n                result.scale = getCustomFormatScale(formatComponents.positive, result);\n\n            return result;\n        }\n\n        /** Returns the decimal precision of format based on the number of # and 0 chars after the decimal point\n          * Important: The input format string needs to be split to the appropriate pos/neg/zero portion to work correctly */\n        function getCustomFormatPrecision(format: string, formatMeta: NumericFormatMetadata): number {\n            if (formatMeta.precision > -1) {\n                return formatMeta.precision;\n            }\n            let result = 0;\n            if (formatMeta.hasDots) {\n                let dotIndex = format.indexOf(\".\");\n                if (dotIndex > -1) {\n                    let count = format.length;\n                    for (let i = dotIndex; i < count; i++) {\n                        let char = format.charAt(i);\n                        if (char.match(NumericPlaceholderRegex))\n                            result++;\n                        // 0.00E+0 :: Break before counting 0 in\n                        // exponential portion of format string\n                        if (char === ExponentialFormatChar)\n                            break;\n                    }\n                    result = Math.min(19, result);\n                }\n            }\n\n            formatMeta.precision = result;\n            return result;\n        }\n\n        /** Returns the scale factor of the format based on the \"%\" and scaling \",\" chars in the format */\n        function getCustomFormatScale(format: string, formatMeta: NumericFormatMetadata): number {\n            if (formatMeta.scale > -1) {\n                return formatMeta.scale;\n            }\n            let result = 1;\n            if (formatMeta.hasPercent && format.indexOf(\"%\") > -1) {\n                result = result * 100;\n            }\n            if (formatMeta.hasPermile && format.indexOf(\"\") > -1) {\n                result = result * 1000;\n            }\n            if (formatMeta.hasCommas) {\n                let dotIndex = format.indexOf(\".\");\n                if (dotIndex === -1) {\n                    dotIndex = format.length;\n                }\n                for (let i = dotIndex - 1; i > -1; i--) {\n                    let char = format.charAt(i);\n                    if (char === \",\") {\n                        result = result / 1000;\n                    } else {\n                        break;\n                    }\n                }\n            }\n            formatMeta.scale = result;\n            return result;\n        }\n\n        function fuseNumberWithCustomFormat(value: string, format: string, numberFormatInfo: GlobalizeNumberFormat, nonScientificOverrideFormat?: string, isValueGlobalized?: boolean): string {\n            let suppressModifyValue = !!nonScientificOverrideFormat;\n            let formatParts = format.split(\".\", 2);\n            if (formatParts.length === 2) {\n                let wholeFormat = formatParts[0];\n                let fractionFormat = formatParts[1];\n                let displayUnit = \"\";\n\n                // Remove display unit from value before splitting on \".\" as localized display units sometimes end with \".\"\n                if (nonScientificOverrideFormat) {\n                    debug.assert(NonScientificFormatRegex.test(nonScientificOverrideFormat), \"Number should always precede the display unit\");\n                    displayUnit = nonScientificOverrideFormat.replace(NumericalPlaceHolderRegex, \"\");\n                    value = value.replace(displayUnit, \"\");\n                }\n\n                let globalizedDecimalSeparator = numberFormatInfo[\".\"];\n                let decimalSeparator = isValueGlobalized ? globalizedDecimalSeparator : \".\";\n                let valueParts = value.split(decimalSeparator, 2);\n                let wholeValue = valueParts.length === 1 ? valueParts[0] + displayUnit : valueParts[0];\n                let fractionValue = valueParts.length === 2 ? valueParts[1] + displayUnit : \"\";\n                fractionValue = fractionValue.replace(TrailingZerosRegex, \"\");\n\n                let wholeFormattedValue = fuseNumberWithCustomFormatLeft(wholeValue, wholeFormat, numberFormatInfo, suppressModifyValue);\n                let fractionFormattedValue = fuseNumberWithCustomFormatRight(fractionValue, fractionFormat, suppressModifyValue);\n\n                if (fractionFormattedValue.fmtOnly || fractionFormattedValue.value === \"\")\n                    return wholeFormattedValue + fractionFormattedValue.value;\n\n                return wholeFormattedValue + globalizedDecimalSeparator + fractionFormattedValue.value;\n            }\n            return fuseNumberWithCustomFormatLeft(value, format, numberFormatInfo, suppressModifyValue);\n        }\n\n        function fuseNumberWithCustomFormatLeft(value: string, format: string, numberFormatInfo: GlobalizeNumberFormat, suppressModifyValue?: boolean): string {\n            let groupSymbolIndex = format.indexOf(\",\");\n            let enableGroups = groupSymbolIndex > -1 && groupSymbolIndex < Math.max(format.lastIndexOf(\"0\"), format.lastIndexOf(\"#\")) && numberFormatInfo[\",\"];\n            let groupDigitCount = 0;\n            let groupIndex = 0;\n            let groupSizes = numberFormatInfo.groupSizes || [3];\n            let groupSize = groupSizes[0];\n            let groupSeparator = numberFormatInfo[\",\"];\n            let sign = \"\";\n            let firstChar = value.charAt(0);\n            if (firstChar === \"+\" || firstChar === \"-\") {\n                sign = numberFormatInfo[firstChar];\n                value = value.substr(1);\n            }\n            let isZero = value === \"0\";\n            let result = \"\";\n            let leftBuffer = \"\";\n            let vi = value.length - 1;\n            let fmtOnly = true;\n            // Iterate through format chars and replace 0 and # with the digits from the value string\n            for (let fi = format.length - 1; fi > -1; fi--) {\n                let formatChar = format.charAt(fi);\n                switch (formatChar) {\n                    case ZeroPlaceholder:\n                    case DigitPlaceholder:\n                        fmtOnly = false;\n                        if (leftBuffer !== \"\") {\n                            result = leftBuffer + result;\n                            leftBuffer = \"\";\n                        }\n                        if (!suppressModifyValue) {\n                            if (vi > -1 || formatChar === ZeroPlaceholder) {\n                                if (enableGroups) {\n                                    // If the groups are enabled we'll need to keep track of the current group index and periodically insert group separator,\n                                    if (groupDigitCount === groupSize) {\n                                        result = groupSeparator + result;\n                                        groupIndex++;\n                                        if (groupIndex < groupSizes.length) {\n                                            groupSize = groupSizes[groupIndex];\n                                        }\n                                        groupDigitCount = 1;\n                                    } else {\n                                        groupDigitCount++;\n                                    }\n                                }\n                            }\n                            if (vi > -1) {\n                                if (isZero && formatChar === DigitPlaceholder) {\n                                    // Special case - if we need to format a zero value and the # symbol is used - we don't copy it into the result)\n                                } else {\n                                    result = value.charAt(vi) + result;\n                                }\n                                vi--;\n                            } else if (formatChar !== DigitPlaceholder) {\n                                result = formatChar + result;\n                            }\n                        }\n                        break;\n                    case \",\":\n                        // We should skip all the , chars\n                        break;\n                    default:\n                        leftBuffer = formatChar + leftBuffer;\n                        break;\n                }\n            }\n\n            // If the value didn't fit into the number of zeros provided in the format then we should insert the missing part of the value into the result\n            if (!suppressModifyValue) {\n                if (vi > -1 && result !== \"\") {\n                    if (enableGroups) {\n                        while (vi > -1) {\n                            if (groupDigitCount === groupSize) {\n                                result = groupSeparator + result;\n                                groupIndex++;\n                                if (groupIndex < groupSizes.length) {\n                                    groupSize = groupSizes[groupIndex];\n                                }\n                                groupDigitCount = 1;\n                            } else {\n                                groupDigitCount++;\n                            }\n                            result = value.charAt(vi) + result;\n                            vi--;\n                        }\n                    } else {\n                        result = value.substr(0, vi + 1) + result;\n                    }\n                }\n                // Insert sign in front of the leftBuffer and result\n                return sign + leftBuffer + result;\n            }\n\n            if (fmtOnly)\n                // If the format doesn't specify any digits to be displayed, then just return the format we've parsed up until now.\n                return sign + leftBuffer + result;\n\n            return sign + leftBuffer + value + result;\n        }\n\n        function fuseNumberWithCustomFormatRight(value: string, format: string, suppressModifyValue?: boolean): { value: string; fmtOnly?: boolean } {\n            let vi = 0;\n            let fCount = format.length;\n            let vCount = value.length;\n\n            if (suppressModifyValue) {\n                debug.assert(fCount > 0, \"Empty formatting string\");\n\n                let lastChar = format.charAt(fCount - 1);\n                if (!lastChar.match(NumericPlaceholderRegex))\n                    return {\n                        value: value + lastChar,\n                        fmtOnly: value === \"\",\n                    };\n\n                return {\n                    value: value,\n                    fmtOnly: value === \"\",\n                };\n            }\n\n            let result = \"\",\n                fmtOnly: boolean = true;\n            for (let fi = 0; fi < fCount; fi++) {\n                let formatChar = format.charAt(fi);\n                if (vi < vCount) {\n                    switch (formatChar) {\n                        case ZeroPlaceholder:\n                        case DigitPlaceholder:\n                            result += value[vi++];\n                            fmtOnly = false;\n                            break;\n                        default:\n                            result += formatChar;\n                    }\n                } else {\n                    if (formatChar !== DigitPlaceholder) {\n                        result += formatChar;\n                        fmtOnly = fmtOnly && (formatChar !== ZeroPlaceholder);\n                    }\n                }\n            }\n\n            return {\n                value: result,\n                fmtOnly: fmtOnly,\n            };\n        }\n\n        function localize(value: string, dictionary: any): string {\n            let plus = dictionary[\"+\"];\n            let minus = dictionary[\"-\"];\n            let dot = dictionary[\".\"];\n            let comma = dictionary[\",\"];\n            if (plus === \"+\" && minus === \"-\" && dot === \".\" && comma === \",\") {\n                return value;\n            }\n            let count = value.length;\n            let result = \"\";\n            for (let i = 0; i < count; i++) {\n                let char = value.charAt(i);\n                switch (char) {\n                    case \"+\":\n                        result = result + plus;\n                        break;\n                    case \"-\":\n                        result = result + minus;\n                        break;\n                    case \".\":\n                        result = result + dot;\n                        break;\n                    case \",\":\n                        result = result + comma;\n                        break;\n                    default:\n                        result = result + char;\n                        break;\n                }\n            }\n            return result;\n        }\n\n    }\n\n    /** DateTimeScaleFormatInfo is used to calculate and keep the Date formats used for different units supported by the DateTimeScaleModel */\n    class DateTimeScaleFormatInfo {\n\n        // Fields\n        public YearPattern: string;\n        public MonthPattern: string;\n        public DayPattern: string;\n        public HourPattern: string;\n        public MinutePattern: string;\n        public SecondPattern: string;\n        public MillisecondPattern: string;\n\n        // Constructor\n        /**\n         * Creates new instance of the DateTimeScaleFormatInfo class.\n         * @param culture - culture which calendar info is going to be used to derive the formats.\n         */\n        constructor(culture: Culture) {\n            let calendar: Calendar = culture.calendar;\n            let patterns: any = calendar.patterns;\n            let monthAbbreviations: any = calendar[\"months\"][\"namesAbbr\"];\n            let cultureHasMonthAbbr: boolean = monthAbbreviations && monthAbbreviations[0];\n            let yearMonthPattern: string = patterns[\"Y\"];\n            let monthDayPattern: string = patterns[\"M\"];\n            let fullPattern: string = patterns[\"f\"];\n            let longTimePattern: string = patterns[\"T\"];\n            let shortTimePattern: string = patterns[\"t\"];\n            let separator: string = fullPattern.indexOf(\",\") > -1 ? \", \" : \" \";\n\n            let hasYearSymbol: boolean = yearMonthPattern.indexOf(\"yyyy'\") === 0 && yearMonthPattern.length > 6 && yearMonthPattern[6] === '\\'';\n            this.YearPattern = hasYearSymbol ? yearMonthPattern.substr(0, 7) : \"yyyy\";\n\n            let yearPos: number = fullPattern.indexOf(\"yy\");\n            let monthPos: number = fullPattern.indexOf(\"MMMM\");\n            this.MonthPattern = cultureHasMonthAbbr && monthPos > -1 ? (yearPos > monthPos ? \"MMM yyyy\" : \"yyyy MMM\") : yearMonthPattern;\n\n            this.DayPattern = cultureHasMonthAbbr ? monthDayPattern.replace(\"MMMM\", \"MMM\") : monthDayPattern;\n\n            let minutePos: number = fullPattern.indexOf(\"mm\");\n            let pmPos: number = fullPattern.indexOf(\"tt\");\n            let shortHourPattern: string = pmPos > -1 ? shortTimePattern.replace(\":mm \", \"\") : shortTimePattern;\n            this.HourPattern = yearPos < minutePos ? this.DayPattern + separator + shortHourPattern : shortHourPattern + separator + this.DayPattern;\n\n            this.MinutePattern = shortTimePattern;\n\n            this.SecondPattern = longTimePattern;\n\n            this.MillisecondPattern = longTimePattern.replace(\"ss\", \"ss.fff\");\n\n            // Special cases\n            switch (culture.name) {\n                case \"fi-FI\":\n                    this.DayPattern = this.DayPattern.replace(\"'ta'\", \"\"); // Fix for finish 'ta' suffix for month names.\n                    this.HourPattern = this.HourPattern.replace(\"'ta'\", \"\");\n                    break;\n            }\n        }\n\n        // Methods\n\n        /**\n         * Returns the format string of the provided DateTimeUnit.\n         * @param unit - date or time unit\n         */\n        public getFormatString(unit: DateTimeUnit): string {\n            switch (unit) {\n                case DateTimeUnit.Year:\n                    return this.YearPattern;\n                case DateTimeUnit.Month:\n                    return this.MonthPattern;\n                case DateTimeUnit.Week:\n                case DateTimeUnit.Day:\n                    return this.DayPattern;\n                case DateTimeUnit.Hour:\n                    return this.HourPattern;\n                case DateTimeUnit.Minute:\n                    return this.MinutePattern;\n                case DateTimeUnit.Second:\n                    return this.SecondPattern;\n                case DateTimeUnit.Millisecond:\n                    return this.MillisecondPattern;\n            }\n\n            debug.assertFail('Unexpected unit: ' + unit);\n        }\n    }\n\n    export var formattingService: IFormattingService = new FormattingService();\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.data {\n    /** Serializes SQExpr in a form optimized in-memory comparison, but not intended for storage on disk. */\n    export module SQExprShortSerializer {\n        export function serialize(expr: SQExpr): string {\n            return JSON.stringify(expr.accept(SQExprSerializer.instance));\n        }\n\n        export function serializeArray(exprs: SQExpr[]): string {\n            let str = '[';\n            for (let i = 0, len = exprs.length; i < len; i++) {\n                if (i > 0)\n                    str += ',';\n                str += SQExprShortSerializer.serialize(exprs[i]);\n            }\n            return str + ']';\n        }\n\n        /** Responsible for serializing an SQExpr into a comparable string. */\n        class SQExprSerializer extends DefaultSQExprVisitor<{}> {\n            public static instance: SQExprSerializer = new SQExprSerializer();\n\n            public visitColumnRef(expr: SQColumnRefExpr): {} {\n                return {\n                    col: {\n                        s: expr.source.accept(this),\n                        r: expr.ref,\n                    }\n                };\n            }\n\n            public visitMeasureRef(expr: SQMeasureRefExpr): {} {\n                return {\n                    measure: {\n                        s: expr.source.accept(this),\n                        r: expr.ref,\n                    }\n                };\n            }\n\n            public visitAggr(expr: SQAggregationExpr): {} {\n                return {\n                    agg: {\n                        a: expr.arg.accept(this),\n                        f: expr.func,\n                    }\n                };\n            }\n\n            public visitEntity(expr: SQEntityExpr): {} {\n                debug.assertValue(expr, 'expr');\n                debug.assertValue(expr.entity, 'expr.entity');\n\n                return {\n                    e: expr.entity\n                };\n            }\n\n            public visitHierarchyLevel(expr: SQHierarchyLevelExpr): {} {\n                return {\n                    h: expr.arg.accept(this),\n                    l: expr.level,\n                };\n            }\n\n            public visitHierarchy(expr: SQHierarchyExpr): {} {\n                return {\n                    e: expr.arg.accept(this),\n                    h: expr.hierarchy,\n                };\n            }\n\n            public visitPropertyVariationSource(expr: SQPropertyVariationSourceExpr): {} {\n                return {\n                    e: expr.arg.accept(this),\n                    n: expr.name,\n                    p: expr.property,\n                };\n            }\n\n            public visitAnd(expr: SQAndExpr): {} {\n                debug.assertValue(expr, 'expr');\n\n                return {\n                    and: {\n                        l: expr.left.accept(this),\n                        r: expr.right.accept(this),\n                    }\n                };\n            }\n\n            public visitCompare(expr: SQCompareExpr): {} {\n                debug.assertValue(expr, 'expr');\n\n                return {\n                    comp: {\n                        k: expr.comparison,\n                        l: expr.left.accept(this),\n                        r: expr.right.accept(this),\n                    }\n                };\n            }\n\n            public visitConstant(expr: SQConstantExpr): {} {\n                debug.assertValue(expr, 'expr');\n\n                return {\n                    const: {\n                        t: expr.type.primitiveType,\n                        v: expr.value,\n                    }\n                };\n            }\n\n            public visitArithmetic(expr: SQArithmeticExpr): {} {\n                debug.assertValue(expr, 'expr');\n\n                return {\n                    arithmetic: {\n                        o: expr.operator,\n                        l: expr.left.accept(this),\n                        r: expr.right.accept(this)\n                    }\n                };\n            }\n\n            public visitScopedEval(expr: SQScopedEvalExpr): {} {\n                debug.assertValue(expr, 'expr');\n\n                return {\n                    scopedEval: {\n                        e: expr.expression.accept(this),\n                        s: serializeArray(expr.scope)\n                    }\n                };\n            }\n            \n            public visitWithRef(expr: SQWithRefExpr): {} {\n                debug.assertValue(expr, 'expr');\n                \n                return {\n                    withRef: {\n                        e: expr.expressionName\n                    }\n                };\n            }\n\n            public visitDefault(expr: SQExpr): {} {\n                debug.assertFail('Unexpected expression type found in DataViewScopeIdentity.');\n\n                return;\n            }\n        }\n    }\n}","/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved. \n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *   \n *  The above copyright notice and this permission notice shall be included in \n *  all copies or substantial portions of the Software.\n *   \n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR \n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, \n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE \n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER \n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\n\nmodule powerbi.visuals {\n    import Selector = powerbi.data.Selector;\n    import SelectorsByColumn = powerbi.SelectorsByColumn;\n    import SelectorForColumn = powerbi.SelectorForColumn;\n\n    /**\n     * A combination of identifiers used to uniquely identify\n     * data points and their bound geometry.\n     */\n    export class SelectionId implements ISelectionId {\n        private selector: Selector;\n        // This is a new data structure to support drilling -- in the long term it should replace the 'selector' field\n        private selectorsByColumn: SelectorsByColumn;\n        private key: string;\n        private keyWithoutHighlight: string;\n\n        public highlight: boolean;\n\n        constructor(selector: Selector, highlight: boolean) {\n            this.selector = selector;\n            this.highlight = highlight;\n            this.key = JSON.stringify({ selector: selector ? Selector.getKey(selector) : null, highlight: highlight });\n            this.keyWithoutHighlight = JSON.stringify({ selector: selector ? Selector.getKey(selector) : null });\n        }\n\n        public equals(other: SelectionId): boolean {\n            if (!this.selector || !other.selector) {\n                return (!this.selector === !other.selector) && this.highlight === other.highlight;\n            }\n            return this.highlight === other.highlight &&  Selector.equals(this.selector, other.selector);\n        }\n        \n        /**\n         * Checks equality against other for all identifiers existing in this.\n         */\n        public includes(other: SelectionId, ignoreHighlight: boolean = false): boolean {\n            let thisSelector = this.selector;\n            let otherSelector = other.selector;\n            if (!thisSelector || !otherSelector) {\n                return false;\n            }\n            let thisData = thisSelector.data;\n            let otherData = otherSelector.data;\n            if (!thisData && (thisSelector.metadata && thisSelector.metadata !== otherSelector.metadata))\n                return false;\n            if (!ignoreHighlight && this.highlight !== other.highlight)\n                return false;\n            if (thisData) {\n                if (!otherData)\n                    return false;\n                if (thisData.length > 0) {\n                    for (let i = 0, ilen = thisData.length; i < ilen; i++) {\n                        var thisValue = <DataViewScopeIdentity>thisData[i];\n                        if (!otherData.some((otherValue: DataViewScopeIdentity) => DataViewScopeIdentity.equals(thisValue, otherValue)))\n                            return false;\n                    }\n                }\n            }\n            return true;\n        }\n\n        public getKey(): string {\n            return this.key;\n        }\n\n        public getKeyWithoutHighlight(): string {\n            return this.keyWithoutHighlight;\n        }\n        \n        public hasIdentity(): boolean {\n            return (this.selector && !!this.selector.data);\n        }\n\n        public getSelector(): Selector {\n            return this.selector;\n        }\n\n        public getSelectorsByColumn(): Selector {\n            return this.selectorsByColumn;\n        }\n\n        public static createNull(highlight: boolean = false): SelectionId {\n            return new SelectionId(null, highlight);\n        }\n\n        public static createWithId(id: DataViewScopeIdentity, highlight: boolean = false): SelectionId {\n            let selector: Selector = null;\n            if (id) {\n                selector = {\n                    data: [id]\n                };\n            }\n            return new SelectionId(selector, highlight);\n        }\n\n        public static createWithMeasure(measureId: string, highlight: boolean = false): SelectionId {\n            debug.assertValue(measureId, 'measureId');\n\n            let selector: Selector = {\n                metadata: measureId\n            };\n\n            let selectionId = new SelectionId(selector, highlight);\n            selectionId.selectorsByColumn = { metadata: measureId };\n            return selectionId;\n        }\n\n        public static createWithIdAndMeasure(id: DataViewScopeIdentity, measureId: string, highlight: boolean = false): SelectionId {\n            let selector: powerbi.data.Selector = {};\n            if (id) {\n                selector.data = [id];\n            }\n            if (measureId)\n                selector.metadata = measureId;\n            if (!id && !measureId)\n                selector = null;\n\n            let selectionId = new SelectionId(selector, highlight);\n\n            return selectionId;\n        }\n\n        public static createWithIdAndMeasureAndCategory(id: DataViewScopeIdentity, measureId: string, queryName: string, highlight: boolean = false): SelectionId {\n            let selectionId = this.createWithIdAndMeasure(id, measureId, highlight);\n\n            if (selectionId.selector) {\n                selectionId.selectorsByColumn = {};\n                if (id && queryName) {\n                    selectionId.selectorsByColumn.dataMap = {};\n                    selectionId.selectorsByColumn.dataMap[queryName] = id;\n                }\n                if (measureId)\n                    selectionId.selectorsByColumn.metadata = measureId;\n            }\n\n            return selectionId;\n        }\n\n        public static createWithIds(id1: DataViewScopeIdentity, id2: DataViewScopeIdentity, highlight: boolean = false): SelectionId {\n            let selector: Selector = null;\n            let selectorData = SelectionId.idArray(id1, id2);\n            if (selectorData)\n                selector = { data: selectorData };\n            \n            return new SelectionId(selector, highlight);\n        }\n\n        public static createWithIdsAndMeasure(id1: DataViewScopeIdentity, id2: DataViewScopeIdentity, measureId: string, highlight: boolean = false): SelectionId {\n            let selector: Selector = {};\n            let selectorData = SelectionId.idArray(id1, id2);\n            if (selectorData)\n                selector.data = selectorData;\n\n            if (measureId)\n                selector.metadata = measureId;\n            if (!id1 && !id2 && !measureId)\n                selector = null;\n            return new SelectionId(selector, highlight);\n        }\n\n        public static createWithSelectorForColumnAndMeasure(dataMap: SelectorForColumn, measureId: string, highlight: boolean = false): SelectionId {\n\n            let selectionId: visuals.SelectionId;\n            let keys = Object.keys(dataMap);\n            if (keys.length === 2) {\n                selectionId = this.createWithIdsAndMeasure(<DataViewScopeIdentity>dataMap[keys[0]], <DataViewScopeIdentity>dataMap[keys[1]], measureId, highlight);\n            } else if (keys.length === 1) {\n                selectionId = this.createWithIdsAndMeasure(<DataViewScopeIdentity>dataMap[keys[0]], null, measureId, highlight);\n            } else {\n                selectionId = this.createWithIdsAndMeasure(null, null, measureId, highlight);\n            }\n\n            let selectorsByColumn: SelectorsByColumn = {};\n            if (!_.isEmpty(dataMap))\n                selectorsByColumn.dataMap = dataMap;\n            if (measureId)\n                selectorsByColumn.metadata = measureId;\n            if (!dataMap && !measureId)\n                selectorsByColumn = null;\n\n            selectionId.selectorsByColumn = selectorsByColumn;\n\n            return selectionId;\n        }\n\n        public static createWithHighlight(original: SelectionId): SelectionId {\n            debug.assertValue(original, 'original');\n            debug.assert(!original.highlight, '!original.highlight');\n\n            let newId = new SelectionId(original.getSelector(), /*highlight*/ true);\n            newId.selectorsByColumn = original.selectorsByColumn;\n\n            return newId;\n        }\n\n        private static idArray(id1: DataViewScopeIdentity, id2: DataViewScopeIdentity): DataViewScopeIdentity[] {\n            if (id1 || id2) {\n                let data = [];\n                if (id1)\n                    data.push(id1);\n                if (id2 && id2 !== id1)\n                    data.push(id2);\n                return data;\n            }\n        }\n    }\n\n    /**\n     * This class is designed to simplify the creation of SelectionId objects\n     * It allows chaining to build up an object before calling 'create' to build a SelectionId\n     */\n    export class SelectionIdBuilder implements ISelectionIdBuilder {\n        private dataMap: SelectorForColumn;\n        private measure: string;\n\n        public static builder(): SelectionIdBuilder {\n            return new SelectionIdBuilder();\n        }\n\n        public withCategory(categoryColumn: DataViewCategoryColumn, index: number): this{\n            if (categoryColumn && categoryColumn.source && categoryColumn.source.queryName && categoryColumn.identity)\n                this.ensureDataMap()[categoryColumn.source.queryName] = categoryColumn.identity[index];\n            \n            return this;\n        }\n\n        public withSeries(seriesColumn: DataViewValueColumns, valueColumn: DataViewValueColumn | DataViewValueColumnGroup): this {\n            if (seriesColumn && seriesColumn.source && seriesColumn.source.queryName && valueColumn)\n                this.ensureDataMap()[seriesColumn.source.queryName] = valueColumn.identity;\n\n            return this;\n        }\n\n        public withMeasure(measureId: string): this {\n            this.measure = measureId;\n\n            return this;\n        }\n\n        public createSelectionId(): SelectionId {\n            return SelectionId.createWithSelectorForColumnAndMeasure(this.ensureDataMap(), this.measure);\n        }\n\n        private ensureDataMap(): SelectorForColumn {\n            if (!this.dataMap)\n                this.dataMap = {};\n\n            return this.dataMap;\n        }\n    }\n}\n"],"sourceRoot":"../ts/visualsData"}